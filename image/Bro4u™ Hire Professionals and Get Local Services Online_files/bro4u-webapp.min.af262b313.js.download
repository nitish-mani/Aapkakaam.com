function md5cycle(x,k){var a=x[0],b=x[1],c=x[2],d=x[3];a=ff(a,b,c,d,k[0],7,-680876936),d=ff(d,a,b,c,k[1],12,-389564586),c=ff(c,d,a,b,k[2],17,606105819),b=ff(b,c,d,a,k[3],22,-1044525330),a=ff(a,b,c,d,k[4],7,-176418897),d=ff(d,a,b,c,k[5],12,1200080426),c=ff(c,d,a,b,k[6],17,-1473231341),b=ff(b,c,d,a,k[7],22,-45705983),a=ff(a,b,c,d,k[8],7,1770035416),d=ff(d,a,b,c,k[9],12,-1958414417),c=ff(c,d,a,b,k[10],17,-42063),b=ff(b,c,d,a,k[11],22,-1990404162),a=ff(a,b,c,d,k[12],7,1804603682),d=ff(d,a,b,c,k[13],12,-40341101),c=ff(c,d,a,b,k[14],17,-1502002290),b=ff(b,c,d,a,k[15],22,1236535329),a=gg(a,b,c,d,k[1],5,-165796510),d=gg(d,a,b,c,k[6],9,-1069501632),c=gg(c,d,a,b,k[11],14,643717713),b=gg(b,c,d,a,k[0],20,-373897302),a=gg(a,b,c,d,k[5],5,-701558691),d=gg(d,a,b,c,k[10],9,38016083),c=gg(c,d,a,b,k[15],14,-660478335),b=gg(b,c,d,a,k[4],20,-405537848),a=gg(a,b,c,d,k[9],5,568446438),d=gg(d,a,b,c,k[14],9,-1019803690),c=gg(c,d,a,b,k[3],14,-187363961),b=gg(b,c,d,a,k[8],20,1163531501),a=gg(a,b,c,d,k[13],5,-1444681467),d=gg(d,a,b,c,k[2],9,-51403784),c=gg(c,d,a,b,k[7],14,1735328473),b=gg(b,c,d,a,k[12],20,-1926607734),a=hh(a,b,c,d,k[5],4,-378558),d=hh(d,a,b,c,k[8],11,-2022574463),c=hh(c,d,a,b,k[11],16,1839030562),b=hh(b,c,d,a,k[14],23,-35309556),a=hh(a,b,c,d,k[1],4,-1530992060),d=hh(d,a,b,c,k[4],11,1272893353),c=hh(c,d,a,b,k[7],16,-155497632),b=hh(b,c,d,a,k[10],23,-1094730640),a=hh(a,b,c,d,k[13],4,681279174),d=hh(d,a,b,c,k[0],11,-358537222),c=hh(c,d,a,b,k[3],16,-722521979),b=hh(b,c,d,a,k[6],23,76029189),a=hh(a,b,c,d,k[9],4,-640364487),d=hh(d,a,b,c,k[12],11,-421815835),c=hh(c,d,a,b,k[15],16,530742520),b=hh(b,c,d,a,k[2],23,-995338651),a=ii(a,b,c,d,k[0],6,-198630844),d=ii(d,a,b,c,k[7],10,1126891415),c=ii(c,d,a,b,k[14],15,-1416354905),b=ii(b,c,d,a,k[5],21,-57434055),a=ii(a,b,c,d,k[12],6,1700485571),d=ii(d,a,b,c,k[3],10,-1894986606),c=ii(c,d,a,b,k[10],15,-1051523),b=ii(b,c,d,a,k[1],21,-2054922799),a=ii(a,b,c,d,k[8],6,1873313359),d=ii(d,a,b,c,k[15],10,-30611744),c=ii(c,d,a,b,k[6],15,-1560198380),b=ii(b,c,d,a,k[13],21,1309151649),a=ii(a,b,c,d,k[4],6,-145523070),d=ii(d,a,b,c,k[11],10,-1120210379),c=ii(c,d,a,b,k[2],15,718787259),b=ii(b,c,d,a,k[9],21,-343485551),x[0]=add32(a,x[0]),x[1]=add32(b,x[1]),x[2]=add32(c,x[2]),x[3]=add32(d,x[3])}function cmn(q,a,b,x,s,t){return a=add32(add32(a,q),add32(x,t)),add32(a<<s|a>>>32-s,b)}function ff(a,b,c,d,x,s,t){return cmn(b&c|~b&d,a,b,x,s,t)}function gg(a,b,c,d,x,s,t){return cmn(b&d|c&~d,a,b,x,s,t)}function hh(a,b,c,d,x,s,t){return cmn(b^c^d,a,b,x,s,t)}function ii(a,b,c,d,x,s,t){return cmn(c^(b|~d),a,b,x,s,t)}function md51(s){txt="";var i,n=s.length,state=[1732584193,-271733879,-1732584194,271733878];for(i=64;i<=s.length;i+=64)md5cycle(state,md5blk(s.substring(i-64,i)));s=s.substring(i-64);var tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<s.length;i++)tail[i>>2]|=s.charCodeAt(i)<<(i%4<<3);if(tail[i>>2]|=128<<(i%4<<3),i>55)for(md5cycle(state,tail),i=0;i<16;i++)tail[i]=0;return tail[14]=8*n,md5cycle(state,tail),state}function md5blk(s){var i,md5blks=[];for(i=0;i<64;i+=4)md5blks[i>>2]=s.charCodeAt(i)+(s.charCodeAt(i+1)<<8)+(s.charCodeAt(i+2)<<16)+(s.charCodeAt(i+3)<<24);return md5blks}function rhex(n){for(var s="",j=0;j<4;j++)s+=hex_chr[n>>8*j+4&15]+hex_chr[n>>8*j&15];return s}function hex(x){for(var i=0;i<x.length;i++)x[i]=rhex(x[i]);return x.join("")}function md5(s){return hex(md51(s))}function add32(a,b){return a+b&4294967295}function add32(x,y){var lsw=(65535&x)+(65535&y);return(x>>16)+(y>>16)+(lsw>>16)<<16|65535&lsw}!function(){"use strict";angular.module("rechargeApp",["rechargeMain","rechargeMobile","rechargeElectricity","rechargeDth","rechargeHistory","rechargeBrowsePlan","summary","viewPayment"])}(),function(){"use strict";angular.module("bro4uWebapp",["pubnub.angular.service","ngAnimate","ui.router","ui.carousel","google.places","templates-dist","howworks","vidintermed","infopopup","videovendorinfo","walletpay","loginModule","ngMaterial","rechargeApp","paymentOptions","hsOrderModule","core","searchModule","homeModule","angAccordion","ng-pagination","ngImgCrop","youtube-embed"],function($mdThemingProvider){$mdThemingProvider.theme("docs-dark","default").primaryPalette("yellow").dark()})}(),function(){"use strict";function AppConfig($stateProvider,$locationProvider,$urlRouterProvider,$sceDelegateProvider){$sceDelegateProvider.resourceUrlWhitelist(["self",window.__env.baseOrigin,"https://bro4u.com/**","https://*.bro4u.com/**","https://*.cloudfront.net/**","https://bro4u-stage.s3.ap-south-1.amazonaws.com/**"]);var access=routingConfig.accessLevels;$locationProvider.html5Mode({enabled:!0,requireBase:!1}),$urlRouterProvider.otherwise("/page-not-found");var genesisState={name:"genesis",url:"",template:"<ui-view></ui-view>",data:{access:access.public,index:20.1},resolve:{lsCheck:function(AuthService){AuthService.lsCheck()}}},homeState={name:"genesis.home",url:"/",template:"<home-component></home-component>",params:{},data:{access:access.public,index:21}},faqState={name:"faqs",url:"/faqs",template:"<faqs></faqs>",params:{},data:{access:access.public,index:21.1}},headerState={name:"header",url:"/header",template:"<header></header>",params:{},data:{access:access.public,index:22}},howWorksState={name:"howworks",url:"/howworks",template:"<howworks></howworks>",params:{},data:{access:access.public,index:26}},recentActivityState={name:"recent",url:"/recent",template:"<home-act-component></home-act-component>",params:{},data:{access:access.public,index:28}},homeVideoState={name:"homevideo",url:"/homevideo",template:"<homevideo></homevideo>",params:{},data:{access:access.public,index:29}},videoPopupState={name:"videopopup",url:"/videopopup",template:"<videopopup></videopopup>",params:{},data:{access:access.public,index:30}},loginPopupState={name:"loginpopup",url:"/loginpopup",template:"<loginpopup></loginpopup>",params:{},data:{access:access.public,index:32}},locationPopState={name:"locationpop",url:"/locationpop",template:"<locationpop></locationpop>",params:{},data:{access:access.public,index:33}},locationSearch={name:"location-search",url:"/location-search",template:"<loc-search-component></loc-search-component>",data:{access:access.public,index:33.1}},intermediateScreen={name:"genesis.intermediate-screen",url:"/:urlSlug",template:"<intermediate-screen></intermediate-screen>",params:{intermediateParams:void 0},data:{access:access.public,seoType:"intermediate",index:34},resolve:{seoData:function(metaService){return metaService.fetchSeoData()}}},hyperLocalServices={name:"hyper-local-service",url:"/:citySlug/:urlSlug",template:"<intermediate-screen></intermediate-screen>",params:{intermediateParams:void 0},data:{access:access.public,seoType:"hyperlocal-services",index:34.1},resolve:{seoData:function(metaService){return metaService.fetchSeoData()}}},customCatalogState={name:"custom-catalog",url:"/custom-catalog",template:"<custom-catalog></custom-catalog>",data:{access:access.public,index:34.1}},requirementScreenProductState={name:"requirement-screen-product",url:"/requirement-screen-product",template:"<requirement-screen-product></requirement-screen-product>",params:{requirementParams:void 0},data:{access:access.public,index:34.2}},productListScreenState={name:"product-list",url:"/product-list",template:"<product-list-screen></product-list-screen>",data:{access:access.public,index:34.3}},productView={name:"product-view",url:"/:service_city_slug/product/:cat_slug",template:"<product-view></product-view>",params:{isOrganic:!0},data:{access:access.public,index:34.4,seoType:"product"}},serviceSearchState={name:"service-search",url:"/find",onEnter:["IntegrationService",function(IntegrationService){IntegrationService.openSerachServiceModal()}],params:{serSearchParams:void 0},data:{access:access.public,index:34.5,mdDialog:!0}},footerState={name:"footer",url:"/footer",template:"<footer></footer>",params:{},data:{access:access.public,index:35}},exploreServices={name:"explore-services",url:"/city/:citySlug",template:"<explore-services></explore-services>",params:{expSerParams:{id:4}},data:{access:access.public,index:36,seoType:"city"}},hyperLocalLocationServices={name:"explore-services.hyper-local-location",url:"/:localitySlug",template:"<explore-services></explore-services>",params:{expSerParams:{id:4}},data:{access:access.public,index:36.1,seoType:"hyperlocal"},resolve:{seoData:function(metaService){return metaService.fetchSeoData()}}},vidIntermedState={name:"vidintermed",url:"/vidintermed",template:"<vidintermed></vidintermed>",params:{},data:{access:access.public,index:40}},infoPopupState={name:"infopopup",url:"/infopopup",template:"<infopopup></infopopup>",params:{},data:{access:access.public,index:44}},requireCardState={name:"requirecard",url:"/requirecard",template:"<requirecard></requirecard>",params:{},data:{access:access.public,index:45}},requirementState={name:"requirement-screen",url:"/requirement-screen",template:"<requirement-screen></requirement-screen>",params:{},data:{access:access.public,index:47}},requirementScreenExtendedState={name:"requirement-screen-ext",url:"/requirement-screen-ext",template:"<requirement-screen-extended></requirement-screen-extended>",data:{access:access.public,index:47.1}},contactSummaryState={name:"contact-summary",url:"/contact-summary",template:"<contact-summary></contact-summary>",data:{access:access.user,index:47.2}},vendorListScreenState={name:"vendor-list",url:"/vendor-list",template:"<vendor-list-screen></vendor-list-screen>",params:{},data:{access:access.public,index:49}},vendorListQuoteScreen={name:"vendor-list-quote",url:"/vendor-list-quote",template:"<vendor-list-quote-screen></vendor-list-quote-screen>",data:{access:access.public,index:49.1}},vendorProfile={name:"vendor-profile",url:"/:service_city_slug/partner/:cat_slug",template:"<vendor-profile></vendor-profile>",params:{vendorId:void 0,catId:void 0,isOrganic:!0,isOrderPlaced:void 0},data:{access:access.public,index:49.2,seoType:"vendor"}},quoteReviewState={name:"quote-review",url:"/quote-review",template:"<quote-review></quote-review>",data:{access:access.public,index:55.1}},videoVendorInfoState={name:"videovendorinfo",url:"/videovendorinfo",template:"<videovendorinfo></videovendorinfo>",params:{},data:{access:access.public,index:70}},offerZoneState={name:"offer-zone",url:"/offer-zone",template:"<offer-zone></offer-zone>",data:{access:access.user,index:71}},orderReviewPageState={name:"order-review",url:"/order-review",template:"<review-order></review-order>",params:{},data:{access:access.public,index:74}},myOrdersState={name:"my-orders",url:"/my-orders",template:"<my-orders></my-orders>",params:{pIndex:void 0,index:void 0},data:{access:access.user,index:78}},orderSummaryState={name:"order-summary",url:"/order-summary",template:"<order-summary></order-summary>",data:{access:access.public,index:83},params:{isHelpSupportCall:void 0}},vendorRatingState={name:"vendor-rating",url:"/vendor-rating",template:"<vendor-rating></vendor-rating>",data:{access:access.user,index:83.1}},quoteSummaryState={name:"order-quotes",url:"/order-quotes",template:"<order-quotes></order-quotes>",params:{},data:{access:access.user,index:90}},cardPaymentState={name:"cardpayment",url:"/cardpayment",template:"<cardpayment></cardpayment>",params:{},data:{access:access.public,index:96}},walletPayState={name:"walletpay",url:"/walletpay",template:"<walletpay></walletpay>",params:{},data:{access:access.public,index:97}},myAccountState={name:"my-account",url:"/my-account",template:"<my-account></my-account>",data:{access:access.user,index:100}},myWalletState={name:"my-account.mywallet",url:"/mywallet",template:"<my-wallet></my-wallet>",params:{},data:{access:access.user,index:102}},userProfEditState={name:"my-account.edit-profile",url:"/edit-profile",template:"<edit-profile></edit-profile>",params:{},data:{access:access.user,index:103}},manageAddressState={name:"my-account.manage-address",url:"/manage-address",template:"<manage-address></manage-address>",params:{},data:{access:access.user,index:104}},paymentOptionState={name:"paymentOptions",url:"/payment-options",template:"<payment-options></payment-options>",resolve:{auth:function(AuthService){return AuthService.auth()}},data:{access:access.user,title:"Payment",index:106},params:{flowType:void 0,amount:void 0,checksum:void 0,orderId:void 0}},loginState={name:"login",url:"/login",template:"<login-component></login-component>",data:{access:access.public,title:"Login"}},logoutState={name:"logout",url:"/logout",data:{access:access.public,title:"Logout",index:107},controller:function($scope,AuthService){AuthService.logout()}},resetLocationState={name:"resetlocation",url:"/resetlocation",data:{access:access.public,title:"Reset Location",index:109},controller:function($state,LocationStorageService){LocationStorageService.destroy(),$state.go("genesis.home")}},paymentResponse={name:"payment-response",url:"/payment-response?orderId",template:"<payment-response></payment-response>",params:{orderId:"1234567891"},data:{access:access.user,index:108}},privacyPolicyState={name:"privacy-policy",url:"/privacy-policy",template:"<privacy-policy></privacy-policy>",data:{access:access.public,index:110}},termsDisclaimerState={name:"terms-disclaimer",url:"/terms-disclaimer",template:"<terms-disclaimer></terms-disclaimer>",data:{access:access.public,index:111}},cancellationRefundPolicyState={name:"cancellation-refund-policy",url:"/cancellation-refund-policy",template:"<cancellation-refund-policy></cancellation-refund-policy>",data:{access:access.public,index:112}},contactState={name:"contact",url:"/contact",template:"<contact></contact>",data:{access:access.public,index:112}},listPartner={name:"list-as-partner",url:"/list-as-partner",template:"<list-as-partner></list-as-partner>",params:{},data:{access:access.public,index:113}},_404State={name:"404",url:"/page-not-found",template:"<page-not-found></page-not-found>",params:{},data:{access:access.public,index:114}},umbrellaScreen={name:"genesis.umbrella-screen",url:"/service/:urlSlug",template:"<umbrella-screen></umbrella-screen>",params:{umbrellaParams:void 0},data:{access:access.public,seoType:"umbrella",index:115},resolve:{seoData:function(metaService){return metaService.fetchSeoData()}}},hyperLocalUmbrella={name:"hyper-local-umbrella",url:"/service/:citySlug/:urlSlug",template:"<umbrella-screen></umbrella-screen>",params:{umbrellaParams:void 0},data:{access:access.public,seoType:"hyperlocal-umbrella",index:115.1},resolve:{seoData:function(metaService){return metaService.fetchSeoData()}}},businessScreenState={name:"business-screen",url:"/business",template:"<business-screen></business-screen>",data:{access:access.public,index:116}},vendorRatingShortLink={name:"vendor-rating-shortLink",url:"/review/:type",template:"<vendor-rating-shortlink></vendor-rating-shortlink>",params:{order_id:void 0,vendor_id:void 0,group_id:void 0,mobile:void 0,city_id:void 0},data:{access:access.public,index:117}};$stateProvider.state(_404State),$stateProvider.state(genesisState),$stateProvider.state(homeState),$stateProvider.state(faqState),$stateProvider.state(headerState),$stateProvider.state(howWorksState),$stateProvider.state(recentActivityState),$stateProvider.state(homeVideoState),$stateProvider.state(videoPopupState),$stateProvider.state(loginPopupState),$stateProvider.state(locationPopState),$stateProvider.state(customCatalogState),$stateProvider.state(footerState),$stateProvider.state(vidIntermedState),$stateProvider.state(infoPopupState),$stateProvider.state(requireCardState),$stateProvider.state(requirementState),$stateProvider.state(requirementScreenProductState),$stateProvider.state(requirementScreenExtendedState),$stateProvider.state(contactSummaryState),$stateProvider.state(productListScreenState),$stateProvider.state(productView),$stateProvider.state(vendorListScreenState),$stateProvider.state(quoteReviewState),$stateProvider.state(videoVendorInfoState),$stateProvider.state(offerZoneState),$stateProvider.state(orderReviewPageState),$stateProvider.state(myOrdersState),$stateProvider.state(orderSummaryState),$stateProvider.state(vendorRatingState),$stateProvider.state(quoteSummaryState),$stateProvider.state(cardPaymentState),$stateProvider.state(walletPayState),$stateProvider.state(paymentResponse),$stateProvider.state(resetLocationState),$stateProvider.state(myAccountState),$stateProvider.state(myWalletState),$stateProvider.state(userProfEditState),$stateProvider.state(manageAddressState),$stateProvider.state(paymentOptionState),$stateProvider.state(loginState),$stateProvider.state(logoutState),$stateProvider.state(serviceSearchState),$stateProvider.state(vendorListQuoteScreen),$stateProvider.state(vendorProfile),$stateProvider.state(locationSearch),$stateProvider.state(privacyPolicyState),$stateProvider.state(termsDisclaimerState),$stateProvider.state(cancellationRefundPolicyState),$stateProvider.state(contactState),$stateProvider.state(listPartner),$stateProvider.state(businessScreenState),$stateProvider.state(vendorRatingShortLink),$stateProvider.state(exploreServices),$stateProvider.state(hyperLocalLocationServices),$stateProvider.state(hyperLocalUmbrella),$stateProvider.state(umbrellaScreen),$stateProvider.state(hyperLocalServices),$stateProvider.state(intermediateScreen)}angular.module("bro4uWebapp").config(["$stateProvider","$locationProvider","$urlRouterProvider","$sceDelegateProvider",AppConfig])}(),function(window,document,undefined){var getModule=function(angular){return angular.module("seo",[]).run(["$rootScope",function($rootScope){$rootScope.htmlReady=function(){$rootScope.$evalAsync(function(){setTimeout(function(){"function"==typeof window.callPhantom&&window.callPhantom()},0)})}}])};"function"==typeof define&&define.amd?define(["angular"],getModule):getModule(angular)}(window,document),function(){"use strict";angular.module("loginModule",["core.service.auth"])}(),function(){"use strict";angular.module("modal",["core.service.auth"])}(),function(){"use strict";angular.module("cardpayment",[])}(),function(){"use strict";angular.module("netbanking",[])}(),function(){"use strict";angular.module("paymentOptions",["credit-cards","wallet"])}(),function(){"use strict";angular.module("paytm",[])}(),function(){"use strict";angular.module("wallet",["paytm","netbanking","cardpayment"])}(),function(){"use strict";angular.module("progressBar",[])}(),function(){"use strict";angular.module("homeModule",[])}(),function(){"use strict";angular.module("howworks",[])}(),function(){"use strict";angular.module("hsOrderModule",[])}(),function(){"use strict";angular.module("infopopup",[])}(),function(){"use strict";angular.module("rechargeBrowsePlan",[])}(),function(){"use strict";angular.module("rechargeDth",[])}(),function(){"use strict";angular.module("rechargeElectricity",["sampleBill"])}(),function(){"use strict";angular.module("sampleBill",[])}(),function(){"use strict";angular.module("rechargeHistory",[])}(),function(){"use strict";angular.module("rechargeMain",[])}(),function(){"use strict";angular.module("rechargeMobile",["ui.router","ngSanitize","angular-toArrayFilter","core"])}(),function(){"use strict";angular.module("rechargeNavBar",[])}(),function(){"use strict";angular.module("summary",[])}(),function(){"use strict";angular.module("viewPayment",[])}(),function(){"use strict";angular.module("searchModule",[])}(),function(){"use strict";angular.module("videovendorinfo",[])}(),function(){"use strict";angular.module("vidintermed",[])}(),function(){"use strict";angular.module("walletpay",[])}(),function(){"use strict";angular.module("core",["core.factory","core.service","core.filter","core.utils","ngStorage","ngFileUpload","ui.carousel","ng-image-gallery","core.helpers"])}(),function(){"use strict";angular.module("core.filter",[])}(),function(){"use strict";angular.module("core.helpers",[])}(),function(){"use strict";angular.module("core.utils",[])}(),function(){"use strict";angular.module("core.factory.auth",[])}(),function(){"use strict";angular.module("core.factory",["core.factory.auth"])}(),function(){"use strict";angular.module("core.service.auth",[])}(),function(){"use strict";angular.module("core.service",["core.service.auth"])}(),function(){function editProfileController($window,$scope,$rootScope,$timeout,$interval,$mdToast,$mdDialog,hsOrder,HODProvider,AuthService,Upload){$scope.otpForm={},$scope.otpTriggerState=!1,$scope.isOTPVerified=!1,$scope.isOTPInValid=!0,$scope.otpValid=void 0,$scope.errorMsg="";var self=this;self.submitFlag=!0,self.pageRenderVars={user_id:AuthService.getCurrentUser().user_id,full_name:AuthService.getCurrentUser().full_name,email:AuthService.getCurrentUser().email,mobile:AuthService.getCurrentUser().mobile,social_login:AuthService.getCurrentUser().social_login,gender:AuthService.getCurrentUser().gender,profile_pic:AuthService.getCurrentUser().profile_pic||"dist/img/headillus.png",dob:function(){return AuthService.getCurrentUser().dob?new Date(AuthService.getCurrentUser().dob):new Date("2010-12-31")}(),minDate:function(){return new Date("1940-01-01")}(),maxDate:function(){return new Date("2010-12-31")}()},self.usrDataCopy={user_id:AuthService.getCurrentUser().user_id,full_name:AuthService.getCurrentUser().full_name,email:AuthService.getCurrentUser().email,mobile:AuthService.getCurrentUser().mobile,social_login:AuthService.getCurrentUser().social_login,gender:AuthService.getCurrentUser().gender,profile_pic:AuthService.getCurrentUser().profile_pic||"dist/img/headillus.png",dob:function(){return AuthService.getCurrentUser().dob?new Date(AuthService.getCurrentUser().dob):new Date}()},$scope.verifyOTP=function(otp){var dataObject={user_id:self.pageRenderVars.user_id,mobile:self.pageRenderVars.mobile,otp:otp};hsOrder.verifyOTP(dataObject).then(function(response){response.status?($scope.otpValid=!0,$scope.isOTPInValid=!1,response.response.status_code?$scope.isOTPVerified=!0:$scope.isOTPVerified=!1):($scope.isOTPVerified=!1,$scope.isOTPInValid=!0,$scope.otpValid=!1),$mdDialog.hide(),$scope.updateProfile()})},$scope.updateProfile=function(){hsOrder.updateProfile(self.pageRenderVars).then(function(response){self.submitFlag=!0,$rootScope.$emit("profileUpdated"),$mdToast.showSimple("Profile Updated Sucessfully")})},$scope.otpResendCountDown=0,$scope.isOtpCountDownZero=function(){return $scope.otpResendCountDown<=0},$scope.resetOTPCountDown=function(){$scope.otpResendCountDown=30,$interval(function(){$scope.otpResendCountDown>0&&$scope.otpResendCountDown--},1e3,30)},$scope.resendOtp=function(){AuthService.login({mobile:self.pageRenderVars.mobile,user_id:self.pageRenderVars.user_id},function(res){},function(err){}),$scope.otpTriggerState=!0,$scope.resetOTPCountDown()},self.goBack=function(){$window.history.back()},self.updateUserProfile=function(){self.submitFlag&&self.editProfileForm.$valid&&(self.submitFlag=!1,angular.equals(self.pageRenderVars,self.usrDataCopy)?$mdToast.showSimple("Nothing To Update"):self.pageRenderVars.mobile!==self.usrDataCopy.mobile?AuthService.triggerOTP({mobile:self.pageRenderVars.mobile,user_id:self.pageRenderVars.user_id},function(res){self.openBottomSheet()},function(err){err&&"false"===err.status&&err.hasOwnProperty("statusCode")&&err.statusCode?(self.pageRenderVars.mobile="",$scope.isOTPVerified=!1,$scope.errorMsg=err.message,$mdToast.showSimple($scope.errorMsg)):self.openBottomSheet()}):$scope.updateProfile())},self.openBottomSheet=function(){$scope.errorMsg="",$scope.isOTPVerified=!1,$scope.otpValid=!1,$scope.otpTriggerState=!0,$mdDialog.show({templateUrl:"components/profile/otp-bottom-sheet.template.html",controller:function(){this.parent=$scope},controllerAs:"ctrl",escapeToClose:!0,clickOutsideToClose:!0}).then(function(){}).catch(function(){})}}angular.module("loginModule").component("editProfile",{templateUrl:"components/account/edit-profile.temp.html",controller:editProfileController}),editProfileController.$inject=["$window","$scope","$rootScope","$timeout","$interval","$mdToast","$mdDialog","hsOrder","HODProvider","AuthService","Upload"]}(),function(){function myAccountController($window,$state,hsorder,AuthService,$scope,$rootScope,$mdDialog,IntegrationService){var self=this;$scope.selectedIndex=$state.current.data?function(stateIndex){switch(stateIndex){case 102:return 0;case 103:return 2;case 104:return 1;default:return 0}}($state.current.data.index):0,self.pageRenderVars={profilePic:AuthService.getCurrentUser().profile_pic||"dist/img/default/default_profile.png",userName:AuthService.getCurrentUser().full_name},self.pageRenderVars.profilePic&&"/"==self.pageRenderVars.profilePic.substr(self.pageRenderVars.profilePic.length-1)&&(self.pageRenderVars.profilePic="dist/img/default/default_profile.png"),$rootScope.$on("profileUpdated",function(){self.pageRenderVars={profilePic:AuthService.getCurrentUser().profile_pic||"dist/img/default/default_profile.png",userName:AuthService.getCurrentUser().full_name}}),self.myAccountRedirection=function(option){switch(option){case 1:$state.go("my-wallet");break;case 2:$state.go("my-orders");break;case 3:$state.go("manage-address");break;case 4:$state.go("edit-profile");break;case 5:$state.go("my-referrals");break;case 6:$state.go("offer-zone");break;case 7:$state.go("about-us")}},self.logout=function(){AuthService.logout()},self.goBack=function(){$window.history.back()},self.openFileUploadPopup=function(){$mdDialog.show({escapeToClose:!0,clickOutsideToClose:!0,controller:fileUploadController,controllerAs:"PFUCtrl",templateUrl:"components/account/profile-pic-upload.temp.html",bindToController:!0,locals:{updateProfilePic:function(newProfilePic){self.pageRenderVars.profilePic=newProfilePic}}})},self.downloadApp=function(){var params={user_id:AuthService.getCurrentUser().user_id,mobile:AuthService.getCurrentUser().mobile};IntegrationService.downloadApp(params)}}function fileUploadController($rootScope,$mdDialog,$timeout,HODProvider,AuthService,$mdToast,hsOrder){var self=this;self.submitFlag=!0,self.selectFlag=!0,self.userDataObject=AuthService.getCurrentUser(),self.cancelFileUpload=function(){self.submitFlag&&(self.submitFlag=!1,$mdDialog.hide(function(response){self.submitFlag=!0}))},self.selectFileUpload=function(){self.selectFlag=!1,$timeout(100,function(){self.selectFlag=!0})},self.upload=function(dataUrl,name){if(self.submitFlag&&!self.selectFlag){self.submitFlag=!1;var datatoSend={profile_pic:dataUrl,user_id:AuthService.getCurrentUser().user_id,status_code:1};HODProvider.uploadProfilePic(datatoSend).then(function(response){self.submitFlag=!0,$mdDialog.hide(),"HTTP_SUCCESS_DATA"==response.status?(self.userDataObject.profile_pic=response.data.image,AuthService.updateUser(self.userDataObject),self.updateProfilePic(response.data.image),$rootScope.$broadcast("userProPicUpdated")):"HTTP_SUCCESS_NO_DATA"==response.status?$mdToast.showSimple(hsOrder.getMessage(31)):$mdToast.showSimple("Internal Server Error")})}else $mdToast.showSimple("Please select a file.")}}angular.module("hsOrderModule").component("myAccount",{templateUrl:"components/account/my-account-md.template.html",controller:myAccountController}),myAccountController.$inject=["$window","$state","hsOrder","AuthService","$scope","$rootScope","$mdDialog","IntegrationService"],fileUploadController.$inject=["$rootScope","$mdDialog","$timeout","HODProvider","AuthService","$mdToast","hsOrder"]}(),function(){function myReferralsController($window,$state,hsorder,HODProvider,AuthService){var self=this;self.pageLoadVars={user_id:AuthService.getCurrentUser().user_id},self.pageRenderVars={gotData:!1,dataObject:void 0,tabs:["Invite","Rewards"],activeTab:0},HODProvider.myReferralsData(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.gotData=!0,self.pageRenderVars.dataObject=response.data):response.status}),self.openApps=function(option){var appLinkURL;switch(option){case 1:appLinkURL="whatsapp://send?text="+self.pageRenderVars.dataObject.share_message;break;case 2:appLinkURL="fb://publish/profile/me?text="+self.pageRenderVars.dataObject.share_message;break;case 3:appLinkURL="sms:?body="+self.pageRenderVars.dataObject.share_message;break;case 4:appLinkURL="mailto:?subject=You have got offer through a referral&body="+self.pageRenderVars.dataObject.share_message}$window.open(appLinkURL)},self.changeTab=function(index){self.pageRenderVars.activeTab=index},self.goBack=function(){$window.history.back()}}angular.module("hsOrderModule").component("myReferrals",{templateUrl:"components/account/my-referrals.temp.html",controller:myReferralsController}),myReferralsController.$inject=["$window","$state","hsOrder","HODProvider","AuthService"]}(),function(){"use strict";function myRewardsController($scope){}angular.module("hsOrderModule").component("myRewards",{templateUrl:"components/account/my-rewards.temp.html",controller:myRewardsController,bindings:{apidata:"="}}),myRewardsController.$inject=["$scope"]}(),function(){function myWalletController($window,$state,hsorder,HODProvider,AuthService){var self=this;self.pageLoadVars={user_id:AuthService.getCurrentUser().user_id},self.pageRenderVars={gotData:!1,dataObject:void 0},HODProvider.myWalletData(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.gotData=!0,self.pageRenderVars.dataObject=response.data):response.status}),self.goBack=function(){$window.history.back()}}angular.module("hsOrderModule").component("myWallet",{templateUrl:"components/account/my-wallet.temp.html",controller:myWalletController}),myWalletController.$inject=["$window","$state","hsOrder","HODProvider","AuthService"]}(),function(){function appDownloadController(hsOrder,HODProvider,$mdToast,$rootScope,AuthService){var self=this;self.signUpConnectionNumber=AuthService.getCurrentUser().mobile,self.generateDownloadMessage=function(event,connectionNumber){return event.preventDefault(),$rootScope.hasOwnProperty("preventClick")&&$rootScope.preventClick?void($rootScope.preventClick=void 0):self.appDownloadSMS.$invalid?($mdToast.showSimple(hsOrder.getMessage(31)),void $mdDialog.hide()):void HODProvider.generateMessage({mobile:connectionNumber}).then(function(response){self.signUpConnectionNumber="","HTTP_SUCCESS_DATA"==response.status?($mdToast.showSimple(hsOrder.getMessage(85)+" "+connectionNumber),$mdDialog.hide()):"HTTP_SUCCESS_NO_DATA"==response.status&&($mdToast.showSimple(hsOrder.getMessage(84)+" "+connectionNumber),$mdDialog.hide())}).catch(function(err){})}}angular.module("homeModule").component("appDownloadComponent",{templateUrl:"components/app-download/app-download.temp.html",controller:appDownloadController}),appDownloadController.$inject=["hsOrder","HODProvider","$mdToast","$rootScope","AuthService"]}(),function(){function breadcrumbCtrl($scope,$rootScope,ApiService){var self=this;self.catURL=window.location.href,self.baseAppPath=ApiService.get().baseAppPath,self.baseAppPath=self.baseAppPath.substring(0,self.baseAppPath.length-1),self.metaData=$rootScope.metaData,self.breadcrumbs=void 0,self.metaData&&(self.breadcrumbs=self.metaData.BASIC.breadcrumb),$rootScope.$on("gotMetaData",function(){self.metaData=$rootScope.metaData,self.breadcrumbs=self.metaData.BASIC.breadcrumb}),$rootScope.$on("$locationChangeSuccess",function(event,next){self.catURL=window.location.href})}angular.module("homeModule").component("breadcrumb",{templateUrl:"components/breadcrumb/breadcrumb.template.html",bindings:{breadcrumbData:"<"},controller:breadcrumbCtrl}),breadcrumbCtrl.$inject=["$scope","$rootScope","ApiService"]}(),function(){function businessCtrl($scope,$rootScope,hsOrder,HODProvider,ApiService,$mdToast,$state){var self=this;self.gotData=!1,self.businessScnData=void 0,self.staticImagePath=ApiService.get().staticImagePath,self.requestSuccessVars=void 0,self.businessScnRender={activeTab:0},self.submitBusinessLeads=function(form){self.businessPageForm.$valid?HODProvider.addBusinessLead(self.businessFormData).then(function(response){"true"===response.data.status&&(self.requestSuccessVars=response.data,
self.businessScnRender.activeTab=1)}):$mdToast.showSimple(hsOrder.getMessage(21))},HODProvider.businessScnData().then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.gotData=!0,self.businessScnData=response.data,$rootScope.$broadcast("swapHeader",{headerSwap:!1})):response.status}),self.goHome=function(){$state.go("genesis.home")}}angular.module("homeModule").component("businessScreen",{templateUrl:"components/business-screen/business-screen.template.html",controller:businessCtrl}),businessCtrl.$inject=["$scope","$rootScope","hsOrder","HODProvider","ApiService","$mdToast","$state"]}(),function(){function cancellationRefundPolicyCtrl($scope){}angular.module("homeModule").component("cancellationRefundPolicy",{templateUrl:"components/cancellation-refund-policy/cancellation-refund-policy.template.html",controller:cancellationRefundPolicyCtrl}),cancellationRefundPolicyCtrl.$inject=["$scope"]}(),function(){function chatController($mdToast,hsOrder,HODProvider,AuthService){var self=this;self.pageLoadVars={order_id:hsOrder.getHSOData("orderId")},self.pageRenderVars={gotData:!1,dataObject:void 0,subNavTabs:["Chat With Bro4u","chat With Vendor"],subNavActiveTab:0},self.messageToSend={order_id:hsOrder.getHSOData("orderId"),user_id:AuthService.getCurrentUser().user_id,message:"",chat_with:self.pageRenderVars.subNavActiveTab?"vendor":"admin"},HODProvider.getChatMessage(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.gotData=!0,self.pageRenderVars.dataObject=response.data):response.status}),self.changeTabServ=function(index){self.pageRenderVars.subNavActiveTab=index,self.messageToSend.chat_with=index?"vendor":"admin"},self.postSuccess=function(){var tempObject={message:self.messageToSend.message,profile_pic:AuthService.getCurrentUser().profile_pic||"dist/img/default/default_profile.png",time:"now",user_sent:!0};self.pageRenderVars.subNavActiveTab?self.pageRenderVars.dataObject.vendor_chat.push(tempObject):self.pageRenderVars.dataObject.bro4u_chat.push(tempObject),self.messageToSend.message=""},self.sendMessage=function(){self.messageToSend.message.trim().length?HODProvider.sendChatMessage(self.messageToSend).then(function(response){"HTTP_SUCCESS_DATA"==response.status?response.data.status?self.postSuccess():$mdToast.showSimple(hsOrder.getMessage(31)):"HTTP_SUCCESS_NO_DATA"==response.status?$mdToast.showSimple(hsOrder.getMessage(31)):$mdToast.showSimple(hsOrder.getMessage(32))}):$mdToast.showSimple(hsOrder.getMessage(26))}}angular.module("hsOrderModule").component("chatComponent",{templateUrl:"components/chat/chat.temp.html",bindings:{orderStatus:"<"},controller:chatController}),chatController.$inject=["$mdToast","hsOrder","HODProvider","AuthService"]}(),function(){"use strict";function LoginController($rootScope,facebookAuthService,googleAuthService,AuthService,$state,$stateParams,utils,$interval,$mdToast,$mdDialog){function onSuccess(res){try{var stateName=utils.isObjectEmpty($rootScope.toState)?"genesis.home":$rootScope.toState.name;AuthService.isTransitionLocked=!1,$state.go(stateName,AuthService.urlParams)}catch(err){$state.go("genesis.home")}}function onFailure(err){$rootScope.error=err,self.formOtpLoginRec&&(self.formOtpLoginRec.otpEntered.$invalid=!0),"google"===self.via?(googleAuthService.logOutGP(),googleAuthService.isSignedIn().get()||googleAuthService.loginGP(onSuccess,onFailure)):self.via,$state.go("login")}var self=this;self.state="NO_OTP",self.loginFormData={mobileNumber:"",otpEntered:""},self.via="otp",self.otpResendCountDown=0,self.submitFormOtpLogin=function(){self.formOtpLogin.$valid&&($mdToast.showSimple("OTP sent to your mobile no."),self.state="OTP_PRO",AuthService.login({mobile:self.loginFormData.mobileNumber},function(res){},function(err){$rootScope.error="Failed to login"}),self.resetOTPCountDown())},self.isOtpCountDownZero=function(){return self.otpResendCountDown<=0},self.resetOTPCountDown=function(){self.otpResendCountDown=20,$interval(function(){self.otpResendCountDown>0&&self.otpResendCountDown--},1e3,20)},self.resendOtp=function(){self.loginFormData.otpEntered="",AuthService.login({mobile:self.loginFormData.mobileNumber},function(res){},function(err){$rootScope.error="Failed to login"}),self.resetOTPCountDown()},self.submitFormOtpLoginRec=function(){self.formOtpLoginRec.$valid&&(AuthService.verifyOTP({mobile:self.loginFormData.mobileNumber,otp:self.loginFormData.otpEntered},onSuccess,onFailure),$mdDialog.hide())},self.toFbLogin=function(){self.via="facebook",facebookAuthService.loginFB(onSuccess,onFailure)},self.toGpLogin=function(){self.via="google",googleAuthService.loginGP(onSuccess,onFailure)},self.closeDialog=function(){$mdDialog.hide()}}angular.module("loginModule").component("loginComponent",{templateUrl:"components/common/login/login.template.html",controller:LoginController}),LoginController.$inject=["$rootScope","facebookAuthService","googleAuthService","AuthService","$state","$stateParams","utils","$interval","$mdToast","$mdDialog"]}(),function(){"use strict";function ModalController(){}angular.module("modal").component("modal",{templateUrl:"components/common/modal/modal-md.template.html",controller:ModalController}),ModalController.$inject=[]}(),function(){function orderReviewLoginController($rootScope,googleAuthService,AuthService,$state,$mdToast,$interval){function onSuccess(res){try{AuthService.isTransitionLocked=!1,self.revScn.usserLoggedIn(),$rootScope.$broadcast("userLoggedIn")}catch(err){$state.go("genesis.home")}}function onFailure(err){$rootScope.error=err,self.formOtpLoginRec&&(self.formOtpLoginRec.otpEntered.$invalid=!0),"google"===self.via?(googleAuthService.logOutGP(),googleAuthService.isSignedIn().get()||googleAuthService.loginGP(onSuccess,onFailure)):self.via}var self=this;self.state="NO_OTP",self.loginFormData={mobileNumber:"",otpEntered:""},self.via="otp",self.otpResendCountDown=0,self.submitFormOtpLogin=function(){self.formOtpLogin.$valid&&AuthService.login({mobile:self.loginFormData.mobileNumber},function(res){res.data&&"true"==res.data.status?(self.state="OTP_PRO",self.resetOTPCountDown()):$mdToast.showSimple(res.data.otp_message)},function(err){$rootScope.error="Failed to login"})},self.resetOTPCountDown=function(){self.otpResendCountDown=60,$interval(function(){self.otpResendCountDown>0&&self.otpResendCountDown--},1e3,60)},self.resendOtp=function(){self.loginFormData.otpEntered="",AuthService.login({mobile:self.loginFormData.mobileNumber},function(res){res.data&&"true"==res.data.status?(self.state="OTP_PRO",self.resetOTPCountDown()):$mdToast.showSimple(res.data.otp_message)},function(err){$rootScope.error="Failed to login"}),self.resetOTPCountDown()},self.submitFormOtpLoginRec=function(){self.formOtpLoginRec.$valid&&AuthService.verifyOTP({mobile:self.loginFormData.mobileNumber,otp:self.loginFormData.otpEntered},onSuccess,onFailure)},self.changeNumber=function(){self.loginFormData.mobileNumber="",self.loginFormData.otpEntered="",self.state="NO_OTP"},self.isOtpCountDownZero=function(){return self.otpResendCountDown<=0}}angular.module("loginModule").component("orderReviewLogin",{templateUrl:"components/common/order-review-login/order-review-login.template.html",bindings:{revScn:"="},controller:orderReviewLoginController}),orderReviewLoginController.$inject=["$rootScope","googleAuthService","AuthService","$state","$mdToast","$interval"]}(),function(){function pageNotFoundCtrl(){}angular.module("homeModule").component("pageNotFound",{templateUrl:"components/common/page-not-found/page-not-found.template.html",controller:pageNotFoundCtrl}),pageNotFoundCtrl.$inject=[]}(),function(){"use strict";function AutoSubmitForm($timeout,PaymentService){return{replace:!0,scope:{},template:'<form name="autoForm" action="{{ formData.url }}" method="{{ formData.method }}">   <div ng-repeat="(key,val) in formData.params">       <input type="hidden" name="{{ key }}" value="{{ val }}" />   </div></form>',link:function(scope,element,attrs){scope.$on("gateway.redirect",function(event,data){scope.formData=data,scope.formData&&$timeout(function(){document.autoForm.submit()})})}}}angular.module("paymentOptions").directive("autoSubmitForm",AutoSubmitForm),AutoSubmitForm.$inject=["$timeout","PaymentService"]}(),function(){"use strict";function CardExpiration(){return{require:"ngModel",link:function(scope,elm,attrs,ctrl){scope.$watch("[ccinfo.month, ccinfo.year]",function(value){return ctrl.$setValidity("invalid",!0),parseInt(scope.ccinfo.year)===scope.currentYear&&parseInt(scope.ccinfo.month)<scope.currentMonth?ctrl.$setValidity("invalid",!1):-1!==parseInt(scope.ccinfo.year)&&-1!==parseInt(scope.ccinfo.month)||ctrl.$setValidity("invalid",!0),value},!0)}}}angular.module("paymentOptions").directive("cardExpiration",CardExpiration)}(),function(){function CardController($scope,$locale,PaymentService,$rootScope,RechargeOrderService){function pay($event,detail){$event.preventDefault();var cc={};this.paymentForm.$valid&&(cc.ccinfo=detail,cc.mode="paytm:cc",PaymentService.ensureTxnToken(cc).then(function(){PaymentService.pay(cc).then(function(response){response&&response.hasOwnProperty("ErrorMsg")?$scope.errorMsg=response.ErrorMsg:$scope.errorMsg=""})},function(err){$rootScope.$broadcast("initFetchTXNFlow",cc)}))}var self=this;$scope.currentYear=(new Date).getFullYear(),$scope.currentMonth=(new Date).getMonth()+1,$scope.months=$locale.DATETIME_FORMATS.MONTH,$scope.ccinfo=$scope.ccinfo||{type:void 0},$scope.cardTypeImages=PaymentService.options.cardTypeImages,$scope.errorMsg="",$scope.pay=pay,self.connectionType=RechargeOrderService.getConnectionType(),self.payment=PaymentService.payment,self.options=PaymentService.options}angular.module("cardpayment").component("cardpayment",{templateUrl:"components/common/payment-options/card/card-md.template.html",controller:CardController}),CardController.$inject=["$scope","$locale","PaymentService","$rootScope","RechargeOrderService"]}(),function(){"use strict";function CreditCardType(){return{require:"ngModel",link:function(scope,elm,attrs,ctrl){ctrl.$parsers.unshift(function(value){scope.ccinfo.type=/^5[1-5]/.test(parseInt(value.replace(/\s/g,"")))?"mastercard":/^4/.test(parseInt(value.replace(/\s/g,"")))?"visa":/^3[47]/.test(parseInt(value.replace(/\s/g,"")))?"amex":/^3(?:0[0-5]|[68][0-9])[0-9]{4,}$/.test(parseInt(value.replace(/\s/g,"")))?"dinners":/^(5018|5020|5038|6304|6759|6761|6763|6799)[0-9]{8,15}$/.test(parseInt(value.replace(/\s/g,"")))?"maestro":/^6011|65|64[4-9]|622(1(2[6-9]|[3-9]\d)|[2-8]\d{2}|9([01]\d|2[0-5]))/.test(parseInt(value.replace(/\s/g,"")))?"discover":/^6[0-9]{15}$/.test(parseInt(value.replace(/\s/g,"")))?"rupay":void 0;return ctrl.$setValidity("invalid",!!scope.ccinfo.type),function(value){if(/[^0-9-\s]+/.test(value))return!1;var nCheck=0,nDigit=0,bEven=!1;value=value.replace(/\D/g,"");for(var n=value.length-1;n>=0;n--){var cDigit=value.charAt(n);nDigit=parseInt(cDigit,10),bEven&&(nDigit*=2)>9&&(nDigit-=9),nCheck+=nDigit,bEven=!bEven}return nCheck%10==0}(value)||ctrl.$setValidity("invalid",!1),value})}}}function Spacing(){return{require:"ngModel",link:function(scope,elem,attrs,ctrl){function applySpacing(viewValue){return 4!=viewValue.length&&9!=viewValue.length&&14!=viewValue.length&&19!=viewValue.length||(viewValue+=" ",elem.val(viewValue.toString())),viewValue}ctrl&&ctrl.$parsers.unshift(applySpacing)}}}angular.module("paymentOptions").directive("creditCardType",CreditCardType).directive("spacing",Spacing),Spacing.$inject=[]}(),function(){function NetBankingController($scope,PaymentService,$rootScope,RechargeOrderService){function init(){0===$scope.BANK_LIST.length&&PaymentService.payment.netbanking.fetchBankList().then(function(bankList){if($scope.BANK_LIST=bankList,PaymentService.options.BANK_LIST=$scope.BANK_LIST,0===$scope.TOP_BANKS.length)for(var i=0;i<4;++i)$scope.TOP_BANKS.push(bankList[i]);PaymentService.options.TOP_BANKS=$scope.TOP_BANKS}).finally(function(){}),self.connectionType=RechargeOrderService.getConnectionType()}function pay($event,detail){$event.preventDefault();var nb={};this.nbinfo.bank&&(nb.mode="paytm:nb",nb.nbinfo=detail,PaymentService.ensureTxnToken(nb).then(function(){PaymentService.pay(nb).then(function(response){response&&response.hasOwnProperty("ErrorMsg")?$scope.errorMsg=response.ErrorMsg:$scope.errorMsg=""})},function(err){$rootScope.$broadcast("initFetchTXNFlow",nb)}))}var self=this;$scope.BANK_LIST=PaymentService.BANK_LIST||[],$scope.TOP_BANKS=PaymentService.TOP_BANKS||[],self.payment=PaymentService.payment,$scope.pay=pay,$scope.init=init,$scope.errorMsg="",init()}angular.module("netbanking").component("netbanking",{templateUrl:"components/common/payment-options/netbanking/netbanking-md.template.html",controller:NetBankingController}),NetBankingController.$inject=["$scope","PaymentService","$rootScope","RechargeOrderService"]}(),function(){function PaymentOptionsController($scope,$locale,RechargeDataService,RechargeOrderService,ViewConfigService,PaymentService,$rootScope,$state,$mdBottomSheet,$interval,$mdDialog,$stateParams){function closeOTPSheet(ev){document.body.hasAttribute("style")&&document.body.style.touchAction&&(document.body.style.touchAction="auto"),$mdDialog.hide(),$scope.paytmOTPSheetStatus=!1}function resendOtp(event){event.preventDefault(),self.isOTPSent=!1,generateOTPForPaytm()}function selectPaymentOption(paymentType){$scope.activeTab=paymentType,$scope.paytmOTPSheetStatus=!1,self.isOTPSent=!1,self.payment.selectPaymentOption(paymentType)}function keypress(code){void 0===code&&resetCoupon()}function resetCoupon(){self.payment.coupon=PaymentService.resetCoupon()}function resetError(){self.payment.coupon&&(self.payment.coupon.checksum="")}function verifyCoupon(cc){self.payment.verifyCoupon(cc).then(function(coupon_details){self.payment.coupon=coupon_details,self.payment.netPayable=parseFloat(self.payment.coupon?self.payment.coupon.net_payable:self.payment.amount),coupon_details.is_valid&&$mdDialog.hide()},function(rej){})}function openCouponSheet(){self.payment.coupon&&(self.payment.coupon.msg=""),$mdDialog.show({templateUrl:"components/common/payment-options/coupon/coupon-dialog.template.html",controller:function(){this.parent=$scope,this.parent.self=self},controllerAs:"ctrl",clickOutsideToClose:!0,escapeToClose:!0}).then(function(){document.body.hasAttribute("style")&&document.body.style.touchAction&&(document.body.style.touchAction="auto")}).catch(function(){document.body.hasAttribute("style")&&document.body.style.touchAction&&(document.body.style.touchAction="auto")})}function verifyAndPay(event,otp){event.preventDefault(),void 0!==otp&&(self.otp=otp,PaymentService.payment.wallet.paytm.api.verifyPaytmOTP(self.otp,PaymentService.payment.wallet.paytm.i.info.STATE).then(function(response){return $scope.isPaytmAlreadyLoggedIn=void 0!==PaymentService.payment.wallet.paytm.i.info.TOKEN_DETAILS.PAYTM_TOKEN,"SUCCESS"===response.STATUS?($scope.paytmOTPSheetStatus=!1,payInfo&&payInfo.data&&PaymentService.pay(payInfo.data).then(function(response){response&&response.hasOwnProperty("ErrorMsg")?$scope.errorMsg=response.ErrorMsg:($scope.errorMsg="",PaymentService.payment.wallet.paytm.i.info.TOKEN_DETAILS.TXN_TOKEN=void 0)})):$scope.errorMsg=response.ErrorMsg,response}))}function generateOTPForPaytm(data){return self.isOTPSent?($scope.openPaytmBottomSheet(),void self.resetOTPCountDown()):(data&&(payInfo.data=data),PaymentService.payment.wallet.paytm.i.info.TOKEN_DETAILS.TXN_TOKEN||$scope.paytmOTPSheetStatus?void 0:($scope.paytmOTPSheetStatus=!0,PaymentService.payment.wallet.paytm.api.generatePaytmOTP(PaymentService.payment.wallet.paytm.i.info.PAYTM_MOBILE).then(function(response){return"SUCCESS"===response.status?(self.isOTPSent=!0,$scope.errorMsg="",$scope.openPaytmBottomSheet()):$scope.errorMsg=response.ErrorMsg,response},function(err){}).finally(function(){self.resetOTPCountDown()})))}function showAlert(msg){alert=$mdDialog.alert({title:"Attention",textContent:msg,ok:"Close"}),$mdDialog.show(alert).finally(function(){$scope.errorMsg="",alert=void 0})}var alert,self=this,payInfo={};$stateParams&&$stateParams.flowType&&(PaymentService.setPaymentFlowType($stateParams.flowType),$stateParams.amount&&$stateParams.orderId&&(PaymentService.setPaymentEntities($stateParams.amount,$stateParams.checksum,$stateParams.orderId),RechargeOrderService.udf.amount=$stateParams.amount)),$scope.selectedIndex=$scope.selectedIndex||0,$scope.paytmOTPSheetStatus=$scope.paytmOTPSheetStatus||!1,$scope.tabs=[{title:"CC/DC",id:"debitcard",active:!0},{title:"Net Banking",id:"netbanking",active:!0},{title:"Paytm",id:"wallet:paytm",active:!0}],$scope.activeTab="",$scope.cardTypeImages=PaymentService.options.cardTypeImages,self.connectionType=RechargeOrderService.getConnectionType(),self.formData=RechargeOrderService.udf,self.payment=PaymentService.payment,self.options=PaymentService.options,self.payment.selectPaymentOption("debitcard"),$scope.activeTab="debitcard",self.payment.amount=RechargeOrderService.udf.amount,self.payment.netPayable=RechargeOrderService.udf.amount,self.formData.response="",self.formData.error={message:"",visible:!1},self.otpResendCountDown=0,self.isOTPSent=self.isOTPSent||!1,self.selectPaymentOption=selectPaymentOption,self.openCouponSheet=openCouponSheet,self.verifyAndPay=verifyAndPay,self.resendOtp=resendOtp,self.closeOTPSheet=closeOTPSheet,self.generateOTPForPaytm=generateOTPForPaytm,self.isOtpCountDownZero=function(){return self.otpResendCountDown<=0},self.resetOTPCountDown=function(){self.otpResendCountDown=30,$interval(function(){self.otpResendCountDown>0&&self.otpResendCountDown--},1e3,30)},$scope.verifyCoupon=verifyCoupon,$scope.keypress=keypress,$scope.resetCoupon=resetCoupon,$scope.resetError=resetError,$scope.resetCoupon(),$scope.$on("initFetchTXNFlow",function(event,data){$scope.paytmOTPSheetStatus||generateOTPForPaytm(data)}),$scope.$on("hidePayTmOTPSheet",function(event,data){$scope.paytmOTPSheetStatus=!1,self.isOTPSent=data.display}),$scope.$watch("errorMsg",function(newValue,oldValue){newValue&&""!==newValue?showAlert(newValue.includes("Invalid OTP")?newValue:newValue+" Please try different payment method !"):$mdDialog.hide()}),$scope.openPaytmBottomSheetDeprecated=function(){$scope.paytmOTPSheetStatus=!0,self.isOTPSent&&($scope.errorMsg="",$mdDialog.show({templateUrl:"components/common/payment-options/wallet/paytm/otp-md-dialog.template.html",controller:function(){this.parentCtrl=self,this.parent=$scope},controllerAs:"ctrl",escapeToClose:!1,clickOutsideToClose:!1,disableParentScroll:!1}).then(function(){document.body.hasAttribute("style")&&document.body.style.touchAction&&(document.body.style.touchAction="auto"),$scope.paytmOTPSheetStatus=!1}).catch(function(){document.body.hasAttribute("style")&&document.body.style.touchAction&&(document.body.style.touchAction="auto"),$scope.paytmOTPSheetStatus=!1}))},$scope.openPaytmBottomSheet=function(){$scope.paytmOTPSheetStatus=!0,self.isOTPSent&&($scope.errorMsg="",$scope.resetPaytmOTPSheetStatus())},self.goToOrders=function(){$state.go("orders")},$scope.resetPaytmOTPSheetStatus=function(){setTimeout(function(){$scope.paytmOTPSheetStatus=!1},28e3)}}angular.module("paymentOptions").component("paymentOptions",{templateUrl:"components/common/payment-options/payment-options-md.template.html",controller:PaymentOptionsController}),PaymentOptionsController.$inject=["$scope","$locale","RechargeDataService","RechargeOrderService","ViewConfigService","PaymentService","$rootScope","$state","$mdBottomSheet","$interval","$mdDialog","$stateParams"]}(),function(){function PaytmWalletController($scope,RechargeDataService,PaymentService,AuthService,$interval,$rootScope,$q,$mdBottomSheet,$mdDialog,RechargeOrderService){function flow(){PaymentService.payment.wallet.paytm.api.getPaytmTokenFromDb().then(function(info){$scope.isPaytmAlreadyLoggedIn=void 0!==PaymentService.payment.wallet.paytm.i.info.TOKEN_DETAILS.PAYTM_TOKEN,$scope.isPaytmAlreadyLoggedIn&&getCurrentBalance()},function(err){$scope.isPaytmAlreadyLoggedIn=!1})}function updateSelectedIndex(selectedIndex){$scope.selectedIndex=selectedIndex,$rootScope.$broadcast("hidePayTmOTPSheet",{disaply:!1})}function generatePaytmOTP(){$q.defer();!self.mobile||self.mobile.toString().length<10||($scope.isPaytmAlreadyLoggedIn=void 0!==PaymentService.payment.wallet.paytm.i.info.TOKEN_DETAILS.PAYTM_TOKEN,PaymentService.payment.wallet.paytm.api.generatePaytmOTP(self.mobile).then(function(response){return"SUCCESS"===response.status?self.isOTPSent=!0:$scope.errorMsg=response.ErrorMsg,response},function(err){}).finally(function(){self.resetOTPCountDown()}))}function verifyPaytmOTP(otp){void 0!==otp&&(self.otp=otp),PaymentService.payment.wallet.paytm.api.verifyPaytmOTP(self.otp,PaymentService.payment.wallet.paytm.i.info.STATE).then(function(response){return $scope.isPaytmAlreadyLoggedIn=void 0!==PaymentService.payment.wallet.paytm.i.info.TOKEN_DETAILS.PAYTM_TOKEN,"SUCCESS"===response.STATUS?getCurrentBalance():$scope.errorMsg=response.ErrorMsg,response})}function getCurrentBalance(){$scope.errorMsg="",PaymentService.payment.wallet.paytm.api.walletInfo(PaymentService.payment.wallet.paytm.i.info.TOKEN_DETAILS.PAYTM_TOKEN).then(function(response){return response?($scope.walletInfo=response,$scope.walletInfo.amount=parseFloat($scope.walletInfo.amount),response.amount=parseFloat(response.amount),$scope.walletInfo.amount<$scope.netPayable?($scope.diffAmount=parseFloat($scope.netPayable-response.amount),getSavedCards()):$scope.diffAmount=0,$scope.isVisible=!0,$scope.errorMsg="",$scope.walletInfo.amount):($scope.errorMsg="Something went wrong while fetching Wallet Balance. Please try with different payment method",void($scope.isVisible=!1))})}function getSavedCards(){$scope.errorMsg="",PaymentService.payment.wallet.paytm.api.getPaytmSavedCards().then(function(response){response&&($scope.savedCards=response)})}function makePayment($event,detail,mode){$event.preventDefault(),$scope.errorMsg="";var data={};"nb"===mode?(data.nbinfo=detail,data.mode="paytm:nb"):"cc"===mode||"dc"===mode?(data.ccinfo=detail,data.mode="paytm:"+mode):"wallet"===mode&&(data.mode="paytm:"+mode),PaymentService.ensureTxnToken(data).then(function(){payInfo={},PaymentService.pay(data).then(function(response){response&&response.hasOwnProperty("ErrorMsg")?$scope.errorMsg=response.ErrorMsg:($scope.errorMsg="",PaymentService.payment.wallet.paytm.i.info.TOKEN_DETAILS.TXN_TOKEN=void 0)})},function(err){$rootScope.$broadcast("initFetchTXNFlow",data)})}function makePaymentViaSC($event,card,cvv){if($event.preventDefault(),$scope.errorMsg="",card&&cvv){var data={};data.scinfo=card,data.scinfo.cvv=cvv,data.mode="paytm:sc",PaymentService.ensureTxnToken(data).then(function(){PaymentService.pay(data).then(function(response){response&&response.hasOwnProperty("ErrorMsg")?$scope.errorMsg=response.ErrorMsg:($scope.errorMsg="",PaymentService.payment.wallet.paytm.i.info.TOKEN_DETAILS.TXN_TOKEN=void 0)})},function(err){$rootScope.$broadcast("initFetchTXNFlow",data)})}}function showAlert(msg){alert=$mdDialog.alert({title:"Attention",textContent:msg,ok:"Close"}),$mdDialog.show(alert).finally(function(){$scope.errorMsg="",alert=void 0})}var alert,self=this;self.sendOTP=generatePaytmOTP,self.resendOtp=generatePaytmOTP,self.verifyOtp=verifyPaytmOTP,self.getCurrentBalance=getCurrentBalance,self.getSavedCards=getSavedCards,self.makePaymentViaSC=makePaymentViaSC,self.makePayment=makePayment,self.connectionType=RechargeOrderService.getConnectionType();var payInfo={};self.mobile=PaymentService.payment.wallet.paytm.i.info.PAYTM_MOBILE||"",self.isOTPSent=self.isOTPSent||!1,$scope.isPaytmAlreadyLoggedIn=void 0!==PaymentService.payment.wallet.paytm.i.info.TOKEN_DETAILS.PAYTM_TOKEN,$scope.walletInfo=PaymentService.payment.wallet.paytm.i.info.WALLET||{},$scope.savedCards=PaymentService.payment.wallet.paytm.i.info.SAVED_CARDS||{},$scope.amount=PaymentService.payment.amount,$scope.netPayable=PaymentService.payment.netPayable,$scope.diffAmount=PaymentService.payment.diffAmount,$scope.cardTypeImages=PaymentService.options.cardTypeImages,$scope.paymentMode=void 0,$scope.errorMsg="",$scope.isVisible=!0,self.balanceFetchCountDown=0,self.otpResendCountDown=0,$scope.selectedIndex=void 0,self.updateSelectedIndex=updateSelectedIndex,self.flow=flow,self.flow(),self.isOtpCountDownZero=function(){return self.otpResendCountDown<=0},self.resetOTPCountDown=function(){self.otpResendCountDown=30,$interval(function(){self.otpResendCountDown>0&&self.otpResendCountDown--},1e3,30)},$scope.isPaytmAlreadyLoggedIn&&getCurrentBalance(),$rootScope.$on("couponApplied",function(event,coupon){$scope.amount=PaymentService.payment.amount,$scope.netPayable=PaymentService.payment.netPayable,"wallet:paytm"===PaymentService.payment.selectedPaymentOption?void 0!==PaymentService.payment.wallet.paytm.i.info.WALLET&&($scope.diffAmount=Math.abs(PaymentService.payment.wallet.paytm.i.info.WALLET.amount-parseFloat(PaymentService.payment.netPayable))):$scope.diffAmount=0,PaymentService.payment.diffAmount=$scope.diffAmount}),$scope.$watch("errorMsg",function(newValue,oldValue){newValue&&""!==newValue?showAlert(newValue+". Please try different payment method !"):$mdDialog.hide()})}angular.module("paytm").component("paytm",{templateUrl:"components/common/payment-options/wallet/paytm/paytm-md.template.html",controller:PaytmWalletController}),PaytmWalletController.$inject=["$scope","RechargeDataService","PaymentService","AuthService","$interval","$rootScope","$q","$mdBottomSheet","$mdDialog","RechargeOrderService"]}(),function(){"use strict";function ProgressBarCtrl($scope,vcs,$rootScope){$scope.vm=vcs.vm,$rootScope.$on("http.progress",function(event,data){vcs.vm.count>=0&&(vcs.vm.count+=data.status?1:-1,vcs.vm.count<0&&(vcs.vm.count=0)),$scope.vm.activated=vcs.vm.count>0})}angular.module("progressBar").component("progressBar",{templateUrl:"components/common/progress-bar/progress-bar-md.template.html",controller:ProgressBarCtrl}),ProgressBarCtrl.$inject=["$scope","ViewConfigService","$rootScope"]}(),function(){function seoContCompCtrl($scope,$rootScope,$state,$stateParams,$window,hsOrder,HODProvider,$mdToast,metaService,AuthService,SmoothScroll,ApiService,$sce){var self=this;self.gotData=!1,self.seoPageRenderVars={tabs:[],activeTab:0,metaData:$rootScope.metaData,nearby:void 0,custReviews:void 0,recentBookings:void 0,professionals:void 0,otherServices:void 0,vendorPage:0,blogs:void 0,ratings:["dist/img/vendor-profile/star-rating/0stars0.png","dist/img/vendor-profile/star-rating/1stars1.png","dist/img/vendor-profile/star-rating/2stars2.png","dist/img/vendor-profile/star-rating/3stars3.png","dist/img/vendor-profile/star-rating/4stars4.png","dist/img/vendor-profile/star-rating/5stars5.png"],galleryConf:{thumbnails:!0,thumbSize:120,inline:!1,bubbles:!0,imgBubbles:!0,bgClose:!1,methods:{}},conf:{imgAnim:"fadeup"}},$rootScope.$on("gotMetaData",function(){self.seoPageRenderVars.metaData=$rootScope.metaData,self.extractSeoData()}),self.changeSerActivetab=function(tab){SmoothScroll.scrollTo(tab)},self.extractSeoData=function(){if(self.seoPageRenderVars.tabs=[],self.seoPageRenderVars.metaData){if(self.gotData=!0,self.seoPageRenderVars.metaData.PAGE_CONTENT.professionals&&self.seoPageRenderVars.metaData.PAGE_CONTENT.professionals.status&&(self.seoPageRenderVars.tabs.push("Professionals"),self.seoPageRenderVars.professionals=self.seoPageRenderVars.metaData.PAGE_CONTENT.professionals,self.seoPageRenderVars.professionals.nextPage="yes"==self.seoPageRenderVars.metaData.PAGE_CONTENT.professionals.next_page,angular.forEach(self.seoPageRenderVars.professionals.vendors,function(vendor){if(vendor.galleryPics=[],vendor.gallery_pics&&vendor.gallery_pics.length){var counter=1;angular.forEach(vendor.gallery_pics,function(pic){var picObj={id:counter,url:pic,thumbUrl:pic,bubbleUrl:pic};vendor.galleryPics.push(picObj),counter++})}})),self.seoPageRenderVars.metaData.PAGE_CONTENT.reviews&&self.seoPageRenderVars.metaData.PAGE_CONTENT.reviews.status){self.seoPageRenderVars.tabs.push("Reviews"),self.seoPageRenderVars.custReviews=self.seoPageRenderVars.metaData.PAGE_CONTENT.reviews;var custRating=Math.floor(self.seoPageRenderVars.metaData.PAGE_CONTENT.reviews.cat_avg_rating);self.seoPageRenderVars.custReviews.stars=self.seoPageRenderVars.ratings[custRating],angular.forEach(self.seoPageRenderVars.custReviews.reviews,function(value,key){var rating=Math.floor(value.rating);self.seoPageRenderVars.custReviews.reviews[key].stars=self.seoPageRenderVars.ratings[rating]}),self.seoPageRenderVars.custReviews.is_hidden=!0}self.seoPageRenderVars.metaData.PAGE_CONTENT.recent_bookings&&self.seoPageRenderVars.metaData.PAGE_CONTENT.recent_bookings.status&&(self.seoPageRenderVars.recentBookings=self.seoPageRenderVars.metaData.PAGE_CONTENT.recent_bookings),self.seoPageRenderVars.metaData.PAGE_CONTENT.other_services&&self.seoPageRenderVars.metaData.PAGE_CONTENT.other_services.status&&(self.seoPageRenderVars.otherServices=self.seoPageRenderVars.metaData.PAGE_CONTENT.other_services,angular.forEach(self.seoPageRenderVars.otherServices.categories,function(service,index){""===service.cover_image&&(self.seoPageRenderVars.otherServices.categories[index].cover_image="dist/img/default/default_banner.png")})),self.seoPageRenderVars.metaData.PAGE_CONTENT.blog&&self.seoPageRenderVars.metaData.PAGE_CONTENT.blog.status&&(self.seoPageRenderVars.tabs.push("Blogs"),self.seoPageRenderVars.blogs=self.seoPageRenderVars.metaData.PAGE_CONTENT.blog),self.seoPageRenderVars.metaData.FOOTER.PAGE_FOOTER_CONTENT&&self.seoPageRenderVars.metaData.FOOTER.PAGE_FOOTER_CONTENT.length&&self.seoPageRenderVars.tabs.push("Hiring"),self.seoPageRenderVars.metaData.FOOTER.PAGE_FOOTER_FAQ&&self.seoPageRenderVars.metaData.FOOTER.PAGE_FOOTER_FAQ.length&&self.seoPageRenderVars.tabs.push("FAQs")}},self.extractSeoData(),self.loadMoreVendorData=function(page){self.seoPageRenderVars.vendorPage=page,metaService.setSEOParams("page",page),metaService.fetchSeoData().then(function(res){$rootScope.metaData=res,self.seoPageRenderVars.metaData=res,self.extractSeoData(),SmoothScroll.scrollTo("Professionals")})},self.intermediateOtherServiceRedirection=function(item){200!=hsOrder.getHSOData("odrFlow")&&hsOrder.setHSOData("isNormalFlow",!0),item.is_hyperlocal?hsOrder.setHSOData("odrFlow",200):hsOrder.setHSOData("odrFlow",13),hsOrder.orderFlowRedirection(2,2,item)},self.parseHTML=function(htmlString){return $sce.trustAsHtml(htmlString)}}angular.module("homeModule").component("seoContentComponent",{templateUrl:"components/common/seo-content-component/seo-content-component.temp.html",bindings:{catName:"="},controller:seoContCompCtrl}),seoContCompCtrl.$inject=["$scope","$rootScope","$state","$stateParams","$window","hsOrder","HODProvider","$mdToast","metaService","AuthService","SmoothScroll","ApiService","$sce"]}(),function(){function contactSummaryController($state,$window,$mdDialog,$mdToast,hsOrder,HODProvider,AuthService){function renderStr(str){return void 0===str?"":str}var self=this;self.pageLoadVars={enquiry_id:hsOrder.getHSOData("enquiryId"),user_id:AuthService.getCurrentUser().user_id,custom_message:""},self.pageRenderVars={tabs:["Summary","Chats"],activeTab:0,gotData:!1,dataObject:void 0},HODProvider.contactSumScn(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.gotData=!0,self.pageRenderVars.dataObject=response.data):response.status}),self.updateMessage=function(){""!=self.pageLoadVars.custom_message&&HODProvider.conSumScnUpdate(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?$mdToast.showSimple(hsOrder.getMessage(73)):response.status})},self.viewProfile=function(){var params={vendorId:self.pageRenderVars.dataObject.vendor_id,catId:self.pageRenderVars.dataObject.cat_id,isOrganic:!1,service_city_slug:renderStr(self.pageRenderVars.dataObject.service_city_slug),cat_slug:renderStr(self.pageRenderVars.dataObject.catalog_slug),isOrderPlaced:!0};hsOrder.setHSOData("venProMode",!1),
hsOrder.setHSOData("vendorId",self.pageRenderVars.dataObject.vendor_id),hsOrder.setHSOData("catId",self.pageRenderVars.dataObject.cat_id),$state.go("vendor-profile",params)},self.getMore=function(){hsOrder.setHSOData("vlContactObject",JSON.parse(self.pageRenderVars.dataObject.suggested_vendor_data)),$state.go("vendor-list")},self.navigateHome=function(){hsOrder.navigateHome()},self.changeTab=function(index){self.pageRenderVars.activeTab=index},self.goBack=function(){$window.history.back()}}angular.module("hsOrderModule").component("contactSummary",{templateUrl:"components/contact-summary/contact-summary.temp.html",controller:contactSummaryController}),contactSummaryController.$inject=["$state","$window","$mdDialog","$mdToast","hsOrder","HODProvider","AuthService"]}(),function(){function contactCtrl($scope){}angular.module("homeModule").component("contact",{templateUrl:"components/contact/contact.template.html",controller:contactCtrl}),contactCtrl.$inject=["$scope"]}(),function(){"use strict";function CCController($window,$mdToast,hsOrder,HODProvider,$mdDialog){function renderStr(str){return void 0===str?"":str}var self=this;self.gotData=!1,self.customCatalogData=void 0,self.packagesSelected=[],self.activeTab=0,self.totals={quantity:0,amount:0},self.pageLoadVars={vendor_id:hsOrder.getHSOData("vendorId"),vendor_name:hsOrder.getHSOData("vendorName")||"Vendor Name",item_id:hsOrder.getHSOData("itemId"),cat_id:hsOrder.getHSOData("catId")},HODProvider.custCatData(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.gotData=!0,self.customCatalogData=response.data.data,self.pageLoadVars.vendor_name=response.data.vendor_name,self.updatePurchase()):response.status}),self.newTabSelection=function(index){self.activeTab=index},self.updateOrder=function(operation,index,item){var quantity;operation?item.quantity<item.min_value?quantity=item.min_value:item.quantity===item.max_value?(quantity=item.max_value,$mdToast.showSimple(hsOrder.getMessage(64))):quantity=item.quantity+1:item.quantity===item.min_value?(quantity=0,$mdToast.showSimple(hsOrder.getMessage(65))):quantity=item.quantity>item.max_value?item.max_value:item.quantity-1,self.customCatalogData[self.activeTab].card[index].quantity=quantity,self.updatePurchase()},self.updatePurchase=function(){var totalQuantity=0,totalPrice=0;angular.forEach(self.customCatalogData,function(attribute){angular.forEach(attribute.card,function(option){option.quantity&&(totalQuantity+=option.quantity,totalPrice+=option.quantity*option.price)})}),self.totals.quantity=totalQuantity,self.totals.amount=totalPrice},self.proceedBook=function(){self.totals.quantity?(hsOrder.customCatalogHandler(self.customCatalogData),hsOrder.setHSOData("finalPrice",self.totals.amount)):$mdToast.showSimple(hsOrder.getMessage(74))},self.openVendorDetails=function(index){hsOrder.setHSOData("venProMode",!1),$state.go("vendor-profile",{isOrganic:!1,service_city_slug:renderStr(self.pageLoadVars.service_city_slug),cat_slug:renderStr(self.pageLoadVars.catalog_slug)})}}angular.module("hsOrderModule").component("customCatalog",{templateUrl:"components/custom-catalog/custom-catalog.temp.html",controller:CCController}),CCController.$inject=["$window","$mdToast","hsOrder","HODProvider","$mdDialog"]}(),function(){function expServController($state,$rootScope,$stateParams,hsOrder,HODProvider,$scope,metaService,$window,$mdToast,ApiService){function getAllServices(){HODProvider.getAllServ(self.pageLoadVars).then(function(response){if("HTTP_SUCCESS_DATA"==response.status){self.services=[],response.data.background_image_path&&(self.backgroundImage=response.data.background_image_path);var catCountTemp=0;angular.forEach(response.data.main_cat_array,function(value,key){value.sub_cat_array.length&&(self.tabs.push(value.main_cat_name),self.services[catCountTemp+1]=value,catCountTemp++)}),response.data.landing_page?hsOrder.setHSOData("landingDefault",!0):hsOrder.setHSOData("landingDefault",!1),self.setDataArray(),self.organicSourceHandler(),self.gotServices=!0}else response.status,$mdToast.showSimple(hsOrder.getMessage(33)),window.location=ApiService.get().baseAppPath+"page-not-found";self.countSubOptions()})}var self=this;self.gotServices=!1,self.services=void 0,self.activeTab=0,self.tabs=["All Categories"],self.dataArray=void 0,self.subCatDataArray=void 0,self.backgroundImage=ApiService.get().staticImagePath+"dist/img/default/default_banner.png",self.pageLoadVars={city_id:hsOrder.getHSOData("cityId"),pincode:hsOrder.getHSOData("pinCode")},self.citySlug=$stateParams.citySlug,self.localitySlug=$stateParams.localitySlug||void 0,self.cityName=self.citySlug.charAt(0).toUpperCase()+self.citySlug.slice(1),self.sessionCity=hsOrder.getHSOData("citySlug")?hsOrder.getHSOData("citySlug"):"",self.sessionLocal=hsOrder.getHSOData("localitySlug")?hsOrder.getHSOData("localitySlug"):void 0,self.differ=function(){return(!self.localitySlug||!self.sessionLocal||self.sessionCity.toLowerCase()!==self.citySlug||self.sessionLocal.toLowerCase()!==self.localitySlug)&&!(!self.localitySlug&&!self.sessionLocal&&self.sessionCity.toLowerCase()===self.citySlug)}(),self.localitySlug?hsOrder.setHSOData("localitySlug",self.localitySlug):hsOrder.setHSOData("localitySlug",void 0),hsOrder.clearHSOData(hsOrder.clearDataVars),self.reset=function(){if(hsOrder.getHSOData("citySlug")!=$stateParams.citySlug){var clearDataVars=["cityId","cityName","citySlug","pinCode","locVerified"];hsOrder.clearHSOData(clearDataVars),$rootScope.$broadcast("userLocationDataUpdated")}},hsOrder.checkLocationDependency().then(function(response){response?self.differ||200==hsOrder.getHSOData("odrFlow")?(self.reset(),self.pageLoadVars={city_slug:self.citySlug,locality_slug:self.localitySlug},getAllServices()):(self.pageLoadVars={city_id:hsOrder.getHSOData("cityId"),pincode:hsOrder.getHSOData("pinCode"),city_slug:self.citySlug},self.localitySlug&&(self.pageLoadVars.locality_slug=self.localitySlug),getAllServices()):self.citySlug?(self.pageLoadVars={city_slug:self.citySlug,locality_slug:self.localitySlug},getAllServices()):window.location=ApiService.get().baseAppPath+"page-not-found"}),self.countSubOptions=function(){angular.forEach(self.services,function(category,catKey){angular.forEach(category.sub_cat_array,function(sub_cat,scKey){this[catKey].sub_cat_array[scKey].option_count=sub_cat.sub_option.length},self.services)})},self.submitCategory=function(cat){if(0===cat.option_count){self.redirect(cat,void 0)}},self.changeTab=function(index){self.activeTab=index,self.setDataArray()},self.setDataArray=function(){-1!==window.location.search.search("utm_")&&hsOrder.setHSOData("utmQuery",window.location.href),self.dataArray=[],0==self.activeTab?self.dataArray=self.services:self.dataArray.push(self.services[self.activeTab])},self.redirect=function(cat,subCat){if(subCat){var temp={attr_id:subCat.attr_id,option_id:subCat.option_id};angular.extend(cat,temp)}cat.is_hyperlocal?hsOrder.setHSOData("odrFlow",200):hsOrder.setHSOData("odrFlow",13),hsOrder.orderFlowRedirection(2,2,cat)},self.organicSourceHandler=function(){if(self.differ){hsOrder.setHSOData("odrFlow",200);var meta_city_id=metaService.getMetadata(baseConstants.METADATA.KEY.BASIC.NAME,baseConstants.METADATA.BASIC.CITY_ID.NAME);hsOrder.getHSOData("cityId")!=meta_city_id&&(hsOrder.setHSOData("cityId",meta_city_id),hsOrder.setHSOData("cityName",metaService.getMetadata(baseConstants.METADATA.KEY.BASIC.NAME,baseConstants.METADATA.BASIC.CITY_NAME.NAME)),hsOrder.setHSOData("citySlug",metaService.getMetadata(baseConstants.METADATA.KEY.BASIC.NAME,baseConstants.METADATA.BASIC.CITY_SLUG.NAME)),hsOrder.clearHSOData(["locVerified","latitude","longitude","pinCode","localitySlug","formattedAddress","placeId"]),$rootScope.$broadcast("userLocationDataUpdated"));var locality_slug=metaService.getMetadata(baseConstants.METADATA.KEY.BASIC.NAME,baseConstants.METADATA.BASIC.LOCALITY_SLUG.NAME),locality_pincode=metaService.getMetadata(baseConstants.METADATA.KEY.BASIC.NAME,baseConstants.METADATA.BASIC.LOCALITY_PINCODE.NAME);locality_slug&&locality_pincode&&""!==locality_pincode&&(hsOrder.setHSOData("locVerified",!0),hsOrder.setHSOData("pinCode",locality_pincode),hsOrder.setHSOData("localitySlug",locality_slug),hsOrder.setHSOData("latitude",metaService.getMetadata(baseConstants.METADATA.KEY.BASIC.NAME,baseConstants.METADATA.BASIC.LOCALITY_LATITUDE.NAME)),hsOrder.setHSOData("longitude",metaService.getMetadata(baseConstants.METADATA.KEY.BASIC.NAME,baseConstants.METADATA.BASIC.LOCALITY_LONGITUDE.NAME)),hsOrder.clearHSOData(["formattedAddress","placeId"]),$rootScope.$broadcast("userLocationDataUpdated"))}},$scope.displaySchema=metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.KEY.SCHEMA.NAME)||!1,$scope.jsonId={"@context":"http://schema.org","@type":"Place",geo:{"@type":"GeoCoordinates",latitude:metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.HEADER.SCHEMA.LATITUDE.NAME),longitude:metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.HEADER.SCHEMA.LONGITUDE.NAME)},url:metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.HEADER.CANONICAL_URL.NAME),name:metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.HEADER.TITLE.NAME),description:metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.HEADER.DESC.NAME)},self.seoPageRenderVars={metaData:$rootScope.metaData},$rootScope.$on("gotMetaData",function(){self.seoPageRenderVars.metaData=$rootScope.metaData}),$rootScope.$on("userLocationDataUpdated",function(){var localitySlug=hsOrder.getHSOData("citySlug")||!1;if(localitySlug&&window.location.href.includes("/city/")){var option={id:3};hsOrder.orderFlowRedirection(3,2,option)}})}angular.module("searchModule").component("exploreServices",{templateUrl:"components/explore-services/explore.temp.html",controller:expServController}),expServController.$inject=["$state","$rootScope","$stateParams","hsOrder","HODProvider","$scope","metaService","$window","$mdToast","ApiService"]}(),function(){function faqsCtrl($state,$window,hsOrder,HODProvider){var self=this;self.pageRenderVars={gotData:!1,dataObject:void 0,activeTab:0},self.tabs=["All Categories"],self.dataArray=void 0,self.activeTab=0,self.keywordLen=0,self.gotSearchResult=!1,self.searchResult=void 0,self.pageLoadVars={keyword:""},self.getFaq=function(){self.gotSearchResult=!1,HODProvider.getFAQData(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.gotData=!0,self.pageRenderVars.dataObject=response.data.data,angular.forEach(self.pageRenderVars.dataObject,function(value,key){self.tabs.push(value.faq_cat_name)}),self.setDataArray()):response.status})},self.getFaq(),self.newTabSelection=function(index){self.pageRenderVars.activeTab=index},self.search=function(){self.pageLoadVars.keyword?self.keywordLen=self.pageLoadVars.keyword.length:self.getFaq(),self.keywordLen>=3&&(self.pageRenderVars.gotData=!1,HODProvider.getFAQSearchData(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.gotSearchResult=!0,self.searchResult=response.data.card):response.status}))},self.changeTab=function(index){self.activeTab=index,self.gotSearchResult=!1,self.pageLoadVars.keyword="",self.setDataArray()},self.setDataArray=function(){self.dataArray=[],0==self.activeTab?self.dataArray=self.pageRenderVars.dataObject:self.dataArray.push(self.pageRenderVars.dataObject[self.activeTab-1]),self.dataArray.length&&(self.pageRenderVars.gotData=!0)}}angular.module("hsOrderModule").component("faqs",{templateUrl:"components/faqs/faqs.temp.html",controller:faqsCtrl}),faqsCtrl.$inject=["$state","$window","hsOrder","HODProvider"]}(),function(){function footerCtrl($scope,$rootScope,hsOrder,HODProvider,ApiService){var self=this;self.isCityAvail=!1,self.cities=void 0,self.baseAppPath=ApiService.get().baseAppPath,self.footerMarginClass=!1,self.currentYear=date=new Date,self.gotoExploreService=function(){var option={id:3};hsOrder.orderFlowRedirection(3,1,option)},$rootScope.$on("footerMargin",function(evenr,args){self.footerMarginClass=args.footerMargin}),HODProvider.getCities().then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.isCityAvail=!0,self.cities=response.data.cities):response.status})}angular.module("homeModule").component("footer",{templateUrl:"components/footer/footer.template.html",controller:footerCtrl}),footerCtrl.$inject=["$scope","$rootScope","hsOrder","HODProvider","ApiService"]}(),function(){function headerCtrl($scope,$rootScope,$state,hsOrder,AuthService,HODProvider,$mdToast,IntegrationService){var originatorEv,self=this;self.pageLoadVars={user_id:AuthService.getCurrentUser().user_id,page:0},self.headerData={location:"Location ?",locationTitle:""},self.pageRenderVars={profilePic:AuthService.getCurrentUser().profile_pic||"dist/img/default/default_profile.png",userName:AuthService.getCurrentUser().full_name,gotData:!1,completeResp:void 0,notifications:[],next:!1,swapHeader:!0},self.openNotification=function($mdMenu,ev){originatorEv=ev,$mdMenu.open(ev)},$rootScope.$on("userLocationDataUpdated",function(){if(hsOrder.getHSOData("cityName")&&hsOrder.getHSOData("pinCode"))self.headerData.location=hsOrder.getHSOData("cityName"),self.headerData.locationTitle=hsOrder.getHSOData("cityName")+" - "+hsOrder.getHSOData("pinCode");else{var cityName=hsOrder.getHSOData("cityName");self.headerData.location=cityName||"Location ?",self.headerData.locationTitle=""}}),$rootScope.$on("userLoggedIn",function(){self.pageRenderVars.profilePic=AuthService.getCurrentUser().profile_pic}),$rootScope.$on("logout",function(){self.pageRenderVars.profilePic="dist/img/default/default_profile.png"}),$rootScope.$on("userProPicUpdated",function(){self.pageRenderVars.profilePic=AuthService.getCurrentUser().profile_pic}),$rootScope.$on("swapHeader",function(evenr,args){self.pageRenderVars.swapHeader=args.headerSwap}),$rootScope.$on("stateChangeSuccess",function(){$rootScope.toState&&("recharge.mobile"==$rootScope.toState.name||"recharge.dth"==$rootScope.toState.name||"recharge.electricity"==$rootScope.toState.name?$scope.currentNavItem="recharge.mobile":$scope.currentNavItem=$rootScope.toState.name)}),self.redirectSearchServices=function(){var item={options:"yes"};hsOrder.setHSOData("odrFlow",11),hsOrder.orderFlowRedirection(4,2,item)},self.openloginPopup=function(){$state.go("my-account.mywallet")},self.openlocationPopup=function(){"requirement-screen"!=$state.current.name&&"order-review"!=$state.current.name&&"quote-review"!=$state.current.name&&IntegrationService.openLocationSearchModal()},$scope.goto=function(stateName,params){"none"!=stateName&&(params||(params={}),$state.go(stateName,params))},self.gotoExploreService=function(){var option={id:3};hsOrder.orderFlowRedirection(3,2,option)},self.extractData=function(){0!==self.pageRenderVars.completeResp.notification.length&&angular.forEach(self.pageRenderVars.completeResp.notification,function(value){self.pageRenderVars.notifications.push(value)}),self.pageRenderVars.notifications.length,self.pageLoadVars.page=self.pageRenderVars.completeResp.page,self.pageRenderVars.next="yes"===self.pageRenderVars.completeResp.next_page},self.loadData=function(){HODProvider.getNotifications(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.gotData=!0,self.pageRenderVars.completeResp=response.data,self.extractData()):response.status})},self.loadData(),self.clear=function(){HODProvider.clrNotifications(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.completeResp=void 0,self.pageRenderVars.notifications=[],$mdToast.showSimple(hsOrder.getMessage(55))):response.status})},function(){var locSet=hsOrder.getHSOData("locVerified"),cityName=hsOrder.getHSOData("cityName")||"";if(!0===locSet){var pinCode=hsOrder.getHSOData("pinCode");self.headerData.location=cityName,self.headerData.locationTitle=cityName+" - "+pinCode}else self.headerData.location=cityName||"Location ?",self.headerData.locationTitle=""}()}angular.module("homeModule").component("header",{templateUrl:"components/header/header.template.html",controller:headerCtrl}),headerCtrl.$inject=["$scope","$rootScope","$state","hsOrder","AuthService","HODProvider","$mdToast","IntegrationService"]}(),function(){function homeActController($rootScope,$mdToast,$state,HODProvider,hsOrder,AuthService,IntegrationService){function renderStr(str){return void 0===str?"":str}var self=this;self.activities=void 0,self.activitiesAvail=!1,self.activityLoadVars={city_id:hsOrder.getHSOData("cityId")||1,type:2,cat_id:"",vendor_id:""},$rootScope.$on("userLoggedIn",function(){self.refreshUsersData()}),self.refreshUsersData=function(){self.pageLoadVars={isLoggedIn:AuthService.isLoggedIn()},self.pageRenderVars={profilePic:AuthService.getCurrentUser().profile_pic||"dist/img/default/default_profile_grey.png",userName:AuthService.getCurrentUser().full_name,email:AuthService.getCurrentUser().email}},self.refreshUsersData(),HODProvider.getActivities(self.activityLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(response.data.activities.length?self.activitiesAvail=!0:(self.activitiesAvail=!1,$mdToast.showSimple(hsOrder.getMessage(23))),self.activities=response.data.activities):(response.status,$mdToast.showSimple(hsOrder.getMessage(31)))}),self.login=function(){IntegrationService.openLoginModal()},self.downloadApp=function(){if(AuthService.isLoggedIn()){var params={user_id:AuthService.getCurrentUser().user_id,mobile:AuthService.getCurrentUser().mobile};IntegrationService.downloadApp(params)}else IntegrationService.openLoginModal()},self.openVendorDetails=function(activityData){hsOrder.clearHSOData(hsOrder.clearDataVars),hsOrder.setHSOData("odrFlow",16),hsOrder.setHSOData("isNormalFlow",!0),hsOrder.setHSOData("vendorId",activityData.vendor_id),hsOrder.setHSOData("itemId",activityData.item_id),hsOrder.setHSOData("venProMode",!0);var serviceCitySlug=renderStr(activityData.service_city_slug),catSlug=renderStr(activityData.catalog_slug);$state.go("vendor-profile",{isOrganic:!0,service_city_slug:serviceCitySlug,cat_slug:catSlug})}}angular.module("homeModule").component("homeActComponent",{templateUrl:"components/home-activities/home-act.temp.html",controller:homeActController}),homeActController.$inject=["$rootScope","$mdToast","$state","HODProvider","hsOrder","AuthService","IntegrationService"]}(),function(){function homeExpController($rootScope,$window,$state,hsOrder,HODProvider,$mdDialog,$mdToast){var self=this;self.cauroselData=void 0,self.isExpServAvail=!1,self.expServices={},self.isPopServAvail=!1,self.popServices={},self.isBusTradeAvail=!1,self.businessTrades={},self.activitiesAvail=!1,self.activities={},self.isAboutAvail=!1,self.aboutCompany={},self.bannerParams={city_id:hsOrder.getHSOData("cityId")?hsOrder.getHSOData("cityId"):"",pincode:hsOrder.getHSOData("pinCode")?hsOrder.getHSOData("pinCode"):"",type:1,cat_id:"",vendor_id:""},self.carousel={slides:[]},self.playerVars={rel:0,showinfo:0,modestbranding:1},$rootScope.$on("userLocationDataUpdated",function(){self.bannerParams.city_id=hsOrder.getHSOData("cityId")?hsOrder.getHSOData("cityId"):"",self.bannerParams.pincode=hsOrder.getHSOData("pinCode")?hsOrder.getHSOData("pinCode"):"",self.loadHomeScnData()}),self.loadHomeScnData=function(){HODProvider.homeScnData(self.bannerParams).then(function(response){"HTTP_SUCCESS_DATA"==response.status?self.extractData(response):(response.status,$mdToast.showSimple(hsOrder.getMessage(31)))})},self.extractData=function(response){response.data.services&&response.data.services.length&&(self.isExpServAvail=!0,self.expServices.services=response.data.services),response.data.categories&&response.data.categories.length&&(self.isPopServAvail=!0,self.popServices.categories=response.data.categories),response.data.activities&&response.data.activities.length?(self.activitiesAvail=!0,self.activities=response.data.activities):self.activitiesAvail=!1,response.data.about&&response.data.about.about_data&&response.data.about.about_data.length&&(self.isAboutAvail=!0,self.aboutCompany.about=response.data.about),response.data.video&&(self.aboutCompany.video=response.data.video),response.data.banners&&response.data.banners.length&&(self.cauroselData=response.data.banners),response.data.landing_page?hsOrder.setHSOData("landingDefault",!0):hsOrder.setHSOData("landingDefault",!1),self.extractBanner(response.status)},self.loadHomeScnData(),self.extractBanner=function(status){if(self.carousel.slides=[],"HTTP_SUCCESS_DATA"===status&&self.cauroselData)self.carousel.slides=self.cauroselData;else{var slideObject={banner_id:"",banner_title:"Bro4u - Default_Banner",image_name:"dist/img/default/default_banner.png",option_id:"",cat_id:"",city_ids:"",vendor_id:"0",banner_type:0,cat_model:null,requirement_flow:"normal",coming_soon:!1,cat_model_code:0,req_flow_code:0};self.carousel.slides.push(slideObject)}},self.gotoPage=function(state){$state.go(state)},self.popServiceDestiny=function(item){hsOrder.setHSOData("odrFlow",11),hsOrder.orderFlowRedirection(2,2,item)},self.gotoExploreService=function(id){var option={id:id};switch(id){case 0:$state.go("recharge.mobile");break;case 1:$state.go("recharge.dth");break;case 2:$state.go("recharge.electricity");break;default:hsOrder.orderFlowRedirection(3,2,option)}},self.openVideoDialog=function(video){$mdDialog.show({templateUrl:"components/popup/videopopup.template.html",escapeToClose:!0,clickOutsideToClose:!0,controller:function(){},controllerAs:"ctrl",bindToController:!0,locals:{homeVideoYTID:video,playerVars:{rel:0,showinfo:0,modestbranding:1},closeDialog:function(){$mdDialog.hide()}}})}}angular.module("homeModule").component("homeExpComponent",{templateUrl:"components/home-explore/home-exp.temp.html",controller:homeExpController}),homeExpController.$inject=["$rootScope","$window","$state","hsOrder","HODProvider","$mdDialog","$mdToast"]}(),function(){function homeController($state,hsOrder,$mdDialog){hsOrder.clearHSOData(hsOrder.clearDataVars);var self=this;self.homePageData={location:"Select Your Location",topNavVal:"explore"},self.navigate=function(address){self.homePageData.topNavVal="explore"==address?"explore":"activities"},self.gotoPage=function(state){$state.go(state)},self.redirectSearchServices=function(){var item={options:"yes"};hsOrder.setHSOData("odrFlow",11),hsOrder.orderFlowRedirection(2,2,item)},function(){if(!0===hsOrder.getHSOData("locVerified")){var cityName=hsOrder.getHSOData("cityName"),pinCode=hsOrder.getHSOData("pinCode");self.homePageData.location=cityName+", "+pinCode}else self.homePageData.location="Select Your Location"}()}angular.module("homeModule").component("homeComponent",{templateUrl:"components/home/home-md.template.html",controller:homeController}),homeController.$inject=["$state","hsOrder","$mdDialog"]}(),function(){function homerechargeCtrl($state,RechargeOrderService){var self=this;self.formData=RechargeOrderService.udf,self.goToRecharge=function(recharge_section){var params={connType:self.formData.connectionType};switch(recharge_section){case"mobile":$state.go("recharge.mobile",params);break;case"dth":$state.go("recharge.dth");break;case"electricity":$state.go("recharge.electricity")}}}angular.module("homeModule").component("homerecharge",{templateUrl:"components/homerecharge/homerecharge.template.html",controller:homerechargeCtrl}),homerechargeCtrl.$inject=["$state","RechargeOrderService"]}(),function(){function howworksCtrl($scope){}angular.module("howworks").component("howworks",{templateUrl:"components/howworks/howworks.template.html",controller:howworksCtrl}),howworksCtrl.$inject=["$scope"]}(),function(){function infopopupCtrl($scope){}angular.module("infopopup").component("infopopup",{templateUrl:"components/infopopup/infopopup.template.html",controller:infopopupCtrl}),infopopupCtrl.$inject=["$scope"]}(),function(){function intermediateLandingController($window,hsOrder,HODProvider,AuthService,$mdToast,SmoothScroll,DataLayer,$interval,$mdDialog,PriceChartGalleryService,$rootScope,$scope,DateHelper){var self=this;self.gotReqData=!1,self.selectCityType=void 0,self.requirementData=void 0,self.timeSlots=void 0,self.landigFormShow=!0,self.fixedBarVisibility=!1,self.otpResendCountDown=0,self.relatedCatWorks=$rootScope.metaData.BASIC.related_services,self.isRelatedCatWorks=!!self.relatedCatWorks.length,self.isAnimation=!1,self.divTabIndex=self.isRelatedCatWorks?1:2,self.landingFormRenders={activeTab:0,minDate:DateHelper.getCurrentDate(),otpEntered:"",loginState:"NO_OTP",user_logged_in:!1,otpSent:!1,is_loc_req_form:!0,formattedAddress:""},self.goBack=function(){$window.history.back()},self.constPageMap="#Page=",self.preventGoBackHandler=function(newPageIndex){if(2==self.intScn.landingScreenType){var currUrl=$window.location.href;newPageIndex=newPageIndex>3?self.relatedCatWorks.length?0:1:newPageIndex;var hashedSplit=currUrl.split("#");hashedSplit[1]&&hashedSplit[1].length!=self.constPageMap.length&&(currUrl=hashedSplit[0]);var currUrlArr=currUrl.split(self.constPageMap);if(currUrl[1]&&currUrl[1]==newPageIndex)return!1;var newUrl=currUrlArr[0]+self.constPageMap+newPageIndex;$window.history.replaceState({key:newPageIndex,status:"New State "+newUrl},newUrl),$window.location.assign(newUrl)}},$scope.landingModernPage={activeTab:$window.landingPageActiveScreen?$window.landingPageActiveScreen:self.relatedCatWorks.length?0:1,0:{formalName:"relateCategory",headText:"Choose Service",btnText:"Continue"},1:{formalName:"landingFormOne",headText:$rootScope.metaData.BASIC.cat_name,btnText:"Continue"},2:{formalName:"landingFormSecond",headText:"Provide Details",btnText:"Book Now"},3:{headText:"Review Your Request",btnText:"confirm Booking"},vadlidatedFormIds:[0]},$window.landingPageActiveScreen&&delete $window.landingPageActiveScreen,$scope.$watch("landingModernPage.activeTab",function(newValue,oldValue){self.preventGoBackHandler(newValue)},!0),$window.addEventListener("hashchange",function(event){var winLoc=$window.location.href,currUrl=winLoc.split(self.constPageMap);if(currUrl[1]&&currUrl[1]<=3){if(0==currUrl[1]&&!self.relatedCatWorks.length||2==currUrl[1]&&!self.serviceDetailsForm.$valid)return $scope.landingModernPage.activeTab=1,$scope.$apply(),self.preventGoBackHandler($scope.landingModernPage.activeTab);$scope.landingModernPage.vadlidatedFormIds.includes(parseInt(currUrl[1]))&&($scope.landingModernPage.activeTab=currUrl[1])}else currUrl[1]&&currUrl[1]>3&&($scope.landingModernPage.activeTab=self.relatedCatWorks.length?0:1,$scope.$apply(),self.preventGoBackHandler($scope.landingModernPage.activeTab))}),"public"===AuthService.getCurrentUser().role.title?self.landingFormRenders.user_logged_in=!1:(self.landingFormRenders.user_logged_in=!0,self.landingFormRenders.otpSent=!0),self.googlePlacesOptions={componentRestrictions:{country:"in"}},self.limitCity="",hsOrder.getHSOData("cityName")&&(self.limitCity=hsOrder.getHSOData("cityName")+", "),self.googlePlacesObject=hsOrder.getHSOData("formattedAddress")||"",self.landingPageReq={},self.landingFormData={user_id:AuthService.getCurrentUser().user_id,email:AuthService.getCurrentUser().email,mobile:AuthService.getCurrentUser().mobile,customer_name:AuthService.getCurrentUser().full_name,name:AuthService.getCurrentUser().full_name||"",addr_mobile:AuthService.getCurrentUser().mobile,addr_email:AuthService.getCurrentUser().email,option_id:hsOrder.getHSOData("optionId")||"",payment_status:2,addr_lat:"",addr_lng:"",locality:"",address:"",address_id:"",service_address:"",street_name:"",type:"",default_address:!1,is_lp:!0,custom_message:"",vendor_id:"",page:0,consider_vid:!1,ref_source:window.BRO4U_HTTP_REFRRER},self.lastOrderAddressSelection=function(isTakeAddress){var parentCtrl=self.intScn,lastOdrDetails=!!self.intScn.intermediateData.last_order_details&&self.intScn.intermediateData.last_order_details,addressData=lastOdrDetails.address_array;if(isTakeAddress&&parentCtrl&&lastOdrDetails&&addressData&&parseFloat(addressData.latitude||0)&&parseFloat(addressData.longitude||0)&&addressData.google_location&&!hsOrder.getHSOData("isManualLocation")&&(hsOrder.setHSOData("pinCode",addressData.zipcode),hsOrder.setHSOData("latitude",addressData.latitude),hsOrder.setHSOData("longitude",addressData.longitude),hsOrder.setHSOData("formattedAddress",addressData.google_location),hsOrder.setHSOData("locVerified",!0),self.landingFormData.street_name=lastOdrDetails.last_address||"",self.landingFormData.address_id=lastOdrDetails.address_id||"",self.landingFormData.name=addressData.name||AuthService.getCurrentUser().full_name,self.landingFormData.addr_email=addressData.email||AuthService.getCurrentUser().email,self.landingFormRenders.formattedAddress=addressData.google_location||hsOrder.getHSOData("formattedAddress"),$rootScope.$broadcast("userLocationDataUpdated")),hsOrder.getHSOData("locVerified")&&hsOrder.getHSOData("localitySlug")&&!hsOrder.getHSOData("formattedAddress")){var formattedAddress=hsOrder.getHSOData("localitySlug")+", "+hsOrder.getHSOData("cityName");formattedAddress=formattedAddress.charAt(0).toUpperCase()+formattedAddress.slice(1),hsOrder.setHSOData("formattedAddress",formattedAddress),self.landingFormRenders.formattedAddress=formattedAddress,$rootScope.$broadcast("userLocationDataUpdated")}},self.btnGrp=document.getElementsByClassName("landingPageForm-bookblock"),angular.element($window).bind("scroll",function(){if(self.btnGrp&&self.btnGrp.length){var stickyBtnGrp=self.btnGrp[0].offsetTop;window.pageYOffset>stickyBtnGrp?self.fixedBarVisibility=!0:self.fixedBarVisibility=!1}}),self.scrollToTop=function(){SmoothScroll.scrollTo("landing-banner")},self.selectDate=function(){var date=hsOrder.getFormatedDate(self.landingFormData.dateSelected,1);self.landingFormData.service_date=date;var dataToSend={cat_id:self.intScn.intermediateData.cat_id,date:date};HODProvider.getFutTime(dataToSend).then(function(response){"HTTP_SUCCESS_DATA"==response.status&&(self.timeSlots=response.data.future_slots)})},self.confirmLandingBooking=function(form){if(form.$valid)if(self.landingFormData.service_time&&""!==self.landingFormData.service_time){self.landingFormData.cat_id=self.intScn.intermediateData.cat_id,self.landingFormData.cat_model_code=self.intScn.intermediateData.cat_model_code,self.landingFormData.cat_name=self.intScn.intermediateData.cat_name,self.landingFormData.odr_mode=hsOrder.getHSOData("odrMode")||"",hsOrder.setHSOData("price_chart_ids",self.intScn.intermediateData.price_chart_ids),self.landingPageReq.filterOptions?(angular.extend(self.landingPageReq.filterOptions,self.intScn.selectedOption),self.landingFormData.filter_options=JSON.stringify(self.landingPageReq.filterOptions)):self.landingFormData.filter_options=JSON.stringify(self.intScn.selectedOption);var locationInput=angular.element(document.getElementById("location_int"));if(!hsOrder.getHSOData("locVerified")||locationInput&&locationInput.length&&locationInput.val().length<6){var pincodeInput=angular.element(document.getElementsByClassName("pincode_int"));return void(pincodeInput&&pincodeInput.length?$mdToast.showSimple(hsOrder.getMessage(83)):$mdToast.showSimple(hsOrder.getMessage(81)))}self.landingFormData.latitude=hsOrder.getHSOData("latitude")||"",self.landingFormData.longitude=hsOrder.getHSOData("longitude")||"",self.landingFormData.addr_lat=self.landingFormData.latitude,self.landingFormData.addr_lng=self.landingFormData.longitude,self.landingFormData.city_id=hsOrder.getHSOData("cityId"),self.landingFormData.city_name=hsOrder.getHSOData("cityName"),self.landingFormData.pincode=hsOrder.getHSOData("pinCode"),self.landingFormData.google_location=hsOrder.getHSOData("formattedAddress")||self.landingFormRenders.formattedAddress||hsOrder.getHSOData("cityName"),hsOrder.validateCategory().then(function(response){response.coming_soon||self.continueLandingBooking()})
}else $mdToast.showSimple("Please select time slot.");else $mdToast.showSimple(hsOrder.getMessage(21))},self.continueLandingBooking=function(){self.landingFormRenders.loginState="OTP_PRO",self.checkAddressChanges(),self.landingFormRenders.user_logged_in?self.selectVendor():hsOrder.submitFormOtpLogin(self.landingFormData.addr_mobile,self.landingFormRenders.loginState).then(function(res){"true"===res.data.status?(self.landingFormRenders.otpEntered="",self.landingFormRenders.otpSent=!0,self.resetOTPCountDown(),self.selectVendor()):$mdToast.showSimple(res.data.otp_message)},function(err){}),self.selectedGooglePlaceLoc=document.getElementById("location_int").value},self.selectVendor=function(){DataLayer.addLayer({event:"add_to_cart",service_name:self.landingFormData.cat_name,cat_city_id:self.landingFormData.cat_id+"_"+self.landingFormData.city_id}),hsOrder.vendorListingData(self.landingFormData,1).then(function(response){if(response.gotData&&response.dataReceived.data.length){var selectedVendor=response.dataReceived.data[0];if(hsOrder.setHSOData("c_price",response.dataReceived.c_value),selectedVendor.hasOwnProperty("order_specs")){if(self.landingFormData.item_id=selectedVendor.item_id,self.landingFormData.analysis_key=selectedVendor.analysis_key,self.landingFormData.price=selectedVendor.final_price,self.landingFormData.unit_quantity=1,self.landingFormData.vendor_id=selectedVendor.vendor_id,self.landingFormData.order_specs=selectedVendor.order_specs,self.landingFormData.selection=JSON.stringify(selectedVendor.selection),self.landingFormData.tnc=selectedVendor.tnc,2==self.intScn.intermediateData.cat_model_code){var price_range={min_value:0,max_value:0},variation_10=.1*selectedVendor.final_price;price_range.min_value=100*Math.round((selectedVendor.final_price-variation_10)/100),price_range.max_value=100*Math.round((selectedVendor.final_price+variation_10)/100),self.landingFormRenders.price_range=price_range}self.landingFormRenders.activeTab=1,$scope.landingModernPage.activeTab=3,$scope.landingModernPage.vadlidatedFormIds.push(2),setTimeout(function(){angular.element(document.getElementById("landingOTPEntered")).focus()},300),DataLayer.addLayer({ecommerce:{currencyCode:"INR",impressions:[{cat_city_id:self.landingFormData.cat_id+"_"+self.landingFormData.city_id,cat_id:selectedVendor.cat_id,cat_name:selectedVendor.cat_name,catalog_price:selectedVendor.final_price||0,city_id:self.landingFormData.city_id,city_name:selectedVendor.city_name,city_slug:selectedVendor.city_slug,service_city_slug:selectedVendor.service_city_slug,service_slug:selectedVendor.service_slug,tnc:selectedVendor.tnc}]}})}else $mdToast.showSimple(hsOrder.getMessage(31)),$scope.landingModernPage.activeTab=2}else $mdToast.showSimple(response.dataReceived.message),$scope.landingModernPage.activeTab=2})},self.gotoLandingForm=function(){self.landingFormRenders.user_logged_in||(self.landingFormData.addr_mobile=""),self.landingFormData.vendor_id=0,self.landingFormRenders.otpEntered="",self.landingFormRenders.loginState="NO_OTP",self.landingFormRenders.activeTab=0},self.proceedLandingBooking=function(){if(self.landingFormData.utm_url=hsOrder.getHSOData("utmQuery"),self.landingFormData.price_chart_ids=hsOrder.getHSOData("price_chart_ids"),DataLayer.addLayer({ecommerce:{purchase:{products:[{cat_city_id:self.landingFormData.cat_id+"_"+self.landingFormData.city_id,cat_id:self.landingFormData.cat_id,cat_name:self.landingFormData.cat_name,catalog_price:self.landingFormData.price||0,city_id:self.landingFormData.city_id,city_name:self.landingFormData.city_name}]}}}),self.landingFormRenders.user_logged_in)hsOrder.placeHSOrder(self.landingFormData);else{if(!self.landingFormRenders.otpEntered)return void $mdToast.showSimple("Please enter OTP.");hsOrder.submitFormOtpLoginRec(self.landingFormData.addr_mobile,self.landingFormRenders.otpEntered).then(function(res){"true"===res.status&&(self.landingFormData.user_id=res.data.user_id,self.landingFormData.email=res.data.email||"",self.landingFormData.customer_name=res.data.name||"",self.landingFormData.mobile=res.data.mobile||""),hsOrder.placeHSOrder(self.landingFormData)},function(err){$mdToast.showSimple(err)})}},self.resetOTPCountDown=function(){self.otpResendCountDown=60,self.otpCountDownTimer&&$interval.cancel(self.otpCountDownTimer),self.otpCountDownTimer=$interval(function(){self.otpResendCountDown>0&&self.otpResendCountDown--},1e3,60)},self.resendOtp=function(){self.landingFormRenders.otpEntered="",hsOrder.submitFormOtpLogin(self.landingFormData.addr_mobile).then(function(res){"true"===res.data.status?($interval.cancel(self.otpCountDownTimer),self.resetOTPCountDown(),$mdToast.showSimple("OTP sent to your mobile no.")):$mdToast.showSimple(res.data.otp_message)},function(err){})},self.isOtpCountDownZero=function(){return self.otpResendCountDown<=0},self.viewPrices=function(galleryData,chartTitle,imgIndex){PriceChartGalleryService.openModal(galleryData,chartTitle,imgIndex)},self.handleDiv=function(index){self.divTabIndex=index,self.isAnimation||(self.isAnimation=!0)},self.realtedCatRedirection=function(item){item.isMainCat&&(self.divTabIndex=2)},self.validateFormToBook=function(form){if(form.$valid){self.btnDoubleClickHandle();var actTab=$scope.landingModernPage.activeTab;if(2===actTab)self.confirmLandingBooking(form);else{$scope.landingModernPage.vadlidatedFormIds.includes($scope.landingModernPage.activeTab)||$scope.landingModernPage.vadlidatedFormIds.push($scope.landingModernPage.activeTab);$scope.landingModernPage.activeTab=actTab>0&&actTab<3?actTab+1:actTab}}else $mdToast.showSimple(hsOrder.getMessage(21))},self.goBackToScreen=function(){var actTab=$scope.landingModernPage.activeTab;3==actTab&&$interval.cancel(self.otpCountDownTimer);$scope.landingModernPage.activeTab=actTab>1?actTab-1:0,$window.history.back()},self.goBackChangeNum=function(){$interval.cancel(self.otpCountDownTimer),self.landingFormData.addr_mobile="",$scope.landingModernPage.activeTab=2},self.gotoTopForm=function(){0==$scope.landingModernPage.activeTab&&$mdToast.showSimple(hsOrder.getMessage(90)),window.scrollTo(0,0)},self.goToMainCat=function(){$scope.landingModernPage.activeTab=1},self.btnDoubleClickHandle=function(){$scope.btnDisabled=!0,setTimeout(function(){$scope.btnDisabled=!1},700)},self.checkAddressChanges=function(){var localAddrDetails={street_name:self.landingFormData.street_name,name:self.landingFormData.name,email:self.landingFormData.addr_email,google_location:hsOrder.getHSOData("formattedAddress")||self.landingFormRenders.formattedAddress},lastOdrDetails=!!self.intScn.intermediateData.last_order_details.address_array&&self.intScn.intermediateData.last_order_details.address_array;if(lastOdrDetails){var apiLastAddr={street_name:lastOdrDetails.street_name,name:lastOdrDetails.name,email:lastOdrDetails.email,google_location:lastOdrDetails.google_location},isMatched=angular.equals(localAddrDetails,apiLastAddr);isMatched||(self.landingFormData.address_id="")}},self.getLastOdrAddress=function(){if(self.landingFormRenders.user_logged_in){var dataToSend={user_id:self.landingFormData.user_id,city_id:hsOrder.getHSOData("cityId")};HODProvider.getLastOdrAddr(dataToSend).then(function(data){data=data.data,self.intScn.intermediateData.last_order_details=data||!1},function(err){self.intScn.intermediateData.last_order_details=!1}).finally(function(){self.lastOrderAddressSelection(!hsOrder.getHSOData("isHyperlocal"))})}},self.getLastOdrAddress()}angular.module("homeModule").component("intermediateLanding",{templateUrl:"components/intermediate-screen/intermediate-landing/intermediate-landing.temp.html",bindings:{intScn:"="},controller:intermediateLandingController}),intermediateLandingController.$inject=["$window","hsOrder","HODProvider","AuthService","$mdToast","SmoothScroll","DataLayer","$interval","$mdDialog","PriceChartGalleryService","$rootScope","$scope","DateHelper"]}(),function(){function IMSController($scope,$rootScope,$state,$stateParams,$window,hsOrder,HODProvider,$mdToast,metaService,AuthService,ApiService,DataLayer,$mdDialog,PriceChartGalleryService,DateHelper){function getIntermediateScreenData(){self.fixedBarVisibility=!1,HODProvider.interMedScnData(self.intermediateOptions).then(function(response){"HTTP_SUCCESS_DATA"===response.status?(self.gotData=!0,self.intermediateData=response.data,self.calendarMaxDate=DateHelper.generateNextDate(response.data.max_days),self.catModel=response.data.cat_model_code,self.relatedCatWorks=$rootScope.metaData.BASIC.related_services,self.intermediateData.option_data.length>0?self.isOptionData=!0:self.isOptionData=!1,self.isAppliancesPage="22"===response.data.cat_id,hsOrder.setHSOData("jrneyLevel",1),self.extractData(),self.checkLandingPage()):(response.status,$mdToast.showSimple(hsOrder.getMessage(33)),window.location=ApiService.get().baseAppPath+"page-not-found")})}"urlSlug"in $stateParams&&""===$stateParams.urlSlug&&(window.location=ApiService.get().baseAppPath+"page-not-found"),$scope.viewDefaultLoad="components/intermediate-screen/intermediate-default-screen.temp.html";var self=this;if(self.gotData=!1,self.intermediateData=void 0,self.headerType=void 0,self.infoType=void 0,self.bottomTestimonials=void 0,self.bottomVideos=void 0,self.catModel=void 0,self.showBookNowBtn=!1,self.fixedBarVisibility=!1,self.optionImages={active:"dist/img/icons/option-buttons/circle_fill.png",inactive:"dist/img/icons/option-buttons/circle_blank.png"},self.landingScreenType=1,self.intermediateOptions={user_id:AuthService.getCurrentUser().user_id||"",ref_source:window.BRO4U_HTTP_REFRRER},self.pageRenderVars={galleryConf:{thumbnails:!0,thumbSize:120,inline:!1,bubbles:!0,imgBubbles:!0,bgClose:!1,methods:{}},conf:{imgAnim:"fadeup"},isLanding:!1},self.playerVars={rel:0,showinfo:0,modestbranding:1},self.differ=function(){return $stateParams.urlSlug!==hsOrder.getHSOData("intermediateURL")}(),self.resetData=function(){var clearParameters=["odrFlow","cityId","cityName","citySlug","pinCode","locVerified","placeId","landingDefault"];clearParameters.concat(hsOrder.clearDataVars),hsOrder.clearHSOData(clearParameters),$rootScope.$broadcast("userLocationDataUpdated")},self.differ)self.intermediateOptions.category_slug=$stateParams.urlSlug,"citySlug"in $stateParams&&$stateParams.citySlug&&(self.intermediateOptions.city_slug=$stateParams.citySlug),getIntermediateScreenData();else{var orderFlow=hsOrder.getHSOData("odrFlow");hsOrder.checkLocationDependency().then(function(response){response&&200!==orderFlow?(self.intermediateOptions.cat_id=hsOrder.getHSOData("catId"),self.intermediateOptions.options=hsOrder.getHSOData("opsIMS"),self.intermediateOptions.city_id=hsOrder.getHSOData("cityId"),self.intermediateOptions.pincode=hsOrder.getHSOData("pinCode"),self.intermediateOptions.latitude=hsOrder.getHSOData("latitude")||"",self.intermediateOptions.longitude=hsOrder.getHSOData("longitude")||"",self.intermediateOptions.category_slug=$stateParams.urlSlug):(self.differ=!0,self.intermediateOptions.category_slug=$stateParams.urlSlug,"citySlug"in $stateParams&&$stateParams.citySlug&&(self.intermediateOptions.city_slug=$stateParams.citySlug)),getIntermediateScreenData()})}self.buttonBottom=document.getElementsByClassName("cat-option-book-btn"),self.btnGrp=document.getElementsByClassName("int-btn-container");document.querySelectorAll("body")[0];angular.element($window).bind("scroll",function(){if(self.btnGrp&&self.btnGrp.length){var stickyBtnGrp=self.btnGrp[0].offsetTop;window.pageYOffset>stickyBtnGrp?self.fixedBarVisibility=!0:self.fixedBarVisibility=!1}if(self.buttonBottom&&self.buttonBottom.length){var stickybtnBottom=self.buttonBottom[0].offsetTop;window.pageYOffset>stickybtnBottom?self.buttonBottom[0].classList.add("fixed-bottom-bar","fixed-bottom-bar-int-scn"):self.buttonBottom[0].classList.remove("fixed-bottom-bar","fixed-bottom-bar-int-scn")}}),self.extractData=function(){-1!==window.location.search.search("utm_")&&hsOrder.setHSOData("utmQuery",window.location.href),self.intermediateData.option_data&&1==self.intermediateData.option_data.length?(self.intermediateData.option_data[0].selection="active",self.showBookNowBtn=!0):angular.forEach(self.intermediateData.option_data,function(option){hsOrder.getHSOData("optionId")==option.option_id?(option.selection="active",self.showBookNowBtn=!0):option.selection="inactive"}),self.headerType=self.intermediateData.header_part.type||"image",angular.forEach(self.intermediateData.header_part.data,function(data,index){""===data.url&&(self.intermediateData.header_part.data[index].url="dist/img/default/default_banner.png")}),self.infoType=0===self.intermediateData.option_data.length?0:1,self.bottomTestimonials=0===self.intermediateData.bottom_part.testimonial.length?0:1,self.bottomVideos=0===self.intermediateData.bottom_part.video_slider.length?0:1,self.intermediateData.city_id!==hsOrder.getHSOData("cityId")&&(hsOrder.setHSOData("cityId",self.intermediateData.city_id),hsOrder.setHSOData("cityName",self.intermediateData.city_name),hsOrder.setHSOData("citySlug",self.intermediateData.city_slug),hsOrder.setHSOData("locVerified",!1),hsOrder.setHSOData("isHyperlocal",!1),hsOrder.clearHSOData(["latitude","longitude","pinCode","localitySlug","formattedAddress","placeId"]),$rootScope.$broadcast("userLocationDataUpdated")),self.organicSourceHandler(),DataLayer.addLayer({event:"page_view",dynx_pagetype:self.intermediateData.cat_name,dynx_itemid:self.intermediateData.cat_id+"_"+self.intermediateData.city_id})},self.organicSourceHandler=function(){self.differ&&(hsOrder.setHSOData("catId",self.intermediateData.cat_id),hsOrder.setHSOData("catName",self.intermediateData.cat_name),hsOrder.setHSOData("catModel",self.intermediateData.cat_model_code),hsOrder.setHSOData("reqModel",self.intermediateData.req_flow_code),hsOrder.setHSOData("intermediateURL",self.intermediateData.category_slug),hsOrder.getHSOData("isNormalFlow")?hsOrder.clearHSOData("isNormalFlow"):(hsOrder.setHSOData("odrFlow",200),hsOrder.clearHSOData("isNormalFlow")));var meta_city_id=metaService.getMetadata(baseConstants.METADATA.KEY.BASIC.NAME,baseConstants.METADATA.BASIC.CITY_ID.NAME);meta_city_id&&hsOrder.getHSOData("cityId")!=meta_city_id&&(hsOrder.setHSOData("cityId",meta_city_id),hsOrder.setHSOData("cityName",metaService.getMetadata(baseConstants.METADATA.KEY.BASIC.NAME,baseConstants.METADATA.BASIC.CITY_NAME.NAME)),hsOrder.setHSOData("citySlug",metaService.getMetadata(baseConstants.METADATA.KEY.BASIC.NAME,baseConstants.METADATA.BASIC.CITY_SLUG.NAME)),hsOrder.clearHSOData(["locVerified","latitude","longitude","pinCode","localitySlug","formattedAddress","placeId"]),$rootScope.$broadcast("userLocationDataUpdated")),hsOrder.setHSOData("isHyperlocal",!1);var locality_slug=metaService.getMetadata(baseConstants.METADATA.KEY.BASIC.NAME,baseConstants.METADATA.BASIC.LOCALITY_SLUG.NAME),locality_pincode=metaService.getMetadata(baseConstants.METADATA.KEY.BASIC.NAME,baseConstants.METADATA.BASIC.LOCALITY_PINCODE.NAME);if(locality_slug&&locality_pincode&&""!==locality_pincode){hsOrder.setHSOData("pinCode",locality_pincode),hsOrder.setHSOData("localitySlug",locality_slug),hsOrder.setHSOData("latitude",metaService.getMetadata(baseConstants.METADATA.KEY.BASIC.NAME,baseConstants.METADATA.BASIC.LOCALITY_LATITUDE.NAME)),hsOrder.setHSOData("longitude",metaService.getMetadata(baseConstants.METADATA.KEY.BASIC.NAME,baseConstants.METADATA.BASIC.LOCALITY_LONGITUDE.NAME)),hsOrder.getHSOData("pinCode")&&""!==hsOrder.getHSOData("pinCode")?hsOrder.setHSOData("locVerified",!0):hsOrder.clearHSOData(["locVerified","latitude","longitude","pinCode","localitySlug","formattedAddress","placeId"]),hsOrder.setHSOData("isHyperlocal",!0),hsOrder.clearHSOData(["formattedAddress","placeId"]);var formattedAddress=hsOrder.getHSOData("localitySlug")+", "+hsOrder.getHSOData("cityName");formattedAddress=formattedAddress.charAt(0).toUpperCase()+formattedAddress.slice(1),hsOrder.setHSOData("formattedAddress",formattedAddress),$rootScope.$broadcast("userLocationDataUpdated")}else locality_slug&&!locality_pincode&&""===locality_pincode&&(hsOrder.clearHSOData(["locVerified","latitude","longitude","pinCode","localitySlug","formattedAddress","placeId"]),$rootScope.$broadcast("userLocationDataUpdated"))},self.gotoRequirement=function(option){hsOrder.setHSOData("isNormalFlow",!0),hsOrder.setHSOData("odrMode",option),hsOrder.setHSOData("catModel",self.catModel),hsOrder.setHSOData("price_chart_ids",self.intermediateData.price_chart_ids),$state.go("requirement-screen")},self.proceedBook=function(option){hsOrder.setHSOData("exp_btn",self.intermediateData.exp_btn),self.gotoRequirement(option)},self.selectCategory=function(category){if(angular.forEach(self.intermediateData.option_data,function(option){option.selection="inactive",option.option_id==category.option_id&&(option.selection="active")}),self.isAppliancesPage&&(self.slugMap={"AC Repair & Services":"ac-repair-maintenance","TV Repair":"tv-repair-service","Washing Machine Repair":"washing-machine-repair-services","Geyser Repair":"geyser-repair-services","Inverter Repair":"ups-inverter-repair-services","Refrigerator Repair":"refrigerator-repair","Microwave Repair":"microwave-oven-repair-services","Dishwasher Repair":"dishwasher-repair","Water Purifier Repair":"ro-water-purifier-repair-service"},self.slugMap[category.option_name])){var caturlSlug=self.slugMap[category.option_name],appOrigin=ApiService.get().baseOrigin+ApiService.get().baseAppPath,appCatPathArr=window.location.pathname.split("/"),redirectTo=appOrigin,catURL=caturlSlug+"-";if("hyperlocal-services"===$rootScope.metaData.BASIC.type){var replacedURL=appCatPathArr[appCatPathArr.length-1].replace("home-appliances-repair",caturlSlug);redirectTo+=appCatPathArr[appCatPathArr.length-2]+"/"+replacedURL}else redirectTo+=catURL+self.intermediateData.city_slug;window.location.assign(redirectTo)}self.showBookNowBtn=!0},self.selectOption=function(odrMode){if(!self.showBookNowBtn)return $window.scrollTo(0,document.getElementById("breadcrumb-cont").offsetTop-50),void $mdToast.showSimple("Please select an option.");var attributeId,optionId;angular.forEach(self.intermediateData.option_data,function(option){"active"==option.selection&&(attributeId=option.attr_id,optionId=option.option_id)});var option=odrMode,filter={},callback=function(){self.gotoRequirement(option)};filter[attributeId]=optionId,hsOrder.setHSOData("attrId",attributeId),hsOrder.setHSOData("optionId",optionId),hsOrder.setHSOData("exp_btn",self.intermediateData.exp_btn),hsOrder.applyFilters(filter,callback)},$scope.displaySchema=metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.KEY.SCHEMA.NAME)||!1,$scope.jsonId={"@context":"http://schema.org","@type":"LocalBusiness",address:{"@type":"PostalAddress",addressLocality:metaService.getMetadata(baseConstants.METADATA.KEY.BASIC.NAME,baseConstants.METADATA.BASIC.LOCATION_NAME.NAME),addressRegion:metaService.getMetadata(baseConstants.METADATA.KEY.BASIC.NAME,baseConstants.METADATA.BASIC.CITY_NAME.NAME)},name:metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.HEADER.SCHEMA.NAME.NAME),description:metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.HEADER.DESC.NAME),image:metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.HEADER.SCHEMA.IMAGE.NAME),URL:metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.HEADER.CANONICAL_URL.NAME),aggregateRating:{"@type":"AggregateRating",bestRating:"5",ratingCount:metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.HEADER.SCHEMA.RATING_COUNT.NAME),ratingValue:metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.HEADER.SCHEMA.RATING_VALUE.NAME),itemReviewed:{"@type":"Thing",name:"Service Review"}}},self.gotReqData=!1,self.requirementData=void 0,self.selectedOption={},self.checkLandingPage=function(){var defaultLanding=hsOrder.getHSOData("landingDefault");$rootScope.$emit("footerMargin",{footerMargin:!self.isAppliancesPage}),(defaultLanding&&self.intermediateData.cat_landing_page||!defaultLanding&&200===hsOrder.getHSOData("odrFlow")&&self.intermediateData.cat_landing_page)&&(Array.isArray(self.intermediateData.new_landing_screen_array)?self.landingScreenType=self.intermediateData.new_landing_screen_array.includes(self.intermediateData.cat_id)?2:1:self.landingScreenType="*"===self.intermediateData.new_landing_screen_array?2:1,self.pageRenderVars.isLanding=!0,$rootScope.$broadcast("swapHeader",{headerSwap:!1}),self.intermediateData.option_data.length?1==self.intermediateData.option_data.length&&(hsOrder.setHSOData("attrId",self.intermediateData.option_data[0].attr_id),hsOrder.setHSOData("optionId",self.intermediateData.option_data[0].option_id),self.selectedOption[self.intermediateData.option_data[0].attr_id]=self.intermediateData.option_data[0].option_id,self.getFilters(self.intermediateData.option_data[0].option_id)):(hsOrder.setHSOData("odrMode",2),self.getFilters())),hsOrder.getHSOData("optionId")&&self.getFilters(hsOrder.getHSOData("optionId"))},self.getFilters=function(option_id){option_id?angular.forEach(self.intermediateData.option_data,function(value,index){option_id==value.option_id&&(hsOrder.setHSOData("attrId",value.attr_id),hsOrder.setHSOData("optionId",value.option_id),self.selectedOption[value.attr_id]=value.option_id)}):self.selectedOption=hsOrder.getHSOData("filterOptions")||{};var optionId=option_id||hsOrder.getHSOData("optionId");self.reqFilterOptions={city_id:self.intermediateData.city_id,cat_id:self.intermediateData.cat_id,option_id:optionId,odr_mode:hsOrder.getHSOData("odrMode")},HODProvider.reqScnData(self.reqFilterOptions).then(function(response){"HTTP_SUCCESS_DATA"==response.status&&(self.gotReqData=!0,self.requirementData=response.data,hsOrder.getHSOData("catModel"))})},self.viewPrices=function(galleryData,chartTitle){PriceChartGalleryService.openModal(galleryData,chartTitle,0)}}angular.module("hsOrderModule").component("intermediateScreen",{templateUrl:"components/intermediate-screen/intermediate-screen.temp.html",controller:IMSController}),IMSController.$inject=["$scope","$rootScope","$state","$stateParams","$window","hsOrder","HODProvider","$mdToast","metaService","AuthService","ApiService","DataLayer","$mdDialog","PriceChartGalleryService","DateHelper"]}(),function(){function listAsPartnerController($scope,$window,hsOrder,HODProvider,AuthService,$element,$mdToast,$state){var self=this;self.pageLoadVars={},self.formData={name:"",city_id:"",phone:"",cat_ids:[]},self.gotData=!1,self.pageRenderVars={cities:void 0,categories:void 0,enquired:!1,enquiry:void 0},$scope.searchTerm="",$scope.clearSearchTerm=function(){$scope.searchTerm=""},$element.find("input").on("keydown",function(ev){ev.stopPropagation()}),HODProvider.preListVendor(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.gotData=!0,self.extractData(response.data)):response.status}),self.extractData=function(response){response.cities&&response.cities.length&&(self.pageRenderVars.cities=response.cities),response.categories&&response.categories.length&&(self.pageRenderVars.categories=response.categories),response.auto_fill&&(self.formData={name:AuthService.getCurrentUser().full_name||"",city_id:hsOrder.getHSOData("cityId")||"",phone:AuthService.getCurrentUser().mobile||"",cat_ids:[]})},self.register=function(){self.formData.phone&&(self.formData.phone=parseInt(self.formData.phone)),hsOrder.placePartnerEnquiry(self.formData).then(function(response){response.status&&(self.pageRenderVars.enquired=!0,self.pageRenderVars.enquiry=response)})},self.goBack=function(){$window.history.back()},self.gotoPage=function(state){$state.go(state)}}angular.module("homeModule").component("listAsPartner",{templateUrl:"components/list-as-partner/list-as-partner.temp.html",controller:listAsPartnerController}),listAsPartnerController.$inject=["$scope","$window","hsOrder","HODProvider","AuthService","$element","$mdToast","$state"]}(),function(){function manageAddressPopupController($mdToast,$rootScope,$state,hsOrder,HODProvider,AuthService,$mdDialog){var self=this;self.pageLoadVars={user_id:AuthService.getCurrentUser().user_id,restrict:!1,restrict_city_id:void 0,restrict_pincode:void 0},self.pageRenderVars={gotData:!1,addresses:void 0,defaultSetResponse:void 0},HODProvider.mngAddress(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.gotData=!0,self.pageRenderVars.addresses=response.data.addresses):response.status}),self.deleteAddress=function(addressId,index){var dataToSend={user_id:self.pageLoadVars.user_id,address_id:addressId};HODProvider.delAddress(dataToSend).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.addresses.splice(index,1),$mdToast.showSimple(hsOrder.getMessage(53))):response.status})},self.setDefaultAddress=function(addressId,index){var dataToSend={user_id:self.pageLoadVars.user_id,address_id:addressId,city_id:self.pageRenderVars.addresses[index].city_id,pincode:self.pageRenderVars.addresses[index].zipcode,restrict:hsOrder.getHSOData("addressRestrict")||!1,restrict_city_id:hsOrder.getHSOData("cityId"),restrict_pincode:hsOrder.getHSOData("pinCode")};HODProvider.defAddress(dataToSend).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.defaultSetResponse=response.data,self.pageRenderVars.defaultSetResponse.update_status?(angular.forEach(self.pageRenderVars.addresses,function(value,key){self.pageRenderVars.addresses[key].default_address=key===index}),dataToSend.restrict&&hsOrder.redirectAfterAddressSet(),$rootScope.$broadcast("userAddress"),$mdToast.showSimple(hsOrder.getMessage(54)),self.closeDialog()):$mdToast.showSimple(self.pageRenderVars.defaultSetResponse.message)):response.status})},self.navigate=function(state,params){$mdDialog.show({clickOutsideToClose:!0,template:"<add-address></add-address>",locals:{parameters:params}})},self.closeDialog=function(){$mdDialog.hide()}}angular.module("hsOrderModule").component("manageAddressPopup",{templateUrl:"components/manage-address/manage-address-popup.temp.html",controller:manageAddressPopupController}),manageAddressPopupController.$inject=["$mdToast","$rootScope","$state","hsOrder","HODProvider","AuthService","$mdDialog"]}(),function(){function manageAddressController($rootScope,$mdToast,$state,hsOrder,HODProvider,AuthService,$mdDialog,IntegrationService){var self=this;self.pageLoadVars={user_id:AuthService.getCurrentUser().user_id,restrict:!1,restrict_city_id:void 0,restrict_pincode:void 0},self.pageRenderVars={gotData:!1,addresses:void 0,defaultSetResponse:void 0},$rootScope.$on("userAddress",function(){self.getAddress()}),self.getAddress=function(){HODProvider.mngAddress(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.gotData=!0,self.pageRenderVars.addresses=response.data.addresses):response.status})},self.getAddress(),self.deleteAddress=function(addressId,index){var dataToSend={user_id:self.pageLoadVars.user_id,address_id:addressId};HODProvider.delAddress(dataToSend).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.addresses.splice(index,1),$mdToast.showSimple(hsOrder.getMessage(53))):response.status})},self.setDefaultAddress=function(addressId,index){var dataToSend={user_id:self.pageLoadVars.user_id,address_id:addressId,city_id:self.pageRenderVars.addresses[index].city_id,pincode:self.pageRenderVars.addresses[index].zipcode,restrict:hsOrder.getHSOData("addressRestrict")||!1,restrict_city_id:hsOrder.getHSOData("cityId"),restrict_pincode:hsOrder.getHSOData("pinCode")};HODProvider.defAddress(dataToSend).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.defaultSetResponse=response.data,self.pageRenderVars.defaultSetResponse.update_status?(angular.forEach(self.pageRenderVars.addresses,function(value,key){self.pageRenderVars.addresses[key].default_address=key===index}),dataToSend.restrict&&hsOrder.redirectAfterAddressSet(),$rootScope.$broadcast("userAddress"),$mdToast.showSimple(hsOrder.getMessage(54)),self.closeDialog()):$mdToast.showSimple(self.pageRenderVars.defaultSetResponse.message)):response.status})},self.navigate=function(state,params){hsOrder.checkLocationDependency().then(function(response){response?$mdDialog.show({clickOutsideToClose:!0,controller:addAddressController,controllerAs:"ctrl",templateUrl:"components/manage-address/add-address.temp.html",locals:{parameters:params},bindToController:!0}):IntegrationService.openLocationSearchModal()})},self.closeDialog=function(){$mdDialog.hide()}}function addAddressController($rootScope,$stateParams,$window,$scope,$mdToast,hsOrder,HODProvider,AuthService,$mdDialog){var self=this;self.add=!self.parameters,self.pageRenderVars={addressAdded:!1,addressEdited:!1,submitFlag:!0,header:self.add?"Add New Address":"Edit Address",formData:{address_id:self.add?"":self.parameters.address_id,user_id:AuthService.getCurrentUser().user_id,name:self.add?AuthService.getCurrentUser().full_name:self.parameters.name,street_name:self.add?"":self.parameters.street_name,locality:self.add?"":self.parameters.locality,pincode:self.add?hsOrder.getHSOData("pinCode"):self.parameters.zipcode,city_id:self.add?hsOrder.getHSOData("cityId"):self.parameters.city_id,city_name:self.add?hsOrder.getHSOData("cityName"):self.parameters.city_name,restrict:hsOrder.getHSOData("addressRestrict"),restrict_city_id:hsOrder.getHSOData("cityId"),restrict_pincode:hsOrder.getHSOData("pinCode"),type:self.add?"home":self.parameters.type,default_address:!self.add&&self.parameters.default_address,latitude:self.add?"":self.parameters.latitude,longitude:self.add?"":self.parameters.longitude,google_location:self.add?"":self.parameters.google_location,google_places_ob:self.add?"":self.parameters.google_location,email:self.add?AuthService.getCurrentUser().email:self.parameters.email},editResponse:void 0},self.gotData=!1,self.googlePlacesOptions={componentRestrictions:{country:"in"}},self.limitCity=self.pageRenderVars.formData.city_name+", ",self.isEmailId=!!self.add&&!!AuthService.getCurrentUser().email.length,HODProvider.getCities().then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.gotData=!0,angular.forEach(response.data.cities,function(value){if(value.city_id===self.pageRenderVars.formData.city_id){var location={lat:parseFloat(value.latitude),lng:parseFloat(value.longitude)};self.googlePlacesOptions.location=new $window.google.maps.LatLng(location.lat,location.lng),self.googlePlacesOptions.radius=5e4}})):response.status}),self.addAddress=function(){self.addAddressForm.$invalid||(self.pageRenderVars.formData.google_places_ob&&self.pageRenderVars.formData.google_places_ob.geometry&&(self.pageRenderVars.formData.latitude=self.pageRenderVars.formData.google_places_ob.geometry.location.lat(),self.pageRenderVars.formData.longitude=self.pageRenderVars.formData.google_places_ob.geometry.location.lng(),self.pageRenderVars.formData.google_location=self.pageRenderVars.formData.google_places_ob.formatted_address),self.pageRenderVars.formData.google_places_ob={},self.add?!self.pageRenderVars.addressAdded&&self.pageRenderVars.submitFlag&&(self.pageRenderVars.submitFlag=!1,HODProvider.addAddress(self.pageRenderVars.formData).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.addressAdded=!0,self.pageRenderVars.submitFlag=!0,$mdToast.showSimple(hsOrder.getMessage(51)),$rootScope.$broadcast("userAddress"),self.closeDialog()):"HTTP_SUCCESS_NO_DATA"==response.status?(self.pageRenderVars.submitFlag=!0,$mdToast.showSimple(hsOrder.getMessage(31))):(self.pageRenderVars.submitFlag=!0,$mdToast.showSimple(hsOrder.getMessage(32)))})):!self.pageRenderVars.addressEdited&&self.pageRenderVars.submitFlag&&(self.pageRenderVars.submitFlag=!1,HODProvider.edtAddress(self.pageRenderVars.formData).then(function(response){
"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.addressEdited=!0,self.pageRenderVars.submitFlag=!0,$rootScope.$broadcast("userAddress"),self.pageRenderVars.editResponse=response.data,self.pageRenderVars.editResponse.update_status?($mdToast.showSimple(hsOrder.getMessage(52)),self.pageRenderVars.formData.restrict?hsOrder.redirectAfterAddressSet():self.closeDialog()):$mdToast.showSimple(self.pageRenderVars.editResponse.message)):"HTTP_SUCCESS_NO_DATA"==response.status?(self.pageRenderVars.submitFlag=!0,$mdToast.showSimple(hsOrder.getMessage(31))):(self.pageRenderVars.submitFlag=!0,$mdToast.showSimple(hsOrder.getMessage(32)))})))},self.closeDialog=function(){$mdDialog.hide()}}angular.module("hsOrderModule").component("manageAddress",{templateUrl:"components/manage-address/manage-address.temp.html",controller:manageAddressController}),manageAddressController.$inject=["$rootScope","$mdToast","$state","hsOrder","HODProvider","AuthService","$mdDialog","IntegrationService"],addAddressController.$inject=["$rootScope","$stateParams","$window","$scope","$mdToast","hsOrder","HODProvider","AuthService","$mdDialog"]}(),function(){function notificationController($mdToast,$window,$state,hsOrder,HODProvider,AuthService){var self=this;self.pageLoadVars={user_id:AuthService.getCurrentUser().user_id,page:0},self.pageRenderVars={gotData:!1,completeResp:void 0,notifications:[],next:!1},self.extractData=function(){0!==self.pageRenderVars.completeResp.notification.length&&angular.forEach(self.pageRenderVars.completeResp.notification,function(value){self.pageRenderVars.notifications.push(value)}),self.pageRenderVars.notifications.length,self.pageLoadVars.page=self.pageRenderVars.completeResp.page,self.pageRenderVars.next="yes"===self.pageRenderVars.completeResp.next_page},self.loadData=function(){HODProvider.getNotifications(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.gotData=!0,self.pageRenderVars.completeResp=response.data,self.extractData()):response.status})},self.loadData(),self.clear=function(){HODProvider.clrNotifications(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.completeResp=void 0,self.pageRenderVars.notifications=[],$mdToast.showSimple(hsOrder.getMessage(55))):response.status})}}angular.module("hsOrderModule").component("notifications",{templateUrl:"components/notifications/notifications.temp.html",controller:notificationController}),notificationController.$inject=["$mdToast","$window","$state","hsOrder","HODProvider","AuthService"]}(),function(){function offerZoneController($mdDialog,$mdToast,$window,$state,hsOrder,HODProvider,AuthService){var self=this;self.pageLoadVars={user_id:AuthService.getCurrentUser().user_id,city_id:hsOrder.getHSOData("cityId")},self.pageRenderVars={gotData:!1,offerData:void 0},HODProvider.getOffers(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.gotData=!0,self.pageRenderVars.offerData=response.data.offers):response.status}),self.showTerms=function(terms){$mdDialog.show({templateUrl:"components/popup/termsncond.temp.html",clickOutsideToClose:!0,escapeToClose:!0,bindToController:!0,locals:{terms:terms,close:function(){$mdDialog.hide()}},controller:function(){},controllerAs:"tctrl"}).then(function(){}).catch(function(){$mdDialog.hide()})}}angular.module("hsOrderModule").component("offerZone",{templateUrl:"components/notifications/offer-zone.temp.html",controller:offerZoneController}),offerZoneController.$inject=["$mdDialog","$mdToast","$window","$state","hsOrder","HODProvider","AuthService"]}(),function(){function myRechargeController(){}angular.module("hsOrderModule").component("myRecharges",{templateUrl:"components/orders/my-order-recharge/my-orders-recharge.temp.html",controller:myRechargeController}),myRechargeController.$inject=[]}(),function(){function myOrdersController($mdToast,$window,$state,$mdDialog,hsOrder,HODProvider,AuthService,IntegrationService,$stateParams,$rootScope,DateHelper){var self=this;self.pageLoadVars={user_id:AuthService.getCurrentUser().user_id},self.pageRenderVars={newTab:[{name:"Services",data:["Orders","Quotes Received","Reorders"],index:0},{name:"Recharge",data:["All"],index:1}],tabs:["Services","Recharge"],activeTab:0|$stateParams.pIndex,tabsServ:["Orders","Reorders","Quotes Received"],activeTS:0|$stateParams.index,onGoingOrders:void 0,flagOngoing:!1,pastOrders:void 0,flagPast:!1,reorders:void 0,flagReorder:!1,quoteOrders:void 0,flagQuotes:!1,reviewButton:{1:"View Review",2:"Edit Review",3:"Write Review"}},$rootScope.$on("reviewSubmitted",function(){self.getMyOrders()}),self.getMyOrders=function(){HODProvider.myOrders(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?self.extractData(response.data):response.status,self.loadQuotes()})},self.getMyOrders(),self.loadQuotes=function(){HODProvider.myQuotes(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.quoteOrders=response.data.orders,self.extractQuoteData()):response.status})},self.extractData=function(data){data.ongoing.length?(self.pageRenderVars.flagOngoing=!0,self.pageRenderVars.onGoingOrders=data.ongoing):(self.pageRenderVars.flagOngoing=!1,self.pageRenderVars.onGoingOrders=void 0),data.past.length?(self.pageRenderVars.flagPast=!0,self.pageRenderVars.pastOrders=data.past,self.pageRenderVars.reorders=[],angular.forEach(data.past,function(value){value.reorder&&self.pageRenderVars.reorders.push(value)}),self.pageRenderVars.reorders.length?self.pageRenderVars.flagReorder=!0:self.pageRenderVars.flagReorder=!1):(self.pageRenderVars.flagPast=!1,self.pageRenderVars.pastOrders=void 0)},self.extractQuoteData=function(){self.pageRenderVars.flagQuotes=!!self.pageRenderVars.quoteOrders.length},self.changeTab=function(pIndex,index){self.pageRenderVars.activeTab=pIndex,self.pageRenderVars.activeTS=index,0==pIndex&&1==index&&self.loadQuotes()},self.goBack=function(){$window.history.back()},self.reviewOrder=function(orderId,vendorId,vendorName,catId,catName,profilePic,mode){var ratingLoad={vendorId:vendorId,vendorName:vendorName,catId:catId,catName:catName,profilePic:profilePic,mode:mode};hsOrder.setHSOData("orderId",orderId),hsOrder.setHSOData("ratingLoad",ratingLoad),IntegrationService.reviewOrder()},self.orderSummary=function(orderId,mode,isCod,isHelp){hsOrder.setHSOData("orderId",orderId),hsOrder.setHSOData("odrFlow",mode),hsOrder.setHSOData("force_cod",isCod),$state.go("order-summary",{isHelpSupportCall:isHelp})},self.quoteOrders=function(quoteId){hsOrder.setHSOData("quoteId",quoteId),$state.go("order-quotes")},self.openReorderPopup=function(orderId,catId,maxDaysCount){$mdDialog.show({clickOutsideToClose:!0,controller:reorderPopupCotroller,controllerAs:"reorderCtrl",templateUrl:"components/orders/order-popups/reorder-popup.temp.html",bindToController:!0,locals:{orderId:orderId,catId:catId,orderSummary:self.orderSummary,maxDate:DateHelper.generateNextDate(maxDaysCount)}})},self.downloadApp=function(){var params={user_id:AuthService.getCurrentUser().user_id,mobile:AuthService.getCurrentUser().mobile};IntegrationService.downloadApp(params)}}function reorderPopupCotroller($mdDialog,$mdToast,$timeout,hsOrder,HODProvider,AuthService,DateHelper){var self=this;self.pageLoadVars={user_id:AuthService.getCurrentUser().user_id,order_summary:0,order_id:self.orderId,cat_id:self.catId,date:void 0,time:void 0},self.pageRenderVars={todayDate:DateHelper.getCurrentDate(),datePicker:"",timeSlots:void 0,termsAccepted:!1,reorderPlaced:!1,submitFlag:!0,maxDate:self.maxDate},self.fetchTimeslot=function(){self.pageLoadVars.date=hsOrder.getFormatedDate(self.pageRenderVars.datePicker,0),HODProvider.getFutTime(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.timeSlots=response.data.future_slots,response.data.future_slots.length||$mdToast.showSimple("Vendor is not available for the selected date.")):response.status})},self.placeReorder=function(){!self.pageRenderVars.reorderPlaced&&self.pageRenderVars.submitFlag&&(self.pageRenderVars.submitFlag=!1,self.reorderForm.$valid?HODProvider.reorder(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.reorderPlaced=!0,self.pageRenderVars.submitFlag=!0,$mdToast.showSimple(hsOrder.getMessage(59)),$mdDialog.hide(),self.orderSummary(response.data.order_id,2)):"HTTP_SUCCESS_NO_DATA"==response.status?(self.pageRenderVars.submitFlag=!0,$mdToast.showSimple(hsOrder.getMessage(31))):(self.pageRenderVars.submitFlag=!0,$mdToast.showSimple(hsOrder.getMessage(32)))}):($mdToast.showSimple(hsOrder.getMessage(21)),$timeout(function(){self.pageRenderVars.submitFlag=!0},100)))},self.closeDialog=function(){$mdDialog.hide()}}angular.module("hsOrderModule").component("myOrders",{templateUrl:"components/orders/my-order-service/my-orders.temp.html",controller:myOrdersController}),myOrdersController.$inject=["$mdToast","$window","$state","$mdDialog","hsOrder","HODProvider","AuthService","IntegrationService","$stateParams","$rootScope","DateHelper"],reorderPopupCotroller.$inject=["$mdDialog","$mdToast","$timeout","hsOrder","HODProvider","AuthService","DateHelper"]}(),function(){function orderCancelController($mdToast,$window,$stateParams,hsOrder,HODProvider,AuthService,$scope,$mdDialog,$state){var self=this;self.reasonsLoad={reason_type:1},self.pageLoadVars={issueRaised:!1,submitFlag:!0},self.pageRenderVars={formData:{user_id:AuthService.getCurrentUser().user_id,order_id:hsOrder.getHSOData("orderId"),cancel_reason:"",cancel_message:"",reasons:[],is_requested_vendor:"no"}},HODProvider.fetchOdrOprReason(self.reasonsLoad).then(function(response){"HTTP_SUCCESS_DATA"==response.status?self.pageRenderVars.formData.reasons=response.data.reasons:response.status}),self.cancelOrder=function(){!self.pageLoadVars.issueRaised&&self.pageLoadVars.submitFlag&&(self.pageLoadVars.submitFlag=!1,HODProvider.cancelOrder(self.pageRenderVars.formData).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageLoadVars.issueRaised=!0,self.pageLoadVars.submitFlag=!0,$mdToast.showSimple(hsOrder.getMessage(75)),self.closeDialog(),$state.go("orders")):"HTTP_SUCCESS_NO_DATA"==response.status?(self.pageLoadVars.submitFlag=!0,$mdToast.showSimple(hsOrder.getMessage(31))):(self.pageLoadVars.submitFlag=!0,$mdToast.showSimple(hsOrder.getMessage(32)))}))},self.closeDialog=function(){$mdDialog.hide()}}angular.module("hsOrderModule").component("orderCancel",{templateUrl:"components/orders/order-cancel/order-cancel.temp.html",controller:orderCancelController}),orderCancelController.$inject=["$mdToast","$window","$stateParams","hsOrder","HODProvider","AuthService","$scope","$mdDialog","$state"]}(),function(){function orderFeedbackController(HODProvider,hsOrder,$mdToast){var self=this;self.loading=!1,self.showQues=!0,self.submitAns=function(currQuestion,ans_id){var dataToSend={order_id:self.orderQues.order_feedback.questionsAnswers.others.order_id,vendor_id:self.orderQues.order_feedback.questionsAnswers.others.vendor_id,vcr_id:self.orderQues.order_feedback.questionsAnswers.others.vcr_id,shortlink_id:self.orderQues.order_feedback.questionsAnswers.others.shortlink_id,swap_question:currQuestion.swap_question,question_id:currQuestion.question_id,answer_id:ans_id,all_answered:self.orderQues.order_feedback.questionsAnswers.questions[self.orderQues.order_feedback.questionsAnswers.questions.length-1].question_id===currQuestion.question_id?"true":"false"};self.loading=!0;var e=angular.element(document.getElementById("rsc-card-wrapper")),offsetToScroll=e.find("md-card")[0].offsetWidth;HODProvider.sendOrderFeedback(dataToSend).then(function(response){if("HTTP_SUCCESS_DATA"==response.status){if(self.loading=!1,-1!=currQuestion.redirect_answer_id_list.indexOf(ans_id)){var serviceData={cat_model_code:self.orderQues.cat_model_code,cat_id:self.orderQues.cat_id,category_slug:self.orderQues.service_city_slug};hsOrder.setHSOData("odrFlow",200),hsOrder.orderFlowRedirection(2,1,serviceData)}response.data&&""!==response.data.msg?(self.showQues=!1,$mdToast.showSimple(response.data.msg)):e[0].scrollBy({top:0,left:offsetToScroll,behavior:"smooth"})}else"HTTP_SUCCESS_NO_DATA"==response.status?self.loading=!1:(self.loading=!1,$mdToast.showSimple(hsOrder.getMessage(32)))})}}angular.module("hsOrderModule").component("orderFeedback",{templateUrl:"components/orders/order-feedback/order-feedback.temp.html",bindings:{orderQues:"="},controller:orderFeedbackController}),orderFeedbackController.$inject=["HODProvider","hsOrder","$mdToast"]}(),function(){function orderIssueController($rootScope,$mdToast,$window,$stateParams,hsOrder,HODProvider,AuthService,$mdDialog){var self=this;self.reasonsLoad={reason_type:2},self.pageLoadVars={issueRaised:!1,submitFlag:!0},self.pageRenderVars={formData:{user_id:AuthService.getCurrentUser().user_id,order_id:hsOrder.getHSOData("orderId"),issue_type:"",message:"",reasons:[]}},HODProvider.fetchOdrOprReason(self.reasonsLoad).then(function(response){"HTTP_SUCCESS_DATA"==response.status?self.pageRenderVars.formData.reasons=response.data.reasons:response.status}),self.submitIssue=function(){!self.pageLoadVars.issueRaised&&self.pageLoadVars.submitFlag&&(self.pageLoadVars.submitFlag=!1,HODProvider.raiseIssue(self.pageRenderVars.formData).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageLoadVars.issueRaised=!0,self.pageLoadVars.submitFlag=!0,$mdToast.showSimple(hsOrder.getMessage(60)),$rootScope.$broadcast("issueRaised"),self.closeDialog()):"HTTP_SUCCESS_NO_DATA"==response.status?(self.pageLoadVars.submitFlag=!0,$mdToast.showSimple(hsOrder.getMessage(31))):(self.pageLoadVars.submitFlag=!0,$mdToast.showSimple(hsOrder.getMessage(32)))}))},self.closeDialog=function(){$mdDialog.hide()}}angular.module("hsOrderModule").component("orderIssue",{templateUrl:"components/orders/order-raise-issue/order-issue.temp.html",controller:orderIssueController}),orderIssueController.$inject=["$rootScope","$mdToast","$window","$stateParams","hsOrder","HODProvider","AuthService","$mdDialog"]}(),function(){function reorderPopupCotroller($mdDialog,$mdToast,$timeout,hsOrder,HODProvider,AuthService,DateHelper){var self=this;self.pageLoadVars={user_id:AuthService.getCurrentUser().user_id,order_summary:0,order_id:self.orderId,cat_id:self.catId,date:void 0,time:void 0},self.pageRenderVars={todayDate:DateHelper.getCurrentDate(),datePicker:"",timeSlots:void 0,termsAccepted:!1,reorderPlaced:!1,submitFlag:!0},self.fetchTimeslot=function(){self.pageLoadVars.date=hsOrder.getFormatedDate(self.pageRenderVars.datePicker,0),HODProvider.getFutTime(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?self.pageRenderVars.timeSlots=response.data.future_slots:response.status})},self.placeReorder=function(){!self.pageRenderVars.reorderPlaced&&self.pageRenderVars.submitFlag&&(self.pageRenderVars.submitFlag=!1,self.reorderForm.$valid?HODProvider.reorder(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.reorderPlaced=!0,self.pageRenderVars.submitFlag=!0,$mdToast.showSimple(hsOrder.getMessage(59)),$mdDialog.hide(),self.orderSummary(response.data.order_id,2)):"HTTP_SUCCESS_NO_DATA"==response.status?(self.pageRenderVars.submitFlag=!0,$mdToast.showSimple(hsOrder.getMessage(31))):(self.pageRenderVars.submitFlag=!0,$mdToast.showSimple(hsOrder.getMessage(32)))}):($mdToast.showSimple(hsOrder.getMessage(21)),$timeout(function(){self.pageRenderVars.submitFlag=!0},100)))},self.closeDialog=function(){$mdDialog.hide()}}angular.module("hsOrderModule").component("orderReorder",{templateUrl:"components/orders/order-reorder/order-reorder.temp.html",controller:reorderPopupCotroller}),reorderPopupCotroller.$inject=["$mdDialog","$mdToast","$timeout","hsOrder","HODProvider","AuthService","DateHelper"]}(),function(){function orderRescheduleController($mdToast,$window,$stateParams,hsOrder,HODProvider,AuthService,$mdDialog){var self=this;self.slotSelection={today:DateHelper.getCurrentDate(),dateSelected:void 0,futSlots:void 0},self.pageLoadVars={issueRaised:!1,submitFlag:!0},self.pageRenderVars={formData:{user_id:AuthService.getCurrentUser().user_id,order_id:hsOrder.getHSOData("orderId"),date:"",service_time:"",reschedule_reason:""}},self.selectDate=function(){var date=hsOrder.getFormatedDate(self.slotSelection.dateSelected,1);self.pageRenderVars.formData.date=date;var dataToSend={cat_id:hsOrder.getHSOData("catId"),date:date};HODProvider.getFutTime(dataToSend).then(function(response){"HTTP_SUCCESS_DATA"==response.status?self.slotSelection.futSlots=response.data.future_slots:response.status})},self.rescheduleOrder=function(){!self.pageLoadVars.issueRaised&&self.pageLoadVars.submitFlag&&(self.pageLoadVars.submitFlag=!1,HODProvider.rescheduleOrder(self.pageRenderVars.formData).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageLoadVars.issueRaised=!0,self.pageLoadVars.submitFlag=!0,$mdToast.showSimple(hsOrder.getMessage(76)),self.dateTimeUpdate(response.service_date,response.service_time),$mdDialog.hide()):"HTTP_SUCCESS_NO_DATA"==response.status?(self.pageLoadVars.submitFlag=!0,$mdToast.showSimple(hsOrder.getMessage(31))):(self.pageLoadVars.submitFlag=!0,$mdToast.showSimple(hsOrder.getMessage(32)))}))},self.closeDialog=function(){$mdDialog.hide()}}angular.module("hsOrderModule").component("orderReschedule",{templateUrl:"components/orders/order-reschedule/order-reschedule.temp.html",controller:orderRescheduleController}),orderRescheduleController.$inject=["$mdToast","$window","$stateParams","hsOrder","HODProvider","AuthService","$mdDialog","DateHelper"]}(),function(){function orderPaymentsController($mdBottomSheet,$mdDialog,$mdToast,$window,$state,hsOrder,HODProvider,AuthService){var self=this;self.pageLoadVars={order_id:hsOrder.getHSOData("orderId"),city_id:hsOrder.getHSOData("cityId"),user_id:AuthService.getCurrentUser().user_id,coupon_code:"",device_id:"",force_cod:hsOrder.getHSOData("force_cod")},self.pageRenderVars={gotData:!1,dataObject:void 0,amountDetails:!1,onlinePaid:!1,applyCoupon:!1,advancePayment:!1,bottomCTAEnabled:!0},HODProvider.getPaymentInfo(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.gotData=!0,self.pageRenderVars.dataObject=response.data,self.extractData()):response.status}),self.applyCoupon=function(){HODProvider.applyCouponPS(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.gotData=!0,self.pageRenderVars.dataObject=response.data,self.extractData()):response.status,$mdToast.showSimple(response.data.message)})},self.extractData=function(){self.pageRenderVars.dataObject.amount_details.info.length?self.pageRenderVars.amountDetails=!0:self.pageRenderVars.amountDetails=!1,self.pageRenderVars.dataObject.online_paid.info.length?self.pageRenderVars.onlinePaid=!0:self.pageRenderVars.onlinePaid=!1,self.pageRenderVars.dataObject.coupon_applied?self.pageRenderVars.applyCoupon=!1:self.pageRenderVars.applyCoupon=!0,"no"==self.pageRenderVars.dataObject.advance_payment?self.pageRenderVars.advancePayment=!1:self.pageRenderVars.advancePayment=!0,"OCMP"!=self.pageRenderVars.dataObject.order_status&&self.pageRenderVars.dataObject.total_outstanding?self.pageRenderVars.bottomCTAEnabled=!0:self.pageRenderVars.bottomCTAEnabled=!1},self.initiatePayment=function(){hsOrder.initiatePayment(self.pageRenderVars.dataObject.total_outstanding).then(function(response){})},self.openPaymentPopup=function(){$mdDialog.show({clickOutsideToClose:!0,controller:paymentPopupCotroller,controllerAs:"advPaymentCtrl",templateUrl:"components/orders/order-popups/payment-popup.temp.html",bindToController:!0,locals:{orderId:self.pageLoadVars.order_id,minAdvance:self.pageRenderVars.dataObject.min_advance||1,maxAdvance:self.pageRenderVars.dataObject.total_outstanding}})}}function paymentPopupCotroller($mdDialog,$mdToast,$timeout,hsOrder){var self=this;self.pageRenderVars={amount:0,submitFlag:!1},self.initiatePayment=function(){self.pageRenderVars.submitFlag||(self.pageRenderVars.submitFlag=!0,self.pageRenderVars.amount<self.minAdvance?(self.pageRenderVars.amount=self.minAdvance,$mdToast.showSimple(hsOrder.getMessage(77)),$timeout(function(){self.pageRenderVars.submitFlag=!1},100)):self.pageRenderVars.amount>self.maxAdvance?(self.pageRenderVars.amount=self.maxAdvance,$mdToast.showSimple(hsOrder.getMessage(78)),$timeout(function(){self.pageRenderVars.submitFlag=!1},100)):hsOrder.initiatePayment(self.pageRenderVars.amount).then(function(response){self.pageRenderVars.submitFlag=!1,$mdDialog.hide()}))}}angular.module("hsOrderModule").component("orderPayments",{templateUrl:"components/orders/order-summary-payment/order-payments.temp.html",bindings:{paymentStatus:"="},controller:orderPaymentsController}),orderPaymentsController.$inject=["$mdBottomSheet","$mdDialog","$mdToast","$window","$state","hsOrder","HODProvider","AuthService"],paymentPopupCotroller.$inject=["$mdDialog","$mdToast","$timeout","hsOrder"]}(),function(){function orderSummaryController($mdDialog,$mdToast,$state,hsOrder,HODProvider,AuthService,$scope,IntegrationService,$rootScope,$location,ApiService,PriceChartGalleryService,PubNubService,chatSupport,$stateParams,DateHelper){function stopSpinnerOnChatWindow(){window.fcWidget.on("widget:opened",function(resp){self.isSpinner=!1})}function renderStr(str){return void 0===str?"":str}function makeProgressElement(){var parentDiv=document.getElementById("progress-animation-container");document.getElementById("order-progress").remove();var div=document.createElement("div");div.textContent="",div.setAttribute("id","order-progress"),div.setAttribute("class","order-status-container"),div.setAttribute("layout","row"),div.setAttribute("layout-align","center"),parentDiv.appendChild(div)}function openRaiseissueDialog(){$mdDialog.show({template:"<order-issue></order-issue>",scope:$scope,preserveScope:!0,clickOutsideToClose:!0})}function openCancelreqDialog(){$mdDialog.show({templateUrl:"components/orders/order-cancel/order-cancel.temp.html",locals:{catModelCode:self.pageRenderVars.odrSummaryData.cat_model_code,urlSlug:self.pageRenderVars.odrSummaryData.service_city_slug,catId:self.pageRenderVars.odrSummaryData.cat_id,update:function(){self.pageRenderVars.odrSummaryData.status_code="OCNL",self.pageRenderVars.odrSummaryData.reschedule_order=!1,self.pageRenderVars.odrSummaryData.cancel_order=!1,self.pageRenderVars.payOnlineBtnEnabled=!1,self.orderProgressHandler(),makeProgressElement(),chatSupport.updateuserMeta(self.makeChatConfiguration(self.pageRenderVars.odrSummaryData).userProperties),$mdDialog.hide()},closeDialog:function(){$mdDialog.hide()}},bindToController:!0,controller:orderCancelController,controllerAs:"ctrl",clickOutsideToClose:!0})}function openRescheduleDialog(){$mdDialog.show({templateUrl:"components/orders/order-reschedule/order-reschedule.temp.html",locals:{catId:self.pageRenderVars.odrSummaryData.cat_id,catModelCode:self.pageRenderVars.odrSummaryData.cat_model_code,vendorId:self.pageRenderVars.odrSummaryData.vendor_id,maxDate:self.calendarMaxDate,dateTimeUpdate:function(date,time){self.pageRenderVars.odrSummaryData.service_date=date,self.pageRenderVars.odrSummaryData.service_time=time,chatSupport.updateuserMeta(self.makeChatConfiguration(self.pageRenderVars.odrSummaryData).userProperties)}},bindToController:!0,controller:orderRescheduleController,controllerAs:"ctrl",clickOutsideToClose:!0})}function closeDialog(){$mdDialog.hide()}var self=this;self.loadProgressBar=!0,self.openRescheduleDialog=openRescheduleDialog,self.openRaiseissueDialog=openRaiseissueDialog,self.openCancelreqDialog=openCancelreqDialog,self.closeDialog=closeDialog,self.isSpinner=$stateParams.isHelpSupportCall,self.pageLoadVars={initialLoad:{order_id:hsOrder.getHSOData("orderId"),user_id:AuthService.getCurrentUser().user_id,instrutions:""}},self.pageRenderVars={odrFlow:hsOrder.getHSOData("odrFlow"),newTab:[{name:"Services",data:["Orders","Quotes Received","Reorders"],index:0},{name:"Recharge",data:["All"],index:1}],tabs:["Summary","Payments"],activeTab:0,notification:0,odrSummaryData:void 0,reviewMode:{1:"View Review",2:"Edit Review",3:"Write Review"},bottomCTA:1,bottomCTAEnabled:!0,payOnlineBtnEnabled:!0,force_cod:hsOrder.getHSOData("force_cod")},$rootScope.$on("reviewSubmitted",function(event,args){self.loadProgressBar=!1,self.getOrdSumData({order_id:args.order_id,user_id:args.user_id})}),$rootScope.$on("issueRaised",function(){self.pageRenderVars.odrSummaryData&&(self.pageRenderVars.odrSummaryData.raise_issue=!1,self.enableRequestSupport())}),self.getOrdSumData=function(loadData){HODProvider.orderSummary(loadData).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(hsOrder.setHSOData("priceChartData",{data:response.data.price_chart,title:response.data.price_chart_title}),self.pageRenderVars.odrSummaryData=response.data,self.calendarMaxDate=DateHelper.generateNextDate(response.data.max_days),self.enableRequestSupport(),response.data.is_chat_support||$stateParams.isHelpSupportCall?(self.customerSupportTxt="Help",chatSupport.initChat(self.makeChatConfiguration(self.pageRenderVars.odrSummaryData)),$stateParams.isHelpSupportCall&&(chatSupport.openChat(),stopSpinnerOnChatWindow())):(self.customerSupportTxt="Request support",chatSupport.destroyChat()),"891"===response.data.vendor_id?(self.pageRenderVars.odrSummaryData.isPartner=!0,PubNubService.subscribe(AuthService.getCurrentUser().global_user_id)):self.pageRenderVars.odrSummaryData.isPartner=!1,hsOrder.setHSOData("jrneyLevel",4),self.extractData()):"HTTP_SUCCESS_NO_DATA"==response.status?($mdToast.showSimple(hsOrder.getMessage(31)),$state.go("my-orders")):$mdToast.showSimple(hsOrder.getMessage(32))})},self.checkOrderSummaryType=function(){var searchParams=$location.search();searchParams&&searchParams.order_id&&searchParams.auth?(hsOrder.setHSOData("orderId",searchParams.order_id),self.pageLoadVars.initialLoad.order_id=searchParams.order_id,AuthService.autoLogin({order_id:searchParams.order_id,auth:searchParams.auth},function(res){window.history.replaceState({},document.title,ApiService.get().baseAppPath+"order-summary"),self.getOrdSumData({order_id:searchParams.order_id,user_id:res.data.user_id})},function(errMsg){$mdToast.showSimple(errMsg),$state.go("my-orders")})):self.getOrdSumData(self.pageLoadVars.initialLoad)},self.checkOrderSummaryType(),self.extractData=function(){self.notificationHandler(1,!1),self.btnBottomHandler(),self.loadProgressBar&&self.orderProgressHandler(),0===self.pageRenderVars.odrSummaryData.payment_status&&self.pageRenderVars.odrSummaryData.actual_price>0&&self.pageRenderVars.odrSummaryData.payment_popup&&self.openPaymentBottomSheet()},self.testVal="default value",self.orderProgressHandler=function(){var animationJson=null;switch(self.pageRenderVars.odrSummaryData.status_code){case"OPOOL":case"OREQ":animationJson="dist/json/order-oreq.json";break;case"OACC":animationJson="dist/json/order-oacc.json";break;case"OPRC":animationJson="dist/json/order-oprc.json";break;case"OCMP":animationJson="dist/json/order-ocmp.json";break;default:animationJson=null}self.testVal="extract function value",bodymovin.loadAnimation({container:document.getElementById("order-progress"),renderer:"svg",loop:!0,autoplay:!0,path:animationJson})},self.btnBottomHandler=function(){self.pageRenderVars.odrSummaryData.reorder?self.pageRenderVars.bottomCTA=2:self.pageRenderVars.bottomCTA=1,self.pageRenderVars.odrSummaryData.total_outstanding&&"OCNL"!=self.pageRenderVars.odrSummaryData.status_code&&"OCMP"!=self.pageRenderVars.odrSummaryData.status_code&&"false"!=self.pageRenderVars.odrSummaryData.vendor_info.allow_online_payment||(self.pageRenderVars.payOnlineBtnEnabled=!1),(self.pageRenderVars.odrSummaryData.actual_price<=0||1===self.pageRenderVars.odrSummaryData.payment_status)&&(self.pageRenderVars.bottomCTAEnabled=!1)},self.openVendorDetails=function(vendor_id,cat_id){var params={vendorId:self.pageRenderVars.odrSummaryData.vendor_id,catId:self.pageRenderVars.odrSummaryData.cat_id,isOrganic:!1,service_city_slug:renderStr(self.pageRenderVars.odrSummaryData.service_city_slug),cat_slug:renderStr(self.pageRenderVars.odrSummaryData.catalog_slug),isOrderPlaced:!0};hsOrder.setHSOData("venProMode",!1),hsOrder.setHSOData("vendorId",self.pageRenderVars.odrSummaryData.vendor_id),hsOrder.setHSOData("catId",self.pageRenderVars.odrSummaryData.cat_id),$state.go("vendor-profile",params)},self.notificationHandler=function(option,answer){option?"OREQ"!=self.pageRenderVars.odrSummaryData.status_code||11!==self.pageRenderVars.odrFlow&&12!==self.pageRenderVars.odrFlow&&13!==self.pageRenderVars.odrFlow&&14!==self.pageRenderVars.odrFlow&&2!==self.pageRenderVars.odrFlow?self.pageRenderVars.odrSummaryData.vendor_arrived?self.pageRenderVars.odrSummaryData.review&&(self.pageRenderVars.notification=5):self.pageRenderVars.notification=2:self.pageRenderVars.notification=1:self.vendorArrivalUpdate(answer)},self.vendorArrivalUpdate=function(answer){var dataToSend={order_id:hsOrder.getHSOData("orderId"),arrived:void 0};dataToSend.arrived=answer?"yes":"no",HODProvider.vdrArrivalStatus(dataToSend).then(function(response){"HTTP_SUCCESS_DATA"==response.status?($mdToast.showSimple(hsOrder.getMessage(11)),self.pageRenderVars.notification=answer?3:4):"HTTP_SUCCESS_NO_DATA"==response.status?$mdToast.showSimple(hsOrder.getMessage(31)):$mdToast.showSimple(hsOrder.getMessage(32))})},self.reviewOrder=function(orderId,vendorId,vendorName,catId,catName,profilePic,mode){var ratingLoad={vendorId:vendorId,vendorName:vendorName,catId:catId,catName:catName,profilePic:profilePic,mode:mode};hsOrder.setHSOData("orderId",orderId),hsOrder.setHSOData("ratingLoad",ratingLoad),IntegrationService.reviewOrder()},self.openPaymentBottomSheet=function(){$mdDialog.show({templateUrl:"components/popup/payment-bs.temp.html",clickOutsideToClose:!0,escapeToClose:!0,bindToController:!0,controller:function(){},controllerAs:"ctrl",locals:{amount:self.pageRenderVars.odrSummaryData.actual_price,gotoPayment:function(){self.changeTab(1),$mdDialog.hide()},closeDialog:function(){$mdDialog.hide()}}}).then(function(){}).catch(function(){})},self.gotoPayment=function(){self.changeTab(1)},self.actionOnOrder=function(mode){switch(mode){case 1:self.openRaiseissueDialog();break;case 2:self.openCancelreqDialog();break;case 3:self.openRescheduleDialog()}},self.changeTab=function(index){0==index&&self.orderProgressHandler(),self.pageRenderVars.activeTab=index},self.viewProfile=function(){var params={vendorId:self.pageRenderVars.odrSummaryData.vendor_id,catId:self.pageRenderVars.odrSummaryData.cat_id};hsOrder.setHSOData("venProMode",!1),$state.go("vendor-profile",params)},self.searchVendorSvg=function(){bodymovin.loadAnimation({container:document.getElementById("searching-vendor"),renderer:"svg",loop:!0,autoplay:!0,path:"dist/json/vendor-search/searching-vendor.json"}),bodymovin.loadAnimation({container:document.getElementById("searching-vendor-dot"),renderer:"svg",loop:!0,autoplay:!0,path:"dist/json/vendor-search/searching-vendor-dot.json"})},self.getAssignedVendor=function(){var dataToSend={order_id:self.pageRenderVars.odrSummaryData.order_id};HODProvider.getVendorStatus(dataToSend).then(function(response){var vendorData=response.data.vendor_info;vendorData&&"891"!==vendorData.vendor_id&&self.updateToAssignedVendor(vendorData)})},$rootScope.$on("orderAssignedToVendor",function(event,args){(args=args.vendor_info)&&"891"!==args.vendor_id&&self.pageRenderVars.odrSummaryData.order_id===args.order_id&&self.updateToAssignedVendor(args)}),self.updateToAssignedVendor=function(data){PubNubService.unSubscribe(AuthService.getCurrentUser().global_user_id),makeProgressElement(),self.pageRenderVars.odrSummaryData.vendor_id=data.vendor_id,self.pageRenderVars.odrSummaryData.profile_pic=data.profile_pic,
self.pageRenderVars.odrSummaryData.vendor_name=data.vendor_name,self.pageRenderVars.odrSummaryData.vendor_address=data.vendor_address,self.pageRenderVars.odrSummaryData.avg_rating=data.avg_rating,self.pageRenderVars.odrSummaryData.catalog_slug=data.catalog_slug,self.pageRenderVars.odrSummaryData.vendor_verified=data.vendor_verified,self.pageRenderVars.odrSummaryData.vendor_info.allow_online_payment=data.allow_online_payment,self.pageRenderVars.odrSummaryData.isPartner=!1,"true"==data.allow_online_payment&&(self.pageRenderVars.payOnlineBtnEnabled=!0),self.pageRenderVars.odrSummaryData.status_code="OACC",chatSupport.updateuserMeta(self.makeChatConfiguration(self.pageRenderVars.odrSummaryData).userProperties),self.orderProgressHandler()},self.openReorderPopup=function(orderId,catId){$mdDialog.show({parent:"#reorder-popup-os",clickOutsideToClose:!0,controller:reorderPopupCotroller,controllerAs:"reorderCtrl",templateUrl:"components/orders/order-popups/reorder-popup.temp.html",bindToController:!0,locals:{orderId:orderId,catId:catId,maxDate:self.calendarMaxDate,updatePageData:function(data){hsOrder.setHSOData("orderId",data.order_id),hsOrder.setHSOData("odrFlow",2),self.pageLoadVars.initialLoad.order_id=data.order_id,self.pageRenderVars.odrFlow=2,self.pageRenderVars.odrSummaryData=data.order_data,self.extractData()}}})},self.changeSideTab=function(pIndex,index){var params={pIndex:pIndex,index:index};$state.go("my-orders",params)},self.downloadApp=function(){var params={user_id:AuthService.getCurrentUser().user_id,mobile:AuthService.getCurrentUser().mobile};IntegrationService.downloadApp(params)},self.viewPrices=function(galleryData){PriceChartGalleryService.openModal(galleryData,"",0)},self.goToCustomerSupport=function(){self.pageRenderVars.odrSummaryData.is_chat_support?chatSupport.openChat():self.actionOnOrder(1)},self.makeChatConfiguration=function(dataObj){return{restore_id:dataObj.restore_id,order_id:dataObj.order_id,userProperties:{orderID:dataObj.order_id,cityName:dataObj.user_details.city_name,serviceAddress:dataObj.service_address,categoryName:dataObj.cat_name,vendorName:dataObj.vendor_name,vendorID:dataObj.vendor_id,vendorNumber:dataObj.vendor_mobile,vendorSecondaryNumber:dataObj.vendor_secondary_mobile,orderStatus:dataObj.status_code,orderTimestamp:dataObj.order_timestamp,serviceDate:dataObj.service_date,serviceTimeslot:dataObj.service_time,firstName:dataObj.user_details.first_name,email:dataObj.user_details.email,phone:dataObj.user_details.phone,phoneCountryCode:"+91"},basics:{firstName:dataObj.user_details.first_name,email:dataObj.user_details.email,phone:dataObj.user_details.phone,phoneCountryCode:"+91",externalId:AuthService.getCurrentUser().user_id}}},self.enableRequestSupport=function(){self.isRequestSupportButton=!(!self.pageRenderVars.odrSummaryData.raise_issue&&!self.pageRenderVars.odrSummaryData.is_chat_support)}}function orderRescheduleController($mdToast,$window,$stateParams,hsOrder,HODProvider,AuthService,$mdDialog,$state,DateHelper){var self=this;self.slotSelection={today:DateHelper.getCurrentDate(),dateSelected:void 0,futSlots:void 0},self.pageLoadVars={issueRaised:!1,submitFlag:!0},self.pageRenderVars={formData:{user_id:AuthService.getCurrentUser().user_id,order_id:hsOrder.getHSOData("orderId"),date:"",service_time:"",reschedule_reason:""},maxDate:self.maxDate,catModelCode:self.catModelCode},self.vendorAvailable=!1,self.selectDate=function(){var date=hsOrder.getFormatedDate(self.slotSelection.dateSelected,1);self.pageRenderVars.formData.date=date;var dataToSend={cat_id:self.catId,date:date,vendor_id:self.vendorId};HODProvider.getFutTime(dataToSend).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.slotSelection.futSlots=response.data.future_slots,self.slotSelection.futSlots.length?self.vendorAvailable=!0:(self.vendorAvailable=!1,$mdToast.showSimple("Vendor is not available for the selected date."))):response.status})},self.rescheduleOrder=function(){!self.pageLoadVars.issueRaised&&self.pageLoadVars.submitFlag&&self.formReschedule.$valid&&(self.pageLoadVars.submitFlag=!1,HODProvider.rescheduleOrder(self.pageRenderVars.formData).then(function(response){if("HTTP_SUCCESS_DATA"==response.status)self.pageLoadVars.issueRaised=!0,self.pageLoadVars.submitFlag=!0,$mdToast.showSimple(hsOrder.getMessage(76)),self.dateTimeUpdate(response.data.service_date,response.data.service_time),$mdDialog.hide();else if("HTTP_SUCCESS_NO_DATA"==response.status){self.pageLoadVars.submitFlag=!0;var respMessag=response.data.message&&response.data.message.length?response.data.message:hsOrder.getMessage(31);$mdToast.showSimple(respMessag),$mdDialog.hide(),$state.go("my-orders")}else self.pageLoadVars.submitFlag=!0,$mdToast.showSimple(hsOrder.getMessage(32))}))},self.closeDialog=function(){$mdDialog.hide()}}function orderCancelController($mdToast,$window,$stateParams,hsOrder,HODProvider,AuthService,$scope,$mdDialog,$state){var self=this;self.reasonsLoad={reason_type:1},self.pageLoadVars={issueRaised:!1,submitFlag:!0},self.pageRenderVars={is_requested:!1,formData:{user_id:AuthService.getCurrentUser().user_id,order_id:hsOrder.getHSOData("orderId"),cancel_reason:"",cancel_message:"",reasons:[],is_requested_vendor:""},catModelCode:self.catModelCode},HODProvider.fetchOdrOprReason(self.reasonsLoad).then(function(response){"HTTP_SUCCESS_DATA"==response.status?self.pageRenderVars.formData.reasons=response.data.reasons:response.status}),self.cancelOrder=function(urlSlug,catId,catModelCode){!self.pageLoadVars.issueRaised&&self.formCancelOrder.$valid&&self.pageLoadVars.submitFlag&&(self.pageLoadVars.submitFlag=!1,self.pageRenderVars.formData.is_requested_vendor&&""!=self.pageRenderVars.formData.is_requested_vendor||(self.pageRenderVars.formData.is_requested_vendor="no"),HODProvider.cancelOrder(self.pageRenderVars.formData).then(function(response){if("HTTP_SUCCESS_DATA"==response.status)if(self.pageLoadVars.issueRaised=!0,self.pageLoadVars.submitFlag=!0,$mdToast.showSimple(hsOrder.getMessage(75)),"no"!==self.pageRenderVars.formData.is_requested_vendor){var serviceData={category_slug:urlSlug,cat_id:catId,cat_model_code:catModelCode};hsOrder.setHSOData("odrFlow",200),hsOrder.orderFlowRedirection(2,1,serviceData),self.closeDialog()}else self.update();else if("HTTP_SUCCESS_NO_DATA"==response.status){self.pageLoadVars.submitFlag=!0;var respMessg=response.data.message&&response.data.message.length?response.data.message:hsOrder.getMessage(31);$mdToast.showSimple(respMessg),$mdDialog.hide(),$state.go("my-orders")}else self.pageLoadVars.submitFlag=!0,$mdToast.showSimple(hsOrder.getMessage(32))}))},self.selectReason=function(reason){reason=JSON.parse(reason),self.pageRenderVars.formData.cancel_reason=reason.reason_value,self.pageRenderVars.is_requested=reason.is_requested},self.closeDialog=function(){$mdDialog.hide()}}function reorderPopupCotroller($state,$mdDialog,$mdToast,$timeout,hsOrder,HODProvider,AuthService,DateHelper){var self=this;self.pageLoadVars={user_id:AuthService.getCurrentUser().user_id,order_summary:1,order_id:self.orderId,cat_id:self.catId,date:void 0,time:void 0},self.pageRenderVars={todayDate:DateHelper.getCurrentDate(),datePicker:"",timeSlots:void 0,termsAccepted:!1,reorderPlaced:!1,submitFlag:!0,maxDate:self.maxDate},self.fetchTimeslot=function(){self.pageLoadVars.date=hsOrder.getFormatedDate(self.pageRenderVars.datePicker,0),HODProvider.getFutTime(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?self.pageRenderVars.timeSlots=response.data.future_slots:response.status})},self.reloadPage=function(orderId){hsOrder.setHSOData("orderId",orderId)},self.placeReorder=function(){!self.pageRenderVars.reorderPlaced&&self.pageRenderVars.submitFlag&&(self.pageRenderVars.submitFlag=!1,self.reorderForm.$valid?HODProvider.reorder(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.reorderPlaced=!0,self.pageRenderVars.submitFlag=!0,$mdToast.showSimple(hsOrder.getMessage(59)),$mdDialog.hide(),self.updatePageData(response.data)):"HTTP_SUCCESS_NO_DATA"==response.status?(self.pageRenderVars.submitFlag=!0,$mdToast.showSimple(hsOrder.getMessage(31))):(self.pageRenderVars.submitFlag=!0,$mdToast.showSimple(hsOrder.getMessage(32)))}):($mdToast.showSimple(hsOrder.getMessage(21)),$timeout(function(){self.pageRenderVars.submitFlag=!0},100)))},self.closeDialog=function(){$mdDialog.hide()}}angular.module("hsOrderModule").component("orderSummary",{templateUrl:"components/orders/order-summary/order-summary.temp.html",controller:orderSummaryController}),orderSummaryController.$inject=["$mdDialog","$mdToast","$state","hsOrder","HODProvider","AuthService","$scope","IntegrationService","$rootScope","$location","ApiService","PriceChartGalleryService","PubNubService","chatSupport","$stateParams","DateHelper"],orderRescheduleController.$inject=["$mdToast","$window","$stateParams","hsOrder","HODProvider","AuthService","$mdDialog","$state","DateHelper"],orderCancelController.$inject=["$mdToast","$window","$stateParams","hsOrder","HODProvider","AuthService","$scope","$mdDialog","$state"],reorderPopupCotroller.$inject=["$state","$mdDialog","$mdToast","$timeout","hsOrder","HODProvider","AuthService","DateHelper"]}(),function(){function paymentResponseController($state,$stateParams,hsOrder,HODProvider){var self=this;self.pageRenderVars={gotData:!1,dataObject:void 0,txnStatus:void 0},self.pageLoadVars={txnid:$stateParams.orderId||hsOrder.getHSOData("transactionId")},hsOrder.getHSOData("transactionId")||hsOrder.setHSOData("transactionId",self.pageLoadVars.txnid),HODProvider.fetchPaymentStatus(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.gotData=!0,self.pageRenderVars.dataObject=response.data.data,self.extractData()):response.status}),self.extractData=function(){switch(self.pageRenderVars.dataObject[0].payment_status){case"success":self.pageRenderVars.txnStatus=2;break;case"failure":self.pageRenderVars.txnStatus=0;break;default:self.pageRenderVars.txnStatus=1}},self.goBack=function(){$state.go("genesis.home")},self.redirect=function(option){var redirectTo;switch(option){case 0:redirectTo="paymentOptions";break;case 1:redirectTo="order-summary",hsOrder.setHSOData("orderId",self.pageRenderVars.dataObject[0].order_id),hsOrder.setHSOData("odrFlow",3)}$state.go(redirectTo)}}angular.module("hsOrderModule").component("paymentResponse",{templateUrl:"components/orders/payments/payment-response.temp.html",controller:paymentResponseController}),paymentResponseController.$inject=["$state","$stateParams","hsOrder","HODProvider"]}(),function(){function reviewOrderAddressController($rootScope,AuthService,$mdToast,HODProvider,hsOrder){function refreshPageVars(){self.headerCityID=hsOrder.getHSOData("cityId"),self.newAddrId=hsOrder.getHSOData("newAddressId"),self.newAddressData=void 0,self.isNewAddress=void 0!=self.newAddrId,self.pageLoadVars.user_id=AuthService.getCurrentUser().user_id}function updateAddressDetails(data){if(AuthService.isLoggedIn()){var isDefAddrFound=!1;self.relatedCityAddrCount=0,angular.forEach(self.pageRenderVars.addresses,function(eachAddr,key){if(!eachAddr.email.length)return void delete self.pageRenderVars.addresses[key];eachAddr.city_id==self.headerCityID&&self.relatedCityAddrCount++,!self.isNewAddress&&eachAddr.default_address&&eachAddr.city_id==self.headerCityID&&(isDefAddrFound=!0,self.selectedAddress(eachAddr)),self.isNewAddress&&eachAddr.address_id==self.newAddrId&&self.selectedAddress(eachAddr)}),self.isNewAddress||isDefAddrFound||(self.selectedAddrID="",self.intScn.pageLoadVars.address_id=""),self.intScn.isAdressesLen=self.relatedCityAddrCount>0,self.relatedCityAddrCount>0?self.intScn.activeLeftComp=3:self.intScn.activeLeftComp=2,self.pageRenderVars.gotData=!0}}function makeDefaultAddressFlag(newAddrArr){angular.forEach(self.pageRenderVars.addresses,function(value,key){value.address_id!=newAddrArr.address_id&&(value.default_address=!1)})}var self=this;self.gotData=!1,self.selectedAddrID="",self.pageLoadVars={user_id:AuthService.getCurrentUser().user_id,restrict:!1,restrict_city_id:void 0,restrict_pincode:void 0},self.pageRenderVars={gotData:!1,addresses:void 0,defaultSetResponse:void 0},refreshPageVars(),self.getAddress=function(){if(!AuthService.isLoggedIn())return!1;HODProvider.mngAddress(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.addresses=response.data.addresses,updateAddressDetails(self.pageRenderVars.addresses)):"HTTP_SUCCESS_NO_DATA"==response.status&&(self.intScn.activeLeftComp=2)})},self.addAddressComp=function(){self.intScn.activeLeftComp=2},self.getAddress(),self.selectedAddress=function(addrData){self.selectedAddrID=addrData.address_id,self.intScn.updateAddrDetails(addrData)},$rootScope.$on("newAddressAdded",function(event,data){refreshPageVars(),void 0==self.pageRenderVars.addresses&&(self.pageRenderVars.addresses=[]),self.pageRenderVars.addresses.push(data),self.newAddressData=data,self.newAddressData.default_address&&makeDefaultAddressFlag(self.newAddressData),self.selectedAddress(data),self.pageRenderVars.gotData=!0});var isAlreadyBroadCasted=!1;$rootScope.$on("reviewOrderLoginSuccess",function(event){isAlreadyBroadCasted||(isAlreadyBroadCasted=!0,refreshPageVars(),self.getAddress(),isAlreadyBroadCasted=!1)})}angular.module("hsOrderModule").component("reviewOrderAddress",{templateUrl:"components/orders/review-order/review-order-address/review-order-address.temp.html",bindings:{intScn:"="},controller:reviewOrderAddressController}),reviewOrderAddressController.$inject=["$rootScope","AuthService","$mdToast","HODProvider","hsOrder"]}(),function(){function reviewOrderDetailsController(){}angular.module("hsOrderModule").component("reviewOrderDetails",{templateUrl:"app/components/orders/review-order/review-order-details/review-order-details.temp.html",bindings:{intScn:"="},controller:reviewOrderDetailsController}),reviewOrderDetailsController.$inject=[]}(),function(){function reviewOrderLoginController($rootScope,AuthService,$state,utils,$interval,$mdToast){function sendOtp(){clearOtpInputs(),AuthService.login({mobile:self.loginFormData.mobileNumber},function(res){$mdToast.showSimple("OTP sent to your mobile no."),self.isOTPSent=!0,self.isOtpBtnEnabled=!1,autoFocusOTP(1)},function(err){$rootScope.error="Failed to login"}),self.resetOTPCountDown()}function clearOtpInputs(){for(var i=1;i<=5;i++)document.getElementById("otp_"+i).value=""}function autoFocusOTP(index){document.getElementById("otp_"+index).focus()}function onSuccess(res){$rootScope.$broadcast("reviewOrderLoginSuccess"),self.intScn.getLoginStatus();try{utils.isObjectEmpty($rootScope.toState)||$rootScope.toState.name;AuthService.isTransitionLocked=!1}catch(err){$state.go("genesis.home")}}function onFailure(err){$mdToast.showSimple(err)}var self=this;self.isOTPSent=!1,self.isValidNumber=!1,self.loginFormData={mobileNumber:"",otpEntered:""},self.isOtpBtnEnabled=!1,self.otpBtnTextArr=["Send OTP","Resend OTP"],self.otpBtnText=self.otpBtnTextArr[0],self.otpResendCountDown=0,self.autoSendOTP=function(){self.isValidNumber?sendOtp(self.loginFormData.mobileNumber):document.getElementById("userMobileNumber").focus()};var userOTP=[];self.saveOtp=function(ev,index){var event=ev,otpTemp="",otpvalue=event.target.value;if(userOTP[index-1]=otpvalue,angular.forEach(userOTP,function(value,key){""==value&&(self.isContinueBtn=!1)}),("Backspace"==event.key||"Delete"==event.key)&&index>1&&""==otpvalue)return void autoFocusOTP(index-1);index<5&&""!=userOTP[index-1]&&autoFocusOTP(index+1);for(var i=0;i<userOTP.length;i++)otpTemp+=userOTP[i];self.loginFormData.otpEntered=otpTemp,5===self.loginFormData.otpEntered.length?self.isContinueBtn=!0:self.isContinueBtn=!1},self.isOtpCountDownZero=function(){return self.otpResendCountDown<=0},self.resetOTPCountDown=function(){self.otpResendCountDown=60,self.otpTimeCounter=$interval(function(){if(self.otpResendCountDown>0&&self.isValidNumber){self.otpResendCountDown--;var otpCountDown=self.otpResendCountDown;self.otpResendCountDown<10&&(otpCountDown="0"+self.otpResendCountDown),self.otpBtnText="00 : "+otpCountDown}0===self.otpResendCountDown&&(self.otpBtnText=self.otpBtnTextArr[1],self.isOtpBtnEnabled=!0)},1e3,60)},self.resendOtp=function(){self.loginFormData.otpEntered="",self.autoSendOTP()},self.loginUsingOtp=function(){if(self.loginFormData.otpEntered.length<5)return void $mdToast.showSimple("Enter the OTP");AuthService.verifyOTP({mobile:self.loginFormData.mobileNumber,otp:self.loginFormData.otpEntered},onSuccess,onFailure)},self.validateMobile=function(){$interval.cancel(self.otpTimeCounter),clearOtpInputs(),self.isOTPSent=!1,void 0!=self.loginFormData.mobileNumber&&10===self.loginFormData.mobileNumber.length?(self.isValidNumber=!0,self.isOtpBtnEnabled=!0):(self.isValidNumber=!1,self.otpBtnText=self.otpBtnTextArr[0])}}angular.module("hsOrderModule").component("reviewOrderLogin",{templateUrl:"components/orders/review-order/review-order-login/review-order-login.temp.html",bindings:{intScn:"="},controller:reviewOrderLoginController}),reviewOrderLoginController.$inject=["$rootScope","AuthService","$state","utils","$interval","$mdToast"]}(),function(){function reviewOrderNewAddressController($rootScope,AuthService,$mdToast,HODProvider,hsOrder){function refreshPageVars(){self.gotData=!1,self.formData={address_id:void 0,city_id:hsOrder.getHSOData("cityId"),city_name:hsOrder.getHSOData("cityName"),default_address:!1,google_location:void 0,google_places_ob:void 0,latitude:void 0,locality:void 0,longitude:void 0,name:AuthService.getCurrentUser().full_name,pincode:hsOrder.getHSOData("pinCode"),restrict_city_id:hsOrder.getHSOData("cityId"),restrict_pincode:hsOrder.getHSOData("pinCode"),street_name:void 0,type:"home",user_id:AuthService.getCurrentUser().user_id,email:AuthService.getCurrentUser().email},self.limitCity=hsOrder.getHSOData("cityName")+", ",self.isAddressAdded=!1}function makeAddressLat(){self.formData.google_places_ob&&self.formData.google_places_ob.geometry&&(self.formData.latitude=self.formData.google_places_ob.geometry.location.lat(),self.formData.longitude=self.formData.google_places_ob.geometry.location.lng(),self.formData.google_location=self.formData.google_places_ob.formatted_address)}var self=this;refreshPageVars(),self.addNewAddress=function(){self.addAddressForm.$invalid||self.isAddressAdded||(self.isAddressAdded=!0,makeAddressLat(),self.formData.google_places_ob={},HODProvider.addAddress(self.formData).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.formData.address_id=response.data.address_id,self.intScn.isAdressesLen=!0,hsOrder.setHSOData("newAddressId",response.data.address_id),$rootScope.$broadcast("newAddressAdded",self.formData),self.intScn.activeLeftComp=3,$mdToast.showSimple(hsOrder.getMessage(51)),self.isAddressAdded=!1,refreshPageVars()):"HTTP_SUCCESS_NO_DATA"==response.status?($mdToast.showSimple(hsOrder.getMessage(31)),self.isAddressAdded=!1):($mdToast.showSimple(hsOrder.getMessage(32)),self.isAddressAdded=!1)}))},self.savedAddrComp=function(){self.intScn.activeLeftComp=3},$rootScope.$on("reviewOrderLoginSuccess",function(event){refreshPageVars()})}angular.module("hsOrderModule").component("reviewOrderNewAddress",{templateUrl:"components/orders/review-order/review-order-new-address/review-order-new-address.temp.html",bindings:{intScn:"="},controller:reviewOrderNewAddressController}),reviewOrderNewAddressController.$inject=["$rootScope","AuthService","$mdToast","HODProvider","hsOrder"]}(),function(){function reviewOrderController($state,$window,$mdToast,hsOrder,HODProvider,AuthService,$mdDialog,$q,DataLayer,$rootScope){var self=this;self.isUserLoggedIn=AuthService.isLoggedIn(),self.activeLeftComp=self.isUserLoggedIn?3:1,self.isLeftComponent=!1,self.isAdressesLen=!1,self.refreshPageLoadVars=function(){var pageLoadVarDeffered=$q.defer();return self.pageLoadVars={user_id:AuthService.getCurrentUser().user_id,email:AuthService.getCurrentUser().email,mobile:AuthService.getCurrentUser().mobile,customer_name:AuthService.getCurrentUser().full_name,selection:JSON.stringify(hsOrder.getHSOData("selection")),filter_options:JSON.stringify(hsOrder.getHSOData("filterOptions")),item_id:hsOrder.getHSOData("itemId"),city_id:hsOrder.getHSOData("cityId"),pincode:hsOrder.getHSOData("pinCode"),price:hsOrder.getHSOData("finalPrice"),cat_id:hsOrder.getHSOData("catId"),option_id:hsOrder.getHSOData("optionId")||"",vendor_id:hsOrder.getHSOData("vendorId"),service_date:hsOrder.getHSOData("date"),service_time:hsOrder.getHSOData("time"),unit_quantity:hsOrder.getHSOData("unitQuantity")||1,analysis_key:hsOrder.getHSOData("analysisKey"),cat_model_code:hsOrder.getHSOData("catModel"),ref_source:window.BRO4U_HTTP_REFRRER,payment_status:"",service_address:"",address_id:"",custom_message:"",odr_mode:hsOrder.getHSOData("odrMode"),address:"",city_name:hsOrder.getHSOData("cityName")||"",default_address:!1,google_location:"",addr_lat:"",addr_lng:"",latitude:hsOrder.getHSOData("latitude")||"",longitude:hsOrder.getHSOData("longitude")||"",locality:"",name:AuthService.getCurrentUser().full_name||"",addr_mobile:AuthService.getCurrentUser().mobile,addr_email:AuthService.getCurrentUser().email,street_name:"",type:"",utm_url:hsOrder.getHSOData("utmQuery"),exp_btn:hsOrder.getHSOData("exp_btn"),isAddrRequired:5!=hsOrder.getHSOData("catModel")},pageLoadVarDeffered.resolve(!0),self.pageLoadVars.isAddrRequired?self.isLeftComponent=!0:self.isUserLoggedIn?self.isLeftComponent=!1:self.isLeftComponent=!0,pageLoadVarDeffered.promise},self.refreshPageLoadVars(),self.refreshPagerenderVars=function(){var pageRenderVarDeffered=$q.defer();return self.pageRenderVars={displayPrice:self.pageLoadVars.price*self.pageLoadVars.unit_quantity,deliveryCharge:hsOrder.getHSOData("deliveryCharge"),date:hsOrder.getHSOData("date"),time:hsOrder.getHSOData("time"),gotData:!1,odrRevData:void 0,addressFlag:0,service_city_slug:void 0,catalog_slug:void 0,orderMode:hsOrder.getHSOData("odrMode")},"public"===AuthService.getCurrentUser().role.title?self.pageRenderVars.user_logged_in=!1:self.pageRenderVars.user_logged_in=!0,pageRenderVarDeffered.resolve(!0),pageRenderVarDeffered.promise},self.getOrderReviewData=function(){var getOrdRevDataDeffered=$q.defer();return HODProvider.odrRevScn(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.gotData=!0,self.pageRenderVars.odrRevData=response.data,hsOrder.setHSOData("c_price",response.data.c_value),"891"==self.pageRenderVars.odrRevData.vendor_id?self.isPartner=!0:self.isPartner=!1,getOrdRevDataDeffered.resolve(!0),self.extractData(),getOrdRevDataDeffered.resolve(!0)):"HTTP_SUCCESS_NO_DATA"==response.status?(getOrdRevDataDeffered.resolve(!1),AuthService.isLoggedIn()?$state.go("my-orders"):($mdToast.showSimple(hsOrder.getMessage(31)),$state.go("genesis.home"))):getOrdRevDataDeffered.resolve(!1)}),getOrdRevDataDeffered.promise},self.refreshPageLoadVars().then(function(loadvar_response){loadvar_response&&self.refreshPagerenderVars().then(function(rendvar_response){rendvar_response&&self.getOrderReviewData().then(function(orderrevdata_response){self.GACOptions={componentRestrictions:{country:"in"}},self.limitCity=hsOrder.getHSOData("cityName")+", ",self.google_places_ob=self.pageLoadVars.google_location})})}),self.extractData=function(){if(hsOrder.setHSOData("paymentMode",self.pageRenderVars.odrRevData.payment_status),self.pageLoadVars.payment_status=self.pageRenderVars.odrRevData.payment_status,self.pageRenderVars.service_city_slug=self.pageRenderVars.odrRevData.service_city_slug,self.pageRenderVars.catalog_slug=self.pageRenderVars.odrRevData.catalog_slug,self.pageRenderVars.odrRevData.address_available&&self.pageRenderVars.odrRevData.user_address)self.pageLoadVars.service_address=self.pageRenderVars.odrRevData.user_address.address,self.pageLoadVars.address=self.pageRenderVars.odrRevData.user_address.address,self.pageLoadVars.city_name=self.pageRenderVars.odrRevData.user_address.city_name,self.pageLoadVars.google_location=self.pageRenderVars.odrRevData.user_address.google_location,self.pageLoadVars.locality=self.pageRenderVars.odrRevData.user_address.locality,self.pageLoadVars.street_name=self.pageRenderVars.odrRevData.user_address.street_name,self.pageLoadVars.type=self.pageRenderVars.odrRevData.user_address.type,self.pageLoadVars.name=self.pageRenderVars.odrRevData.user_address.name,self.pageLoadVars.addr_mobile=parseInt(self.pageRenderVars.odrRevData.user_address.mobile),self.pageLoadVars.addr_email=self.pageRenderVars.odrRevData.user_address.email;else if(hsOrder.getHSOData("placeId")){var mapElem=document.getElementById("map");if(mapElem){var service=new $window.google.maps.places.PlacesService(document.getElementById("map"));service.getDetails({placeId:hsOrder.getHSOData("placeId")},function(place,status){status===google.maps.places.PlacesServiceStatus.OK&&(self.pageLoadVars.google_location=place.formatted_address,self.google_places_ob=place.formatted_address)})}}},self.openWalletBottomSheet=function(){var dataObject={walletBalance:self.pageRenderVars.odrRevData.wallet_balance,amount:self.pageRenderVars.displayPrice,deliveryCharge:self.pageRenderVars.deliveryCharge,getTotal:function(){return parseInt(this.amount)+parseInt(this.deliveryCharge)},getStatement:function(){var totalAmount=this.getTotal(),amount=this.amount,wallet=this.walletBalance,deduction=amount-wallet,deductedFromWallet=0;return deduction<0?(deductedFromWallet=amount,0):deduction>0?(deductedFromWallet=wallet,deduction):(deductedFromWallet=amount,0),{walletBalance:wallet,subTotal:amount,totalAmount:totalAmount,deductedFromWallet:deductedFromWallet,netAmount:totalAmount-deductedFromWallet}}};$mdDialog.show({templateUrl:"components/orders/order-popups/wallet-bs.temp.html",clickOutsideToClose:!0,escapeToClose:!0,bindToController:!0,controller:function(){},controllerAs:"ctrl",locals:{pageRenderVars:dataObject,closeDialog:function(){$mdDialog.hide()},placeOrder:function(){hsOrder.placeHSOrder(self.pageLoadVars),$mdDialog.hide()}}}).then(function(){}).catch(function(){})};var isPlaceOrder=!1;self.placeOrder=function(){if(!self.isUserLoggedIn)return void $mdToast.showSimple(hsOrder.getMessage(88));if(!isPlaceOrder){if(isPlaceOrder=!0,5!==self.pageLoadVars.cat_model_code&&(void 0==self.pageLoadVars.address_id||""==self.pageLoadVars.address_id))return void $mdToast.showSimple(hsOrder.getMessage(87));self.pageLoadVars.price_chart_ids=hsOrder.getHSOData("price_chart_ids"),DataLayer.addLayer({ecommerce:{purchase:{products:[{cat_city_id:self.pageLoadVars.cat_id+"_"+hsOrder.getHSOData("cityId"),cat_id:self.pageLoadVars.cat_id,cat_name:self.pageLoadVars.cat_name,catalog_price:self.pageLoadVars.price,city_id:hsOrder.getHSOData("cityId"),city_name:hsOrder.getHSOData("cityName")}]}}}),5===self.pageLoadVars.cat_model_code?(hsOrder.placeHSEnquiry(),isPlaceOrder=!1):self.pageRenderVars.odrRevData.wallet_balance?self.openWalletBottomSheet():(hsOrder.placeHSOrder(self.pageLoadVars),isPlaceOrder=!1)}},self.getLoginStatus=function(){self.isUserLoggedIn=AuthService.isLoggedIn(),self.refreshPageLoadVars(),self.isUserLoggedIn&&(self.activeLeftComp=3)},self.updateAddrDetails=function(addrData){var pincode=-1!=Object.keys(addrData).indexOf("pincode")?addrData.pincode:addrData.zipcode;self.pageLoadVars.addr_lat=addrData.latitude,self.pageLoadVars.addr_lng=addrData.longitude,self.pageLoadVars.address_id=addrData.address_id,self.pageLoadVars.city_id=addrData.city_id,self.pageLoadVars.city_name=addrData.city_name,self.pageLoadVars.default_address=addrData.default_address,self.pageLoadVars.google_location=addrData.google_location,self.pageLoadVars.latitude=addrData.latitude,self.pageLoadVars.longitude=addrData.longitude,self.pageLoadVars.name=addrData.name,self.pageLoadVars.pincode=pincode,self.pageLoadVars.street_name=addrData.street_name,self.pageLoadVars.type=addrData.type,self.pageLoadVars.google_places_ob=addrData.google_places_ob,self.pageLoadVars.address=addrData.address,self.pageLoadVars.addr_email=addrData.email||AuthService.getCurrentUser().email},$rootScope.$on("setOrderAddressDetails",function(event,data){self.updateAddrDetails(data)}),$rootScope.$on("newAddressAdded",function(event,data){self.isAdressesLen=!0})}angular.module("hsOrderModule").component("reviewOrder",{templateUrl:"components/orders/review-order/review-order.temp.html",controller:reviewOrderController}),reviewOrderController.$inject=["$state","$window","$mdToast","hsOrder","HODProvider","AuthService","$mdDialog","$q","DataLayer","$rootScope"]}(),function(){function priceChartCardsController($rootScope,hsOrder,$state,PriceChartGalleryService){var self=this;self.chartData=hsOrder.getHSOData("priceChartData").data,self.chartTitle=hsOrder.getHSOData("priceChartData").title,self.openPriceChartCardImage=function(imageIndex){PriceChartGalleryService.openModal(self.chartData,self.chartTitle,imageIndex)}}angular.module("homeModule").component("priceChartCardsComponent",{templateUrl:"components/price-chart-gallery/price-chart-cards/price-chart-cards.temp.html",controller:priceChartCardsController}),priceChartCardsController.$inject=["$rootScope","hsOrder","$state","PriceChartGalleryService"]}(),function(){function priceChartCtrl($mdDialog,$window){this.openModal=function(galleryData,chartTitle,imageIndex){function viewPriceController($scope,$mdDialog,galleryData,chartTitle,imageIndex){var self=this;self.chartTitle=chartTitle,self.isZoom=!1,self.count=0,imageIndex>0&&(self.count=imageIndex),self.priceChartData=galleryData,self.closeDialog=function(){$mdDialog.hide()},angular.element($window).bind("keydown",function(e){37==e.which?self.count--:39==e.which?self.count++:38==e.which?self.isZoom=!0:40==e.which&&(self.isZoom=!1)})}$mdDialog.show({clickOutsideToClose:!0,controller:viewPriceController,controllerAs:"viewPricesCtrl",templateUrl:"components/price-chart-gallery/price-chart-gallery.temp.html",bindToController:!0,locals:{galleryData:galleryData,chartTitle:chartTitle,imageIndex:imageIndex}})}}angular.module("core.service").service("PriceChartGalleryService",priceChartCtrl),priceChartCtrl.$inject=["$mdDialog","$window"]}(),function(){function privacyPolicyCtrl($scope){}angular.module("homeModule").component("privacyPolicy",{templateUrl:"components/privacy-policy/privacy-policy.template.html",controller:privacyPolicyCtrl}),privacyPolicyCtrl.$inject=["$scope"]}(),function(){function orderQuotesController($mdToast,$window,$state,hsOrder,HODProvider,AuthService,IntegrationService){function renderStr(str){return void 0===str?"":str}var self=this;self.pageLoadVars={user_id:AuthService.getCurrentUser().user_id,quote_id:hsOrder.getHSOData("quoteId")},self.pageRenderVars={catModel:hsOrder.getHSOData("catModel"),newTab:[{name:"Services",data:["Orders","Quotes Received","Reorders"],index:0},{name:"Recharge",data:["All"],index:1}],tabs:["Summary","Chats"],activeTab:0,notification:!1,quoteData:void 0},2!=hsOrder.getHSOData("odrFlow")&&3!=hsOrder.getHSOData("odrFlow")&&4!=hsOrder.getHSOData("odrFlow")||(self.pageRenderVars.notification=!1),self.fetchQuoteData=function(){HODProvider.fetchQteOdr(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.quoteData=response.data,hsOrder.setHSOData("jrneyLevel",4)):response.status})},self.createQuote=function(){},self.notificationHandler=function(){},self.changeTab=function(index){self.pageRenderVars.activeTab=index},self.orderSummary=function(orderId,mode){hsOrder.setHSOData("orderId",orderId),hsOrder.setHSOData("odrFlow",mode),$state.go("order-summary")},self.quoteAction=function(vendorId,option){var dataToSend={vendor_id:vendorId,status_code:option};dataToSend=angular.extend(self.pageLoadVars,dataToSend),HODProvider.actionQteOdr(dataToSend).then(function(response){
"HTTP_SUCCESS_DATA"==response.status?self.pageRenderVars.quoteData=response.data.quote_data:"HTTP_SUCCESS_NO_DATA"==response.status?$mdToast.showSimple(hsOrder.getMessage(31)):$mdToast.showSimple(hsOrder.getMessage(32))})},self.getMoreQuotes=function(){hsOrder.clearHSOData("quotedVendors"),hsOrder.setHSOData("vlQuoteObject",self.pageRenderVars.quoteData.suggested_vendor_data),$state.go("vendor-list-quote")},self.goBack=function(){$state.go("genesis.home")},self.changeSideTab=function(pIndex,index){var params={pIndex:pIndex,index:index};$state.go("my-orders",params)},0===self.pageLoadVars.quote_id&&4===self.pageRenderVars.catModel?self.createQuote():self.fetchQuoteData(),self.viewProfile=function(vendor){var params={vendorId:vendor.vendor_id,catId:self.pageRenderVars.quoteData.cat_id,isOrganic:!1,service_city_slug:renderStr(vendor.service_city_slug),cat_slug:renderStr(vendor.catalog_slug),isOrderPlaced:!0};hsOrder.setHSOData("venProMode",!1),hsOrder.setHSOData("vendorId",vendor.vendor_id),hsOrder.setHSOData("catId",self.pageRenderVars.quoteData.cat_id),$state.go("vendor-profile",params)},self.downloadApp=function(){var params={user_id:AuthService.getCurrentUser().user_id,mobile:AuthService.getCurrentUser().mobile};IntegrationService.downloadApp(params)}}angular.module("hsOrderModule").component("orderQuotes",{templateUrl:"components/quotes/order-quotes.temp.html",controller:orderQuotesController}),orderQuotesController.$inject=["$mdToast","$window","$state","hsOrder","HODProvider","AuthService","IntegrationService"]}(),function(){function quoteReviewController($scope,$state,$window,$mdDialog,$mdToast,hsOrder,HODProvider,AuthService,$q){var self=this;self.pageRenderVars={freshQuotedVendors:hsOrder.getHSOData("quotedVendors"),gotData:!1,odrRevData:void 0,addressFlag:0,freshQuotedCount:function(){return this.freshQuotedVendors.length}},"public"===AuthService.getCurrentUser().role.title?self.pageRenderVars.user_logged_in=!1:self.pageRenderVars.user_logged_in=!0,self.refreshPageLoadVars=function(){var pageLoadVarDeffered=$q.defer();return self.pageLoadVars={user_id:AuthService.getCurrentUser().user_id,customer_name:AuthService.getCurrentUser().full_name,mobile:AuthService.getCurrentUser().mobile,email:AuthService.getCurrentUser().email,city_id:hsOrder.getHSOData("cityId"),pincode:hsOrder.getHSOData("pinCode"),latitude:hsOrder.getHSOData("latitude")||"",longitude:hsOrder.getHSOData("longitude")||"",service_date:hsOrder.getHSOData("date"),service_time:hsOrder.getHSOData("time"),cat_id:hsOrder.getHSOData("catId"),option_id:hsOrder.getHSOData("optionId"),suggested_vendor_data:hsOrder.getHSOData("vlQuoteObject"),quote_id:hsOrder.getHSOData("quoteId"),item_id:self.pageRenderVars.freshQuotedVendors?self.pageRenderVars.freshQuotedVendors[0].item_id:"",price:self.pageRenderVars.freshQuotedVendors?self.pageRenderVars.freshQuotedVendors[0].final_price:"",selection:self.pageRenderVars.freshQuotedVendors?JSON.stringify(self.pageRenderVars.freshQuotedVendors[0].selection):"",filter_options:hsOrder.getHSOData("filterOptions")?JSON.stringify(hsOrder.getHSOData("filterOptions")):"",ref_source:window.BRO4U_HTTP_REFRRER,address_id:"",custom_message:"",vendor_ids:"",address:"",city_name:"",default_address:!1,google_location:"",addr_lat:"",addr_lng:"",locality:"",name:AuthService.getCurrentUser().full_name||"",addr_mobile:AuthService.getCurrentUser().mobile,addr_email:AuthService.getCurrentUser().email,street_name:"",type:"",utm_url:hsOrder.getHSOData("utmQuery")},pageLoadVarDeffered.resolve(!0),pageLoadVarDeffered.promise},self.getVendorIds=function(){var getVendorIdsDeffered=$q.defer(),temp={},x=0,vendors=self.pageRenderVars.freshQuotedVendors;return angular.forEach(vendors,function(value){temp[x]=value.vendor_id,x++}),self.pageLoadVars.vendor_ids=JSON.stringify(temp),getVendorIdsDeffered.resolve(!0),getVendorIdsDeffered.promise},self.getOrderRevScnData=function(){var getOrdRevDataDeffered=$q.defer();return HODProvider.odrRevScn(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.gotData=!0,self.pageRenderVars.odrRevData=response.data,hsOrder.setHSOData("c_price",response.data.c_value),getOrdRevDataDeffered.resolve(!0),self.extractData(),getOrdRevDataDeffered.resolve(!0)):"HTTP_SUCCESS_NO_DATA"==response.status&&(getOrdRevDataDeffered.resolve(!1),AuthService.isLoggedIn()?$state.go("my-orders"):($mdToast.showSimple(hsOrder.getMessage(31)),$state.go("genesis.home")))}),getOrdRevDataDeffered.promise},self.refreshPageLoadVars().then(function(loadvar_response){loadvar_response&&self.getVendorIds().then(function(vendorid_response){vendorid_response&&self.getOrderRevScnData().then(function(ordrevdata_response){ordrevdata_response&&(self.GACOptions={componentRestrictions:{country:"in"}},self.limitCity=hsOrder.getHSOData("cityName")+", ",self.google_places_ob=self.pageLoadVars.google_location)})})}),self.extractData=function(){if(hsOrder.setHSOData("paymentMode",self.pageRenderVars.odrRevData.payment_status),self.pageRenderVars.odrRevData.address_available&&self.pageRenderVars.odrRevData.user_address)self.pageLoadVars.service_address=self.pageRenderVars.odrRevData.user_address.address,self.pageLoadVars.address_id=parseInt(self.pageRenderVars.odrRevData.user_address.address_id),self.pageLoadVars.address=self.pageRenderVars.odrRevData.user_address.address,self.pageLoadVars.city_name=self.pageRenderVars.odrRevData.user_address.city_name,self.pageLoadVars.google_location=self.pageRenderVars.odrRevData.user_address.google_location,self.pageLoadVars.locality=self.pageRenderVars.odrRevData.user_address.locality,self.pageLoadVars.street_name=self.pageRenderVars.odrRevData.user_address.street_name,self.pageLoadVars.type=self.pageRenderVars.odrRevData.user_address.type,self.pageLoadVars.name=self.pageRenderVars.odrRevData.user_address.name,self.pageLoadVars.addr_mobile=parseInt(self.pageRenderVars.odrRevData.user_address.mobile),self.pageLoadVars.addr_email=self.pageRenderVars.odrRevData.user_address.email,self.pageLoadVars.addr_lat=self.pageRenderVars.odrRevData.user_address.latitude,self.pageLoadVars.addr_lng=self.pageRenderVars.odrRevData.user_address.longitude;else if(hsOrder.getHSOData("placeId")){var mapElm=document.getElementById("map");if(mapElm){var service=new $window.google.maps.places.PlacesService(document.getElementById("map"));service.getDetails({placeId:hsOrder.getHSOData("placeId")},function(place,status){status===google.maps.places.PlacesServiceStatus.OK&&(self.pageLoadVars.google_location=place.formatted_address,self.google_places_ob=place.formatted_address)})}}self.extractSEOData()},self.extractSEOData=function(){$scope.displaySchema=!0,$scope.jsonId={ecommerce:{currencyCode:"INR",impressions:[{cat_city_id:self.pageRenderVars.odrRevData.cat_id+"_"+self.pageRenderVars.odrRevData.city_id,cat_id:self.pageRenderVars.odrRevData.cat_id,cat_name:self.pageRenderVars.odrRevData.cat_name,catalog_price:self.pageRenderVars.odrRevData.catalog_price,city_id:self.pageRenderVars.odrRevData.city_id,city_name:self.pageRenderVars.odrRevData.city_name,city_slug:self.pageRenderVars.odrRevData.city_slug,service_city_slug:self.pageRenderVars.odrRevData.service_city_slug,service_slug:self.pageRenderVars.odrRevData.service_slug,tnc:self.pageRenderVars.odrRevData.tnc}]}}},self.placeOrder=function(){self.addAddressForm.$valid&&(self.google_places_ob&&self.google_places_ob.geometry&&(self.pageLoadVars.addr_lat=self.google_places_ob.geometry.location.lat(),self.pageLoadVars.addr_lng=self.google_places_ob.geometry.location.lng(),self.pageLoadVars.google_location=self.google_places_ob.formatted_address),hsOrder.placeHSQuote(self.pageLoadVars))},self.usserLoggedIn=function(){self.pageRenderVars.user_logged_in=!0,self.refreshPageLoadVars().then(function(loadvar_response){loadvar_response&&self.getVendorIds().then(function(vendorid_response){vendorid_response&&self.getOrderRevScnData().then(function(ordrevdata_response){ordrevdata_response&&(self.GACOptions={componentRestrictions:{country:"in"}},self.limitCity=hsOrder.getHSOData("cityName")+", ",self.google_places_ob=self.pageLoadVars.google_location)})})})}}angular.module("hsOrderModule").component("quoteReview",{templateUrl:"components/quotes/quote-review.temp.html",controller:quoteReviewController}),quoteReviewController.$inject=["$scope","$state","$window","$mdDialog","$mdToast","hsOrder","HODProvider","AuthService","$q"]}(),function(){"use strict";angular.module("rechargeApp").config(["$locationProvider","$stateProvider","$urlRouterProvider",function($locationProvider,$stateProvider,$urlRouterProvider){var access=routingConfig.accessLevels;$locationProvider.html5Mode({enabled:!0,requireBase:!1});var rechargeState={name:"recharge",url:"",template:"<recharge-main></recharge-main>",params:{rechargeParams:void 0,seoMetaData:void 0},data:{access:access.public,index:0,stateType:"default"}},mobileState={name:"recharge.mobile",url:"/pay/mobile-recharge",template:"<recharge-mobile></recharge-mobile>",data:{access:access.public,index:1,seoType:"recharge",stateType:"default",tab:0},params:{reset:void 0,rechargeParams:void 0,seoMetaData:void 0,urlSlug:"mobile",connType:void 0},resolve:{seoData:function(metaService){return metaService.fetchSeoData()}}},dthState={name:"recharge.dth",url:"/pay/dth-recharge",template:"<recharge-dth></recharge-dth>",data:{access:access.public,index:2,seoType:"recharge",stateType:"default",tab:1},params:{reset:void 0,rechargeParams:void 0,seoMetaData:void 0,urlSlug:"dth-recharge"},resolve:{seoData:function(metaService){return metaService.fetchSeoData()}}},electricityState={name:"recharge.electricity",url:"/pay/electricity-bill-payment",template:"<recharge-electricity></recharge-electricity>",data:{access:access.public,index:3,seoType:"recharge",stateType:"default",tab:2},params:{reset:void 0,rechargeParams:void 0,seoMetaData:void 0,urlSlug:"electricity-bill-payment"},resolve:{seoData:function(metaService){return metaService.fetchSeoData()}}},rechargeSeoState={name:"recharge-seo",url:"/pay/:urlSlug",template:"<recharge-main></recharge-main>",params:{rechargeParams:void 0,seoMetaData:void 0},data:{access:access.public,index:20,seoType:"recharge",stateType:"seo"},resolve:{seoData:function(metaService){return metaService.fetchSeoData()}}},rechargeSeoDefaultState={name:"recharge.mobile-seo-default",url:"/pay",template:"<recharge-mobile></recharge-mobile>",data:{access:access.public,index:20.1,seoType:"recharge-home",stateType:"seo",tab:0},params:{reset:!0,rechargeParams:void 0,seoMetaData:void 0},resolve:{seoData:function(metaService){return metaService.fetchSeoData()}}},mobileSeoState={name:"recharge-seo.mobile",url:"",template:"<recharge-mobile></recharge-mobile>",data:{access:access.public,index:20.2,tab:0},params:{reset:void 0},resolve:{seoData:function(metaService){return metaService.fetchSeoData()}}},dthSeoState={name:"recharge-seo.dth",url:"",template:"<recharge-dth></recharge-dth>",data:{access:access.public,index:20.3,tab:1},params:{reset:void 0},resolve:{seoData:function(metaService){return metaService.fetchSeoData()}}},electricitySeoState={name:"recharge-seo.electricity",url:"",template:"<recharge-electricity></recharge-electricity>",data:{access:access.public,index:20.4,tab:2},resolve:{seoData:function(metaService){return metaService.fetchSeoData()}}},viewBillState={name:"viewbill",url:"/view-payment",template:"<view-payment></view-payment>",data:{access:access.public,title:"View Bill"},resolve:{seoData:function(metaService){return metaService.fetchSeoData()}}},summary={name:"summary",url:"/summary?orderId",template:"<summary></summary>",data:{access:access.user,title:"Order Summary",index:-1},params:{orderId:""},resolve:{auth:function(AuthService){return AuthService.auth()}}},orderListState={name:"recharge.orderList",url:"/order-list",template:'<recharge-history template="all"></recharge-history>',data:{access:access.user,index:3}},sampleBillState={name:"recharge.sampleBill",url:"/electricity/bill",template:"<sample-bill></sample-bill>",data:{access:access.public,title:"Sample Bill",index:-1,navBar:!1,baseHeader:!1}};$stateProvider.state(rechargeState),$stateProvider.state(mobileState),$stateProvider.state(dthState),$stateProvider.state(electricityState),$stateProvider.state(sampleBillState),$stateProvider.state(summary),$stateProvider.state(viewBillState),$stateProvider.state(orderListState),$stateProvider.state(rechargeSeoState),$stateProvider.state(mobileSeoState),$stateProvider.state(dthSeoState),$stateProvider.state(electricitySeoState),$stateProvider.state(rechargeSeoDefaultState)}])}(),function(){"use strict";function RechargeBrowsePlanController(RechargeDataService,RechargeOrderService,ViewConfigService,$mdSidenav,$log,$scope,$rootScope){function fetchMetaData(){RechargeDataService.fetchMetaData().then(function(data){self.metaData=data,prepOperatorCirclePlanTypes()})}function onOperatorSelect(selectedOperator){selectedOperator&&(RechargeDataService.getOperatorMap(self.formData.connectionType).then(function(data){self.formData.operatorId=data[selectedOperator.code],self.prepPlans()}),self.operatorCircles=RechargeDataService.fetchCircles(selectedOperator),self.formData.autoCircle=!1)}function onSeePlan(selectedFormData){}function onCircleSelect(selectedCircle){selectedCircle&&RechargeDataService.getCircleMap().then(function(data){self.formData.circleId=data[selectedCircle.code],self.formData.autoCircle=!1,self.prepPlans()})}function onPlanTypeSelect(planType){planType&&RechargeDataService.getPlanTypeMap().then(function(data){self.formData.planTypeId=data[planType],self.prepPlans()})}function prepOperatorCirclePlanTypes(){RechargeDataService.fetchOperatorNCircle().then(function(data){self.operators=data.operators,self.operatorCircles=data.circles,self.formData.operator&&self.formData.operator.code||(self.formData.operator=self.operators[1],self.formData.autoCircle=!0,self.operatorCircles=RechargeDataService.fetchCircles(self.formData.operator),self.operatorCircles&&self.operatorCircles.length>=10?(self.formData.circle=self.operatorCircles[9],self.formData.circleId=10):(self.formData.circle=self.operatorCircles[0],self.formData.circleId=self.formData.operator.circles[0]),RechargeDataService.getOperatorMap(self.formData.connectionType).then(function(data){self.formData.operatorId=data[self.formData.operator.code]}),RechargeDataService.getCircleMap().then(function(data){self.formData.circleId=data[self.formData.circle.code]}),"prepaid"!==self.formData.connectionType&&"postpaid"!==self.formData.connectionType||0!==self.formData.circleId&&void 0!==self.formData.circleId||(self.formData.circle=self.operatorCircles[10],self.formData.circleId=10))}).finally(function(){RechargeDataService.getAllPlanType().then(function(){self.planTypeObject=ViewConfigService.getPlanTypeObject(),self.planTypeObject[self.formData.planTypeId]&&void 0!==self.formData.planType&&"string"==typeof self.formData.planType&&0!==Object.keys(self.formData.planType).length||("dth"===self.formData.connectionType?(self.formData.planTypeId=Object.keys(self.planTypeObject)[1],vals=Object.keys(self.planTypeObject).map(function(key){return self.planTypeObject[key]}),self.formData.planType=vals[1]):(self.formData.planTypeId=Object.keys(self.planTypeObject)[0],vals=Object.keys(self.planTypeObject).map(function(key){return self.planTypeObject[key]}),self.formData.planType=vals[0])),self.prepPlans()})})}function resetBrowsePlan(){$scope.error.visible=!0,$scope.error.message="Loading...",self.plans=[]}function selectBrowsePlan(selectedPlan){}function prepPlans(){self.isRenderInProgress=!1,$scope.error||($scope.error={message:"",visible:!1}),RechargeDataService.getPlans(self.formData.operatorId,self.formData.circleId,self.formData.planTypeId).then(function(response){response.success?($scope.error.visible=!1,self.plans=response.data.plans):($scope.error.visible=!0,$scope.error.message=response.message.text)},function(err){$scope.error.visible=!0,$scope.error.message="Network error"})}function setPlan(plan){RechargeOrderService.setPlan(plan,self.formData.connectionType),self.toggleRight()}var vals,self=this;self.toggleRight=function(componentId){return function(){$mdSidenav(componentId).toggle().then(function(){}),resetBrowsePlan()}}("browsePlan"),self.formData=RechargeOrderService.udf,self.visibleFieldConfig=ViewConfigService.vcf.visibleFieldConfig,self.onOperatorSelect=onOperatorSelect,self.onPlanTypeSelect=onPlanTypeSelect,self.onCircleSelect=onCircleSelect,self.onSeePlan=onSeePlan,self.fetchMetaData=fetchMetaData,self.selectBrowsePlan=selectBrowsePlan,self.prepPlans=prepPlans,self.setPlan=setPlan,self.isRenderInProgress=!1,$rootScope.$on("renderBrowsePlan",function(event,connectionType){self.isRenderInProgress||(self.isRenderInProgress=!0,self.state=RechargeOrderService.getCurrentState(connectionType),self.fetchMetaData())}),self.planTypeObject=ViewConfigService.vcf.planTypeObject,self.plans=[],self.vm=ViewConfigService.vm,self.state=RechargeOrderService.getCurrentState(),$scope.error=RechargeOrderService.udf.error,$scope.item_order="amount",$scope.should_reverse=!1,self.operatorName=RechargeOrderService.udf.operator?RechargeOrderService.udf.operator.name:"Airtel",self.circleName=RechargeOrderService.udf.circle?RechargeOrderService.udf.circle.name:"Karnataka",RechargeOrderService.setPlanTypeId(RechargeOrderService.udf.planTypeId?RechargeOrderService.udf.planTypeId:0),RechargeOrderService.getPlanTypeName().then(function(planTypeName){self.planTypeName=planTypeName}),"prepaid"!==RechargeOrderService.udf.connectionType&&"postpaid"!==RechargeOrderService.udf.connectionType?self.circleName="":void 0===self.formData.circleId&&(self.formData.circleId=9)}angular.module("rechargeBrowsePlan").component("rechargeBrowsePlan",{templateUrl:"components/recharge/recharge-browse-plan/recharge-browse-plan-md.template.html",controller:RechargeBrowsePlanController}),RechargeBrowsePlanController.$inject=["RechargeDataService","RechargeOrderService","ViewConfigService","$mdSidenav","$log","$scope","$rootScope"]}(),function(){"use strict";function RechargeDthController(RechargeDataService,RechargeOrderService,ViewConfigService,$state,$scope,$rootScope,$stateParams,$mdSidenav){function fetchMetaData(){return RechargeDataService.fetchMetaData().then(function(data){if(self.metaData=data,!self.formData.operator||!self.formData.operator.code){var vals=Object.keys(RechargeDataService.getOperators(self.formData.connectionType)).map(function(key){return RechargeDataService.getOperators(self.formData.connectionType)[key]});self.formData.operator=vals[5],self.formData.operatorId=Object.keys(RechargeDataService.getOperators(self.formData.connectionType))[5]}self.formData.viewBill=self.formData.operator.viewBill,ViewConfigService.getViewConfig(self.formData.connectionType).then(function(response){self.activeViewConfig=response[self.formData.operatorId]}),self.prepDthOperator(),$rootScope.$broadcast("rcOrderUpdated",self.formData)})}function prepDthOperator(){self.operators=RechargeDataService.getOperators(self.formData.connectionType),self.seoMetaData&&self.seoMetaData.BASIC.operator_code&&(self.formData.connectionType=self.seoMetaData.BASIC.operator_type,angular.forEach(self.operators,function(operator){if(operator.code===self.seoMetaData.BASIC.operator_code)return self.formData.operator={code:operator.code,name:operator.name,rank:operator.rank,seoAlias:operator.seoAlias,special:operator.special,viewBill:operator.viewBill},void(self.formData.viewBill=operator.viewBill)}))}function resetCodes(){self.formData.plan=null,self.formData.planTypeId=null,self.formData.circle=null,self.formData.circleId=0,self.formData.response="",self.formData.viewBill=!1,$scope.hasOwnProperty("error")&&$scope.error&&$scope.error.message&&($scope.error.visible=!1,$scope.error.message=""),$rootScope.$broadcast("rcOrderUpdated",self.formData)}function setActiveView(selectedOperator){selectedOperator&&(RechargeDataService.getOperatorMap(self.formData.connectionType).then(function(data){var operatorId=data[selectedOperator.code];self.formData.operatorId=operatorId,self.formData.connectionNumber=void 0,ViewConfigService.getViewConfig(self.formData.connectionType).then(function(response){self.activeViewConfig=response[operatorId]}),$rootScope.$broadcast("rcOrderUpdated",self.formData)}),self.formData.viewBill=selectedOperator.viewBill,self.formData.specialRecharge=selectedOperator.special,$rootScope.$broadcast("rcOrderUpdated",self.formData))}function submitForm(){if($rootScope.hasOwnProperty("preventClick")&&$rootScope.preventClick)return void($rootScope.preventClick=void 0);RechargeDataService.doApiValidation().then(function(data){200===data.status&&data.data.success?data.data.data&&"RECHARGEVALIDATIONSUCCESS"===data.data.data.status?($scope.error.visible=!1,$state.go("paymentOptions",{flowType:"recharge"})):($scope.error.visible=!0,$scope.error.message=""!==data.data.data.description?data.data.data.description:data.data.data.status,"RECHARGEVALIDATIONFAILURE"===$scope.error.message&&($scope.error.message="Recharge Validation Failure")):($scope.error.visible=!0,$scope.error.message=data.data.message.text,"RECHARGEVALIDATIONFAILURE"===$scope.error.message&&($scope.error.message="Recharge Validation Failure"))},function(err){$scope.error.visible=!0,$scope.error.message="NETWORK ERROR"})}function pageReset(){RechargeOrderService.resetCodes(),self.formData=RechargeOrderService.udf,self.formData.connectionType="dth",self.formData.circleId=0,self.formData.plan={},self.formData.planType={},self.formData.rechargeType="",self.formData.planTypeId=19,self.formData.isCircleRequired=!1,$scope.hasOwnProperty("error")&&$scope.error&&$scope.error.message&&($scope.error.visible=!1,$scope.error.message=""),$rootScope.$broadcast("rcOrderUpdated",self.formData)}var self=this;self.formData=RechargeOrderService.udf,$scope.error=self.formData.error,self.formData.response="",self.openBrowsePlan=function(componentId){return function(){$mdSidenav(componentId).toggle().then(function(){$rootScope.$broadcast("renderBrowsePlan",self.formData.connectionType)})}}("browsePlan"),self.fetchMetaData=fetchMetaData,self.resetCodes=resetCodes,self.setActiveView=setActiveView,self.submitForm=submitForm,self.seoMetaData=$state.params.seoMetaData,$stateParams&&$stateParams.reset&&pageReset(),self.seoMetaData&&pageReset(),"dth"!==self.formData.connectionType&&pageReset(),self.fetchMetaData(),self.prepDthOperator=prepDthOperator}angular.module("rechargeDth").component("rechargeDth",{templateUrl:"components/recharge/recharge-dth/recharge-dth-md.template.html",controller:RechargeDthController}),RechargeDthController.$inject=["RechargeDataService","RechargeOrderService","ViewConfigService","$state","$scope","$rootScope","$stateParams","$mdSidenav"]}(),function(){"use strict";function RechargeElectricityController(RechargeDataService,RechargeOrderService,ViewConfigService,$scope,$rootScope,$state,$stateParams,$mdDialog){function fetchMetaData(){return RechargeDataService.fetchMetaData().then(function(data){if(self.metaData=data,!self.formData.operator||!self.formData.operator.code){var vals=Object.keys(RechargeDataService.getOperators(self.formData.connectionType)).map(function(key){return RechargeDataService.getOperators(self.formData.connectionType)[key]});self.formData.operator=vals[14],self.formData.operatorId=Object.keys(RechargeDataService.getOperators(self.formData.connectionType))[14],self.formData.connectionNumber=null,self.formData.viewBill=self.formData.operator.viewBill,self.formData.shouldShowSampleBill=!0}ViewConfigService.getViewConfig(self.formData.connectionType).then(function(response){self.activeViewConfig=response[self.formData.operatorId]}),self.prepElectricityOperator(),$rootScope.$broadcast("userDataUpdated",self.formData)})}function prepElectricityOperator(){self.operators=RechargeDataService.getOperators(self.formData.connectionType),self.seoMetaData&&self.seoMetaData.BASIC.operator_code&&angular.forEach(self.operators,function(operator){if(operator.code===self.seoMetaData.BASIC.operator_code)return self.formData.operator={code:operator.code,name:operator.name,rank:operator.rank,seoAlias:operator.seoAlias,special:operator.special,viewBill:operator.viewBill},void(self.formData.viewBill=operator.viewBill)})}function viewBill(){$rootScope.hasOwnProperty("preventClick")&&$rootScope.preventClick?$rootScope.preventClick=void 0:$state.go("viewbill")}function resetCodes(){self.formData.plan=null,self.formData.planType={},self.formData.planTypeId=null,self.formData.circle=null,self.formData.circleId=0,self.formData.response="",self.formData.amount=null,self.formData.cycleNumber=null,self.formData.billingUnit=null,self.formData.billType="Billing",self.formData.billerCategory="Electricity",self.formData.viewBill=!!self.formData.operator&&self.formData.operator.viewBill,self.formData.shouldShowSampleBill=!1,$scope.hasOwnProperty("error")&&$scope.error&&$scope.error.message&&($scope.error.visible=!1,$scope.error.message=""),$rootScope.$broadcast("userDataUpdated",self.formData)}function setActiveView(selectedOperator){if(selectedOperator){if($rootScope.hasOwnProperty("preventClick")&&$rootScope.preventClick)return void($rootScope.preventClick=void 0);RechargeDataService.getOperatorMap(self.formData.connectionType).then(function(data){var operatorId=data[selectedOperator.code];self.formData.operatorId=operatorId,self.formData.connectionNumber=void 0,ViewConfigService.getViewConfig(self.formData.connectionType).then(function(response){self.activeViewConfig=response[operatorId]}),"67"===operatorId&&(self.formData.shouldShowSampleBill=!0),self.formData.viewBill=selectedOperator.viewBill,$rootScope.$broadcast("userDataUpdated",self.formData)}),self.formData.viewBill=selectedOperator.viewBill,self.formData.specialRecharge=selectedOperator.special,$rootScope.$broadcast("userDataUpdated",self.formData)}}function pageReset(){RechargeOrderService.resetCodes(),self.formData=RechargeOrderService.udf,self.formData.connectionType="electricity",self.formData.circleId=0,self.formData.plan={},self.formData.planType={},self.formData.rechargeType="",self.formData.planTypeId=0,self.formData.isCircleRequired=!1,self.formData.shouldShowSampleBill=void 0,$scope.hasOwnProperty("error")&&$scope.error&&$scope.error.message&&($scope.error.visible=!1,$scope.error.message=""),$rootScope.$broadcast("userDataUpdated",self.formData)}var self=this;self.formData=RechargeOrderService.udf,$scope.error=self.formData.error,self.formData.response="",self.fetchMetaData=fetchMetaData,self.resetCodes=resetCodes,self.setActiveView=setActiveView,self.viewBill=viewBill,self.activeViewConfig=void 0,self.seoMetaData=$state.params.seoMetaData,$stateParams&&$stateParams.reset&&pageReset(),self.seoMetaData&&pageReset(),"electricity"!==self.formData.connectionType&&pageReset(),self.formData&&self.formData.operator&&self.formData.operator.code&&"bescom"===self.formData.operator.code&&(self.formData.shouldShowSampleBill=!0),self.fetchMetaData(),self.prepElectricityOperator=prepElectricityOperator,self.viewSampleBill=function(){$mdDialog.show({templateUrl:"components/recharge/recharge-electricity/sample-bill/sample-bill.template.html",escapeToClose:!0,clickOutsideToClose:!0,controller:function(){},controllerAs:"SM",bindToController:!0,locals:{closeDialog:function(){$mdDialog.hide()}}})}}angular.module("rechargeElectricity").component("rechargeElectricity",{templateUrl:"components/recharge/recharge-electricity/recharge-electricity-md.template.html",controller:RechargeElectricityController}),RechargeElectricityController.$inject=["RechargeDataService","RechargeOrderService","ViewConfigService","$scope","$rootScope","$state","$stateParams","$mdDialog"]}(),function(){"use strict";function SampleBillController($rootScope){$rootScope.$broadcast("reRenderNavHeader",!0)}angular.module("sampleBill").component("sampleBill",{templateUrl:"components/recharge/recharge-electricity/sample-bill/sample-bill.template.html",controller:SampleBillController}),SampleBillController.$inject=["$rootScope"]}(),function(){"use strict";function RechargeHistoryController(RechargeDataService,RechargeOrderService,AuthService,$state,$attrs,$rootScope,$scope,$window){function repeat(item){RechargeOrderService.udf.connectionType=item.connectionType,RechargeOrderService.udf.connectionNumber=parseInt(item.connectionNumber),"prepaid"!==RechargeOrderService.udf.connectionType&&"postpaid"!==RechargeOrderService.udf.connectionType?(RechargeOrderService.udf.connectionNumber=item.connectionNumber,RechargeOrderService.udf.isCircleRequired=!1):RechargeOrderService.udf.rechargeType="0"===item.special?"topup":"special",RechargeOrderService.udf.specialRecharge="0"!==item.special,RechargeOrderService.udf.autoCircle=!0,RechargeOrderService.setOperatorId(parseInt(item.operatorId)).then(function(operator){$scope.$parent&&$scope.$parent.$ctrl&&$scope.$parent.$ctrl.hasOwnProperty("setActiveView")&&$scope.$parent.$ctrl.setActiveView(operator)}),"postpaid"===RechargeOrderService.udf.connectionType||"electricity"===RechargeOrderService.udf.connectionType?RechargeOrderService.udf.amount=parseFloat(item.amount):RechargeOrderService.udf.amount=parseInt(item.amount),"prepaid"!==RechargeOrderService.udf.connectionType&&"postpaid"!==RechargeOrderService.udf.connectionType||RechargeOrderService.setCircleId(parseInt(item.circleId)),$rootScope.$broadcast("userDataUpdated",RechargeOrderService.udf),switchScreen(item.connectionType)}function switchScreen(connectionType){if($rootScope.preventClick=!0,$state.current&&("recharge.orderList"===$state.current.name||"my-orders"===$state.current.name)){var params={connType:connectionType};switch(connectionType){case"prepaid":case"postpaid":$state.go("recharge.mobile",params);break;case"dth":$state.go("recharge.dth");break;case"electricity":$state.go("recharge.electricity")}}$window.scrollTo(0,0),setTimeout(function(){$rootScope.preventClick=void 0},500)}var self=this,access=routingConfig.accessLevels;self.repeat=repeat;var historyKey="all"===$attrs.template?"all":RechargeOrderService.udf.connectionType;AuthService.isLoggedIn()?void 0===RechargeOrderService.recentTransaction||$state.current&&"recharge.orderList"===$state.current.name||0===RechargeOrderService.recentTransaction.length?function(){self.showRT=!0,AuthService.authorize(access.user)&&(historyKey="all"===$attrs.template?"all":RechargeOrderService.udf.connectionType,"all"===$attrs.template&&(RechargeOrderService.udf.connectionType="",$rootScope.$broadcast("userDataUpdated",RechargeOrderService.udf)),void 0!==RechargeOrderService.historyBag[historyKey]?(self.recentTransaction=RechargeOrderService.historyBag[historyKey],self.showRT=void 0!==self.recentTransaction&&0!==self.recentTransaction.length):RechargeDataService.getRechargeHistory("all"===$attrs.template,RechargeOrderService.udf.connectionType,AuthService.getCurrentUser().user_id).then(function(response){"FAILURE"===response.data.status?(RechargeOrderService.historyBag[historyKey]=void 0,self.showRT=!1,response.data.hasOwnProperty("message")&&"Authentication Required"===response.data.message&&AuthService.logout()):(RechargeOrderService.historyBag[historyKey]=response.data.data,self.showRT=!0)}).finally(function(){self.recentTransaction=RechargeOrderService.historyBag[historyKey],self.showRT=void 0!==self.recentTransaction&&0!==self.recentTransaction.length}))}():(self.recentTransaction=RechargeOrderService.historyBag[historyKey],self.showRT=void 0!==self.recentTransaction&&0!==self.recentTransaction.length):(RechargeOrderService.recentTransaction=void 0,RechargeOrderService.historyBag={})}angular.module("rechargeHistory").component("rechargeHistory",{templateUrl:function($element,$attrs){return{all:"components/recharge/recharge-history/recharge-history-list-md.template.html",limited:"components/recharge/recharge-history/recharge-history-md.template.html"}[$attrs.template]},controller:RechargeHistoryController}),
RechargeHistoryController.$inject=["RechargeDataService","RechargeOrderService","AuthService","$state","$attrs","$rootScope","$scope","$window"]}(),function(){"use strict";function RechargeMainController(RechargeOrderService,$scope,vcs,$rootScope,$window,$state,metaService,$mdToast,ApiService){$scope.vm=vcs.vm,$scope.selectedIndex=$state.current.data?$state.current.data.tab:0,$window.scrollTo(0,0);var self=this;self.seoMetaData=$rootScope.metaData||void 0,self.baseAppPath=ApiService.get().baseAppPath,$rootScope.$on("gotMetaData",function(){self.seoMetaData=$rootScope.metaData}),RechargeOrderService.udf.connectionNumber||RechargeOrderService.udf.circle||!RechargeOrderService.udf.amount||(RechargeOrderService.udf.amount=void 0),self.goTo=function(operatorType){var params={seoMetaData:self.seoMetaData};switch(operatorType){case"mobile":case"prepaid":case"postpaid":$state.go("recharge-seo.mobile",params);break;case"dth":$state.go("recharge-seo.dth",params);break;case"electricity":$state.go("recharge-seo.electricity",params);break;default:params.reset=!0,$state.go("recharge.mobile-seo-default",params)}},"seo"===$state.current.data.stateType&&(self.seoMetaData=metaService.getAllMetaData(),self.goTo(self.seoMetaData.BASIC.operator_type)),$scope.displaySchema=metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.KEY.SCHEMA.NAME)||!1,$scope.jsonId={"@context":"http://schema.org","@type":"WebPage",name:metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.HEADER.TITLE.NAME),description:metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.HEADER.DESC.NAME),image:metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.HEADER.OG_IMAGE.NAME),url:metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.HEADER.CANONICAL_URL.NAME),aggregateRating:{"@type":"AggregateRating",bestRating:"5",worstRating:"1",ratingValue:"4.5",reviewCount:metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.HEADER.SCHEMA.RATING_COUNT.NAME)}}}angular.module("rechargeMain").component("rechargeMain",{templateUrl:"components/recharge/recharge-main/recharge-main-md.template.html",controller:RechargeMainController}),RechargeMainController.$inject=["RechargeOrderService","$scope","ViewConfigService","$rootScope","$window","$state","metaService","$mdToast","ApiService"]}(),function(){"use strict";function RechargeMobileController(RechargeDataService,RechargeOrderService,$state,$scope,$rootScope,$stateParams,$mdSidenav,$log){function fetchMetaData(){RechargeDataService.fetchMetaData().then(function(data){self.metaData=data,prepOperatorCircle()})}function onOperatorSelect(selectedOperator){selectedOperator&&(RechargeDataService.getOperatorMap(self.formData.connectionType).then(function(data){self.formData.operatorId=data[selectedOperator.code]}),self.formData.autoCircle||(self.formData.circle=null),self.operatorCircles=RechargeDataService.fetchCircles(selectedOperator),self.formData.specialRecharge=selectedOperator.special,self.formData.autoCircle=!1,$rootScope.$broadcast("userDataUpdated",self.formData))}function onCircleSelect(selectedCircle){selectedCircle&&RechargeDataService.getCircleMap().then(function(data){self.formData.circleId=data[selectedCircle.code],self.formData.autoCircle=!1,$rootScope.$broadcast("userDataUpdated",self.formData)})}function prepOperatorCircle(){self.operators=RechargeDataService.getOperators(self.formData.connectionType),RechargeDataService.getMetaData().then(function(metaData){self.operatorCircles=metaData.data.circle}),self.seoMetaData&&self.seoMetaData.BASIC.operator_code&&angular.forEach(self.operators,function(operator){if(operator.code===self.seoMetaData.BASIC.operator_code)return pageReset(),self.seoMetaData.BASIC.operator_type&&(self.formData.connectionType=self.seoMetaData.BASIC.operator_type),void(self.formData.operator={code:operator.code,name:operator.name,rank:operator.rank,seoAlias:operator.seoAlias,special:operator.special,viewBill:operator.viewBill})})}function changeType(connectionType){self.formData.operator=null,self.formData.specialRecharge=!1,$scope.error={},$scope.error.visible=!1,$scope.error.message="",RechargeOrderService.setConnectionType(connectionType),self.prepOperatorCircle(),keypressSearch(!0),$rootScope.$broadcast("userDataUpdated",self.formData)}function updateRechargeType(rechargeType){RechargeOrderService.setRechargeType(rechargeType)}function updateAmount(amt){RechargeOrderService.setAmount(amt)}function showConnections(e){}function hideConnections(e){}function keypressSearch(isFreeWill){if(self.formData.connectionNumber&&10===self.formData.connectionNumber.toString().length){var metaEntity;RechargeDataService.findOperatorCircle(self.formData.connectionNumber).then(function(response){if(metaEntity=response.data,!0===metaEntity.success){!isFreeWill&&metaEntity.hasOwnProperty("data")&&metaEntity.data.hasOwnProperty("type")&&(self.formData.connectionType=metaEntity.data.type);var operatorCircleData=metaEntity.data[self.formData.connectionType];self.formData.autoCircle=!0,self.formData.operator=self.metaData.data.operator[self.formData.connectionType][operatorCircleData.operator],self.formData.operatorId=operatorCircleData.operator,self.formData.circle=self.metaData.data.circle[operatorCircleData.circle],self.formData.circleId=operatorCircleData.circle,self.formData.specialRecharge=self.formData.operator.special,$rootScope.$broadcast("userDataUpdated",self.formData)}},function(response){metaEntity=response.data})}}function submitForm(event){if(event.preventDefault(),$rootScope.hasOwnProperty("preventClick")&&$rootScope.preventClick)return void($rootScope.preventClick=void 0);self.mobileForm.$invalid||RechargeDataService.doApiValidation().then(function(data){200===data.status&&data.data.success?data.data.data&&"RECHARGEVALIDATIONSUCCESS"===data.data.data.status?($scope.error.visible=!1,$state.go("paymentOptions",{flowType:"recharge"})):($scope.error.visible=!0,$scope.error.message=""!==data.data.data.description?data.data.data.description:data.data.data.status,"RECHARGEVALIDATIONFAILURE"===$scope.error.message&&($scope.error.message="Recharge Validation Failure")):($scope.error.visible=!0,$scope.error.message=data.data.message.text,"RECHARGEVALIDATIONFAILURE"===$scope.error.message&&($scope.error.message="Recharge Validation Failure"))},function(err){$scope.error.visible=!0,$scope.error.message="NETWORK ERROR"})}function toggleModal(){self.modalShown=!self.modalShown}function resetCodes(){self.formData.plan=null,self.formData.planTypeId=null,self.formData.response="",$rootScope.$broadcast("userDataUpdated",self.formData),$scope.error||($scope.error=RechargeOrderService.udf.error||{}),$scope.error.visible=!1,$scope.error.message=""}function pageReset(){RechargeOrderService.resetCodes(),self.formData=RechargeOrderService.udf,self.formData.rechargeType="",self.formData.connectionType="",self.formData.plan={},self.formData.planType={},self.formData.isCircleRequired=!1,$scope.hasOwnProperty("error")&&$scope.error&&$scope.error.message&&($scope.error.visible=!1,$scope.error.message=""),$rootScope.$broadcast("userDataUpdated",self.formData)}var self=this;self.formData=RechargeOrderService.udf,$scope.error=self.formData.error||{},self.openBrowsePlan=function(componentId){return function(){$mdSidenav(componentId).toggle().then(function(){$rootScope.$broadcast("renderBrowsePlan",self.formData.connectionType)})}}("browsePlan"),self.seoMetaData=$state.params.seoMetaData||$rootScope.metaData,$stateParams&&$stateParams.reset&&pageReset(),self.seoMetaData&&self.seoMetaData.BASIC.operator_type&&(self.formData.connectionType=self.seoMetaData.BASIC.operator_type),"prepaid"!==self.formData.connectionType&&"postpaid"!==self.formData.connectionType&&("recharge.mobile"===$state.current.name?self.formData.connectionType="prepaid":pageReset()),$rootScope.$on("logout",function(event,udf){pageReset()}),self.modalShown=!1,self.metaData={},self.onOperatorSelect=onOperatorSelect,self.onCircleSelect=onCircleSelect,self.prepOperatorCircle=prepOperatorCircle,self.changeType=changeType,self.keypressSearch=keypressSearch,self.submitForm=submitForm,self.toggleModal=toggleModal,self.showConnections=showConnections,self.hideConnections=hideConnections,self.fetchMetaData=fetchMetaData,self.updateRechargeType=updateRechargeType,self.updateAmount=updateAmount,self.resetCodes=resetCodes,self.pageReset=pageReset,self.fetchMetaData(),"prepaid"===$state.params.connType||"postpaid"===$state.params.connType?changeType($state.params.connType):RechargeOrderService.resetCodes()}angular.module("rechargeMobile").component("rechargeMobile",{templateUrl:"components/recharge/recharge-mobile/recharge-mobile-md.template.html",controller:RechargeMobileController}),RechargeMobileController.$inject=["RechargeDataService","RechargeOrderService","$state","$scope","$rootScope","$stateParams","$mdSidenav","$log"]}(),function(){"use strict";angular.module("rechargeMobile").directive("browsePlan",function(){return{restrict:"E",templateUrl:"components/recharge-mobile/recharge-browse-plan/recharge-browse-plan.template.html",transclude:!0,replace:!0,scope:{show:"="},link:function(scope,element,attrs){scope.dialogStyle={},attrs.width&&(scope.dialogStyle.width=attrs.width),attrs.height&&(scope.dialogStyle.height=attrs.height),scope.hideModal=function(){scope.show=!1}}}})}(),function(){"use strict";function NavBarCtrl($scope,vcs,$state,$window,$rootScope){function getSelectedIndex(){return renderNavHeader(),0}function activeIndex(index){}function renderNavHeader(){$state.current.data.hasOwnProperty("navBar")?($scope.showNavBar=$state.current.data.navBar,$scope.showBaseHeader=$state.current.data.baseHeader):($scope.showNavBar=!0,$scope.showBaseHeader=!0)}$scope.vm=vcs.vm,$scope.selectedIndex=0,$scope.activeIndex=activeIndex,$scope.showNavBar=!0,$scope.showBaseHeader=!0,$rootScope.$on("reRenderNavHeader",function(event,bool){renderNavHeader()}),$scope.getSelectedIndex=getSelectedIndex,$scope.selectedIndex===$state.get("logout").data.index&&renderNavHeader()}angular.module("rechargeNavBar").component("rechargeNavBar",{templateUrl:"components/recharge/nav-bar/nav-bar-md.template.html",controller:NavBarCtrl}),NavBarCtrl.$inject=["$scope","ViewConfigService","$state","$window","$rootScope"]}(),function(){"use strict";function SummaryCtrl($scope,$location,RechargeOrderService,RechargeDataService,$stateParams,ViewConfigService,$rootScope,$state){function setTxnId(){RechargeOrderService.udf.txnId=params.orderId,$scope.fetchSummary(params.orderId)}function fetchSummary(txnId){RechargeDataService.fetchSummary(txnId).then(function(response){RechargeOrderService.historyBag&&"SUCCESS"===response.data.status&&delete RechargeOrderService.historyBag[response.data.data.connectionType],"SUCCESS"===response.data.status?($scope.summary=response.data.data,$scope.status=!0,$scope.summary&&"SUCCESSPENDING"===$scope.summary.recharge_status?setTimeout(function(){},9e3):"FAILURE"===$scope.summary.status?($scope.status=!1,$scope.message=$scope.summary.message):$scope.message=response.data.message):($scope.status=!1,$scope.message=response.data.message)},function(err){$scope.status=!1})}function repeat(item){if(item&&"SUCCESS"!==item.message_status)RechargeOrderService.udf.connectionType=item.connectionType,RechargeOrderService.udf.connectionNumber=parseInt(item.connectionNumber),"prepaid"!==RechargeOrderService.udf.connectionType&&"postpaid"!==RechargeOrderService.udf.connectionType?RechargeOrderService.udf.isCircleRequired=!1:RechargeOrderService.udf.rechargeType="0"===item.special?"topup":"special",RechargeOrderService.udf.specialRecharge="0"!==item.special,RechargeOrderService.udf.autoCircle=!0,RechargeOrderService.setOperatorId(parseInt(item.operatorId)).then(function(operator){$scope.$parent&&$scope.$parent.$ctrl&&$scope.$parent.$ctrl.hasOwnProperty("setActiveView")&&$scope.$parent.$ctrl.setActiveView(operator)}),"postpaid"===RechargeOrderService.udf.connectionType||"electricity"===RechargeOrderService.udf.connectionType?RechargeOrderService.udf.amount=parseFloat(item.amount):RechargeOrderService.udf.amount=parseInt(item.amount),"prepaid"!==RechargeOrderService.udf.connectionType&&"postpaid"!==RechargeOrderService.udf.connectionType||RechargeOrderService.setCircleId(parseInt(item.circleId)),$rootScope.$broadcast("rechargeOrderUpdated",RechargeOrderService.udf),switchScreen(item.connectionType);else{RechargeOrderService.udf.connectionType="";var params={connType:item.connectionType};switch(item.connectionType){case"prepaid":case"postpaid":$state.go("recharge.mobile",params);break;case"dth":$state.go("recharge.dth");break;case"electricity":$state.go("recharge.electricity")}}}function switchScreen(connectionType){if($state.current&&"summary"===$state.current.name){var params={connType:connectionType};switch(connectionType){case"prepaid":case"postpaid":$state.go("recharge.mobile",params);break;case"dth":$state.go("recharge.dth");break;case"electricity":$state.go("recharge.electricity")}}}$scope.summary={},$scope.status=void 0;var self=this;self.repeat=repeat,$scope.isUndefined=function(status){return void 0===status};var params=$location.search();$scope.setTxnId=setTxnId,$scope.fetchSummary=fetchSummary,$scope.setTxnId(),self.goToMyOrders=function(){$state.go("my-orders")}}angular.module("summary").component("summary",{templateUrl:"components/recharge/summary/summary-md.template.html",controller:SummaryCtrl}),SummaryCtrl.$inject=["$scope","$location","RechargeOrderService","RechargeDataService","$stateParams","ViewConfigService","$rootScope","$state"]}(),function(){"use strict";function ViewPaymentController(RechargeDataService,RechargeOrderService,$state,$scope){function viewBill(){return RechargeDataService.viewBill().then(function(data){if(data){var d=data[0];self.formData.bill.partPayAllowed=d.acceptPartPay,self.formData.bill.disablePayment=!d.acceptPayment,self.formData.bill.payableAmt=parseFloat(d.billAmount),self.formData.bill.billnetamount=parseFloat(d.billnetamount),self.formData.bill.dueDate=d.dueDate,self.formData.bill.statusMessage=d.statusMessage,self.formData.amount=self.formData.bill.payableAmt}})}function submitForm(){RechargeDataService.doApiValidation().then(function(response){200===response.status&&response.data.success?response.data.data&&"RECHARGEVALIDATIONSUCCESS"===response.data.data.status?$state.go("paymentOptions",{flowType:"recharge"}):($scope.error.visible=!0,$scope.error.message=""!==response.data.data.description?response.data.data.description:response.data.data.status,"RECHARGEVALIDATIONFAILURE"===$scope.error.message&&($scope.error.message="Recharge Validation Failure")):($scope.error.visible=!0,$scope.error.message=response.data.message.text,"RECHARGEVALIDATIONFAILURE"===$scope.error.message&&($scope.error.message="RECHARGE VALIDATION FAILURE"))},function(err){$scope.error.visible=!0,$scope.error.message="NETWORK ERROR"})}function resetCodes(){}function setActiveView(){}var self=this;self.formData=RechargeOrderService.udf,$scope.error=self.formData.error,self.formData.response="",self.formData.error={message:"",visible:!1},self.formData.bill={disablePayment:!1,partPayAllowed:!1,payableAmt:self.formData.amount},self.viewBill=viewBill,self.resetCodes=resetCodes,self.setActiveView=setActiveView,self.submitForm=submitForm,self.viewBill()}angular.module("viewPayment").component("viewPayment",{templateUrl:"components/recharge/view-payment/view-payment-md.template.html",controller:ViewPaymentController}),ViewPaymentController.$inject=["RechargeDataService","RechargeOrderService","$state","$scope"]}(),function(){"use strict";function RSEController($window,$mdToast,hsOrder,HODProvider){var self=this;self.gotData=!1,self.customCatalogData=void 0,self.activeTab=0,self.totals={quantity:0},self.pageLoadVars={cat_id:hsOrder.getHSOData("catId")},HODProvider.reqScnExtData(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.gotData=!0,self.customCatalogData=response.data):response.status}),self.newTabSelection=function(index){self.activeTab=index},self.updateOrder=function(operation,index,item){var quantity;operation?item.quantity<item.min_value?quantity=item.min_value:item.quantity===item.max_value?(quantity=item.max_value,$mdToast.showSimple(hsOrder.getMessage(64))):quantity=item.quantity+1:item.quantity===item.min_value?(quantity=0,$mdToast.showSimple(hsOrder.getMessage(65))):quantity=item.quantity>item.max_value?item.max_value:item.quantity-1,self.customCatalogData.option_data[self.activeTab].card[index].quantity=quantity},self.proceedBook=function(){var totalQuantity=0,tempQuantity=0,tempObject={},filterOptions={};angular.forEach(self.customCatalogData.option_data,function(attribute){tempQuantity=0,tempObject={},angular.forEach(attribute.card,function(option){option.quantity&&(tempQuantity+=option.quantity,tempObject[option.option_id]=option.quantity)}),tempQuantity&&(totalQuantity+=tempQuantity,filterOptions[attribute.attr_id]=tempObject)}),totalQuantity?hsOrder.applyFilters(filterOptions,hsOrder.extRequirementFlow):$mdToast.showSimple(hsOrder.getMessage(61))},self.goBack=function(){$window.history.back()}}angular.module("hsOrderModule").component("requirementScreenExtended",{templateUrl:"components/requirement-screen/requirement-screen-ext.temp.html",controller:RSEController}),RSEController.$inject=["$window","$mdToast","hsOrder","HODProvider"]}(),function(){function RSPController($state,$rootScope,$stateParams,$window,$mdToast,hsOrder,HODProvider,IntegrationService,DateHelper){var self=this;self.gotData=!1,self.gotFilterData=!1,self.requirementData=void 0,self.veButton=!0,self.slotSelection={today:DateHelper.getCurrentDate(),tomorrow:DateHelper.generateNextDate(1),openDatePicker:!1,daySelected:void 0,dateSelected:void 0,timeSelected:void 0,todSlots:[],tomSlots:[],futSlots:[],minDate:DateHelper.getCurrentDate()},self.isCategoryAvailable=!0,$rootScope.$on("categoryValidated",function(evenr,args){self.isCategoryAvailable=args.isCategoryAvailable}),self.formatDate=hsOrder.getFormatedDate,self.filterSelection={},self.filterCheckModel={},self.reqPageOptions={cat_id:hsOrder.getHSOData("catId"),option_id:hsOrder.getHSOData("optionId"),odr_mode:hsOrder.getHSOData("odrMode")},self.active=!1,self.changeState=function(){self.active=!0},hsOrder.clearHSOData("vlQuoteObject"),hsOrder.clearHSOData("quotedVendors"),hsOrder.clearHSOData("vlContactObject"),self.extractData=function(){hsOrder.setHSOData("requirementFilters",self.requirementData.option_data.card),self.extractFilterData(),self.checkSlotSelection(),self.extendFiltersSelected(),hsOrder.validateCategory(),self.requirementData.option_data.documents.length?self.gotDocsData=!0:self.gotDocsData=!1},self.extractFilterData=function(){0!==self.requirementData.option_data.card.length?angular.forEach(self.requirementData.option_data.card,function(value){var newValue,temp={},newKey=value.attribute_id;"textboxgroup"!==value.input_type&&(self.gotFilterData=!0,"checkbox"==value.input_type&&(newValue=[],angular.forEach(value.options,function(opValue){temp[opValue.option_id]=!1}),self.filterCheckModel[newKey]=temp),self.filterSelection[newKey]=newValue),""==value.display_name&&(value.display_name="Please select from options")}):self.gotFilterData=!1},self.checkSlotSelection=function(){var todayData=DateHelper.getCurrentDate();self.requirementData.today_slots&&self.requirementData.today_slots.length>0?(self.slotSelection.todSlots=self.requirementData.today_slots,self.slotSelection.daySelected=0,self.requirementData.tomorrow_slots.length>0&&(self.slotSelection.tomSlots=self.requirementData.tomorrow_slots)):self.requirementData.tomorrow_slots&&self.requirementData.tomorrow_slots.length>0?(self.slotSelection.tomSlots=self.requirementData.tomorrow_slots,self.slotSelection.daySelected=1,self.slotSelection.minDate=self.slotSelection.tomorrow):(self.slotSelection.daySelected=2,todayData.setDate(todayData.getDate()+2),self.slotSelection.minDate=new Date(todayData))},self.extendFiltersSelected=function(){var sessionStorageFilters=hsOrder.getHSOData("filterOptions");sessionStorageFilters&&angular.extend(self.filterSelection,sessionStorageFilters),angular.forEach(self.filterSelection,function(value,key){angular.isArray(value)&&angular.forEach(value,function(opValue){self.filterCheckModel[key][opValue]=!0})})},self.scrolled=!0,self.filterSelected=function(parentIndex,index,inputType,attributeId,optionId){if("checkbox"==inputType){var foundIndex=self.filterSelection[attributeId].indexOf(optionId);-1===foundIndex?self.filterSelection[attributeId].push(optionId):self.filterSelection[attributeId].splice(foundIndex,1)}self.scrolled&&(window.scrollBy({top:200,left:0,behavior:"smooth"}),self.scrolled=!1)},self.getReqScnData=function(){self.reqPageOptions.city_id=hsOrder.getHSOData("cityId"),HODProvider.reqScnData(self.reqPageOptions).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.gotData=!0,self.calendarMaxDate=DateHelper.generateNextDate(response.data.max_days),self.requirementData=response.data,hsOrder.setHSOData("jrneyLevel",2),self.extractData()):response.status})},self.getReqScnData(),self.selectDay=function(option){switch(self.slotSelection.timeSelected=void 0,option){case 0:self.slotSelection.daySelected=0;break;case 1:self.slotSelection.daySelected=1;break;default:self.slotSelection.daySelected=2,self.slotSelection.openDatePicker=!0}},self.selectTime=function(timeSlot){self.slotSelection.timeSelected=timeSlot},self.selectDate=function(){var date=hsOrder.getFormatedDate(self.slotSelection.dateSelected,1),dataToSend={cat_id:self.reqPageOptions.cat_id,date:date};HODProvider.getFutTime(dataToSend).then(function(response){"HTTP_SUCCESS_DATA"==response.status?self.slotSelection.futSlots=response.data.future_slots:response.status})},self.gotoNextScreen=function(){var date;switch(self.slotSelection.daySelected){case 0:date=hsOrder.getFormatedDate(self.slotSelection.today,0);break;case 1:date=hsOrder.getFormatedDate(self.slotSelection.tomorrow,0);break;case 2:date=hsOrder.getFormatedDate(self.slotSelection.dateSelected,0)}hsOrder.setHSOData("filterOptions",self.filterSelection),hsOrder.setHSOData("date",date),hsOrder.setHSOData("time",self.slotSelection.timeSelected),hsOrder.requirementFlow()},self.validateData=function(){hsOrder.setHSOData("price_chart_ids",void 0),hsOrder.setHSOData("exp_btn",void 0);var validationFlag=0;void 0===self.slotSelection.timeSelected&&(validationFlag=4),2===self.slotSelection.daySelected&&void 0===self.slotSelection.dateSelected&&(validationFlag=3),angular.forEach(self.filterSelection,function(value,key){angular.isArray(value)||value||(validationFlag=2)});var locationInput=angular.element(document.getElementById("location_int"));if(!hsOrder.getHSOData("locVerified")||locationInput&&locationInput.length&&locationInput.val().length<6){var pincodeInput=angular.element(document.getElementsByClassName("pincode_int"));validationFlag=pincodeInput&&pincodeInput.length?5:1}switch(validationFlag){case 1:$mdToast.showSimple(hsOrder.getMessage(81)),locationInput.focus();break;case 2:$mdToast.showSimple(hsOrder.getMessage(61));break;case 3:$mdToast.showSimple(hsOrder.getMessage(62));break;case 4:$mdToast.showSimple(hsOrder.getMessage(63));break;case 5:$mdToast.showSimple(hsOrder.getMessage(83)),locationInput.focus()}0===validationFlag&&self.gotoNextScreen()},self.gotoPage=function(state){"location-search"==state?IntegrationService.openLocationSearchModal():$state.go(state)}}angular.module("hsOrderModule").component("requirementScreenProduct",{templateUrl:"components/requirement-screen/requirement-screen-product.temp.html",controller:RSPController}),RSPController.$inject=["$state","$rootScope","$stateParams","$window","$mdToast","hsOrder","HODProvider","IntegrationService","DateHelper"]}(),function(){function RSController($state,$mdToast,hsOrder,HODProvider,IntegrationService,$rootScope,DataLayer,DateHelper){var self=this;self.catModel=hsOrder.getHSOData("catModel"),self.isExp_btn=hsOrder.getHSOData("exp_btn"),self.gotData=!1,self.gotFilterData=!1,self.requirementData=void 0,self.veButton=!0,self.gotDocsData=!1,self.docsSelection=[" - Customer has following documents: "],self.slotSelection={today:DateHelper.getCurrentDate(),tomorrow:DateHelper.generateNextDate(1),openDatePicker:!1,daySelected:void 0,dateSelected:void 0,timeSelected:void 0,todSlots:[],tomSlots:[],futSlots:[],minDate:DateHelper.getCurrentDate()},self.isCategoryAvailable=!0,$rootScope.$on("categoryValidated",function(evenr,args){self.isCategoryAvailable=args.isCategoryAvailable}),self.filterSelection={},self.filterCheckModel={},self.reqPageOptions={cat_id:hsOrder.getHSOData("catId"),option_id:hsOrder.getHSOData("optionId"),odr_mode:hsOrder.getHSOData("odrMode")},self.active=!1,self.changeState=function(){self.active=!0},self.extReqOptions={cat_id:hsOrder.getHSOData("catId")},self.customCatalogData=void 0,self.gotExtendedData=!1,self.totals={quantity:0},self.extFilterOptions={},self.reqModel=hsOrder.getHSOData("reqModel"),self.formatDate=hsOrder.getFormatedDate,hsOrder.clearHSOData("vlQuoteObject"),hsOrder.clearHSOData("quotedVendors"),hsOrder.clearHSOData("vlContactObject"),self.extractData=function(){hsOrder.setHSOData("requirementFilters",self.requirementData.option_data.card),self.extractFilterData(),self.checkSlotSelection(),self.extendFiltersSelected(),hsOrder.validateCategory(),self.requirementData.option_data.documents.length?self.gotDocsData=!0:self.gotDocsData=!1},self.extractFilterData=function(){0!==self.requirementData.option_data.card.length?angular.forEach(self.requirementData.option_data.card,function(value){var newValue,temp={},newKey=value.attribute_id;"textboxgroup"!==value.input_type&&(self.gotFilterData=!0,"checkbox"==value.input_type&&(newValue=[],angular.forEach(value.options,function(opValue){temp[opValue.option_id]=!1}),self.filterCheckModel[newKey]=temp),self.filterSelection[newKey]=newValue),""==value.display_name&&(value.display_name="Please select from options")}):self.gotFilterData=!1},self.checkSlotSelection=function(){var todayData=DateHelper.getCurrentDate();self.requirementData.today_slots&&self.requirementData.today_slots.length>0?(self.slotSelection.todSlots=self.requirementData.today_slots,self.slotSelection.daySelected=0,self.requirementData.tomorrow_slots.length>0&&(self.slotSelection.tomSlots=self.requirementData.tomorrow_slots)):self.requirementData.tomorrow_slots&&self.requirementData.tomorrow_slots.length>0?(self.slotSelection.tomSlots=self.requirementData.tomorrow_slots,self.slotSelection.daySelected=1,self.slotSelection.minDate=self.slotSelection.tomorrow):(self.slotSelection.daySelected=2,todayData.setDate(todayData.getDate()+2),self.slotSelection.minDate=new Date(todayData))},self.extendFiltersSelected=function(){var sessionStorageFilters=hsOrder.getHSOData("filterOptions");sessionStorageFilters&&angular.extend(self.filterSelection,sessionStorageFilters),angular.forEach(self.filterSelection,function(value,key){angular.isArray(value)&&angular.forEach(value,function(opValue){self.filterCheckModel[key][opValue]=!0})})},self.scrolled=!0,self.filterSelected=function(parentIndex,index,inputType,attributeId,optionId){if("checkbox"==inputType){var foundIndex=self.filterSelection[attributeId].indexOf(optionId);-1===foundIndex?self.filterSelection[attributeId].push(optionId):self.filterSelection[attributeId].splice(foundIndex,1)}self.scrolled&&(window.scrollBy({top:200,left:0,behavior:"smooth"}),self.scrolled=!1)},self.getReqScnData=function(){self.reqPageOptions.city_id=hsOrder.getHSOData("cityId"),HODProvider.reqScnData(self.reqPageOptions).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.gotData=!0,self.requirementData=response.data,self.calendarMaxDate=DateHelper.generateNextDate(response.data.max_days),hsOrder.setHSOData("jrneyLevel",2),self.extractData(),2==hsOrder.getHSOData("catModel")&&self.getExtendedRequirement()):response.status})},self.getReqScnData(),self.getExtendedRequirement=function(){HODProvider.reqScnExtData(self.extReqOptions).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.gotExtendedData=!0,response.data.option_data&&response.data.option_data.length?self.customCatalogData=response.data:self.customCatalogData=void 0):response.status})},self.selectDay=function(option){switch(self.slotSelection.timeSelected=void 0,option){case 0:self.slotSelection.daySelected=0;break;case 1:self.slotSelection.daySelected=1;break;default:self.slotSelection.daySelected=2,self.slotSelection.openDatePicker=!0}},self.selectTime=function(timeSlot){self.slotSelection.timeSelected=timeSlot},self.selectDate=function(){var date=self.formatDate(self.slotSelection.dateSelected,1),dataToSend={cat_id:self.reqPageOptions.cat_id,date:date};HODProvider.getFutTime(dataToSend).then(function(response){"HTTP_SUCCESS_DATA"==response.status?self.slotSelection.futSlots=response.data.future_slots:response.status})},self.gotoNextScreen=function(){var date;switch(self.slotSelection.daySelected){case 0:date=self.formatDate(self.slotSelection.today,0);break;case 1:date=self.formatDate(self.slotSelection.tomorrow,0);break;case 2:date=self.formatDate(self.slotSelection.dateSelected,0)}hsOrder.setHSOData("filterOptions",self.filterSelection),hsOrder.setHSOData("date",date),hsOrder.setHSOData("time",self.slotSelection.timeSelected),self.docsSelection.length>1?hsOrder.setHSOData("docsSelected",self.docsSelection.join(" | ")):hsOrder.setHSOData("docsSelected",void 0),DataLayer.addLayer({event:"add_to_cart",service_name:hsOrder.getHSOData("catName"),cat_city_id:hsOrder.getHSOData("catId")+"_"+hsOrder.getHSOData("cityId")}),self.customCatalogData&&3==self.reqModel?self.proceedBook():hsOrder.requirementFlow()},self.toggleDocSelection=function(index){var found,documentChecked=self.requirementData.option_data.documents[index];found=self.docsSelection.indexOf(documentChecked),-1===found?self.docsSelection.push(documentChecked):self.docsSelection.splice(found,1)},self.validateData=function(){var validationFlag=0;void 0===self.slotSelection.timeSelected&&(validationFlag=4),2===self.slotSelection.daySelected&&void 0===self.slotSelection.dateSelected&&(validationFlag=3),angular.forEach(self.filterSelection,function(value,key){angular.isArray(value)||value||(validationFlag=2)});var locationInput=angular.element(document.getElementById("location_int"));if(!hsOrder.getHSOData("locVerified")||locationInput&&locationInput.length&&locationInput.val().length<6){var pincodeInput=angular.element(document.getElementsByClassName("pincode_int"));validationFlag=pincodeInput&&pincodeInput.length?5:1}switch(validationFlag){case 1:$mdToast.showSimple(hsOrder.getMessage(81)),locationInput.focus();break;case 2:$mdToast.showSimple(hsOrder.getMessage(61));break;case 3:$mdToast.showSimple(hsOrder.getMessage(62));break;case 4:$mdToast.showSimple(hsOrder.getMessage(63));break;case 5:$mdToast.showSimple(hsOrder.getMessage(83)),locationInput.focus()}0===validationFlag&&self.gotoNextScreen()},self.updateOrder=function(operation,index,item,option){var quantity;operation?item.quantity<item.min_value?quantity=item.min_value:item.quantity===item.max_value?(quantity=item.max_value,$mdToast.showSimple(hsOrder.getMessage(64))):quantity=item.quantity+1:item.quantity===item.min_value?(quantity=item.min_value,$mdToast.showSimple(hsOrder.getMessage(65))):quantity=item.quantity>item.max_value?item.max_value:item.quantity<1?0:item.quantity-1;var indexOfOption=self.customCatalogData.option_data.indexOf(option);self.customCatalogData.option_data[indexOfOption].card[index].quantity=quantity},self.proceedBook=function(){var totalQuantity=0,tempQuantity=0,tempObject={},filterOptions=hsOrder.getHSOData("filterOptions");angular.forEach(self.customCatalogData.option_data,function(attribute){tempQuantity=0,tempObject={},
angular.forEach(attribute.card,function(option){option.quantity&&(tempQuantity+=option.quantity,tempObject[option.option_id]=option.quantity)}),tempQuantity?(totalQuantity+=tempQuantity,filterOptions[attribute.attr_id]=tempObject):delete filterOptions[attribute.attr_id]}),totalQuantity?(self.extFilterOptions=filterOptions,hsOrder.applyFilters(filterOptions,hsOrder.extRequirementFlow)):$mdToast.showSimple(hsOrder.getMessage(61))},self.gotoPage=function(state){"location-search"==state?IntegrationService.openLocationSearchModal():$state.go(state)}}angular.module("hsOrderModule").component("requirementScreen",{templateUrl:"components/requirement-screen/requirement-screen.temp.html",controller:RSController}),RSController.$inject=["$state","$mdToast","hsOrder","HODProvider","IntegrationService","$rootScope","DataLayer","DateHelper"]}(),function(){function vendorRatingShortlinkController($state,$timeout,$mdToast,hsOrder,HODProvider,$stateParams,$location,IntegrationService,AuthService,ApiService){var self=this;self.reviewSubmitted=!1,self.reviewSuccessVars=void 0,self.staticImagePath=ApiService.get().staticImagePath,self.isReadOnly=!1;var params=$location.search();self.pageLoadVars={order_id:params.order_id,city_id:params.city_id,vendor_id:params.vendor_id,mobile:params.mobile,group_id:params.group_id,type:$stateParams.type},self.pageRenderVars={reviewData:void 0,review:{order_id:params.order_id,rating:0,review:"",time:0,quality:0,price:0,skills:0,experience:0,profile_pic:void 0,vendor_name:void 0,cat_name:void 0,username:"",city_id:params.city_id,vendor_id:params.vendor_id,mobile:params.mobile,group_id:params.group_id},activeTab:0,check:{0:"dist/img/icons/option-buttons/circle_fill_grey.png",1:"dist/img/icons/option-buttons/circle_fill.png"},appDownloadUrl:document.getElementsByTagName("base")[0].href+"app-download.html"},HODProvider.preReviewSL(self.pageLoadVars).then(function(response){if("HTTP_SUCCESS_DATA"==response.status){self.pageRenderVars.reviewData=response.data;var reviewMode=self.pageRenderVars.reviewData.reviewMode;self.isReadOnly=0==reviewMode||1==reviewMode,self.extractData()}else"HTTP_SUCCESS_NO_DATA"==response.status?($mdToast.showSimple(hsOrder.getMessage(33)),window.location=ApiService.get().baseAppPath+"page-not-found"):($mdToast.showSimple(hsOrder.getMessage(31)),$state.go("genesis.home"))}),self.extractData=function(){self.pageRenderVars.review.rating=parseInt(self.pageRenderVars.reviewData.rating),self.pageRenderVars.review.review=self.pageRenderVars.reviewData.review,self.pageRenderVars.review.time=self.pageRenderVars.reviewData.time,self.pageRenderVars.review.quality=self.pageRenderVars.reviewData.quality,self.pageRenderVars.review.price=self.pageRenderVars.reviewData.price,self.pageRenderVars.review.skills=self.pageRenderVars.reviewData.skills,self.pageRenderVars.review.experience=self.pageRenderVars.reviewData.experience,self.pageRenderVars.review.profile_pic=self.pageRenderVars.reviewData.profile_pic,self.pageRenderVars.review.vendor_name=self.pageRenderVars.reviewData.vendor_name,self.pageRenderVars.review.cat_name=self.pageRenderVars.reviewData.cat_name},self.toggleOptions=function(option){if(self.isReadOnly)$mdToast.showSimple(hsOrder.getMessage(22));else switch(option){case"time":self.pageRenderVars.review.time=+!self.pageRenderVars.review.time;break;case"quality":self.pageRenderVars.review.quality=+!self.pageRenderVars.review.quality;break;case"price":self.pageRenderVars.review.price=+!self.pageRenderVars.review.price;break;case"skills":self.pageRenderVars.review.skills=+!self.pageRenderVars.review.skills;break;case"experience":self.pageRenderVars.review.experience=+!self.pageRenderVars.review.experience}},self.goBack=function(){$state.go("genesis.home")},self.submit=function(){if(self.pageRenderVars.review.rating)if(self.pageRenderVars.review.review.length>=5){if("vendor"==self.pageLoadVars.type&&self.pageLoadVars.city_id&&""==self.pageRenderVars.review.username)return void $mdToast.showSimple("Please Provide Your name");self.pageLoadVars.city_id&&self.pageLoadVars.vendor_id?"public"==AuthService.getCurrentUser().role.title?IntegrationService.loginWithPromise("vendor-review-shortlink").then(function(login_response){login_response.status&&(self.pageRenderVars.review.mobile=AuthService.getCurrentUser().mobile,self.submitReview())},function(err){}):(self.pageRenderVars.review.mobile=AuthService.getCurrentUser().mobile,self.submitReview()):self.submitReview()}else $mdToast.showSimple(hsOrder.getMessage(89));else $mdToast.showSimple(hsOrder.getMessage(79))},self.submitReview=function(){HODProvider.postReviewSL(self.pageRenderVars.review).then(function(response){"HTTP_SUCCESS_DATA"==response.status&&response.data?(self.reviewSubmitted=!0,self.pageRenderVars.activeTab=1,self.reviewSuccessVars=response.data):response.status})},self.rateFunction=function(rating){$timeout(function(){},1e3)},self.downloadApp=function(){if(AuthService.isLoggedIn()){var params={user_id:AuthService.getCurrentUser().user_id,mobile:AuthService.getCurrentUser().mobile};IntegrationService.downloadApp(params)}else IntegrationService.openLoginModal()}}angular.module("hsOrderModule").component("vendorRatingShortlink",{templateUrl:"components/reviews-shortlink/vendor-rating-shortlink.temp.html",controller:vendorRatingShortlinkController}),vendorRatingShortlinkController.$inject=["$state","$timeout","$mdToast","hsOrder","HODProvider","$stateParams","$location","IntegrationService","AuthService","ApiService"]}(),function(){function vendorRatingController($window,$timeout,$mdToast,hsOrder,HODProvider,AuthService){var self=this;self.pageLoadVars={order_id:hsOrder.getHSOData("orderId"),user_id:AuthService.getCurrentUser().user_id},self.pageRenderVars={reviewMode:hsOrder.getHSOData("ratingLoad").mode,reviewData:void 0,review:{order_id:hsOrder.getHSOData("orderId"),user_id:AuthService.getCurrentUser().user_id,rating:0,review:"",time:0,quality:0,price:0,skills:0,experience:0,profile_pic:void 0,vendor_name:void 0,cat_name:void 0},check:{0:"dist/img/icons/option-buttons/circle_fill_grey.png",1:"dist/img/icons/option-buttons/circle_fill.png"}},HODProvider.fetchVdrRating(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.reviewData=response.data,self.extractData()):response.status}),self.extractData=function(){self.pageRenderVars.review.rating=parseInt(self.pageRenderVars.reviewData.rating),self.pageRenderVars.review.review=self.pageRenderVars.reviewData.review,self.pageRenderVars.review.time=self.pageRenderVars.reviewData.time,self.pageRenderVars.review.quality=self.pageRenderVars.reviewData.quality,self.pageRenderVars.review.price=self.pageRenderVars.reviewData.price,self.pageRenderVars.review.skills=self.pageRenderVars.reviewData.skills,self.pageRenderVars.review.experience=self.pageRenderVars.reviewData.experience,self.pageRenderVars.review.profile_pic=self.pageRenderVars.reviewData.profile_pic,self.pageRenderVars.review.vendor_name=self.pageRenderVars.reviewData.vendor_name,self.pageRenderVars.review.cat_name=self.pageRenderVars.reviewData.cat_name},self.toggleOptions=function(option){if(1!==self.pageRenderVars.reviewMode)switch(option){case"time":self.pageRenderVars.review.time=+!self.pageRenderVars.review.time;break;case"quality":self.pageRenderVars.review.quality=+!self.pageRenderVars.review.quality;break;case"price":self.pageRenderVars.review.price=+!self.pageRenderVars.review.price;break;case"skills":self.pageRenderVars.review.skills=+!self.pageRenderVars.review.skills;break;case"experience":self.pageRenderVars.review.experience=+!self.pageRenderVars.review.experience}else $mdToast.showSimple(hsOrder.getMessage(22))},self.goBack=function(){$window.history.back()},self.submitReview=function(){self.pageRenderVars.review.rating?self.pageRenderVars.review.review.length>=5?HODProvider.addVdrReview(self.pageRenderVars.review).then(function(response){"HTTP_SUCCESS_DATA"==response.status?self.goBack():response.status}):$mdToast.showSimple(hsOrder.getMessage(89)):$mdToast.showSimple(hsOrder.getMessage(79))},self.rateFunction=function(rating){$timeout(function(){},1e3)}}angular.module("hsOrderModule").component("vendorRating",{templateUrl:"components/reviews/vendor-rating.temp.html",controller:vendorRatingController}),vendorRatingController.$inject=["$window","$timeout","$mdToast","hsOrder","HODProvider","AuthService"]}(),function(){function locReqSearchController($scope,$rootScope,$window,$mdDialog,hsOrder,HODProvider,$mdToast,$state,$attrs){var self=this;self.isCityAvail=!1,self.cities=void 0,self.pinCode="",self.optionImages={active:"dist/img/icons/option-buttons/circle_fill.png",inactive:"dist/img/icons/option-buttons/circle_blank.png"},self.selectCityType=void 0,self.isLocationToBeCleared=!1,3!=hsOrder.getHSOData("catModel")&&5!=hsOrder.getHSOData("catModel")&&6!=hsOrder.getHSOData("catModel")||(self.isLocationToBeCleared=!1),self.currentCity={locVerified:!self.isLocationToBeCleared},self.pageLoadVars=function(){var latestLoc={city_name:hsOrder.getHSOData("cityName"),city_id:hsOrder.getHSOData("cityId"),citySlug:hsOrder.getHSOData("citySlug"),pincode:hsOrder.getHSOData("pinCode"),latitude:hsOrder.getHSOData("latitude"),longitude:hsOrder.getHSOData("longitude"),formattedAddress:hsOrder.getHSOData("formattedAddress"),placeId:hsOrder.getHSOData("placeId")};angular.extend(self.currentCity,latestLoc)},self.pageLoadVars(),self.selected_city_id=self.currentCity.city_id,self.pinVerification=0,self.pinVerMessage="",self.pinStatus={verified:"dist/img/icons/option-buttons/circle_fill.png",pending:"dist/img/icons/option-buttons/circle_fill_grey.png"},self.googlePlacesOptions={componentRestrictions:{country:"in"}},self.limitCity="",hsOrder.getHSOData("cityName")&&(self.limitCity=hsOrder.getHSOData("cityName")+", "),self.currPage=$attrs.template,self.selectCity=function(city_id){var city;angular.forEach(self.cities,function(value,key){value.city_id==city_id&&(city=value)}),hsOrder.setHSOData("cityId",city.city_id),hsOrder.setHSOData("cityName",city.city_name),hsOrder.setHSOData("citySlug",city.city_slug),hsOrder.setHSOData("locVerified",!1),hsOrder.setHSOData("pinCode",void 0),hsOrder.setHSOData("latitude",void 0),hsOrder.setHSOData("longitude",void 0),hsOrder.setHSOData("formattedAddress",void 0),hsOrder.setHSOData("placeId",void 0);self.reqScn&&self.reqScn.getReqScnData&&self.reqScn.getReqScnData();self.resetForm(),city.pincodes?self.selectCityType="pincode":(self.limitCity=city.city_name+", ",self.selectCityType="locality")},self.resetForm=function(){self.pinCode="",self.pinVerMessage="",self.pinVerification=0,self.googlePlacesObject=""},HODProvider.getCities().then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.isCityAvail=!0,self.cities=response.data.cities,self.extractData()):(response.status,self.isCityAvail=!1)}),self.extractData=function(){if(self.currentCity.locVerified){self.pinCode=self.currentCity.pincode||"",self.googlePlacesObject=self.currentCity.formattedAddress||self.currentCity.pincode;var city;angular.forEach(self.cities,function(value,key){value.city_id==self.currentCity.city_id&&(city=value)}),self.selectCityType=city.pincodes?"pincode":"locality",self.pinVerification=1,self.pinVerMessage=!self.isLocationToBeCleared&&self.googlePlacesObject?"Location Verified":""}else self.selectCity(self.currentCity.city_id)},self.setLocation=function(){2==self.pinVerification?(hsOrder.setLocation(),$rootScope.$broadcast("userLocationDataUpdated"),hsOrder.validateCategory()):$mdToast.show($mdToast.simple().textContent("Please Provide Correct Detail.").hideDelay(2e3))},self.verifyPin=function(){if(null!==self.pinCode&&void 0!==self.pinCode){var pinCode=self.pinCode.toString(),pinLength=pinCode.length;0!==pinLength&&pinLength>=6?(hsOrder.setHSOData("pinCode",self.pinCode),hsOrder.verifyPin().then(function(response){"HTTP_SUCCESS_DATA"==response.status?1==response.data.v_code?(self.pinVerification=2,self.pinVerMessage="Location Verified",self.setLocation()):(self.pinVerification=1,self.pinVerMessage=response.data.message,self.pinCode=""):response.status})):pinLength<6?(self.pinVerification=0,self.pinVerMessage=""):pinLength>6&&(self.pinVerification=1,self.pinVerMessage="Pin should have six digits only",self.pinCode="",$mdToast.showSimple(self.pinVerMessage))}},$scope.$on("g-places-autocomplete:select",function(evt,place){self.resolvePin(place)}),self.resolvePin=function(place){if(place&&(self.lat=place.geometry.location.lat(),self.lng=place.geometry.location.lng(),self.formattedAddress=place.formatted_address,self.placeId=place.place_id,null!==self.lat&&null!==self.lng)){var lat=self.lat.toString(),lng=self.lng.toString(),formatted_address=self.formattedAddress.toString(),place_id=self.placeId.toString();""!==lat&&""!==lng?(hsOrder.setHSOData("latitude",lat),hsOrder.setHSOData("longitude",lng),hsOrder.setHSOData("formattedAddress",formatted_address),hsOrder.setHSOData("placeId",place_id),hsOrder.resolvePinFromLatLng().then(function(response){"HTTP_SUCCESS_DATA"==response.status?1==response.data.v_code?(self.pinVerification=2,self.pinVerMessage="Location Verified",self.pinCode=response.data.pincode,hsOrder.setHSOData("pinCode",self.pinCode),self.setLocation()):(self.pinVerification=1,self.pinVerMessage=response.data.message,self.pinCode=""):response.status})):(self.pinVerification=1,self.pinVerMessage="Please select a location",self.pinCode="",self.lat="",self.lng="",self.formattedAddress="",self.placeId="",$mdToast.showSimple(self.pinVerMessage))}},$rootScope.$on("userLocationDataUpdated",function(event){self.googlePlacesObject=hsOrder.getHSOData("formattedAddress"),self.pageLoadVars()})}angular.module("searchModule").component("locReqSearchComponent",{templateUrl:function($element,$attrs){return{requirement:"components/search/location-req-int/location-req.temp.html",intermediate:"components/search/location-req-int/location-int.temp.html"}[$attrs.template]},bindings:{reqScn:"="},controller:locReqSearchController}),locReqSearchController.$inject=["$scope","$rootScope","$window","$mdDialog","hsOrder","HODProvider","$mdToast","$state","$attrs"]}(),function(){function locSearchController($scope,$window,$mdDialog,hsOrder,HODProvider,$mdToast,$state){var self=this,backupLoc={};self.isCityAvail=!1,self.cities=void 0,self.optionImages={active:"dist/img/icons/option-buttons/circle_fill.png",inactive:"dist/img/icons/option-buttons/circle_blank.png"},self.selectCityType=void 0,self.pinCode="",self.pinVerification=0,self.pinVerMessage="",self.pinStatus={verified:"dist/img/icons/option-buttons/circle_fill.png",pending:"dist/img/icons/option-buttons/circle_fill_grey.png"},self.googlePlacesOptions={componentRestrictions:{country:"in"}},self.selectCity=function(city){angular.forEach(self.cities,function(value,key){value.selection="inactive",value.city_id==city.city_id&&(value.selection="active")}),hsOrder.getHSOData("locVerified")&&(backupLoc.cityId=hsOrder.getHSOData("cityId"),backupLoc.cityName=hsOrder.getHSOData("cityName"),backupLoc.citySlug=hsOrder.getHSOData("citySlug"),backupLoc.locVerified=hsOrder.getHSOData("locVerified"),backupLoc.pinCode=hsOrder.getHSOData("pinCode")),hsOrder.setHSOData("cityId",city.city_id),hsOrder.setHSOData("cityName",city.city_name),hsOrder.setHSOData("citySlug",city.city_slug),hsOrder.setHSOData("locVerified",!1),hsOrder.setHSOData("pinCode",void 0),city.pincodes?self.selectCityType="pincode":self.selectCityType="locality"},self.extractCities=function(){angular.forEach(self.cities,function(value,key){value.selection="inactive"})},HODProvider.getCities().then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.isCityAvail=!0,self.cities=response.data.cities,self.extractCities()):response.status}),self.setLocation=function(){2==self.pinVerification?(hsOrder.setLocation(),$window.history.back()):$mdToast.show($mdToast.simple().textContent("Please Provide Correct Detail.").hideDelay(2e3))},self.verifyPin=function(){if(null!==self.pinCode&&void 0!==self.pinCode){var pinCode=self.pinCode.toString(),pinLength=pinCode.length;0!==pinLength&&pinLength>=6?(hsOrder.setHSOData("pinCode",self.pinCode),hsOrder.verifyPin().then(function(response){"HTTP_SUCCESS_DATA"==response.status?1==response.data.v_code?(self.pinVerification=2,self.pinVerMessage=response.data.message):(self.pinVerification=1,self.pinVerMessage=response.data.message,self.pinCode=""):response.status})):pinLength<6?(self.pinVerification=0,self.pinVerMessage=""):pinLength>6&&(self.pinVerification=1,self.pinVerMessage="Pin should have six digits only",self.pinCode="",$mdToast.showSimple(self.pinVerMessage))}},$scope.$on("g-places-autocomplete:select",function(evt,place){self.resolvePin(place)}),self.resolvePin=function(place){if(place&&(self.lat=place.geometry.location.lat(),self.lng=place.geometry.location.lng(),self.formattedAddress=place.formatted_address,self.placeId=place.place_id,null!==self.lat&&null!==self.lng)){var lat=self.lat.toString(),lng=self.lng.toString(),formatted_address=self.formattedAddress.toString(),place_id=self.placeId.toString();""!==lat&&""!==lng?(hsOrder.setHSOData("latitude",lat),hsOrder.setHSOData("longitude",lng),hsOrder.setHSOData("formattedAddress",formatted_address),hsOrder.setHSOData("placeId",place_id),hsOrder.resolvePinFromLatLng().then(function(response){"HTTP_SUCCESS_DATA"==response.status?1==response.data.v_code?(self.pinVerification=2,self.pinVerMessage=response.data.message,self.pinCode=response.data.pincode,hsOrder.setHSOData("pinCode",self.pinCode)):(self.pinVerification=1,self.pinVerMessage=response.data.message,self.pinCode=""):response.status})):(self.pinVerification=1,self.pinVerMessage="Please select a location",self.pinCode="",self.lat="",self.lng="",self.formattedAddress="",self.placeId="",$mdToast.showSimple(self.pinVerMessage))}}}angular.module("searchModule").component("locSearchComponent",{templateUrl:"components/search/location-search.temp.html",controller:locSearchController}),locSearchController.$inject=["$scope","$window","$mdDialog","hsOrder","HODProvider","$mdToast","$state"]}(),function(){function serviceSearchController($scope,$stateParams,$mdDialog,hsOrder,HODProvider){var self=this;self.keywordLen=0,self.gotSearchResult=!1,self.gotTrendingServ=!1,self.clearButtonVisible=!1,self.searchResult=void 0,self.trendingServices=void 0,self.pageLoadVars={city_id:hsOrder.getHSOData("cityId"),pincode:hsOrder.getHSOData("pinCode"),keyword:$stateParams.serSearchParams?$stateParams.serSearchParams.catName:""},self.search=function(){self.pageLoadVars.keyword&&(self.keywordLen=self.pageLoadVars.keyword.length),self.keywordLen>=3&&HODProvider.searchServ(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.gotSearchResult=!0,self.searchResult=response.data.search_details):"HTTP_SUCCESS_NO_DATA"==response.status&&(self.gotSearchResult=!0)}),self.keywordLen>0?self.clearButtonVisible=!0:self.clearButtonVisible=!1},HODProvider.gettrendServ(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.gotTrendingServ=!0,self.trendingServices=response.data.data):response.status}),self.clearInput=function(){self.pageLoadVars.keyword=""},self.closeDialog=function(){$mdDialog.hide()}}angular.module("searchModule").component("serviceSearchComponent",{templateUrl:"components/search/search.template.html",controller:serviceSearchController}),serviceSearchController.$inject=["$scope","$stateParams","$mdDialog","hsOrder","HODProvider"]}(),function(){function seoRedirectionController($stateParams,$state){switch(alert("seo redirection handler hit: "+$stateParams.urlSlug),$stateParams.urlSlug){case"pune":$state.go("seo.intermediate-screen");break;case"bangalore":$state.go("seo.requirement-screen")}}angular.module("hsOrderModule").component("seoRedirectionHandler",{templateUrl:"",controller:seoRedirectionController}),seoRedirectionController.$inject=["$stateParams","$state"]}(),function(){function servicebarCtrl($rootScope){var self=this;self.metaData=void 0,$rootScope.$on("gotMetaData",function(){self.metaData=$rootScope.metaData})}angular.module("homeModule").component("servicebar",{templateUrl:"components/servicebar/servicebar.template.html",controller:servicebarCtrl}),servicebarCtrl.$inject=["$rootScope"]}(),function(){function termsDisclaimerCtrl($scope){}angular.module("homeModule").component("termsDisclaimer",{templateUrl:"components/terms-disclaimer/terms-disclaimer.template.html",controller:termsDisclaimerCtrl}),termsDisclaimerCtrl.$inject=["$scope"]}(),function(){function UMBSController($scope,$rootScope,$state,$stateParams,$window,hsOrder,HODProvider,$mdToast,metaService,AuthService,SmoothScroll,ApiService){function getUmbrellaScreenData(){HODProvider.umbrellaScnData(self.umbrellaOptions).then(function(response){"HTTP_SUCCESS_DATA"===response.status?(self.gotData=!0,self.umbrellaData=response.data,response.data.landing_page?hsOrder.setHSOData("landingDefault",!0):hsOrder.setHSOData("landingDefault",!1),self.extractData()):(response.status,$mdToast.showSimple(hsOrder.getMessage(33)),window.location=ApiService.get().baseAppPath+"page-not-found")})}"urlSlug"in $stateParams&&""===$stateParams.urlSlug&&(window.location=ApiService.get().baseAppPath+"page-not-found");var self=this;if(self.gotData=!1,self.umbrellaData=void 0,self.optionImages={active:"dist/img/icons/option-buttons/circle_fill.png",inactive:"dist/img/icons/option-buttons/circle_blank.png"},self.umbrellaOptions={user_id:AuthService.getCurrentUser().user_id||"",ref_source:window.BRO4U_HTTP_REFRRER},self.differ=function(){return $stateParams.urlSlug!==hsOrder.getHSOData("intermediateURL")}(),self.differ)self.umbrellaOptions.category_slug=$stateParams.urlSlug,"citySlug"in $stateParams&&$stateParams.citySlug&&(self.umbrellaOptions.city_slug=$stateParams.citySlug),getUmbrellaScreenData();else{var orderFlow=hsOrder.getHSOData("odrFlow");hsOrder.checkLocationDependency().then(function(response){response&&200!==orderFlow?(self.umbrellaOptions.city_id=hsOrder.getHSOData("cityId"),self.umbrellaOptions.pincode=hsOrder.getHSOData("pinCode"),self.umbrellaOptions.latitude=hsOrder.getHSOData("latitude")||"",self.umbrellaOptions.longitude=hsOrder.getHSOData("longitude")||"",self.umbrellaOptions.category_slug=$stateParams.urlSlug,"citySlug"in $stateParams&&$stateParams.citySlug&&(self.umbrellaOptions.city_slug=$stateParams.citySlug)):(self.differ=!0,self.umbrellaOptions.category_slug=$stateParams.urlSlug,"citySlug"in $stateParams&&$stateParams.citySlug&&(self.umbrellaOptions.city_slug=$stateParams.citySlug)),getUmbrellaScreenData()})}self.extractData=function(){-1!==window.location.search.search("utm_")&&hsOrder.setHSOData("utmQuery",window.location.href),angular.forEach(self.umbrellaData.sub_cat_array,function(cat){cat.selection="inactive"}),self.umbrellaData.city_id!==hsOrder.getHSOData("cityId")&&(hsOrder.setHSOData("cityId",self.umbrellaData.city_id),hsOrder.setHSOData("cityName",self.umbrellaData.city_name),hsOrder.setHSOData("citySlug",self.umbrellaData.city_slug),hsOrder.setHSOData("locVerified",!1),hsOrder.clearHSOData(["latitude","longitude","pinCode","localitySlug","formattedAddress","placeId"]),$rootScope.$broadcast("userLocationDataUpdated")),self.organicSourceHandler()},self.organicSourceHandler=function(){self.differ&&(hsOrder.setHSOData("catId",self.umbrellaData.cat_id),hsOrder.setHSOData("catName",self.umbrellaData.cat_name),hsOrder.setHSOData("intermediateURL",self.umbrellaData.category_slug),hsOrder.setHSOData("odrFlow",15));var meta_city_id=metaService.getMetadata(baseConstants.METADATA.KEY.BASIC.NAME,baseConstants.METADATA.BASIC.CITY_ID.NAME);hsOrder.getHSOData("cityId")!=meta_city_id&&(hsOrder.setHSOData("cityId",meta_city_id),hsOrder.setHSOData("cityName",metaService.getMetadata(baseConstants.METADATA.KEY.BASIC.NAME,baseConstants.METADATA.BASIC.CITY_NAME.NAME)),hsOrder.setHSOData("citySlug",metaService.getMetadata(baseConstants.METADATA.KEY.BASIC.NAME,baseConstants.METADATA.BASIC.CITY_SLUG.NAME)),hsOrder.clearHSOData(["locVerified","latitude","longitude","pinCode","localitySlug","formattedAddress","placeId"]),$rootScope.$broadcast("userLocationDataUpdated"));var locality_slug=metaService.getMetadata(baseConstants.METADATA.KEY.BASIC.NAME,baseConstants.METADATA.BASIC.LOCALITY_SLUG.NAME),locality_pincode=metaService.getMetadata(baseConstants.METADATA.KEY.BASIC.NAME,baseConstants.METADATA.BASIC.LOCALITY_PINCODE.NAME);locality_slug&&locality_pincode&&""!==locality_pincode&&(hsOrder.setHSOData("pinCode",locality_pincode),hsOrder.setHSOData("localitySlug",locality_slug),hsOrder.setHSOData("latitude",metaService.getMetadata(baseConstants.METADATA.KEY.BASIC.NAME,baseConstants.METADATA.BASIC.LOCALITY_LATITUDE.NAME)),hsOrder.setHSOData("longitude",metaService.getMetadata(baseConstants.METADATA.KEY.BASIC.NAME,baseConstants.METADATA.BASIC.LOCALITY_LONGITUDE.NAME)),hsOrder.getHSOData("pinCode")&&""!==hsOrder.getHSOData("pinCode")?hsOrder.setHSOData("locVerified",!0):hsOrder.clearHSOData(["locVerified","latitude","longitude","pinCode","localitySlug","formattedAddress","placeId"]),hsOrder.clearHSOData(["formattedAddress","placeId"]),$rootScope.$broadcast("userLocationDataUpdated"))},self.selectCategory=function(category){angular.forEach(self.umbrellaData.sub_cat_array,function(cat){cat.selection="inactive",cat.cat_id==category.cat_id&&(cat.selection="active")})},self.proceedBook=function(cat){self.redirect(cat,void 0)},self.redirect=function(cat,subCat){cat.is_hyperlocal?hsOrder.setHSOData("odrFlow",200):hsOrder.setHSOData("odrFlow",15),hsOrder.orderFlowRedirection(2,1,cat)},self.seoPageRenderVars={metaData:$rootScope.metaData},$rootScope.$on("gotMetaData",function(){self.seoPageRenderVars.metaData=$rootScope.metaData})}angular.module("hsOrderModule").component("umbrellaScreen",{templateUrl:"components/umbrella-screen/umbrella-screen.temp.html",controller:UMBSController}),UMBSController.$inject=["$scope","$rootScope","$state","$stateParams","$window","hsOrder","HODProvider","$mdToast","metaService","AuthService","SmoothScroll","ApiService"]}(),function(){function PLController($scope,$state,$window,$mdDialog,$mdToast,hsOrder,HODProvider,AuthService){function renderStr(str){return void 0===str?"":str}var self=this;self.tabs=["Vendors","Activities"],self.activeTab=0,self.gotData=!1,self.isLoading=!1,self.loaderVisibility=!1,self.vendorProductData=void 0,self.tempArray=[],self.dataArray=[],self.isBanner=void 0,self.isFilter=void 0,self.catName=hsOrder.getHSOData("catName"),self.submitFlag=!0,self.nextPage=!1,self.sortArray=["Price Low to High","Price High to Low"],self.sortMethod=9,self.sortReverse=!1,self.sortParam=null,self.pageLoadVars={user_id:AuthService.getCurrentUser().user_id,vendor_id:hsOrder.getHSOData("vendorId")||0,cat_id:hsOrder.getHSOData("catId"),cat_name:hsOrder.getHSOData("catName"),option_id:hsOrder.getHSOData("optionId")||"",city_id:hsOrder.getHSOData("cityId"),pincode:hsOrder.getHSOData("pinCode"),latitude:hsOrder.getHSOData("latitude")||"",longitude:hsOrder.getHSOData("longitude")||"",service_time:hsOrder.getHSOData("time"),service_date:hsOrder.getHSOData("date"),ref_source:window.BRO4U_HTTP_REFRRER,filter_options:JSON.stringify(hsOrder.getHSOData("filterOptions")),cat_model_code:hsOrder.getHSOData("catModel"),page:0,sort_by:hsOrder.getHSOData("productSortBy")||""},$scope.$watchCollection("$ctrl.tempArray",function(newArray,oldArray){var breakCount,element,tempArray=newArray,length=newArray.length,countDisable=0;angular.forEach(tempArray,function(value,key){key<=breakCount&&(value.vendor_enable||(element=tempArray.splice(key,1),tempArray.push(element),countDisable++,breakCount=length-(countDisable+1)))}),self.dataArray=tempArray});var body=document.querySelectorAll("body")[0];angular.element($window).bind("scroll",function(){body.scrollHeight>1e3&&"product-list"==$state.current.name&&self.nextPage&&body.scrollHeight-(angular.element($window)[0].scrollY+body.offsetHeight)<=450&&(self.loaderVisibility=!0,self.loadMore())}),self.loadData=function(){self.isLoading=!0,14!==hsOrder.getHSOData("odrFlow")&&(self.pageLoadVars.vendor_id=0),hsOrder.vendorListingData(self.pageLoadVars,2).then(function(response){response.gotData?(self.vendorProductData=response.dataReceived,self.submitFlag=!0,self.nextPage="yes"==response.dataReceived.next_page,self.isLoading=!1,hsOrder.setHSOData("jrneyLevel",3),void 0!==response.dataReceived&&(hsOrder.setHSOData("productFilters",response.dataReceived.filter),response.dataReceived.data.length&&(angular.forEach(response.dataReceived.data,function(value){self.tempArray.push(value)}),self.sortProducts(self.sortMethod))),self.gotData=response.gotData):($mdToast.showSimple("Filter Selection Lost."),$state.go("genesis.home"))})},self.loadData(),self.loadMore=function(){self.submitFlag&&(self.submitFlag=!1,self.nextPage&&(self.pageLoadVars.page=self.vendorProductData.page,self.loadData()))},self.sortProducts=function(newMethod){var oldMethod=parseInt(self.sortMethod);if(newMethod=parseInt(newMethod),oldMethod!==newMethod){switch(self.sortMethod=newMethod,self.tempArray=[],self.pageLoadVars.page=0,self.sortMethod){case 0:self.pageLoadVars.sort_by="LTH",hsOrder.setHSOData("productSortBy","LTH");break;case 1:self.pageLoadVars.sort_by="HTL",hsOrder.setHSOData("productSortBy","HTL");break;default:self.pageLoadVars.sort_by="",hsOrder.setHSOData("productSortBy","")}self.loadData()}},self.proceed=function(product){if(product.vendor_enable){hsOrder.setHSOData("vendorId",product.vendor_id),hsOrder.setHSOData("selection",product.selection),hsOrder.setHSOData("itemId",product.item_id),hsOrder.setHSOData("finalPrice",product.final_price),hsOrder.setHSOData("deliveryCharge",product.delivery_charge),hsOrder.setHSOData("analysisKey",product.analysis_key);var serviceCitySlug=renderStr(product.service_city_slug),catSlug=renderStr(product.catalog_slug);$state.go("product-view",{service_city_slug:serviceCitySlug,cat_slug:catSlug,isOrganic:!1})}else $mdToast.showSimple(hsOrder.getMessage(25))},self.selectProduct=function(vendorId,vendorName){},self.setVendorData=function(vendorId,vendorName,itemId){hsOrder.setHSOData("vendorId",vendorId),hsOrder.setHSOData("vendorName",vendorName),hsOrder.setHSOData("itemId",itemId)}}angular.module("hsOrderModule").component("productListScreen",{templateUrl:"components/vendor-list/product-list.temp.html",controller:PLController}),PLController.$inject=["$scope","$state","$window","$mdDialog","$mdToast","hsOrder","HODProvider","AuthService"]}(),function(){function productViewController($scope,$stateParams,$state,$mdDialog,$mdToast,hsOrder,HODProvider,metaService){function sanitiseParams(param,key){return void 0===param?0:param[key]}function renderStr(str){return void 0===str?"":str}var self=this;self.pageLoadVars={item_id:hsOrder.getHSOData("itemId"),selection:JSON.stringify(hsOrder.getHSOData("selection")),cat_id:hsOrder.getHSOData("catId"),vendor_id:hsOrder.getHSOData("vendorId"),final_price:hsOrder.getHSOData("finalPrice"),delivery_charge:hsOrder.getHSOData("deliveryCharge"),service_city_slug:$stateParams.service_city_slug,cat_slug:$stateParams.cat_slug},hsOrder.getHSOData("jrneyLevel")&&hsOrder.getHSOData("jrneyLevel")>=3?$stateParams.isOrganic=!1:$stateParams.isOrganic=!0,self.pageRenderVars={gotData:!1,dataObject:void 0,displayPrice:function(){return sanitiseParams(self.pageLoadVars,"final_price")*sanitiseParams(this.dataObject,"quantity")},ratings:["dist/img/vendor-profile/star-rating/0stars0.png","dist/img/vendor-profile/star-rating/1stars1.png","dist/img/vendor-profile/star-rating/2stars2.png","dist/img/vendor-profile/star-rating/3stars3.png","dist/img/vendor-profile/star-rating/4stars4.png","dist/img/vendor-profile/star-rating/5stars5.png"],isOrganic:$stateParams.isOrganic},HODProvider.productView(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.gotData=!0,self.pageRenderVars.dataObject=response.data,
self.extractData()):response.status}),self.extractData=function(){self.pageRenderVars.dataObject.avg_rating=parseInt(self.pageRenderVars.dataObject.avg_rating)},self.updateQuantity=function(operation){var quantity=self.pageRenderVars.dataObject.quantity;operation?quantity++:1==quantity?$mdToast.showSimple(hsOrder.getMessage(65)):quantity--,self.pageRenderVars.dataObject.quantity=quantity},self.viewProfile=function(){hsOrder.setHSOData("venProMode",!1),$state.go("vendor-profile",{isOrganic:!1,service_city_slug:$stateParams.service_city_slug,cat_slug:$stateParams.cat_slug})},self.proceedBook=function(){self.pageRenderVars.isOrganic?$state.go("genesis.intermediate-screen",{urlSlug:renderStr(self.pageLoadVars.service_city_slug)}):(hsOrder.setHSOData("unitQuantity",self.pageRenderVars.dataObject.quantity),hsOrder.vendorListFlow())},$scope.displaySchema=metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.KEY.SCHEMA.NAME)||!1,$scope.jsonId={"@context":"http://schema.org","@type":"Product",aggregateRating:{"@type":"AggregateRating",bestRating:"5",worstRating:"1",ratingCount:metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.HEADER.SCHEMA.RATING_COUNT.NAME),ratingValue:metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.HEADER.SCHEMA.RATING_VALUE.NAME)},url:metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.HEADER.CANONICAL_URL.NAME),image:metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.HEADER.SCHEMA.IMAGE.NAME),name:metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.HEADER.TITLE.NAME),brand:metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.HEADER.SCHEMA.BRAND.NAME)}}angular.module("hsOrderModule").component("productView",{templateUrl:"components/vendor-list/product-view.temp.html",controller:productViewController}),productViewController.$inject=["$scope","$stateParams","$state","$mdDialog","$mdToast","hsOrder","HODProvider","metaService"]}(),function(){function vendorListActivitiesController($mdToast,HODProvider,hsOrder){var self=this;self.activities=void 0,self.activitiesAvail=!1,self.activityLoadVars={city_id:hsOrder.getHSOData("cityId")||1,type:3,cat_id:hsOrder.getHSOData("catId"),vendor_id:""},HODProvider.getActivities(self.activityLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(response.data.activities.length?self.activitiesAvail=!0:self.activitiesAvail=!1,self.activities=response.data.activities):response.status})}angular.module("hsOrderModule").component("vendorListActivities",{templateUrl:"components/vendor-list/vendor-list-activities.temp.html",controller:vendorListActivitiesController}),vendorListActivitiesController.$inject=["$mdToast","HODProvider","hsOrder"]}(),function(){"use strict";function VLQController($state,$window,$mdDialog,$mdToast,hsOrder,HODProvider,AuthService,ApiService){function renderStr(str){return void 0===str?"":str}var self=this;self.gotData=!1,self.submitFlag=!0,self.loaderVisibility=!1,self.isLoading=!1,self.vendorProductData=void 0,self.dataArray=[],self.basePath=ApiService.get().staticImagePath,self.dataAvail=!0,self.tabs=["Vendors","Activities"],self.activeTab=0,self.nextPage=!1,self.vlQuoteObject=hsOrder.getHSOData("vlQuoteObject"),self.alreadyQuotedCount=0,self.quotedVendors=hsOrder.getHSOData("quotedVendors"),self.selectedCount=0,self.tempVdrQuotedArr=hsOrder.getHSOData("tempReqQuote")||[],self.vlQuoteObject?(self.pageLoadVars=JSON.parse(self.vlQuoteObject),hsOrder.setHSOData("date",self.pageLoadVars.service_date),hsOrder.setHSOData("time",self.pageLoadVars.service_time),hsOrder.setHSOData("catId",self.pageLoadVars.cat_id),hsOrder.setHSOData("optionId",self.pageLoadVars.option_id),hsOrder.setHSOData("filterOptions",JSON.parse(self.pageLoadVars.filter_options))):self.pageLoadVars={user_id:AuthService.getCurrentUser().user_id,vendor_id:hsOrder.getHSOData("vendorId")||0,cat_id:hsOrder.getHSOData("catId"),option_id:hsOrder.getHSOData("optionId")||"",cat_name:hsOrder.getHSOData("catName"),city_id:hsOrder.getHSOData("cityId"),pincode:hsOrder.getHSOData("pinCode"),latitude:hsOrder.getHSOData("latitude")||"",longitude:hsOrder.getHSOData("longitude")||"",service_time:hsOrder.getHSOData("time"),service_date:hsOrder.getHSOData("date"),ref_source:window.BRO4U_HTTP_REFRRER,filter_options:JSON.stringify(hsOrder.getHSOData("filterOptions")),cat_model_code:hsOrder.getHSOData("catModel"),page:0},self.pageLoadVars.page=0;var body=document.querySelectorAll("body")[0];angular.element($window).bind("scroll",function(){body.scrollHeight>1e3&&"vendor-list-quote"==$state.current.name&&self.nextPage&&body.scrollHeight-(angular.element($window)[0].scrollY+body.offsetHeight)<=450&&(self.loaderVisibility=!0,self.loadMore())}),self.loadData=function(){self.isLoading=!0,14!==hsOrder.getHSOData("odrFlow")&&(self.pageLoadVars.vendor_id=0),hsOrder.vendorListingData(self.pageLoadVars,1).then(function(response){self.gotData=response.gotData,self.gotData?(self.vendorProductData=response.dataReceived,self.nextPage="yes"==response.dataReceived.next_page,self.submitFlag=!0,hsOrder.setHSOData("jrneyLevel",3),self.isLoading=!1,self.loaderVisibility=!0,self.extractData()):($mdToast.showSimple("Service Selection Lost."),$state.go("genesis.home"))})},self.loadData(),self.extractData=function(){var vendor,temp={freezed:!1};self.selectedCount=0,self.vendorProductData.data.length&&angular.forEach(self.vendorProductData.data,function(value){vendor=value,angular.extend(vendor,temp),vendor.quote_requested&&(vendor.freezed=!0,self.tempVdrQuotedArr.includes(vendor.vendor_id)||self.tempVdrQuotedArr.push(vendor.vendor_id)),self.dataArray.push(vendor)}),self.vendorProductData.quote_vendor_ids.length&&(hsOrder.setHSOData("alreadyReqQuote",self.vendorProductData.quote_vendor_ids),self.alreadyQuotedCount=self.vendorProductData.quote_vendor_ids.length),self.quotedVendors&&angular.forEach(self.quotedVendors,function(quotedVendor){var itemId=quotedVendor.item_id;angular.forEach(self.dataArray,function(vendor){vendor.item_id==itemId&&(vendor.quote_requested=!0,self.tempVdrQuotedArr.includes(vendor.vendor_id)||self.tempVdrQuotedArr.push(vendor.vendor_id))})}),self.tempVdrQuotedArr.length&&angular.forEach(self.tempVdrQuotedArr,function(vendor_id){angular.forEach(self.dataArray,function(vendor){vendor.vendor_id==vendor_id&&(vendor.quote_requested=!0,vendor.freezed||self.selectedCount++)})}),self.dataAvail=!!self.dataArray.length,hsOrder.setHSOData("tempReqQuote",self.tempVdrQuotedArr)},self.loadMore=function(){self.submitFlag&&(self.submitFlag=!1,self.nextPage&&(self.pageLoadVars.page=self.vendorProductData.page,self.loadData()))},self.changeTab=function(index){self.activeTab=index},self.selectVendor=function(index){if(self.alreadyQuotedCount>=3)return void self.quoterequestdDialog();self.alreadyQuotedCount+self.selectedCount>=3?$mdToast.showSimple(hsOrder.getMessage(68)):(self.dataArray[index].quote_requested=!self.dataArray[index].quote_requested,self.selectedCount++,self.tempVdrQuotedArr.push(self.dataArray[index].vendor_id),hsOrder.setHSOData("tempReqQuote",self.tempVdrQuotedArr))},self.unselectVendor=function(index){if(self.alreadyQuotedCount>=3)return void self.quoterequestdDialog();if(self.dataArray[index].freezed)$mdToast.showSimple(hsOrder.getMessage(69));else if(self.dataArray[index].quote_requested=!self.dataArray[index].quote_requested,self.selectedCount--,self.tempVdrQuotedArr.includes(self.dataArray[index].vendor_id)){var indexOfVendor=self.tempVdrQuotedArr.indexOf(self.dataArray[index].vendor_id);self.tempVdrQuotedArr.splice(indexOfVendor,1),hsOrder.setHSOData("tempReqQuote",self.tempVdrQuotedArr)}},self.proceed=function(){if(self.alreadyQuotedCount>=3)return void self.quoterequestdDialog();var freshQuoted=[];3==self.alreadyQuotedCount?$mdToast.showSimple(hsOrder.getMessage(70)):angular.forEach(self.dataArray,function(value,key){value.quote_requested&&!value.freezed&&freshQuoted.push(value)}),freshQuoted.length?(hsOrder.setHSOData("quoteId",self.vendorProductData.quote_id),hsOrder.setHSOData("quotedVendors",freshQuoted),hsOrder.setHSOData("vlQuoteObject",JSON.stringify(self.pageLoadVars)),hsOrder.setHSOData("tempReqQuote",void 0),$state.go("quote-review")):$mdToast.showSimple(hsOrder.getMessage(71))},self.getOffers=function(){var remaining,temp,selectedCount=self.alreadyQuotedCount,freshQuoted=[];selectedCount>=3?$mdToast.showSimple(hsOrder.getMessage(68)):(remaining=3-selectedCount,angular.forEach(self.dataArray,function(value){temp=value,remaining&&(temp.freezed||(temp.quote_requested=!0,freshQuoted.push(temp),remaining--))}),hsOrder.setHSOData("quoteId",self.vendorProductData.quote_id),hsOrder.setHSOData("quotedVendors",freshQuoted),hsOrder.setHSOData("vlQuoteObject",JSON.stringify(self.pageLoadVars)),$state.go("quote-review"))},self.viewProfile=function(index){hsOrder.setHSOData("vendorId",self.dataArray[index].vendor_id),hsOrder.setHSOData("selection",self.dataArray[index].selection),hsOrder.setHSOData("itemId",self.dataArray[index].item_id),hsOrder.setHSOData("finalPrice",self.dataArray[index].final_price),hsOrder.setHSOData("deliveryCharge",self.dataArray[index].delivery_charge),hsOrder.setHSOData("venProMode",!1);var serviceCitySlug=renderStr(self.dataArray[index].service_city_slug),catSlug=renderStr(self.dataArray[index].catalog_slug);$state.go("vendor-profile",{isOrganic:!1,service_city_slug:serviceCitySlug,cat_slug:catSlug})},self.openFilterPopup=function(){$state.go("vls-filter")},self.selectProduct=function(vendorId,vendorName){},self.setVendorData=function(vendorId,vendorName,itemId){hsOrder.setHSOData("vendorId",vendorId),hsOrder.setHSOData("vendorName",vendorName),hsOrder.setHSOData("itemId",itemId)},self.quoterequestdDialog=function(){$mdDialog.show({clickOutsideToClose:!0,controller:function(){},controllerAs:"ctrl",templateUrl:"components/popup/already-quoted-vendor-popup.temp.html",bindToController:!0,locals:{closeDialog:function(){$mdDialog.hide()},goToMyOrders:function(){$state.go("my-orders"),$mdDialog.hide()}}})}}angular.module("hsOrderModule").component("vendorListQuoteScreen",{templateUrl:"components/vendor-list/vendor-list-quote.temp.html",controller:VLQController}),VLQController.$inject=["$state","$window","$mdDialog","$mdToast","hsOrder","HODProvider","AuthService","ApiService"]}(),function(){"use strict";function VLController($scope,$state,$window,$mdDialog,$mdToast,hsOrder,HODProvider,AuthService,$mdSidenav,ApiService,DataLayer){function buildToggler(componentId){return function(){$mdSidenav(componentId).toggle()}}function renderStr(str){return void 0===str?"":str}var self=this;self.tempVendorIndex=0,self.gotData=!1,self.isLoading=!1,self.loaderVisibility=!1,self.submitFlag=!0,self.vendorProductData=void 0,self.vendorDetailData=void 0,self.dataArray=[],self.basePath=ApiService.get().staticImagePath,self.dataAvail=!0,self.tabs=["Vendors","Activities"],self.activeTab=0,self.nextPage=!1,self.catModel=hsOrder.getHSOData("catModel"),self.vlContactObject=hsOrder.getHSOData("vlContactObject"),self.venProMode=function(){return 5!=self.catModel}(),self.priceRenderVars={gotData:!1,dataObject:void 0},self.vlContactObject?(self.pageLoadVars=hsOrder.getHSOData("vlContactObject"),hsOrder.setHSOData("catId",self.pageLoadVars.cat_id),hsOrder.setHSOData("catName",self.pageLoadVars.cat_name),hsOrder.setHSOData("optionId",self.pageLoadVars.option_id),hsOrder.setHSOData("time",self.pageLoadVars.service_time),hsOrder.setHSOData("date",self.pageLoadVars.service_date),hsOrder.setHSOData("filterOptions",JSON.parse(self.pageLoadVars.filter_options)),hsOrder.setHSOData("catModel",self.pageLoadVars.cat_model_code)):self.pageLoadVars={user_id:AuthService.getCurrentUser().user_id,vendor_id:hsOrder.getHSOData("vendorId")||0,cat_id:hsOrder.getHSOData("catId"),cat_name:hsOrder.getHSOData("catName"),option_id:hsOrder.getHSOData("optionId")||"",city_id:hsOrder.getHSOData("cityId"),pincode:hsOrder.getHSOData("pinCode"),latitude:hsOrder.getHSOData("latitude")||"",longitude:hsOrder.getHSOData("longitude")||"",service_time:hsOrder.getHSOData("time"),service_date:hsOrder.getHSOData("date"),ref_source:window.BRO4U_HTTP_REFRRER,filter_options:JSON.stringify(hsOrder.getHSOData("filterOptions")),cat_model_code:hsOrder.getHSOData("catModel"),page:0,consider_vid:14==hsOrder.getHSOData("odrFlow")},self.pageLoadVars.page=0;var body=document.querySelectorAll("body")[0];angular.element($window).bind("scroll",function(){body.scrollHeight>1e3&&"vendor-list"==$state.current.name&&self.nextPage&&body.scrollHeight-(angular.element($window)[0].scrollY+body.offsetHeight)<=450&&(self.loaderVisibility=!0,self.loadMore())}),self.loadData=function(){self.isLoading=!0,self.pageLoadVars.user_id=AuthService.getCurrentUser().user_id,14!==hsOrder.getHSOData("odrFlow")&&(self.pageLoadVars.vendor_id=0),hsOrder.vendorListingData(self.pageLoadVars,1).then(function(response){self.gotData=response.gotData,self.gotData?response.isVendorAvailable?(self.isVendorAvailable=response.isVendorAvailable,self.vendorProductData=response.dataReceived,self.nextPage="yes"==response.dataReceived.next_page,self.submitFlag=!0,self.isLoading=!1,self.loaderVisibility=!0,hsOrder.setHSOData("jrneyLevel",3),response.dataReceived.data.length&&angular.forEach(response.dataReceived.data,function(value){self.dataArray.push(value)}),response.dataReceived.price_chart&&($scope.toggleRight=buildToggler("right"))):(self.isVendorAvailable=response.isVendorAvailable,self.noVendorText=response.dataReceived.message):($mdToast.showSimple("Service Selection Lost."),$state.go("genesis.home"))})},self.loadData(),self.loadMore=function(){self.submitFlag&&(self.submitFlag=!1,self.nextPage&&(self.pageLoadVars.page=self.vendorProductData.page,self.loadData()))},self.openVendorDetails=function(index){hsOrder.setHSOData("vendorId",self.dataArray[index].vendor_id),hsOrder.setHSOData("selection",self.dataArray[index].selection),hsOrder.setHSOData("itemId",self.dataArray[index].item_id),hsOrder.setHSOData("finalPrice",self.dataArray[index].final_price),hsOrder.setHSOData("deliveryCharge",self.dataArray[index].delivery_charge),hsOrder.setHSOData("vlContactObject",self.pageLoadVars),hsOrder.setHSOData("analysisKey",self.dataArray[index].analysis_key),hsOrder.setHSOData("venProMode",self.venProMode);var serviceCitySlug=renderStr(self.dataArray[index].service_city_slug),catSlug=renderStr(self.dataArray[index].catalog_slug);$state.go("vendor-profile",{isOrganic:!1,service_city_slug:serviceCitySlug,cat_slug:catSlug})},self.closeDialog=function(){$mdDialog.hide()},self.changeTab=function(index){self.activeTab=index},self.bookVendor=function(index){self.dataArray[index].contact_requested&&$mdToast.showSimple(hsOrder.getMessage(72)),hsOrder.setHSOData("vendorId",self.dataArray[index].vendor_id),hsOrder.setHSOData("selection",self.dataArray[index].selection),hsOrder.setHSOData("itemId",self.dataArray[index].item_id),hsOrder.setHSOData("finalPrice",self.dataArray[index].final_price),hsOrder.setHSOData("deliveryCharge",self.dataArray[index].delivery_charge),hsOrder.setHSOData("vlContactObject",self.pageLoadVars),hsOrder.setHSOData("analysisKey",self.dataArray[index].analysis_key),self.tempVendorIndex=0,DataLayer.addLayer({ecommerce:{currencyCode:"INR",impressions:[{cat_city_id:self.pageLoadVars.cat_id+"_"+self.pageLoadVars.city_id,cat_id:self.dataArray[index].cat_id,cat_name:self.dataArray[index].cat_name,catalog_price:self.dataArray[index].final_price,city_id:self.pageLoadVars.city_id,city_name:self.dataArray[index].city_name,city_slug:self.dataArray[index].city_slug,service_city_slug:self.dataArray[index].service_city_slug,service_slug:self.dataArray[index].service_slug,tnc:self.dataArray[index].tnc}]}}),hsOrder.vendorListFlow()},self.viewPriceChart=function(index){var priceLoadVars={cat_id:hsOrder.getHSOData("catId"),vendor_id:self.dataArray[index].vendor_id};self.tempVendorIndex=index;var params={bookOrderData:{vendorId:self.dataArray[index].vendor_id,selection:self.dataArray[index].selection,itemId:self.dataArray[index].item_id,finalPrice:self.dataArray[index].final_price,deliveryCharge:self.dataArray[index].delivery_charge,analysisKey:self.dataArray[index].analysis_key,vlContactObject:self.pageLoadVars}};self.getPriceChart(priceLoadVars,params)},self.getPriceChart=function(priceLoadVars,params){HODProvider.getPriceChartData(priceLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.priceRenderVars.gotData=!0,self.priceRenderVars.dataObject=response.data.price_list_data,$mdSidenav("right").toggle()):response.status})},self.getContact=function(index){var vendor=self.dataArray[index];vendor.contact_requested?$mdToast.showSimple(hsOrder.getMessage(72)):(hsOrder.setHSOData("vendorId",vendor.vendor_id),hsOrder.setHSOData("selection",vendor.selection),hsOrder.setHSOData("itemId",vendor.item_id),hsOrder.setHSOData("finalPrice",vendor.final_price),hsOrder.setHSOData("deliveryCharge",vendor.delivery_charge),hsOrder.setHSOData("vlContactObject",self.pageLoadVars),hsOrder.setHSOData("analysisKey",self.dataArray[index].analysis_key),hsOrder.placeHSEnquiry())}}angular.module("hsOrderModule").component("vendorListScreen",{templateUrl:"components/vendor-list/vendor-list.temp.html",controller:VLController}),VLController.$inject=["$scope","$state","$window","$mdDialog","$mdToast","hsOrder","HODProvider","AuthService","$mdSidenav","ApiService","DataLayer"]}(),function(){function vlsFilterController($state,$window,hsOrder){var self=this;self.vlsFilter=hsOrder.getHSOData("productFilters"),self.sessionFilter=hsOrder.getHSOData("filterOptions"),self.requirementFilters=hsOrder.getHSOData("requirementFilters"),self.getReqFilterArray=function(){var reqFilterArray=[];return angular.forEach(this.requirementFilters,function(value){reqFilterArray.push(value.attribute_id)}),reqFilterArray},self.filterSelection={},self.filterModel={},angular.forEach(self.vlsFilter,function(value){var newValue,temp={},newKey=value.attr_id;"checkbox"==value.input_type&&(newValue=[],angular.forEach(value.group,function(opValue){temp[opValue.option_id]=!1}),self.filterModel[newKey]=temp),self.filterSelection[newKey]=newValue}),self.filterSelection=angular.merge(self.filterSelection,self.sessionFilter),angular.forEach(self.filterSelection,function(value,key){angular.isArray(value)&&value.length>0&&angular.forEach(value,function(opValue){self.filterModel[key][opValue]=!0})}),self.filterSelected=function(filter,option){if("checkbox"==filter.input_type){var foundIndex=self.filterSelection[filter.attr_id].indexOf(option.option_id);-1===foundIndex?self.filterSelection[filter.attr_id].push(option.option_id):self.filterSelection[filter.attr_id].splice(foundIndex,1)}else self.filterSelection[filter.attr_id]=option.option_id;self.applyFilters()},self.clearAllFilters=function(){var newFilterSelection={},newFilterModel={},reqFilterArray=self.getReqFilterArray();angular.forEach(self.filterModel,function(value,key){var temp={};angular.forEach(value,function(valLevel2,keyLevel2){temp[keyLevel2]=!1}),newFilterModel[key]=temp}),self.filterModel=newFilterModel,angular.forEach(self.filterSelection,function(value,key){var found=reqFilterArray.indexOf(key);newFilterSelection[key]=-1!==found?value:void 0}),self.filterSelection=newFilterSelection,hsOrder.applyFilters(self.filterSelection,function(){})},self.applyFilters=function(){hsOrder.applyFilters(self.filterSelection,function(){self.prodList.pageLoadVars.filter_options=JSON.stringify(self.filterSelection),self.loadData()})},self.loadData=function(){self.prodList.tempArray=[],hsOrder.vendorListingData(self.prodList.pageLoadVars,2).then(function(response){self.prodList.vendorProductData=response.dataReceived,void 0!==response.dataReceived&&(hsOrder.setHSOData("productFilters",response.dataReceived.filter),response.dataReceived.data.length&&angular.forEach(response.dataReceived.data,function(value){self.prodList.tempArray.push(value)}))})}}angular.module("hsOrderModule").component("vlsFilter",{templateUrl:"components/vendor-list/vl-filter.temp.html",bindings:{prodList:"="},controller:vlsFilterController}),vlsFilterController.$inject=["$state","$window","hsOrder"]}(),function(){function VAController($mdToast,HODProvider,hsOrder){var self=this;self.activities=void 0,self.activitiesAvail=!1,self.activityLoadVars={city_id:hsOrder.getHSOData("cityId")||1,type:5,cat_id:hsOrder.getHSOData("catId"),vendor_id:hsOrder.getHSOData("vendorId")},HODProvider.getActivities(self.activityLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(response.data.activities.length?self.activitiesAvail=!0:self.activitiesAvail=!1,self.activities=response.data.activities):response.status})}angular.module("hsOrderModule").component("vendorActivities",{templateUrl:"components/vendor-profile/vendor-activities.temp.html",controller:VAController}),VAController.$inject=["$mdToast","HODProvider","hsOrder"]}(),function(){"use strict";function VGController(hsOrder,HODProvider){var self=this;self.pageLoadVars={vendor_id:hsOrder.getHSOData("vendorId")||125},self.pageRenderVars={gotData:!1,venGalData:void 0,playerVars:{rel:0,showinfo:0,modestbranding:1},galleryPics:[],galleryConf:{thumbnails:!0,thumbSize:160,inline:!1,bubbles:!0,imgBubbles:!0,bgClose:!1,methods:{}},conf:{imgAnim:"fadeup"}},self.playerVars={rel:0,showinfo:0,modestbranding:1},HODProvider.venGallery(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.gotData=!0,self.pageRenderVars.venGalData=response.data,self.pageRenderVars.galleryPics=[],self.extractData()):response.status}),self.extractData=function(){var counter=1;angular.forEach(self.pageRenderVars.venGalData.gallery_pics,function(pic){var picObj={id:counter,url:pic,thumbUrl:pic,bubbleUrl:pic};self.pageRenderVars.galleryPics.push(picObj),counter++})}}angular.module("hsOrderModule").component("vendorGallery",{templateUrl:"components/vendor-profile/vendor-gallery.temp.html",controller:VGController}),VGController.$inject=["hsOrder","HODProvider"]}(),function(){function VPController($scope,$window,$mdToast,$state,$stateParams,$mdDialog,hsOrder,HODProvider,metaService,ApiService){function overrideActivityLoadVars(){self.activityLoadVars={city_id:hsOrder.getHSOData("cityId")||1,type:4,cat_id:hsOrder.getHSOData("catId")||$stateParams.catId,vendor_id:hsOrder.getHSOData("vendorId")||$stateParams.vendorId},self.getActivities()}var self=this;self.isQuoted=!1,self.alreadyQuotedArr=hsOrder.getHSOData("alreadyReqQuote")||[],self.tempVdrQuotedArr=hsOrder.getHSOData("tempReqQuote")||[],self.vendorId=hsOrder.getHSOData("vendorId")||$stateParams.vendorId,hsOrder.getHSOData("jrneyLevel")&&hsOrder.getHSOData("jrneyLevel")>=3?$stateParams.isOrganic=!1:$stateParams.isOrganic=!0,self.pageLoadVars={service_city_slug:$stateParams.service_city_slug,cat_slug:$stateParams.cat_slug},self.pageRenderVars={isOrganic:$stateParams.isOrganic,isOrderPlaced:$stateParams.isOrderPlaced,gotData:!1,venProData:void 0,tabs:["Profile"],activeTab:0,activeTabName:"Profile",headerType:0,screenMode:hsOrder.getHSOData("venProMode"),catModel:hsOrder.getHSOData("catModel"),reviews:[],ratings:["dist/img/vendor-profile/star-rating/0stars0.png","dist/img/vendor-profile/star-rating/1stars1.png","dist/img/vendor-profile/star-rating/2stars2.png","dist/img/vendor-profile/star-rating/3stars3.png","dist/img/vendor-profile/star-rating/4stars4.png","dist/img/vendor-profile/star-rating/5stars5.png"],galleryPics:[],galleryConf:{thumbnails:!0,thumbSize:160,inline:!1,bubbles:!0,imgBubbles:!0,bgClose:!1,methods:{}},conf:{imgAnim:"fadeup"}},self.playerVars={rel:0,showinfo:0,modestbranding:1},self.activities=void 0,self.activitiesAvail=!1,self.activityLoadVars={},HODProvider.venProfile(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.gotData=!0,self.pageRenderVars.venProData=response.data,response.data.price_chart&&response.data.price_list_data&&response.data.price_list_data.length>0&&self.pageRenderVars.tabs.push("Price"),response.data.gallery_pics&&response.data.gallery_pics.length>0&&self.pageRenderVars.tabs.push("Gallery"),response.data.reviews&&response.data.reviews.length>0&&self.pageRenderVars.tabs.push("Reviews"),self.pageRenderVars.galleryPics=[],response.data.landing_page?hsOrder.setHSOData("landingDefault",!0):hsOrder.setHSOData("landingDefault",!1),self.extractData()):(response.status,$mdToast.showSimple(hsOrder.getMessage(33)),window.location=ApiService.get().baseAppPath+"page-not-found")}),self.getActivities=function(){HODProvider.getActivities(self.activityLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(response.data.activities.length?(self.activitiesAvail=!0,self.activitiesAvail&&self.pageRenderVars.tabs.push("Activities")):self.activitiesAvail=!1,self.activities=response.data.activities):response.status})},self.extractData=function(){-1!==window.location.search.search("utm_")&&hsOrder.setHSOData("utmQuery",window.location.href),hsOrder.setHSOData("vendorId",self.pageRenderVars.venProData.vendor_id),hsOrder.setHSOData("catId",self.pageRenderVars.venProData.cat_id),overrideActivityLoadVars(),self.pageRenderVars.headerType=self.pageRenderVars.venProData.featured_video?1:0,angular.forEach(self.pageRenderVars.venProData.reviews,function(value,key){value.profile_pic.length&&"/"==value.profile_pic.substr(value.profile_pic.length-1)&&(value.profile_pic="dist/img/default/default_profile.png"),self.pageRenderVars.reviews.push(value)}),self.tempVdrQuotedArr.includes(self.vendorId)&&(self.isQuoted=!0);var counter=1;angular.forEach(self.pageRenderVars.venProData.gallery_pics,function(pic){var picObj={id:counter,url:pic,thumbUrl:pic,bubbleUrl:pic};self.pageRenderVars.galleryPics.push(picObj),counter++}),self.organicSourceHandler()},self.organicSourceHandler=function(){self.pageRenderVars.isOrganic&&(self.pageRenderVars.screenMode=!0)},self.proceedToBook=function(){if(self.pageRenderVars.isOrganic)$state.go("genesis.intermediate-screen",{urlSlug:self.pageLoadVars.service_city_slug});else if(5===self.pageRenderVars.catModel)hsOrder.placeHSEnquiry();else if(4===self.pageRenderVars.catModel){if(self.alreadyQuotedArr.length>=3)return void self.quoterequestdDialog();self.tempVdrQuotedArr.length<3?(self.tempVdrQuotedArr.push(self.vendorId),hsOrder.setHSOData("tempReqQuote",self.tempVdrQuotedArr),self.goBack()):$mdToast.showSimple(hsOrder.getMessage(68))}else hsOrder.vendorListFlow()},self.unselectVendor=function(){if(self.alreadyQuotedArr.length>=3)return void self.quoterequestdDialog();if(self.alreadyQuotedArr.length&&self.alreadyQuotedArr.includes(self.vendorId))return void $mdToast.showSimple(hsOrder.getMessage(69));if(4===self.pageRenderVars.catModel&&self.tempVdrQuotedArr.includes(self.vendorId)){var indexOfVendor=self.tempVdrQuotedArr.indexOf(self.vendorId);self.tempVdrQuotedArr.splice(indexOfVendor,1),hsOrder.setHSOData("tempReqQuote",self.tempVdrQuotedArr),self.goBack()}},self.changeTab=function(tab){$window.scrollTo(0,0),self.pageRenderVars.activeTab=self.pageRenderVars.tabs.indexOf(tab),self.pageRenderVars.activeTabName=tab},self.goBack=function(){$window.history.back()},self.quoterequestdDialog=function(){$mdDialog.show({clickOutsideToClose:!0,controller:function(){},controllerAs:"ctrl",templateUrl:"components/popup/already-quoted-vendor-popup.temp.html",bindToController:!0,locals:{closeDialog:function(){$mdDialog.hide()},goToMyOrders:function(){$state.go("my-orders"),$mdDialog.hide()}}})},$scope.displaySchema=metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.KEY.SCHEMA.NAME)||!1,$scope.jsonId={"@context":"http://schema.org/","@type":"Service",serviceType:metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.HEADER.SCHEMA.SERVICE_TYPE.NAME),provider:{"@type":"LocalBusiness",name:metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.HEADER.SCHEMA.PROVIDER_NAME.NAME),image:metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.HEADER.SCHEMA.PROVIDER_IMAGE.NAME),url:metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.HEADER.CANONICAL_URL.NAME),geo:{"@type":"GeoCoordinates",latitude:metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.HEADER.SCHEMA.LATITUDE.NAME),longitude:metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.HEADER.SCHEMA.LONGITUDE.NAME)}},description:metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.HEADER.DESC.NAME),areaServed:{"@type":"City",name:metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.HEADER.SCHEMA.AREA_SERVED.NAME)},aggregateRating:{"@type":"AggregateRating",bestRating:"5",worstRating:"1",ratingValue:metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.HEADER.SCHEMA.RATING_VALUE.NAME),reviewCount:metaService.getMetadata(baseConstants.METADATA.KEY.HEADER.NAME,baseConstants.METADATA.HEADER.SCHEMA.RATING_COUNT.NAME)}}}angular.module("hsOrderModule").component("vendorProfile",{templateUrl:"components/vendor-profile/vendor-profile.temp.html",controller:VPController}),VPController.$inject=["$scope","$window","$mdToast","$state","$stateParams","$mdDialog","hsOrder","HODProvider","metaService","ApiService"]}(),function(){"use strict";function VRController(hsOrder,HODProvider,$mdToast){var self=this;self.nextPage=!0,self.pageLoadVars={vendor_id:hsOrder.getHSOData("vendorId"),page:0},self.pageRenderVars={gotData:!1,venRevData:void 0,reviews:[],next:!1,ratings:["dist/img/vendor-profile/star-rating/0stars0.png","dist/img/vendor-profile/star-rating/1stars1.png","dist/img/vendor-profile/star-rating/2stars2.png","dist/img/vendor-profile/star-rating/3stars3.png","dist/img/vendor-profile/star-rating/4stars4.png","dist/img/vendor-profile/star-rating/5stars5.png"]},self.loadData=function(){HODProvider.venReview(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.gotData=!0,self.pageRenderVars.venRevData=response.data,self.nextPage="yes"==response.data.next_page,self.extractData()):response.status})},self.loadData(),self.extractData=function(){self.pageRenderVars.venRevData.reviews.length&&angular.forEach(self.pageRenderVars.venRevData.reviews,function(value,key){var review=value,rating=Math.floor(review.rating);review.stars=self.pageRenderVars.ratings[rating],self.pageRenderVars.reviews.push(review)}),self.pageLoadVars.page=self.pageRenderVars.venRevData.page,self.pageRenderVars.next="yes"===self.pageRenderVars.venRevData.next_page}}angular.module("hsOrderModule").component("vendorReviews",{templateUrl:"components/vendor-profile/vendor-review.temp.html",controller:VRController}),VRController.$inject=["hsOrder","HODProvider","$mdToast"]}(),function(){function videovendorinfoCtrl($scope,$mdDialog,$sce){function openVideoDialog(){$mdDialog.show({templateUrl:"components/popup/videopopup.template.html",scope:$scope,preserveScope:!0,clickOutsideToClose:!0})}function closeDialog(){$mdDialog.hide()}var self=this;self.openVideoDialog=openVideoDialog,self.closeDialog=closeDialog,this.config={preload:"none",sources:[{src:$sce.trustAsResourceUrl("dist/video/videogular.mp4"),type:"video/mp4"},{src:$sce.trustAsResourceUrl("http://static.videogular.com/assets/videos/videogular.webm"),type:"video/webm"},{src:$sce.trustAsResourceUrl("http://static.videogular.com/assets/videos/videogular.ogg"),type:"video/ogg"}],tracks:[{src:"http://www.videogular.com/assets/subs/pale-blue-dot.vtt",kind:"subtitles",srclang:"en",label:"English",default:""}],theme:{url:"http://www.videogular.com/styles/themes/default/latest/videogular.css"}}}angular.module("videovendorinfo").component("videovendorinfo",{
templateUrl:"components/videovendorinfo/videovendorinfo.template.html",controller:videovendorinfoCtrl}),videovendorinfoCtrl.$inject=["$scope","$mdDialog","$sce"]}(),function(){function vidintermedCtrl($scope,$mdDialog,$sce){function openVideoDialog(){$mdDialog.show({templateUrl:"components/videopopup/videopopup.template.html",scope:$scope,preserveScope:!0,clickOutsideToClose:!0})}function closeDialog(){$mdDialog.hide()}var self=this;self.openVideoDialog=openVideoDialog,self.closeDialog=closeDialog,this.config={preload:"none",sources:[{src:$sce.trustAsResourceUrl("dist/video/videogular.mp4"),type:"video/mp4"},{src:$sce.trustAsResourceUrl("http://static.videogular.com/assets/videos/videogular.webm"),type:"video/webm"},{src:$sce.trustAsResourceUrl("http://static.videogular.com/assets/videos/videogular.ogg"),type:"video/ogg"}],tracks:[{src:"http://www.videogular.com/assets/subs/pale-blue-dot.vtt",kind:"subtitles",srclang:"en",label:"English",default:""}],theme:{url:"http://www.videogular.com/styles/themes/default/latest/videogular.css"}}}angular.module("vidintermed").component("vidintermed",{templateUrl:"components/vidintermed/vidintermed.template.html",controller:vidintermedCtrl}),vidintermedCtrl.$inject=["$scope","$mdDialog","$sce"]}(),function(){function walletpayCtrl($scope){}angular.module("walletpay").component("walletpay",{templateUrl:"components/walletpay/walletpay.template.html",controller:walletpayCtrl}),walletpayCtrl.$inject=["$scope"]}(),function(){"use strict";function AuthRun($rootScope,$state,AuthService,$mdBottomSheet,$mdDialog,IntegrationService,metaService,hsOrder,$window,ApiService){function intiLoader(){$rootScope.loaderObject.loaderInitiatedAt=(new Date).getTime(),$rootScope.loaderObject.loaderVisibility=!0,$rootScope.loaderObject.apiCallObject={dummy:{callInitiated:(new Date).getTime(),callTerminated:(new Date).getTime()}},$rootScope.loaderObject.apiQueueSize+=1}function StateChangeStart(event,toState,toParams,fromState,fromParams){intiLoader(),$rootScope.metaData=void 0,$rootScope.$emit("swapHeader",{headerSwap:!0}),$rootScope.$emit("footerMargin",{footerMargin:!1});var packContainer=document.getElementsByClassName("pac-container");packContainer&&packContainer.length&&packContainer[0].remove(),angular.element(document).find("md-bottom-sheet").length>0&&$mdBottomSheet.hide(),setState(event,toState,toParams,fromState,fromParams),"data"in toState&&"seoType"in toState.data?(metaService.resetSEOParams(),metaService.setSEOParams("type",toState.data.seoType),"urlSlug"in toParams&&metaService.setSEOParams("url_slug",toParams.urlSlug),"service_city_slug"in toParams&&metaService.setSEOParams("url_slug",toParams.service_city_slug),"cat_slug"in toParams&&metaService.setSEOParams("product_slug",toParams.cat_slug),"citySlug"in toParams&&metaService.setSEOParams("city_slug",toParams.citySlug),"localitySlug"in toParams&&metaService.setSEOParams("locality_slug",toParams.localitySlug),metaService.setSEOParams("url_path_name",window.location.pathname),metaService.fetchSeoData().then(function(res){$rootScope.metaData=res,$rootScope.$broadcast("gotMetaData")})):(metaService.resetSEOParams(),metaService.setSEOParams("type","common"),metaService.fetchSeoData().then(function(res){$rootScope.metaData=res,$rootScope.$broadcast("gotMetaData")})),"data"in toState&&"access"in toState.data?AuthService.authorize(toState.data.access)?AuthService.isTransitionLocked||(AuthService.isLoggedIn()&&!AuthService.isProfileComplete()&&"logout"!==toState.name?switchTo(event,AuthService.requirementMap.profile,"profile"):AuthService.isLoggedIn()&&"login"===toState.name&&switchTo(event,fromState.name,"genesis.home")):($rootScope.error="Seems like you tried accessing a route you don't have access to...",switchTo(event,fromState,"login")):($rootScope.error="Access undefined for this state",event.preventDefault()),$rootScope.toState}function StateChangeSuccess(event,toState,toParams,fromState,fromParams){AuthService.selectedIndex="data"in toState&&"index"in toState.data?toState.data.index:0,AuthService.isTransitionLocked=!1,$rootScope.$broadcast("stateChangeSuccess"),$window.scrollTo(0,0),"data"in toState&&"mdDialog"in toState.data&&($rootScope.dialogPrevStateName=fromState.name,$rootScope.dialogPrevStateParams=fromParams),"data"in fromState&&"mdDialog"in fromState.data&&($mdDialog.hide(),$rootScope.dialogPrevStateName=void 0,$rootScope.dialogPrevStateParams=void 0),"vendor-list-quote"===fromState.name&&"vendor-profile"!==toState.name&&hsOrder.clearHSOData("tempReqQuote")}function StateChangeError(event,toState,toParams,fromState,fromParams,error){"Not Authorized"===error&&$state.go("genesis.home")}function StateNotFound(event,unfoundState,fromState,fromParams){AuthService.selectedIndex=$state.get("genesis.404").data.index,window.location=ApiService.get().baseAppPath+"page-not-found"}function setState(event,toState,toParams,fromState,fromParams){if(void 0!==toParams&&0!==toParams.length&&(void 0!==toParams.orderId&&""!==toParams.orderId||void 0!==toParams.bookOrderData)&&(AuthService.urlParams=toParams),"login"===fromState.name&&"logout"===toState.name)return $rootScope.toState=$state.get("genesis.home"),void $state.go("genesis.home",AuthService.urlParams);"login"!==toState.name&&($rootScope.toState=AuthService.isTransitionLocked?$rootScope.toState:toState,$rootScope.fromState=$rootScope.fromState||fromState,$rootScope.fromState=""===fromState.name?$rootScope.fromState:fromState)}function switchTo(event,fromState,stateName){AuthService.selectedIndex=$state.get(stateName).data.index,$rootScope.toState&&$rootScope.toState.name===$rootScope.fromState.name||(event.preventDefault(),AuthService.isTransitionLocked=!0,"login"==stateName?IntegrationService.openLoginModal():$state.go(stateName,AuthService.urlParams))}$rootScope.baseConstants=baseConstants,$rootScope.metaService=metaService,$rootScope.$on("$stateChangeStart",StateChangeStart),$rootScope.$on("$stateChangeError",StateChangeError),$rootScope.$on("$stateNotFound",StateNotFound),$rootScope.$on("$stateChangeSuccess",StateChangeSuccess)}angular.module("bro4uWebapp").run(AuthRun),AuthRun.$inject=["$rootScope","$state","AuthService","$mdBottomSheet","$mdDialog","IntegrationService","metaService","hsOrder","$window","ApiService"]}(),function(exports){var config={roles:["public","user","admin"],accessLevels:{public:"*",anon:["public"],user:["user","admin"],admin:["admin"]}};exports.userRoles=function(roles){var bitMask="01",userRoles={};for(var role in roles){var intCode=parseInt(bitMask,2);userRoles[roles[role]]={bitMask:intCode,title:roles[role]},bitMask=(intCode<<1).toString(2)}return userRoles}(config.roles),exports.accessLevels=function(accessLevelDeclarations,userRoles){var accessLevels={};for(var level in accessLevelDeclarations){var resultBitMask,role;if("string"==typeof accessLevelDeclarations[level]){if("*"==accessLevelDeclarations[level]){resultBitMask="";for(role in userRoles)resultBitMask+="1";accessLevels[level]={bitMask:parseInt(resultBitMask,2)}}}else{resultBitMask=0;for(role in accessLevelDeclarations[level])userRoles.hasOwnProperty(accessLevelDeclarations[level][role])&&(resultBitMask|=userRoles[accessLevelDeclarations[level][role]].bitMask);accessLevels[level]={bitMask:resultBitMask}}}return accessLevels}(config.accessLevels,exports.userRoles)}("undefined"==typeof exports?this.routingConfig={}:exports),function(exports){exports.METADATA=function(){return{KEY:{BASIC:{NAME:"BASIC"},HEADER:{NAME:"HEADER"},SCHEMA:{NAME:"SCHEMA"},FOOTER:{NAME:"FOOTER"}},BASIC:{BREADCRUMB:{NAME:"breadcumb"},CITY_ID:{NAME:"city_id"},CITY_NAME:{NAME:"city_name"},CITY_SLUG:{NAME:"city_slug"},LATITUDE:{NAME:"latitude"},LONGITUDE:{NAME:"longitude"},LOCALITY_LATITUDE:{NAME:"locality_latitude"},LOCALITY_LONGITUDE:{NAME:"locality_longitude"},LOCALITY_PINCODE:{NAME:"locality_pincode"},LOCALITY_SLUG:{NAME:"locality_slug"},PINCODE:{NAME:"pincode"},LOCALITY_NAME:{NAME:"locality_name"},LOCATION_NAME:{NAME:"location_name"}},HEADER:{TITLE:{NAME:"PAGE_TITLE"},DESC:{NAME:"PAGE_DESC"},KEYWORDS:{NAME:"PAGE_KEYWORDS"},ALTERNATE_URL:{NAME:"PAGE_ALTERNATE_URL"},CANONICAL_URL:{NAME:"PAGE_CANONICAL_URL"},OG_URL:{NAME:"PAGE_OG_URL"},OG_TITLE:{NAME:"PAGE_OG_TITLE"},OG_TYPE:{NAME:"PAGE_OG_TYPE"},OG_IMAGE:{NAME:"PAGE_OG_IMAGE"},OG_DESC:{NAME:"PAGE_OG_DESC"},H1_TITLE:{NAME:"PAGE_H1_TITLE"},SCHEMA:{NAME:{NAME:"SCHEMA_NAME"},BRAND:{NAME:"SCHEMA_BRAND"},IMAGE:{NAME:"SCHEMA_IMAGE"},SERVICE_TYPE:{NAME:"SCHEMA_SERVICE_TYPE_NAME"},PROVIDER_NAME:{NAME:"SCHEMA_PROVIDER_NAME"},PROVIDER_IMAGE:{NAME:"SCHEMA_PROVIDER_IMAGE"},AREA_SERVED:{NAME:"SCHEMA_AREASERVED_NAME"},RATING_VALUE:{NAME:"SCHEMA_AVG_RATING"},RATING_COUNT:{NAME:"SCHEMA_RATING_COUNT"},LATITUDE:{NAME:"SCHEMA_LATITUDE"},LONGITUDE:{NAME:"SCHEMA_LONGITUDE"}}},FOOTER:{BREADCRUMB:{NAME:"BREADCRUMB"},PAGE_FOOTER_CONTENT:{NAME:"PAGE_FOOTER_CONTENT"},DESC:{NAME:"PAGE_FOOTER_DESC"},DESC_1:{NAME:"DESC_1"},DESC_2:{NAME:"DESC_1"},DESC_3:{NAME:"DESC_1"},FAQ:{NAME:"FAQ"},INTERLINK:{NAME:"INTERLINK"}}}}()}("undefined"==typeof exports?this.baseConstants={}:exports),function(){"use strict";angular.module("bro4uWebapp").config(function($mdIconProvider){$mdIconProvider.icon("loginScreenSvg","dist/img/icons/loginscreen.svg",48)})}(),function(window){window.__env=window.__env||{},window.__env.apiVersionCode="2",window.__env.baseAppPath="/",window.__env.staticImagePath="https://stark.bro4u.com/fit-in/",window.__env.staticFilePath="https://stark.bro4u.com/",window.__env.baseUrl="/api",window.__env.baseOrigin="https://bro4u.com",window.__env.baseApiUrl=window.__env.baseUrl+"/v"+window.__env.apiVersionCode,window.__env.pnSubscribe="sub-c-153e1c12-6ccc-11e9-b50c-aee189a56456",window.__env.enableDebug=!1}(this),function(){"use strict";angular.module("core.filter").filter("capitalize",function(){return function(input){return input?input.charAt(0).toUpperCase()+input.substr(1).toLowerCase():""}})}(),function(){"use strict";angular.module("core.filter").filter("operatorFilter",function(){return function(input,search){if(!input)return input;if(!search)return input;var expected=(""+search).toLowerCase(),result={};return angular.forEach(input,function(value,key){-1!==(""+value).toLowerCase().indexOf(expected)&&(result[key]=value)}),result}})}(),function(){"use strict";function Range(){return function(input,min,max){min=parseInt(min),max=parseInt(max);for(var i=min;i<=max;i++)input.push(i<10?"0"+i.toString():i.toString());return input}}angular.module("core.filter").filter("range",Range)}(),function(){"use strict";function YesNo(){return function(boolean){return boolean?"Yes":"No"}}angular.module("core.filter").filter("yesNo",YesNo)}(),function(){function DateHelper(hsOrder){function getCurrentDate(){return new Date(hsOrder.getHSOData("serverDate"))}function generateNextDate(daysCount){daysCount=parseInt(daysCount);var currDate=getCurrentDate();return currDate.setDate(currDate.getDate()+daysCount),new Date(currDate)}return{generateNextDate:generateNextDate,getCurrentDate:getCurrentDate}}angular.module("core.helpers").service("DateHelper",DateHelper),DateHelper.$inject=["hsOrder"]}(),function(){"use strict";angular.module("angAccordion",["collapsibleItem"]).controller("angAccordionController",["$scope",function($scope){var collapsibleItems=[];$scope.$watch("collapseAll",function(){1==$scope.collapseAll&&angular.forEach(collapsibleItems,function(collapsibleItem){collapsibleItem.isOpenned=!1,collapsibleItem.icon=collapsibleItem.closeIcon})}),this.openCollapsibleItem=function(collapsibleItemToOpen){$scope.oneAtATime&&angular.forEach(collapsibleItems,function(collapsibleItem){collapsibleItem.isOpenned=!1,collapsibleItem.icon=collapsibleItem.closeIcon}),collapsibleItemToOpen.isOpenned=!0},this.addCollapsibleItem=function(collapsibleItem){collapsibleItems.push(collapsibleItem),void 0!==$scope.closeIconClass||void 0!==$scope.openIconClass?(collapsibleItem.iconsType="class",collapsibleItem.closeIcon=$scope.closeIconClass,collapsibleItem.openIcon=$scope.openIconClass):void 0===$scope.closeIconUrl&&void 0===$scope.openIconUrl||(collapsibleItem.iconsType="url",collapsibleItem.closeIcon=$scope.closeIconUrl,collapsibleItem.openIcon=$scope.openIconUrl),collapsibleItem.iconIsOnLeft="left"==$scope.iconPosition}}]).directive("angAccordion",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{oneAtATime:"@",closeIconUrl:"@",openIconUrl:"@",closeIconClass:"@",openIconClass:"@",iconPosition:"@",collapseAll:"="},controller:"angAccordionController",template:'<div class="accordion" ng-transclude></div>'}}),angular.module("collapsibleItem",[]).directive("collapsibleItem",function(){return{require:"^angAccordion",restrict:"EA",transclude:!0,replace:!0,scope:{itemTitle:"@",itemImageUrl:"@",itemOption:"@",itemImageEnable:"@",itemDisabled:"=",initiallyOpen:"="},link:function(scope,element,attrs,accordionController){scope.isOpenned=!!scope.initiallyOpen,accordionController.addCollapsibleItem(scope),scope.isOpenned?scope.icon=scope.openIcon:scope.icon=scope.closeIcon,scope.toggleCollapsibleItem=function(){scope.itemDisabled||(scope.isOpenned?(scope.isOpenned=!1,scope.icon=scope.closeIcon):(accordionController.openCollapsibleItem(this),scope.icon=scope.openIcon))},scope.getIconUrl=function(type){return"url"==type?scope.icon:null}},template:'<div class="collapsible-item" ng-class="{open: isOpenned}"><div class="title" ng-class="{disabled: itemDisabled}" ng-click="toggleCollapsibleItem()" flex="100" layout="row" layout-align="center center"><div flex="20" class="child-centered generic-icons" ng-if="itemImageEnable==\'true\'"><img ng-src="{{itemImageUrl}}" alt="{{itemTitle}}" onerror="this.src=\'dist/img/default/default_category.png\'" img-def-handler="2"/></div><div flex="70"><h4>{{itemTitle}}</h4></div><div flex="30"class="child-centered"><i ng-if="itemOption > 0" ng-show="iconsType == \'class\'" class="{{icon}} icon"></i><img ng-show="iconsType == \'url\'" class="icon" ng-src="{{getIconUrl(iconsType)}}" /></div></div><div class="body" flex="100" ng-if="itemOption > 0"><div class="content" ng-transclude></div></div></div>'}})}(),"undefined"!=typeof navigator&&function(root,factory){"function"==typeof define&&define.amd?define(function(){return factory(root)}):"object"==typeof module&&module.exports?module.exports=factory(root):(root.lottie=factory(root),root.bodymovin=root.lottie)}(window||{},function(window){"use strict";function ProjectInterface(){return{}}function roundValues(flag){bm_rnd=flag?Math.round:function(val){return val}}function styleDiv(element){element.style.position="absolute",element.style.top=0,element.style.left=0,element.style.display="block",element.style.transformOrigin=element.style.webkitTransformOrigin="0 0",element.style.backfaceVisibility=element.style.webkitBackfaceVisibility="visible",element.style.transformStyle=element.style.webkitTransformStyle=element.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(n,c,t,d){this.type=n,this.currentTime=c,this.totalTime=t,this.direction=d<0?-1:1}function BMCompleteEvent(n,d){this.type=n,this.direction=d<0?-1:1}function BMCompleteLoopEvent(n,c,t,d){this.type=n,this.currentLoop=t,this.totalLoops=c,this.direction=d<0?-1:1}function BMSegmentStartEvent(n,f,t){this.type=n,this.firstFrame=f,this.totalFrames=t}function BMDestroyEvent(n,t){this.type=n,this.target=t}function HSVtoRGB(h,s,v){var r,g,b,i,f,p,q,t;switch(i=Math.floor(6*h),f=6*h-i,p=v*(1-s),q=v*(1-f*s),t=v*(1-(1-f)*s),i%6){case 0:r=v,g=t,b=p;break;case 1:r=q,g=v,b=p;break;case 2:r=p,g=v,b=t;break;case 3:r=p,g=q,b=v;break;case 4:r=t,g=p,b=v;break;case 5:r=v,g=p,b=q}return[r,g,b]}function RGBtoHSV(r,g,b){var h,max=Math.max(r,g,b),min=Math.min(r,g,b),d=max-min,s=0===max?0:d/max,v=max/255;switch(max){case min:h=0;break;case r:h=g-b+d*(g<b?6:0),h/=6*d;break;case g:h=b-r+2*d,h/=6*d;break;case b:h=r-g+4*d,h/=6*d}return[h,s,v]}function addSaturationToRGB(color,offset){var hsv=RGBtoHSV(255*color[0],255*color[1],255*color[2]);return hsv[1]+=offset,hsv[1]>1?hsv[1]=1:hsv[1]<=0&&(hsv[1]=0),HSVtoRGB(hsv[0],hsv[1],hsv[2])}function addBrightnessToRGB(color,offset){var hsv=RGBtoHSV(255*color[0],255*color[1],255*color[2]);return hsv[2]+=offset,hsv[2]>1?hsv[2]=1:hsv[2]<0&&(hsv[2]=0),HSVtoRGB(hsv[0],hsv[1],hsv[2])}function addHueToRGB(color,offset){var hsv=RGBtoHSV(255*color[0],255*color[1],255*color[2]);return hsv[0]+=offset/360,hsv[0]>1?hsv[0]-=1:hsv[0]<0&&(hsv[0]+=1),HSVtoRGB(hsv[0],hsv[1],hsv[2])}function BaseEvent(){}function createSizedArray(len){return Array.apply(null,{length:len})}function createNS(type){return document.createElementNS(svgNS,type)}function createTag(type){return document.createElement(type)}function DynamicPropertyContainer(){}function extendPrototype(sources,destination){var i,sourcePrototype,len=sources.length;for(i=0;i<len;i+=1){sourcePrototype=sources[i].prototype;for(var attr in sourcePrototype)sourcePrototype.hasOwnProperty(attr)&&(destination.prototype[attr]=sourcePrototype[attr])}}function getDescriptor(object,prop){return Object.getOwnPropertyDescriptor(object,prop)}function createProxyFunction(prototype){function ProxyFunction(){}return ProxyFunction.prototype=prototype,ProxyFunction}function bezFunction(){function pointOnLine2D(x1,y1,x2,y2,x3,y3){var det1=x1*y2+y1*x3+x2*y3-x3*y2-y3*x1-x2*y1;return det1>-.001&&det1<.001}function pointOnLine3D(x1,y1,z1,x2,y2,z2,x3,y3,z3){if(0===z1&&0===z2&&0===z3)return pointOnLine2D(x1,y1,x2,y2,x3,y3);var diffDist,dist1=Math.sqrt(Math.pow(x2-x1,2)+Math.pow(y2-y1,2)+Math.pow(z2-z1,2)),dist2=Math.sqrt(Math.pow(x3-x1,2)+Math.pow(y3-y1,2)+Math.pow(z3-z1,2)),dist3=Math.sqrt(Math.pow(x3-x2,2)+Math.pow(y3-y2,2)+Math.pow(z3-z2,2));return(diffDist=dist1>dist2?dist1>dist3?dist1-dist2-dist3:dist3-dist2-dist1:dist3>dist2?dist3-dist2-dist1:dist2-dist1-dist3)>-1e-4&&diffDist<1e-4}function getSegmentsLength(shapeData){var i,segmentsLength=segments_length_pool.newElement(),closed=shapeData.c,pathV=shapeData.v,pathO=shapeData.o,pathI=shapeData.i,len=shapeData._length,lengths=segmentsLength.lengths,totalLength=0;for(i=0;i<len-1;i+=1)lengths[i]=getBezierLength(pathV[i],pathV[i+1],pathO[i],pathI[i+1]),totalLength+=lengths[i].addedLength;return closed&&len&&(lengths[i]=getBezierLength(pathV[i],pathV[0],pathO[i],pathI[0]),totalLength+=lengths[i].addedLength),segmentsLength.totalLength=totalLength,segmentsLength}function BezierData(length){this.segmentLength=0,this.points=new Array(length)}function PointData(partial,point){this.partialLength=partial,this.point=point}function getDistancePerc(perc,bezierData){var percents=bezierData.percents,lengths=bezierData.lengths,len=percents.length,initPos=bm_floor((len-1)*perc),lengthPos=perc*bezierData.addedLength,lPerc=0;if(initPos===len-1||0===initPos||lengthPos===lengths[initPos])return percents[initPos];for(var dir=lengths[initPos]>lengthPos?-1:1,flag=!0;flag;)if(lengths[initPos]<=lengthPos&&lengths[initPos+1]>lengthPos?(lPerc=(lengthPos-lengths[initPos])/(lengths[initPos+1]-lengths[initPos]),flag=!1):initPos+=dir,initPos<0||initPos>=len-1){if(initPos===len-1)return percents[initPos];flag=!1}return percents[initPos]+(percents[initPos+1]-percents[initPos])*lPerc}function getPointInSegment(pt1,pt2,pt3,pt4,percent,bezierData){var t1=getDistancePerc(percent,bezierData),u1=1-t1;return[Math.round(1e3*(u1*u1*u1*pt1[0]+(t1*u1*u1+u1*t1*u1+u1*u1*t1)*pt3[0]+(t1*t1*u1+u1*t1*t1+t1*u1*t1)*pt4[0]+t1*t1*t1*pt2[0]))/1e3,Math.round(1e3*(u1*u1*u1*pt1[1]+(t1*u1*u1+u1*t1*u1+u1*u1*t1)*pt3[1]+(t1*t1*u1+u1*t1*t1+t1*u1*t1)*pt4[1]+t1*t1*t1*pt2[1]))/1e3]}function getNewSegment(pt1,pt2,pt3,pt4,startPerc,endPerc,bezierData){startPerc=startPerc<0?0:startPerc>1?1:startPerc;var t0=getDistancePerc(startPerc,bezierData);endPerc=endPerc>1?1:endPerc;var i,t1=getDistancePerc(endPerc,bezierData),len=pt1.length,u0=1-t0,u1=1-t1,u0u0u0=u0*u0*u0,t0u0u0_3=t0*u0*u0*3,t0t0u0_3=t0*t0*u0*3,t0t0t0=t0*t0*t0,u0u0u1=u0*u0*u1,t0u0u1_3=t0*u0*u1+u0*t0*u1+u0*u0*t1,t0t0u1_3=t0*t0*u1+u0*t0*t1+t0*u0*t1,t0t0t1=t0*t0*t1,u0u1u1=u0*u1*u1,t0u1u1_3=t0*u1*u1+u0*t1*u1+u0*u1*t1,t0t1u1_3=t0*t1*u1+u0*t1*t1+t0*u1*t1,t0t1t1=t0*t1*t1,u1u1u1=u1*u1*u1,t1u1u1_3=t1*u1*u1+u1*t1*u1+u1*u1*t1,t1t1u1_3=t1*t1*u1+u1*t1*t1+t1*u1*t1,t1t1t1=t1*t1*t1;for(i=0;i<len;i+=1)bezier_segment_points[4*i]=Math.round(1e3*(u0u0u0*pt1[i]+t0u0u0_3*pt3[i]+t0t0u0_3*pt4[i]+t0t0t0*pt2[i]))/1e3,bezier_segment_points[4*i+1]=Math.round(1e3*(u0u0u1*pt1[i]+t0u0u1_3*pt3[i]+t0t0u1_3*pt4[i]+t0t0t1*pt2[i]))/1e3,bezier_segment_points[4*i+2]=Math.round(1e3*(u0u1u1*pt1[i]+t0u1u1_3*pt3[i]+t0t1u1_3*pt4[i]+t0t1t1*pt2[i]))/1e3,bezier_segment_points[4*i+3]=Math.round(1e3*(u1u1u1*pt1[i]+t1u1u1_3*pt3[i]+t1t1u1_3*pt4[i]+t1t1t1*pt2[i]))/1e3;return bezier_segment_points}var getBezierLength=(Math,function(){return function(pt1,pt2,pt3,pt4){var k,i,len,ptCoord,perc,ptDistance,curveSegments=defaultCurveSegments,addedLength=0,point=[],lastPoint=[],lengthData=bezier_length_pool.newElement();for(len=pt3.length,k=0;k<curveSegments;k+=1){for(perc=k/(curveSegments-1),ptDistance=0,i=0;i<len;i+=1)ptCoord=bm_pow(1-perc,3)*pt1[i]+3*bm_pow(1-perc,2)*perc*pt3[i]+3*(1-perc)*bm_pow(perc,2)*pt4[i]+bm_pow(perc,3)*pt2[i],point[i]=ptCoord,null!==lastPoint[i]&&(ptDistance+=bm_pow(point[i]-lastPoint[i],2)),lastPoint[i]=point[i];ptDistance&&(ptDistance=bm_sqrt(ptDistance),addedLength+=ptDistance),lengthData.percents[k]=perc,lengthData.lengths[k]=addedLength}return lengthData.addedLength=addedLength,lengthData}}()),buildBezierData=function(){var storedData={};return function(pt1,pt2,pt3,pt4){var bezierName=(pt1[0]+"_"+pt1[1]+"_"+pt2[0]+"_"+pt2[1]+"_"+pt3[0]+"_"+pt3[1]+"_"+pt4[0]+"_"+pt4[1]).replace(/\./g,"p");if(!storedData[bezierName]){var k,i,len,ptCoord,perc,ptDistance,point,curveSegments=defaultCurveSegments,addedLength=0,lastPoint=null;2===pt1.length&&(pt1[0]!=pt2[0]||pt1[1]!=pt2[1])&&pointOnLine2D(pt1[0],pt1[1],pt2[0],pt2[1],pt1[0]+pt3[0],pt1[1]+pt3[1])&&pointOnLine2D(pt1[0],pt1[1],pt2[0],pt2[1],pt2[0]+pt4[0],pt2[1]+pt4[1])&&(curveSegments=2);var bezierData=new BezierData(curveSegments);for(len=pt3.length,k=0;k<curveSegments;k+=1){for(point=createSizedArray(len),perc=k/(curveSegments-1),ptDistance=0,i=0;i<len;i+=1)ptCoord=bm_pow(1-perc,3)*pt1[i]+3*bm_pow(1-perc,2)*perc*(pt1[i]+pt3[i])+3*(1-perc)*bm_pow(perc,2)*(pt2[i]+pt4[i])+bm_pow(perc,3)*pt2[i],point[i]=ptCoord,null!==lastPoint&&(ptDistance+=bm_pow(point[i]-lastPoint[i],2));ptDistance=bm_sqrt(ptDistance),addedLength+=ptDistance,bezierData.points[k]=new PointData(ptDistance,point),lastPoint=point}bezierData.segmentLength=addedLength,storedData[bezierName]=bezierData}return storedData[bezierName]}}(),bezier_segment_points=createTypedArray("float32",8);return{getSegmentsLength:getSegmentsLength,getNewSegment:getNewSegment,getPointInSegment:getPointInSegment,buildBezierData:buildBezierData,pointOnLine2D:pointOnLine2D,pointOnLine3D:pointOnLine3D}}function dataFunctionManager(){function completeLayers(layers,comps,fontManager){var layerData,i,j,jLen,k,kLen,len=layers.length;for(i=0;i<len;i+=1)if("ks"in(layerData=layers[i])&&!layerData.completed){if(layerData.completed=!0,layerData.tt&&(layers[i-1].td=layerData.tt),[],-1,layerData.hasMask){var maskProps=layerData.masksProperties;for(jLen=maskProps.length,j=0;j<jLen;j+=1)if(maskProps[j].pt.k.i)convertPathsToAbsoluteValues(maskProps[j].pt.k);else for(kLen=maskProps[j].pt.k.length,k=0;k<kLen;k+=1)maskProps[j].pt.k[k].s&&convertPathsToAbsoluteValues(maskProps[j].pt.k[k].s[0]),maskProps[j].pt.k[k].e&&convertPathsToAbsoluteValues(maskProps[j].pt.k[k].e[0])}0===layerData.ty?(layerData.layers=findCompLayers(layerData.refId,comps),completeLayers(layerData.layers,comps,fontManager)):4===layerData.ty?completeShapes(layerData.shapes):5==layerData.ty&&completeText(layerData,fontManager)}}function findCompLayers(id,comps){for(var i=0,len=comps.length;i<len;){if(comps[i].id===id)return comps[i].layers.__used?JSON.parse(JSON.stringify(comps[i].layers)):(comps[i].layers.__used=!0,comps[i].layers);i+=1}}function completeShapes(arr){var i,j,jLen,len=arr.length;for(i=len-1;i>=0;i-=1)if("sh"==arr[i].ty){if(arr[i].ks.k.i)convertPathsToAbsoluteValues(arr[i].ks.k);else for(jLen=arr[i].ks.k.length,j=0;j<jLen;j+=1)arr[i].ks.k[j].s&&convertPathsToAbsoluteValues(arr[i].ks.k[j].s[0]),arr[i].ks.k[j].e&&convertPathsToAbsoluteValues(arr[i].ks.k[j].e[0]);!0}else"gr"==arr[i].ty&&completeShapes(arr[i].it)}function convertPathsToAbsoluteValues(path){var i,len=path.i.length;for(i=0;i<len;i+=1)path.i[i][0]+=path.v[i][0],path.i[i][1]+=path.v[i][1],path.o[i][0]+=path.v[i][0],path.o[i][1]+=path.v[i][1]}function checkVersion(minimum,animVersionString){var animVersion=animVersionString?animVersionString.split("."):[100,100,100];return minimum[0]>animVersion[0]||!(animVersion[0]>minimum[0])&&(minimum[1]>animVersion[1]||!(animVersion[1]>minimum[1])&&(minimum[2]>animVersion[2]||!(animVersion[2]>minimum[2])&&void 0))}function completeData(animationData,fontManager){animationData.__complete||(checkColors(animationData),checkText(animationData),checkChars(animationData),checkShapes(animationData),completeLayers(animationData.layers,animationData.assets,fontManager),animationData.__complete=!0)}function completeText(data,fontManager){0!==data.t.a.length||"m"in data.t.p||(data.singleShape=!0)}var checkText=function(){function updateTextLayer(textLayer){var documentData=textLayer.t.d;textLayer.t.d={k:[{s:documentData,t:0}]}}function iterateLayers(layers){var i,len=layers.length;for(i=0;i<len;i+=1)5===layers[i].ty&&updateTextLayer(layers[i])}var minimumVersion=[4,4,14];return function(animationData){if(checkVersion(minimumVersion,animationData.v)&&(iterateLayers(animationData.layers),animationData.assets)){var i,len=animationData.assets.length;for(i=0;i<len;i+=1)animationData.assets[i].layers&&iterateLayers(animationData.assets[i].layers)}}}(),checkChars=function(){var minimumVersion=[4,7,99];return function(animationData){if(animationData.chars&&!checkVersion(minimumVersion,animationData.v)){var i,j,jLen,pathData,paths,len=animationData.chars.length;for(i=0;i<len;i+=1)if(animationData.chars[i].data&&animationData.chars[i].data.shapes)for(paths=animationData.chars[i].data.shapes[0].it,jLen=paths.length,j=0;j<jLen;j+=1)pathData=paths[j].ks.k,pathData.__converted||(convertPathsToAbsoluteValues(paths[j].ks.k),pathData.__converted=!0)}}}(),checkColors=function(){function iterateShapes(shapes){var i,j,jLen,len=shapes.length;for(i=0;i<len;i+=1)if("gr"===shapes[i].ty)iterateShapes(shapes[i].it);else if("fl"===shapes[i].ty||"st"===shapes[i].ty)if(shapes[i].c.k&&shapes[i].c.k[0].i)for(jLen=shapes[i].c.k.length,j=0;j<jLen;j+=1)shapes[i].c.k[j].s&&(shapes[i].c.k[j].s[0]/=255,shapes[i].c.k[j].s[1]/=255,shapes[i].c.k[j].s[2]/=255,shapes[i].c.k[j].s[3]/=255),shapes[i].c.k[j].e&&(shapes[i].c.k[j].e[0]/=255,shapes[i].c.k[j].e[1]/=255,shapes[i].c.k[j].e[2]/=255,shapes[i].c.k[j].e[3]/=255);else shapes[i].c.k[0]/=255,shapes[i].c.k[1]/=255,shapes[i].c.k[2]/=255,shapes[i].c.k[3]/=255}function iterateLayers(layers){var i,len=layers.length;for(i=0;i<len;i+=1)4===layers[i].ty&&iterateShapes(layers[i].shapes)}var minimumVersion=[4,1,9];return function(animationData){if(checkVersion(minimumVersion,animationData.v)&&(iterateLayers(animationData.layers),animationData.assets)){var i,len=animationData.assets.length;for(i=0;i<len;i+=1)animationData.assets[i].layers&&iterateLayers(animationData.assets[i].layers)}}}(),checkShapes=function(){function completeShapes(arr){var i,j,jLen,len=arr.length;for(i=len-1;i>=0;i-=1)if("sh"==arr[i].ty){if(arr[i].ks.k.i)arr[i].ks.k.c=arr[i].closed;else for(jLen=arr[i].ks.k.length,j=0;j<jLen;j+=1)arr[i].ks.k[j].s&&(arr[i].ks.k[j].s[0].c=arr[i].closed),arr[i].ks.k[j].e&&(arr[i].ks.k[j].e[0].c=arr[i].closed);!0}else"gr"==arr[i].ty&&completeShapes(arr[i].it)}function iterateLayers(layers){var layerData,i,j,jLen,k,kLen,len=layers.length;for(i=0;i<len;i+=1){if(layerData=layers[i],layerData.hasMask){var maskProps=layerData.masksProperties;for(jLen=maskProps.length,j=0;j<jLen;j+=1)if(maskProps[j].pt.k.i)maskProps[j].pt.k.c=maskProps[j].cl;else for(kLen=maskProps[j].pt.k.length,k=0;k<kLen;k+=1)maskProps[j].pt.k[k].s&&(maskProps[j].pt.k[k].s[0].c=maskProps[j].cl),maskProps[j].pt.k[k].e&&(maskProps[j].pt.k[k].e[0].c=maskProps[j].cl)}4===layerData.ty&&completeShapes(layerData.shapes)}}var minimumVersion=[4,4,18];return function(animationData){if(checkVersion(minimumVersion,animationData.v)&&(iterateLayers(animationData.layers),animationData.assets)){var i,len=animationData.assets.length;for(i=0;i<len;i+=1)animationData.assets[i].layers&&iterateLayers(animationData.assets[i].layers)}}}(),moduleOb={};return moduleOb.completeData=completeData,moduleOb}function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}function ShapeModifier(){}function TrimModifier(){}function RoundCornersModifier(){}function RepeaterModifier(){}function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}function DashProperty(elem,data,renderer,container){this.elem=elem,this.frameId=-1,this.dataProps=createSizedArray(data.length),this.renderer=renderer,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",data.length?data.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(container);var i,prop,len=data.length||0;for(i=0;i<len;i+=1)prop=PropertyFactory.getProp(elem,data[i].v,0,0,this),this.k=prop.k||this.k,this.dataProps[i]={n:data[i].n,p:prop};this.k||this.getValue(!0),this._isAnimated=this.k}function GradientProperty(elem,data,container){this.data=data,this.c=createTypedArray("uint8c",4*data.p);var cLength=data.k.k[0].s?data.k.k[0].s.length-4*data.p:data.k.k.length-4*data.p;this.o=createTypedArray("float32",cLength),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=cLength,this.initDynamicPropertyContainer(container),this.prop=PropertyFactory.getProp(elem,data.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}function TextAnimatorProperty(textData,renderType,elem){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=textData,this._renderType=renderType,this._elem=elem,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(elem)}function TextAnimatorDataProperty(elem,animatorProps,container){var defaultData={propType:!1},getProp=PropertyFactory.getProp,textAnimator_animatables=animatorProps.a;this.a={r:textAnimator_animatables.r?getProp(elem,textAnimator_animatables.r,0,degToRads,container):defaultData,rx:textAnimator_animatables.rx?getProp(elem,textAnimator_animatables.rx,0,degToRads,container):defaultData,ry:textAnimator_animatables.ry?getProp(elem,textAnimator_animatables.ry,0,degToRads,container):defaultData,sk:textAnimator_animatables.sk?getProp(elem,textAnimator_animatables.sk,0,degToRads,container):defaultData,sa:textAnimator_animatables.sa?getProp(elem,textAnimator_animatables.sa,0,degToRads,container):defaultData,s:textAnimator_animatables.s?getProp(elem,textAnimator_animatables.s,1,.01,container):defaultData,a:textAnimator_animatables.a?getProp(elem,textAnimator_animatables.a,1,0,container):defaultData,o:textAnimator_animatables.o?getProp(elem,textAnimator_animatables.o,0,.01,container):defaultData,p:textAnimator_animatables.p?getProp(elem,textAnimator_animatables.p,1,0,container):defaultData,sw:textAnimator_animatables.sw?getProp(elem,textAnimator_animatables.sw,0,0,container):defaultData,sc:textAnimator_animatables.sc?getProp(elem,textAnimator_animatables.sc,1,0,container):defaultData,fc:textAnimator_animatables.fc?getProp(elem,textAnimator_animatables.fc,1,0,container):defaultData,fh:textAnimator_animatables.fh?getProp(elem,textAnimator_animatables.fh,0,0,container):defaultData,fs:textAnimator_animatables.fs?getProp(elem,textAnimator_animatables.fs,0,.01,container):defaultData,
fb:textAnimator_animatables.fb?getProp(elem,textAnimator_animatables.fb,0,.01,container):defaultData,t:textAnimator_animatables.t?getProp(elem,textAnimator_animatables.t,0,0,container):defaultData},this.s=TextSelectorProp.getTextSelectorProp(elem,animatorProps.s,container),this.s.t=animatorProps.s.t}function LetterProps(o,sw,sc,fc,m,p){this.o=o,this.sw=sw,this.sc=sc,this.fc=fc,this.m=m,this.p=p,this._mdf={o:!0,sw:!!sw,sc:!!sc,fc:!!fc,m:!0,p:!0}}function TextProperty(elem,data){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,this.data=data,this.elem=elem,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}function BaseRenderer(){}function SVGRenderer(animationItem,config){this.animationItem=animationItem,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var defs=createNS("defs");this.svgElement.appendChild(defs);var maskElement=createNS("g");this.svgElement.appendChild(maskElement),this.layerElement=maskElement,this.renderConfig={preserveAspectRatio:config&&config.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:config&&config.imagePreserveAspectRatio||"xMidYMid slice",progressiveLoad:config&&config.progressiveLoad||!1,hideOnTransparent:!config||!1!==config.hideOnTransparent,viewBoxOnly:config&&config.viewBoxOnly||!1,viewBoxSize:config&&config.viewBoxSize||!1,className:config&&config.className||""},this.globalData={_mdf:!1,frameNum:-1,defs:defs,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function CanvasRenderer(animationItem,config){this.animationItem=animationItem,this.renderConfig={clearCanvas:!config||void 0===config.clearCanvas||config.clearCanvas,context:config&&config.context||null,progressiveLoad:config&&config.progressiveLoad||!1,preserveAspectRatio:config&&config.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:config&&config.imagePreserveAspectRatio||"xMidYMid slice",className:config&&config.className||""},this.renderConfig.dpr=config&&config.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=config&&config.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}function HybridRenderer(animationItem,config){this.animationItem=animationItem,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:config&&config.className||"",imagePreserveAspectRatio:config&&config.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!config||!1!==config.hideOnTransparent},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function MaskElement(data,element,globalData){this.data=data,this.element=element,this.globalData=globalData,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var i,defs=this.globalData.defs,len=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(len),this.solidPath="";var path,j,jLen,rect,expansor,feMorph,x,properties=this.masksProperties,count=0,currentMasks=[],layerId=createElementID(),maskType="clipPath",maskRef="clip-path";for(i=0;i<len;i++)if(("a"!==properties[i].mode&&"n"!==properties[i].mode||properties[i].inv||100!==properties[i].o.k)&&(maskType="mask",maskRef="mask"),"s"!=properties[i].mode&&"i"!=properties[i].mode||0!==count?rect=null:(rect=createNS("rect"),rect.setAttribute("fill","#ffffff"),rect.setAttribute("width",this.element.comp.data.w||0),rect.setAttribute("height",this.element.comp.data.h||0),currentMasks.push(rect)),path=createNS("path"),"n"!=properties[i].mode){count+=1,path.setAttribute("fill","s"===properties[i].mode?"#000000":"#ffffff"),path.setAttribute("clip-rule","nonzero");var filterID;if(0!==properties[i].x.k?(maskType="mask",maskRef="mask",x=PropertyFactory.getProp(this.element,properties[i].x,0,null,this.element),filterID=createElementID(),expansor=createNS("filter"),expansor.setAttribute("id",filterID),feMorph=createNS("feMorphology"),feMorph.setAttribute("operator","dilate"),feMorph.setAttribute("in","SourceGraphic"),feMorph.setAttribute("radius","0"),expansor.appendChild(feMorph),defs.appendChild(expansor),path.setAttribute("stroke","s"===properties[i].mode?"#000000":"#ffffff")):(feMorph=null,x=null),this.storedData[i]={elem:path,x:x,expan:feMorph,lastPath:"",lastOperator:"",filterId:filterID,lastRadius:0},"i"==properties[i].mode){jLen=currentMasks.length;var g=createNS("g");for(j=0;j<jLen;j+=1)g.appendChild(currentMasks[j]);var mask=createNS("mask");mask.setAttribute("mask-type","alpha"),mask.setAttribute("id",layerId+"_"+count),mask.appendChild(path),defs.appendChild(mask),g.setAttribute("mask","url("+locationHref+"#"+layerId+"_"+count+")"),currentMasks.length=0,currentMasks.push(g)}else currentMasks.push(path);properties[i].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[i]={elem:path,lastPath:"",op:PropertyFactory.getProp(this.element,properties[i].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,properties[i],3),invRect:rect},this.viewData[i].prop.k||this.drawPath(properties[i],this.viewData[i].prop.v,this.viewData[i])}else this.viewData[i]={op:PropertyFactory.getProp(this.element,properties[i].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,properties[i],3),elem:path,lastPath:""},defs.appendChild(path);for(this.maskElement=createNS(maskType),len=currentMasks.length,i=0;i<len;i+=1)this.maskElement.appendChild(currentMasks[i]);count>0&&(this.maskElement.setAttribute("id",layerId),this.element.maskedElement.setAttribute(maskRef,"url("+locationHref+"#"+layerId+")"),defs.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}function HierarchyElement(){}function FrameElement(){}function TransformElement(){}function RenderableElement(){}function RenderableDOMElement(){}function ProcessedElement(element,position){this.elem=element,this.pos=position}function SVGStyleData(data,level){this.data=data,this.type=data.ty,this.d="",this.lvl=level,this._mdf=!1,this.closed=!0===data.hd,this.pElem=createNS("path"),this.msElem=null}function SVGShapeData(transformers,level,shape){this.caches=[],this.styles=[],this.transformers=transformers,this.lStr="",this.sh=shape,this.lvl=level,this._isAnimated=!!shape.k;for(var i=0,len=transformers.length;i<len;){if(transformers[i].mProps.dynamicProperties.length){this._isAnimated=!0;break}i+=1}}function SVGTransformData(mProps,op,container){this.transform={mProps:mProps,op:op,container:container},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}function SVGStrokeStyleData(elem,data,styleOb){this.initDynamicPropertyContainer(elem),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(elem,data.o,0,.01,this),this.w=PropertyFactory.getProp(elem,data.w,0,null,this),this.d=new DashProperty(elem,data.d||{},"svg",this),this.c=PropertyFactory.getProp(elem,data.c,1,255,this),this.style=styleOb,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(elem,data,styleOb){this.initDynamicPropertyContainer(elem),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(elem,data.o,0,.01,this),this.c=PropertyFactory.getProp(elem,data.c,1,255,this),this.style=styleOb}function SVGGradientFillStyleData(elem,data,styleOb){this.initDynamicPropertyContainer(elem),this.getValue=this.iterateDynamicProperties,this.initGradientData(elem,data,styleOb)}function SVGGradientStrokeStyleData(elem,data,styleOb){this.initDynamicPropertyContainer(elem),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(elem,data.w,0,null,this),this.d=new DashProperty(elem,data.d||{},"svg",this),this.initGradientData(elem,data,styleOb),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}function CVShapeData(element,data,styles,transformsManager){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var ty=4;"rc"==data.ty?ty=5:"el"==data.ty?ty=6:"sr"==data.ty&&(ty=7),this.sh=ShapePropertyFactory.getShapeProp(element,data,ty,element);var i,styledShape,len=styles.length;for(i=0;i<len;i+=1)styles[i].closed||(styledShape={transforms:transformsManager.addTransformSequence(styles[i].transforms),trNodes:[]},this.styledShapes.push(styledShape),styles[i].elements.push(styledShape))}function BaseElement(){}function NullElement(data,globalData,comp){this.initFrame(),this.initBaseData(data,globalData,comp),this.initFrame(),this.initTransform(data,globalData,comp),this.initHierarchy()}function SVGBaseElement(){}function IShapeElement(){}function ITextElement(){}function ICompElement(){}function IImageElement(data,globalData,comp){this.assetData=globalData.getAssetData(data.refId),this.initElement(data,globalData,comp),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ISolidElement(data,globalData,comp){this.initElement(data,globalData,comp)}function SVGCompElement(data,globalData,comp){this.layers=data.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(data,globalData,comp),this.tm=data.tm?PropertyFactory.getProp(this,data.tm,0,globalData.frameRate,this):{_placeholder:!0}}function SVGTextElement(data,globalData,comp){this.textSpans=[],this.renderType="svg",this.initElement(data,globalData,comp)}function SVGShapeElement(data,globalData,comp){this.shapes=[],this.shapesData=data.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(data,globalData,comp),this.prevViewData=[]}function SVGTintFilter(filter,filterManager){this.filterManager=filterManager;var feColorMatrix=createNS("feColorMatrix");if(feColorMatrix.setAttribute("type","matrix"),feColorMatrix.setAttribute("color-interpolation-filters","linearRGB"),feColorMatrix.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),feColorMatrix.setAttribute("result","f1"),filter.appendChild(feColorMatrix),feColorMatrix=createNS("feColorMatrix"),feColorMatrix.setAttribute("type","matrix"),feColorMatrix.setAttribute("color-interpolation-filters","sRGB"),feColorMatrix.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),feColorMatrix.setAttribute("result","f2"),filter.appendChild(feColorMatrix),this.matrixFilter=feColorMatrix,100!==filterManager.effectElements[2].p.v||filterManager.effectElements[2].p.k){var feMerge=createNS("feMerge");filter.appendChild(feMerge);var feMergeNode;feMergeNode=createNS("feMergeNode"),feMergeNode.setAttribute("in","SourceGraphic"),feMerge.appendChild(feMergeNode),feMergeNode=createNS("feMergeNode"),feMergeNode.setAttribute("in","f2"),feMerge.appendChild(feMergeNode)}}function SVGFillFilter(filter,filterManager){this.filterManager=filterManager;var feColorMatrix=createNS("feColorMatrix");feColorMatrix.setAttribute("type","matrix"),feColorMatrix.setAttribute("color-interpolation-filters","sRGB"),feColorMatrix.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),filter.appendChild(feColorMatrix),this.matrixFilter=feColorMatrix}function SVGStrokeEffect(elem,filterManager){this.initialized=!1,this.filterManager=filterManager,this.elem=elem,this.paths=[]}function SVGTritoneFilter(filter,filterManager){this.filterManager=filterManager;var feColorMatrix=createNS("feColorMatrix");feColorMatrix.setAttribute("type","matrix"),feColorMatrix.setAttribute("color-interpolation-filters","linearRGB"),feColorMatrix.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),feColorMatrix.setAttribute("result","f1"),filter.appendChild(feColorMatrix);var feComponentTransfer=createNS("feComponentTransfer");feComponentTransfer.setAttribute("color-interpolation-filters","sRGB"),filter.appendChild(feComponentTransfer),this.matrixFilter=feComponentTransfer;var feFuncR=createNS("feFuncR");feFuncR.setAttribute("type","table"),feComponentTransfer.appendChild(feFuncR),this.feFuncR=feFuncR;var feFuncG=createNS("feFuncG");feFuncG.setAttribute("type","table"),feComponentTransfer.appendChild(feFuncG),this.feFuncG=feFuncG;var feFuncB=createNS("feFuncB");feFuncB.setAttribute("type","table"),feComponentTransfer.appendChild(feFuncB),this.feFuncB=feFuncB}function SVGProLevelsFilter(filter,filterManager){this.filterManager=filterManager;var effectElements=this.filterManager.effectElements,feComponentTransfer=createNS("feComponentTransfer");(effectElements[10].p.k||0!==effectElements[10].p.v||effectElements[11].p.k||1!==effectElements[11].p.v||effectElements[12].p.k||1!==effectElements[12].p.v||effectElements[13].p.k||0!==effectElements[13].p.v||effectElements[14].p.k||1!==effectElements[14].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",feComponentTransfer)),(effectElements[17].p.k||0!==effectElements[17].p.v||effectElements[18].p.k||1!==effectElements[18].p.v||effectElements[19].p.k||1!==effectElements[19].p.v||effectElements[20].p.k||0!==effectElements[20].p.v||effectElements[21].p.k||1!==effectElements[21].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",feComponentTransfer)),(effectElements[24].p.k||0!==effectElements[24].p.v||effectElements[25].p.k||1!==effectElements[25].p.v||effectElements[26].p.k||1!==effectElements[26].p.v||effectElements[27].p.k||0!==effectElements[27].p.v||effectElements[28].p.k||1!==effectElements[28].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",feComponentTransfer)),(effectElements[31].p.k||0!==effectElements[31].p.v||effectElements[32].p.k||1!==effectElements[32].p.v||effectElements[33].p.k||1!==effectElements[33].p.v||effectElements[34].p.k||0!==effectElements[34].p.v||effectElements[35].p.k||1!==effectElements[35].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",feComponentTransfer)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(feComponentTransfer.setAttribute("color-interpolation-filters","sRGB"),filter.appendChild(feComponentTransfer),feComponentTransfer=createNS("feComponentTransfer")),(effectElements[3].p.k||0!==effectElements[3].p.v||effectElements[4].p.k||1!==effectElements[4].p.v||effectElements[5].p.k||1!==effectElements[5].p.v||effectElements[6].p.k||0!==effectElements[6].p.v||effectElements[7].p.k||1!==effectElements[7].p.v)&&(feComponentTransfer.setAttribute("color-interpolation-filters","sRGB"),filter.appendChild(feComponentTransfer),this.feFuncRComposed=this.createFeFunc("feFuncR",feComponentTransfer),this.feFuncGComposed=this.createFeFunc("feFuncG",feComponentTransfer),this.feFuncBComposed=this.createFeFunc("feFuncB",feComponentTransfer))}function SVGDropShadowEffect(filter,filterManager){filter.setAttribute("x","-100%"),filter.setAttribute("y","-100%"),filter.setAttribute("width","400%"),filter.setAttribute("height","400%"),this.filterManager=filterManager;var feGaussianBlur=createNS("feGaussianBlur");feGaussianBlur.setAttribute("in","SourceAlpha"),feGaussianBlur.setAttribute("result","drop_shadow_1"),feGaussianBlur.setAttribute("stdDeviation","0"),this.feGaussianBlur=feGaussianBlur,filter.appendChild(feGaussianBlur);var feOffset=createNS("feOffset");feOffset.setAttribute("dx","25"),feOffset.setAttribute("dy","0"),feOffset.setAttribute("in","drop_shadow_1"),feOffset.setAttribute("result","drop_shadow_2"),this.feOffset=feOffset,filter.appendChild(feOffset);var feFlood=createNS("feFlood");feFlood.setAttribute("flood-color","#00ff00"),feFlood.setAttribute("flood-opacity","1"),feFlood.setAttribute("result","drop_shadow_3"),this.feFlood=feFlood,filter.appendChild(feFlood);var feComposite=createNS("feComposite");feComposite.setAttribute("in","drop_shadow_3"),feComposite.setAttribute("in2","drop_shadow_2"),feComposite.setAttribute("operator","in"),feComposite.setAttribute("result","drop_shadow_4"),filter.appendChild(feComposite);var feMerge=createNS("feMerge");filter.appendChild(feMerge);var feMergeNode;feMergeNode=createNS("feMergeNode"),feMerge.appendChild(feMergeNode),feMergeNode=createNS("feMergeNode"),feMergeNode.setAttribute("in","SourceGraphic"),this.feMergeNode=feMergeNode,this.feMerge=feMerge,this.originalNodeAdded=!1,feMerge.appendChild(feMergeNode)}function SVGMatte3Effect(filterElem,filterManager,elem){this.initialized=!1,this.filterManager=filterManager,this.filterElem=filterElem,this.elem=elem,elem.matteElement=createNS("g"),elem.matteElement.appendChild(elem.layerElement),elem.matteElement.appendChild(elem.transformedElement),elem.baseElement=elem.matteElement}function SVGEffects(elem){var i,len=elem.data.ef?elem.data.ef.length:0,filId=createElementID(),fil=filtersFactory.createFilter(filId),count=0;this.filters=[];var filterManager;for(i=0;i<len;i+=1)filterManager=null,20===elem.data.ef[i].ty?(count+=1,filterManager=new SVGTintFilter(fil,elem.effectsManager.effectElements[i])):21===elem.data.ef[i].ty?(count+=1,filterManager=new SVGFillFilter(fil,elem.effectsManager.effectElements[i])):22===elem.data.ef[i].ty?filterManager=new SVGStrokeEffect(elem,elem.effectsManager.effectElements[i]):23===elem.data.ef[i].ty?(count+=1,filterManager=new SVGTritoneFilter(fil,elem.effectsManager.effectElements[i])):24===elem.data.ef[i].ty?(count+=1,filterManager=new SVGProLevelsFilter(fil,elem.effectsManager.effectElements[i])):25===elem.data.ef[i].ty?(count+=1,filterManager=new SVGDropShadowEffect(fil,elem.effectsManager.effectElements[i])):28===elem.data.ef[i].ty&&(filterManager=new SVGMatte3Effect(fil,elem.effectsManager.effectElements[i],elem)),filterManager&&this.filters.push(filterManager);count&&(elem.globalData.defs.appendChild(fil),elem.layerElement.setAttribute("filter","url("+locationHref+"#"+filId+")")),this.filters.length&&elem.addRenderableComponent(this)}function CVContextData(){this.saved=[],this.cArrPos=0,this.cTr=new Matrix,this.cO=1;var i;for(this.savedOp=createTypedArray("float32",15),i=0;i<15;i+=1)this.saved[i]=createTypedArray("float32",16);this._length=15}function CVBaseElement(){}function CVImageElement(data,globalData,comp){this.failed=!1,this.assetData=globalData.getAssetData(data.refId),this.img=globalData.imageLoader.getImage(this.assetData),this.initElement(data,globalData,comp)}function CVCompElement(data,globalData,comp){this.completeLayers=!1,this.layers=data.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(data,globalData,comp),this.tm=data.tm?PropertyFactory.getProp(this,data.tm,0,globalData.frameRate,this):{_placeholder:!0}}function CVMaskElement(data,element){this.data=data,this.element=element,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var i,len=this.masksProperties.length,hasMasks=!1;for(i=0;i<len;i++)"n"!==this.masksProperties[i].mode&&(hasMasks=!0),this.viewData[i]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[i],3);this.hasMasks=hasMasks,hasMasks&&this.element.addRenderableComponent(this)}function CVShapeElement(data,globalData,comp){this.shapes=[],this.shapesData=data.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(data,globalData,comp)}function CVSolidElement(data,globalData,comp){this.initElement(data,globalData,comp)}function CVTextElement(data,globalData,comp){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(data,globalData,comp)}function CVEffects(){}function HBaseElement(data,globalData,comp){}function HSolidElement(data,globalData,comp){this.initElement(data,globalData,comp)}function HCompElement(data,globalData,comp){this.layers=data.layers,this.supports3d=!data.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(data,globalData,comp),this.tm=data.tm?PropertyFactory.getProp(this,data.tm,0,globalData.frameRate,this):{_placeholder:!0}}function HShapeElement(data,globalData,comp){this.shapes=[],this.shapesData=data.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(data,globalData,comp),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(data,globalData,comp){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(data,globalData,comp)}function HImageElement(data,globalData,comp){this.assetData=globalData.getAssetData(data.refId),this.initElement(data,globalData,comp)}function HCameraElement(data,globalData,comp){this.initFrame(),this.initBaseData(data,globalData,comp),this.initHierarchy();var getProp=PropertyFactory.getProp;if(this.pe=getProp(this,data.pe,0,0,this),data.ks.p.s?(this.px=getProp(this,data.ks.p.x,1,0,this),this.py=getProp(this,data.ks.p.y,1,0,this),this.pz=getProp(this,data.ks.p.z,1,0,this)):this.p=getProp(this,data.ks.p,1,0,this),data.ks.a&&(this.a=getProp(this,data.ks.a,1,0,this)),data.ks.or.k.length&&data.ks.or.k[0].to){var i,len=data.ks.or.k.length;for(i=0;i<len;i+=1)data.ks.or.k[i].to=null,data.ks.or.k[i].ti=null}this.or=getProp(this,data.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=getProp(this,data.ks.rx,0,degToRads,this),this.ry=getProp(this,data.ks.ry,0,degToRads,this),this.rz=getProp(this,data.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}function HEffects(){}function SliderEffect(data,elem,container){this.p=PropertyFactory.getProp(elem,data.v,0,0,container)}function AngleEffect(data,elem,container){this.p=PropertyFactory.getProp(elem,data.v,0,0,container)}function ColorEffect(data,elem,container){this.p=PropertyFactory.getProp(elem,data.v,1,0,container)}function PointEffect(data,elem,container){this.p=PropertyFactory.getProp(elem,data.v,1,0,container)}function LayerIndexEffect(data,elem,container){this.p=PropertyFactory.getProp(elem,data.v,0,0,container)}function MaskIndexEffect(data,elem,container){this.p=PropertyFactory.getProp(elem,data.v,0,0,container)}function CheckboxEffect(data,elem,container){this.p=PropertyFactory.getProp(elem,data.v,0,0,container)}function NoValueEffect(){this.p={}}function EffectsManager(){}function EffectsManager(data,element){var effects=data.ef||[];this.effectElements=[];var i,effectItem,len=effects.length;for(i=0;i<len;i++)effectItem=new GroupEffect(effects[i],element),this.effectElements.push(effectItem)}function GroupEffect(data,element){this.init(data,element)}function setLocationHref(href){locationHref=href}function searchAnimations(){!0===standalone?animationManager.searchAnimations(animationData,standalone,renderer):animationManager.searchAnimations()}function setSubframeRendering(flag){subframeEnabled=flag}function loadAnimation(params){return!0===standalone&&(params.animationData=JSON.parse(animationData)),animationManager.loadAnimation(params)}function setQuality(value){if("string"==typeof value)switch(value){case"high":defaultCurveSegments=200;break;case"medium":defaultCurveSegments=50;break;case"low":defaultCurveSegments=10}else!isNaN(value)&&value>1&&(defaultCurveSegments=value);roundValues(!(defaultCurveSegments>=50))}function inBrowser(){return"undefined"!=typeof navigator}function installPlugin(type,plugin){"expressions"===type&&(expressionsPlugin=plugin)}function getFactory(name){switch(name){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix}}function checkReady(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(variable){for(var vars=queryString.split("&"),i=0;i<vars.length;i++){var pair=vars[i].split("=");if(decodeURIComponent(pair[0])==variable)return decodeURIComponent(pair[1])}}var svgNS="http://www.w3.org/2000/svg",locationHref="",initialDefaultFrame=-999999,subframeEnabled=!0,expressionsPlugin,isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),cachedColors={},bm_rounder=Math.round,bm_rnd,bm_pow=Math.pow,bm_sqrt=Math.sqrt,bm_abs=Math.abs,bm_floor=Math.floor,bm_max=Math.max,bm_min=Math.min,blitter=10,BMMath={};!function(){var i,propertyNames=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],len=propertyNames.length;for(i=0;i<len;i+=1)BMMath[propertyNames[i]]=Math[propertyNames[i]]}(),BMMath.random=Math.random,BMMath.abs=function(val){if("object"==typeof val&&val.length){var i,absArr=createSizedArray(val.length),len=val.length;for(i=0;i<len;i+=1)absArr[i]=Math.abs(val[i]);return absArr}return Math.abs(val)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;roundValues(!1);var createElementID=function(){var _count=0;return function(){return"__lottie_element_"+ ++_count}}(),rgbToHex=function(){var i,hex,colorMap=[];for(i=0;i<256;i+=1)hex=i.toString(16),colorMap[i]=1==hex.length?"0"+hex:hex;return function(r,g,b){return r<0&&(r=0),g<0&&(g=0),b<0&&(b=0),"#"+colorMap[r]+colorMap[g]+colorMap[b]}}();BaseEvent.prototype={triggerEvent:function(eventName,args){if(this._cbs[eventName])for(var len=this._cbs[eventName].length,i=0;i<len;i++)this._cbs[eventName][i](args)},addEventListener:function(eventName,callback){return this._cbs[eventName]||(this._cbs[eventName]=[]),this._cbs[eventName].push(callback),function(){this.removeEventListener(eventName,callback)}.bind(this)},removeEventListener:function(eventName,callback){if(callback){if(this._cbs[eventName]){for(var i=0,len=this._cbs[eventName].length;i<len;)this._cbs[eventName][i]===callback&&(this._cbs[eventName].splice(i,1),i-=1,len-=1),i+=1;this._cbs[eventName].length||(this._cbs[eventName]=null)}}else this._cbs[eventName]=null}};var createTypedArray=function(){function createRegularArray(type,len){var value,i=0,arr=[];switch(type){case"int16":case"uint8c":value=1;break;default:value=1.1}for(i=0;i<len;i+=1)arr.push(value);return arr}function createTypedArray(type,len){return"float32"===type?new Float32Array(len):"int16"===type?new Int16Array(len):"uint8c"===type?new Uint8ClampedArray(len):void 0}return"function"==typeof Uint8ClampedArray&&"function"==typeof Float32Array?createTypedArray:createRegularArray}();DynamicPropertyContainer.prototype={addDynamicProperty:function(prop){-1===this.dynamicProperties.indexOf(prop)&&(this.dynamicProperties.push(prop),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var i,len=this.dynamicProperties.length;for(i=0;i<len;i+=1)this.dynamicProperties[i].getValue(),this.dynamicProperties[i]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(container){this.container=container,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var getBlendMode=function(){var blendModeEnums={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(mode){return blendModeEnums[mode]||""}}(),Matrix=function(){function reset(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function rotate(angle){if(0===angle)return this;var mCos=_cos(angle),mSin=_sin(angle);return this._t(mCos,-mSin,0,0,mSin,mCos,0,0,0,0,1,0,0,0,0,1)}function rotateX(angle){if(0===angle)return this;var mCos=_cos(angle),mSin=_sin(angle);return this._t(1,0,0,0,0,mCos,-mSin,0,0,mSin,mCos,0,0,0,0,1)}function rotateY(angle){if(0===angle)return this;var mCos=_cos(angle),mSin=_sin(angle);return this._t(mCos,0,mSin,0,0,1,0,0,-mSin,0,mCos,0,0,0,0,1)}function rotateZ(angle){if(0===angle)return this;var mCos=_cos(angle),mSin=_sin(angle);return this._t(mCos,-mSin,0,0,mSin,mCos,0,0,0,0,1,0,0,0,0,1)}function shear(sx,sy){return this._t(1,sy,sx,1,0,0)}function skew(ax,ay){return this.shear(_tan(ax),_tan(ay))}function skewFromAxis(ax,angle){var mCos=_cos(angle),mSin=_sin(angle);return this._t(mCos,mSin,0,0,-mSin,mCos,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,_tan(ax),1,0,0,0,0,1,0,0,0,0,1)._t(mCos,-mSin,0,0,mSin,mCos,0,0,0,0,1,0,0,0,0,1)}function scale(sx,sy,sz){return sz||0===sz||(sz=1),1===sx&&1===sy&&1===sz?this:this._t(sx,0,0,0,0,sy,0,0,0,0,sz,0,0,0,0,1)}function setTransform(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){return this.props[0]=a,this.props[1]=b,this.props[2]=c,this.props[3]=d,this.props[4]=e,this.props[5]=f,this.props[6]=g,this.props[7]=h,this.props[8]=i,this.props[9]=j,this.props[10]=k,this.props[11]=l,this.props[12]=m,this.props[13]=n,this.props[14]=o,this.props[15]=p,this}function translate(tx,ty,tz){return tz=tz||0,0!==tx||0!==ty||0!==tz?this._t(1,0,0,0,0,1,0,0,0,0,1,0,tx,ty,tz,1):this}function transform(a2,b2,c2,d2,e2,f2,g2,h2,i2,j2,k2,l2,m2,n2,o2,p2){var _p=this.props;if(1===a2&&0===b2&&0===c2&&0===d2&&0===e2&&1===f2&&0===g2&&0===h2&&0===i2&&0===j2&&1===k2&&0===l2)return _p[12]=_p[12]*a2+_p[15]*m2,_p[13]=_p[13]*f2+_p[15]*n2,_p[14]=_p[14]*k2+_p[15]*o2,_p[15]=_p[15]*p2,this._identityCalculated=!1,this;var a1=_p[0],b1=_p[1],c1=_p[2],d1=_p[3],e1=_p[4],f1=_p[5],g1=_p[6],h1=_p[7],i1=_p[8],j1=_p[9],k1=_p[10],l1=_p[11],m1=_p[12],n1=_p[13],o1=_p[14],p1=_p[15];return _p[0]=a1*a2+b1*e2+c1*i2+d1*m2,_p[1]=a1*b2+b1*f2+c1*j2+d1*n2,_p[2]=a1*c2+b1*g2+c1*k2+d1*o2,_p[3]=a1*d2+b1*h2+c1*l2+d1*p2,_p[4]=e1*a2+f1*e2+g1*i2+h1*m2,_p[5]=e1*b2+f1*f2+g1*j2+h1*n2,_p[6]=e1*c2+f1*g2+g1*k2+h1*o2,_p[7]=e1*d2+f1*h2+g1*l2+h1*p2,_p[8]=i1*a2+j1*e2+k1*i2+l1*m2,_p[9]=i1*b2+j1*f2+k1*j2+l1*n2,_p[10]=i1*c2+j1*g2+k1*k2+l1*o2,_p[11]=i1*d2+j1*h2+k1*l2+l1*p2,_p[12]=m1*a2+n1*e2+o1*i2+p1*m2,_p[13]=m1*b2+n1*f2+o1*j2+p1*n2,_p[14]=m1*c2+n1*g2+o1*k2+p1*o2,_p[15]=m1*d2+n1*h2+o1*l2+p1*p2,this._identityCalculated=!1,this}function isIdentity(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function equals(matr){for(var i=0;i<16;){if(matr.props[i]!==this.props[i])return!1;i+=1}return!0}function clone(matr){var i;for(i=0;i<16;i+=1)matr.props[i]=this.props[i]}
function cloneFromProps(props){var i;for(i=0;i<16;i+=1)this.props[i]=props[i]}function applyToPoint(x,y,z){return{x:x*this.props[0]+y*this.props[4]+z*this.props[8]+this.props[12],y:x*this.props[1]+y*this.props[5]+z*this.props[9]+this.props[13],z:x*this.props[2]+y*this.props[6]+z*this.props[10]+this.props[14]}}function applyToX(x,y,z){return x*this.props[0]+y*this.props[4]+z*this.props[8]+this.props[12]}function applyToY(x,y,z){return x*this.props[1]+y*this.props[5]+z*this.props[9]+this.props[13]}function applyToZ(x,y,z){return x*this.props[2]+y*this.props[6]+z*this.props[10]+this.props[14]}function inversePoint(pt){var determinant=this.props[0]*this.props[5]-this.props[1]*this.props[4],a=this.props[5]/determinant,b=-this.props[1]/determinant,c=-this.props[4]/determinant,d=this.props[0]/determinant,e=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/determinant,f=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/determinant;return[pt[0]*a+pt[1]*c+e,pt[0]*b+pt[1]*d+f,0]}function inversePoints(pts){var i,len=pts.length,retPts=[];for(i=0;i<len;i+=1)retPts[i]=inversePoint(pts[i]);return retPts}function applyToTriplePoints(pt1,pt2,pt3){var arr=createTypedArray("float32",6);if(this.isIdentity())arr[0]=pt1[0],arr[1]=pt1[1],arr[2]=pt2[0],arr[3]=pt2[1],arr[4]=pt3[0],arr[5]=pt3[1];else{var p0=this.props[0],p1=this.props[1],p4=this.props[4],p5=this.props[5],p12=this.props[12],p13=this.props[13];arr[0]=pt1[0]*p0+pt1[1]*p4+p12,arr[1]=pt1[0]*p1+pt1[1]*p5+p13,arr[2]=pt2[0]*p0+pt2[1]*p4+p12,arr[3]=pt2[0]*p1+pt2[1]*p5+p13,arr[4]=pt3[0]*p0+pt3[1]*p4+p12,arr[5]=pt3[0]*p1+pt3[1]*p5+p13}return arr}function applyToPointArray(x,y,z){return this.isIdentity()?[x,y,z]:[x*this.props[0]+y*this.props[4]+z*this.props[8]+this.props[12],x*this.props[1]+y*this.props[5]+z*this.props[9]+this.props[13],x*this.props[2]+y*this.props[6]+z*this.props[10]+this.props[14]]}function applyToPointStringified(x,y){if(this.isIdentity())return x+","+y;var _p=this.props;return Math.round(100*(x*_p[0]+y*_p[4]+_p[12]))/100+","+Math.round(100*(x*_p[1]+y*_p[5]+_p[13]))/100}function toCSS(){for(var i=0,props=this.props,cssValue="matrix3d(";i<16;)cssValue+=_rnd(1e4*props[i])/1e4,cssValue+=15===i?")":",",i+=1;return cssValue}function roundMatrixProperty(val){return val<1e-6&&val>0||val>-1e-6&&val<0?_rnd(1e4*val)/1e4:val}function to2dCSS(){var props=this.props;return"matrix("+roundMatrixProperty(props[0])+","+roundMatrixProperty(props[1])+","+roundMatrixProperty(props[4])+","+roundMatrixProperty(props[5])+","+roundMatrixProperty(props[12])+","+roundMatrixProperty(props[13])+")"}var _cos=Math.cos,_sin=Math.sin,_tan=Math.tan,_rnd=Math.round;return function(){this.reset=reset,this.rotate=rotate,this.rotateX=rotateX,this.rotateY=rotateY,this.rotateZ=rotateZ,this.skew=skew,this.skewFromAxis=skewFromAxis,this.shear=shear,this.scale=scale,this.setTransform=setTransform,this.translate=translate,this.transform=transform,this.applyToPoint=applyToPoint,this.applyToX=applyToX,this.applyToY=applyToY,this.applyToZ=applyToZ,this.applyToPointArray=applyToPointArray,this.applyToTriplePoints=applyToTriplePoints,this.applyToPointStringified=applyToPointStringified,this.toCSS=toCSS,this.to2dCSS=to2dCSS,this.clone=clone,this.cloneFromProps=cloneFromProps,this.equals=equals,this.inversePoints=inversePoints,this.inversePoint=inversePoint,this._t=this.transform,this.isIdentity=isIdentity,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();!function(pool,math){function seedrandom(seed,options,callback){var key=[];options=!0===options?{entropy:!0}:options||{};var shortseed=mixkey(flatten(options.entropy?[seed,tostring(pool)]:null===seed?autoseed():seed,3),key),arc4=new ARC4(key),prng=function(){for(var n=arc4.g(chunks),d=startdenom,x=0;n<significance;)n=(n+x)*width,d*=width,x=arc4.g(1);for(;n>=overflow;)n/=2,d/=2,x>>>=1;return(n+x)/d};return prng.int32=function(){return 0|arc4.g(4)},prng.quick=function(){return arc4.g(4)/4294967296},prng.double=prng,mixkey(tostring(arc4.S),pool),(options.pass||callback||function(prng,seed,is_math_call,state){return state&&(state.S&&copy(state,arc4),prng.state=function(){return copy(arc4,{})}),is_math_call?(math[rngname]=prng,seed):prng})(prng,shortseed,"global"in options?options.global:this==math,options.state)}function ARC4(key){var t,keylen=key.length,me=this,i=0,j=me.i=me.j=0,s=me.S=[];for(keylen||(key=[keylen++]);i<width;)s[i]=i++;for(i=0;i<width;i++)s[i]=s[j=mask&j+key[i%keylen]+(t=s[i])],s[j]=t;me.g=function(count){for(var t,r=0,i=me.i,j=me.j,s=me.S;count--;)t=s[i=mask&i+1],r=r*width+s[mask&(s[i]=s[j=mask&j+t])+(s[j]=t)];return me.i=i,me.j=j,r}}function copy(f,t){return t.i=f.i,t.j=f.j,t.S=f.S.slice(),t}function flatten(obj,depth){var prop,result=[],typ=typeof obj;if(depth&&"object"==typ)for(prop in obj)try{result.push(flatten(obj[prop],depth-1))}catch(e){}return result.length?result:"string"==typ?obj:obj+"\0"}function mixkey(seed,key){for(var smear,stringseed=seed+"",j=0;j<stringseed.length;)key[mask&j]=mask&(smear^=19*key[mask&j])+stringseed.charCodeAt(j++);return tostring(key)}function autoseed(){try{if(nodecrypto)return tostring(nodecrypto.randomBytes(width));var out=new Uint8Array(width);return(global.crypto||global.msCrypto).getRandomValues(out),tostring(out)}catch(e){var browser=global.navigator,plugins=browser&&browser.plugins;return[+new Date,global,plugins,global.screen,tostring(pool)]}}function tostring(a){return String.fromCharCode.apply(0,a)}var nodecrypto,global=this,width=256,chunks=6,rngname="random",startdenom=math.pow(width,chunks),significance=math.pow(2,52),overflow=2*significance,mask=width-1;math["seed"+rngname]=seedrandom,mixkey(math.random(),pool)}([],BMMath);var BezierFactory=function(){function getBezierEasing(a,b,c,d,nm){var str=nm||("bez_"+a+"_"+b+"_"+c+"_"+d).replace(/\./g,"p");if(beziers[str])return beziers[str];var bezEasing=new BezierEasing([a,b,c,d]);return beziers[str]=bezEasing,bezEasing}function A(aA1,aA2){return 1-3*aA2+3*aA1}function B(aA1,aA2){return 3*aA2-6*aA1}function C(aA1){return 3*aA1}function calcBezier(aT,aA1,aA2){return((A(aA1,aA2)*aT+B(aA1,aA2))*aT+C(aA1))*aT}function getSlope(aT,aA1,aA2){return 3*A(aA1,aA2)*aT*aT+2*B(aA1,aA2)*aT+C(aA1)}function binarySubdivide(aX,aA,aB,mX1,mX2){var currentX,currentT,i=0;do{currentT=aA+(aB-aA)/2,currentX=calcBezier(currentT,mX1,mX2)-aX,currentX>0?aB=currentT:aA=currentT}while(Math.abs(currentX)>SUBDIVISION_PRECISION&&++i<SUBDIVISION_MAX_ITERATIONS);return currentT}function newtonRaphsonIterate(aX,aGuessT,mX1,mX2){for(var i=0;i<NEWTON_ITERATIONS;++i){var currentSlope=getSlope(aGuessT,mX1,mX2);if(0===currentSlope)return aGuessT;aGuessT-=(calcBezier(aGuessT,mX1,mX2)-aX)/currentSlope}return aGuessT}function BezierEasing(points){this._p=points,this._mSampleValues=float32ArraySupported?new Float32Array(kSplineTableSize):new Array(kSplineTableSize),this._precomputed=!1,this.get=this.get.bind(this)}var ob={};ob.getBezierEasing=getBezierEasing;var beziers={},NEWTON_ITERATIONS=4,SUBDIVISION_PRECISION=1e-7,SUBDIVISION_MAX_ITERATIONS=10,kSplineTableSize=11,kSampleStepSize=1/(kSplineTableSize-1),float32ArraySupported="function"==typeof Float32Array;return BezierEasing.prototype={get:function(x){var mX1=this._p[0],mY1=this._p[1],mX2=this._p[2],mY2=this._p[3];return this._precomputed||this._precompute(),mX1===mY1&&mX2===mY2?x:0===x?0:1===x?1:calcBezier(this._getTForX(x),mY1,mY2)},_precompute:function(){var mX1=this._p[0],mY1=this._p[1],mX2=this._p[2],mY2=this._p[3];this._precomputed=!0,mX1===mY1&&mX2===mY2||this._calcSampleValues()},_calcSampleValues:function(){for(var mX1=this._p[0],mX2=this._p[2],i=0;i<kSplineTableSize;++i)this._mSampleValues[i]=calcBezier(i*kSampleStepSize,mX1,mX2)},_getTForX:function(aX){for(var mX1=this._p[0],mX2=this._p[2],mSampleValues=this._mSampleValues,intervalStart=0,currentSample=1,lastSample=kSplineTableSize-1;currentSample!==lastSample&&mSampleValues[currentSample]<=aX;++currentSample)intervalStart+=kSampleStepSize;--currentSample;var dist=(aX-mSampleValues[currentSample])/(mSampleValues[currentSample+1]-mSampleValues[currentSample]),guessForT=intervalStart+dist*kSampleStepSize,initialSlope=getSlope(guessForT,mX1,mX2);return initialSlope>=.001?newtonRaphsonIterate(aX,guessForT,mX1,mX2):0===initialSlope?guessForT:binarySubdivide(aX,intervalStart,intervalStart+kSampleStepSize,mX1,mX2)}},ob}();!function(){for(var lastTime=0,vendors=["ms","moz","webkit","o"],x=0;x<vendors.length&&!window.requestAnimationFrame;++x)window.requestAnimationFrame=window[vendors[x]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[vendors[x]+"CancelAnimationFrame"]||window[vendors[x]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(callback,element){var currTime=(new Date).getTime(),timeToCall=Math.max(0,16-(currTime-lastTime)),id=setTimeout(function(){callback(currTime+timeToCall)},timeToCall);return lastTime=currTime+timeToCall,id}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(id){clearTimeout(id)})}();var bez=bezFunction(),dataManager=dataFunctionManager(),FontManager=function(){function setUpNode(font,family){var parentNode=createTag("span");parentNode.style.fontFamily=family;var node=createTag("span");node.innerHTML="giItT1WQy@!-/#",parentNode.style.position="absolute",parentNode.style.left="-10000px",parentNode.style.top="-10000px",parentNode.style.fontSize="300px",parentNode.style.fontVariant="normal",parentNode.style.fontStyle="normal",parentNode.style.fontWeight="normal",parentNode.style.letterSpacing="0",parentNode.appendChild(node),document.body.appendChild(parentNode);var width=node.offsetWidth;return node.style.fontFamily=font+", "+family,{node:node,w:width,parent:parentNode}}function checkLoadedFonts(){var i,node,w,len=this.fonts.length,loadedCount=len;for(i=0;i<len;i+=1)this.fonts[i].loaded?loadedCount-=1:"n"===this.fonts[i].fOrigin||0===this.fonts[i].origin?this.fonts[i].loaded=!0:(node=this.fonts[i].monoCase.node,w=this.fonts[i].monoCase.w,node.offsetWidth!==w?(loadedCount-=1,this.fonts[i].loaded=!0):(node=this.fonts[i].sansCase.node,w=this.fonts[i].sansCase.w,node.offsetWidth!==w&&(loadedCount-=1,this.fonts[i].loaded=!0)),this.fonts[i].loaded&&(this.fonts[i].sansCase.parent.parentNode.removeChild(this.fonts[i].sansCase.parent),this.fonts[i].monoCase.parent.parentNode.removeChild(this.fonts[i].monoCase.parent)));0!==loadedCount&&Date.now()-this.initTime<maxWaitingTime?setTimeout(this.checkLoadedFonts.bind(this),20):setTimeout(function(){this.isLoaded=!0}.bind(this),0)}function createHelper(def,fontData){var tHelper=createNS("text");return tHelper.style.fontSize="100px",tHelper.setAttribute("font-family",fontData.fFamily),tHelper.setAttribute("font-style",fontData.fStyle),tHelper.setAttribute("font-weight",fontData.fWeight),tHelper.textContent="1",fontData.fClass?(tHelper.style.fontFamily="inherit",tHelper.setAttribute("class",fontData.fClass)):tHelper.style.fontFamily=fontData.fFamily,def.appendChild(tHelper),createTag("canvas").getContext("2d").font=fontData.fWeight+" "+fontData.fStyle+" 100px "+fontData.fFamily,tHelper}function addFonts(fontData,defs){if(!fontData)return void(this.isLoaded=!0);if(this.chars)return this.isLoaded=!0,void(this.fonts=fontData.list);var i,fontArr=fontData.list,len=fontArr.length,_pendingFonts=len;for(i=0;i<len;i+=1){var loadedSelector,j,shouldLoadFont=!0;if(fontArr[i].loaded=!1,fontArr[i].monoCase=setUpNode(fontArr[i].fFamily,"monospace"),fontArr[i].sansCase=setUpNode(fontArr[i].fFamily,"sans-serif"),fontArr[i].fPath){if("p"===fontArr[i].fOrigin||3===fontArr[i].origin){if(loadedSelector=document.querySelectorAll('style[f-forigin="p"][f-family="'+fontArr[i].fFamily+'"], style[f-origin="3"][f-family="'+fontArr[i].fFamily+'"]'),loadedSelector.length>0&&(shouldLoadFont=!1),shouldLoadFont){var s=createTag("style");s.setAttribute("f-forigin",fontArr[i].fOrigin),s.setAttribute("f-origin",fontArr[i].origin),s.setAttribute("f-family",fontArr[i].fFamily),s.type="text/css",s.innerHTML="@font-face {font-family: "+fontArr[i].fFamily+"; font-style: normal; src: url('"+fontArr[i].fPath+"');}",defs.appendChild(s)}}else if("g"===fontArr[i].fOrigin||1===fontArr[i].origin){for(loadedSelector=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),j=0;j<loadedSelector.length;j++)-1!==loadedSelector[j].href.indexOf(fontArr[i].fPath)&&(shouldLoadFont=!1);if(shouldLoadFont){var l=createTag("link");l.setAttribute("f-forigin",fontArr[i].fOrigin),l.setAttribute("f-origin",fontArr[i].origin),l.type="text/css",l.rel="stylesheet",l.href=fontArr[i].fPath,document.body.appendChild(l)}}else if("t"===fontArr[i].fOrigin||2===fontArr[i].origin){for(loadedSelector=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),j=0;j<loadedSelector.length;j++)fontArr[i].fPath===loadedSelector[j].src&&(shouldLoadFont=!1);if(shouldLoadFont){var sc=createTag("link");sc.setAttribute("f-forigin",fontArr[i].fOrigin),sc.setAttribute("f-origin",fontArr[i].origin),sc.setAttribute("rel","stylesheet"),sc.setAttribute("href",fontArr[i].fPath),defs.appendChild(sc)}}}else fontArr[i].loaded=!0,_pendingFonts-=1;fontArr[i].helper=createHelper(defs,fontArr[i]),fontArr[i].cache={},this.fonts.push(fontArr[i])}0===_pendingFonts?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function addChars(chars){if(chars){this.chars||(this.chars=[]);var i,j,found,len=chars.length,jLen=this.chars.length;for(i=0;i<len;i+=1){for(j=0,found=!1;j<jLen;)this.chars[j].style===chars[i].style&&this.chars[j].fFamily===chars[i].fFamily&&this.chars[j].ch===chars[i].ch&&(found=!0),j+=1;found||(this.chars.push(chars[i]),jLen+=1)}}}function getCharData(char,style,font){for(var i=0,len=this.chars.length;i<len;){if(this.chars[i].ch===char&&this.chars[i].style===style&&this.chars[i].fFamily===font)return this.chars[i];i+=1}return console&&console.warn,emptyChar}function measureText(char,fontName,size){var fontData=this.getFontByName(fontName),index=char.charCodeAt(0);if(!fontData.cache[index+1]){var tHelper=fontData.helper;if(" "===char){tHelper.textContent="|"+char+"|";var doubleSize=tHelper.getComputedTextLength();tHelper.textContent="||";var singleSize=tHelper.getComputedTextLength();fontData.cache[index+1]=(doubleSize-singleSize)/100}else tHelper.textContent=char,fontData.cache[index+1]=tHelper.getComputedTextLength()/100}return fontData.cache[index+1]*size}function getFontByName(name){for(var i=0,len=this.fonts.length;i<len;){if(this.fonts[i].fName===name)return this.fonts[i];i+=1}return this.fonts[0]}function getCombinedCharacterCodes(){return combinedCharacters}function loaded(){return this.isLoaded}var maxWaitingTime=5e3,emptyChar={w:0,size:0,shapes:[]},combinedCharacters=[];combinedCharacters=combinedCharacters.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var Font=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this.initTime=Date.now()};return Font.getCombinedCharacterCodes=getCombinedCharacterCodes,Font.prototype.addChars=addChars,Font.prototype.addFonts=addFonts,Font.prototype.getCharData=getCharData,Font.prototype.getFontByName=getFontByName,Font.prototype.measureText=measureText,Font.prototype.checkLoadedFonts=checkLoadedFonts,Font.prototype.loaded=loaded,Font}(),PropertyFactory=function(){function interpolateValue(frameNum,caching){var newValue,offsetTime=this.offsetTime;"multidimensional"===this.propType&&(newValue=createTypedArray("float32",this.pv.length));for(var keyData,nextKeyData,iterationIndex=caching.lastIndex,i=iterationIndex,len=this.keyframes.length-1,flag=!0;flag;){if(keyData=this.keyframes[i],nextKeyData=this.keyframes[i+1],i===len-1&&frameNum>=nextKeyData.t-offsetTime){keyData.h&&(keyData=nextKeyData),iterationIndex=0;break}if(nextKeyData.t-offsetTime>frameNum){iterationIndex=i;break}i<len-1?i+=1:(iterationIndex=0,flag=!1)}var k,kLen,perc,jLen,j,fnc,endValue,nextKeyTime=nextKeyData.t-offsetTime,keyTime=keyData.t-offsetTime;if(keyData.to){keyData.bezierData||(keyData.bezierData=bez.buildBezierData(keyData.s,nextKeyData.s||keyData.e,keyData.to,keyData.ti));var bezierData=keyData.bezierData;if(frameNum>=nextKeyTime||frameNum<keyTime){var ind=frameNum>=nextKeyTime?bezierData.points.length-1:0;for(kLen=bezierData.points[ind].point.length,k=0;k<kLen;k+=1)newValue[k]=bezierData.points[ind].point[k]}else{keyData.__fnct?fnc=keyData.__fnct:(fnc=BezierFactory.getBezierEasing(keyData.o.x,keyData.o.y,keyData.i.x,keyData.i.y,keyData.n).get,keyData.__fnct=fnc),perc=fnc((frameNum-keyTime)/(nextKeyTime-keyTime));var segmentPerc,distanceInLine=bezierData.segmentLength*perc,addedLength=caching.lastFrame<frameNum&&caching._lastKeyframeIndex===i?caching._lastAddedLength:0;for(j=caching.lastFrame<frameNum&&caching._lastKeyframeIndex===i?caching._lastPoint:0,flag=!0,jLen=bezierData.points.length;flag;){if(addedLength+=bezierData.points[j].partialLength,0===distanceInLine||0===perc||j===bezierData.points.length-1){for(kLen=bezierData.points[j].point.length,k=0;k<kLen;k+=1)newValue[k]=bezierData.points[j].point[k];break}if(distanceInLine>=addedLength&&distanceInLine<addedLength+bezierData.points[j+1].partialLength){for(segmentPerc=(distanceInLine-addedLength)/bezierData.points[j+1].partialLength,kLen=bezierData.points[j].point.length,k=0;k<kLen;k+=1)newValue[k]=bezierData.points[j].point[k]+(bezierData.points[j+1].point[k]-bezierData.points[j].point[k])*segmentPerc;break}j<jLen-1?j+=1:flag=!1}caching._lastPoint=j,caching._lastAddedLength=addedLength-bezierData.points[j].partialLength,caching._lastKeyframeIndex=i}}else{var outX,outY,inX,inY,keyValue;if(len=keyData.s.length,endValue=nextKeyData.s||keyData.e,this.sh&&1!==keyData.h)if(frameNum>=nextKeyTime)newValue[0]=endValue[0],newValue[1]=endValue[1],newValue[2]=endValue[2];else if(frameNum<=keyTime)newValue[0]=keyData.s[0],newValue[1]=keyData.s[1],newValue[2]=keyData.s[2];else{var quatStart=createQuaternion(keyData.s),quatEnd=createQuaternion(endValue),time=(frameNum-keyTime)/(nextKeyTime-keyTime);quaternionToEuler(newValue,slerp(quatStart,quatEnd,time))}else for(i=0;i<len;i+=1)1!==keyData.h&&(frameNum>=nextKeyTime?perc=1:frameNum<keyTime?perc=0:(keyData.o.x.constructor===Array?(keyData.__fnct||(keyData.__fnct=[]),keyData.__fnct[i]?fnc=keyData.__fnct[i]:(outX=void 0===keyData.o.x[i]?keyData.o.x[0]:keyData.o.x[i],outY=void 0===keyData.o.y[i]?keyData.o.y[0]:keyData.o.y[i],inX=void 0===keyData.i.x[i]?keyData.i.x[0]:keyData.i.x[i],inY=void 0===keyData.i.y[i]?keyData.i.y[0]:keyData.i.y[i],fnc=BezierFactory.getBezierEasing(outX,outY,inX,inY).get,keyData.__fnct[i]=fnc)):keyData.__fnct?fnc=keyData.__fnct:(outX=keyData.o.x,outY=keyData.o.y,inX=keyData.i.x,inY=keyData.i.y,fnc=BezierFactory.getBezierEasing(outX,outY,inX,inY).get,keyData.__fnct=fnc),perc=fnc((frameNum-keyTime)/(nextKeyTime-keyTime)))),endValue=nextKeyData.s||keyData.e,keyValue=1===keyData.h?keyData.s[i]:keyData.s[i]+(endValue[i]-keyData.s[i])*perc,1===len?newValue=keyValue:newValue[i]=keyValue}return caching.lastIndex=iterationIndex,newValue}function slerp(a,b,t){var omega,cosom,sinom,scale0,scale1,out=[],ax=a[0],ay=a[1],az=a[2],aw=a[3],bx=b[0],by=b[1],bz=b[2],bw=b[3];return cosom=ax*bx+ay*by+az*bz+aw*bw,cosom<0&&(cosom=-cosom,bx=-bx,by=-by,bz=-bz,bw=-bw),1-cosom>1e-6?(omega=Math.acos(cosom),sinom=Math.sin(omega),scale0=Math.sin((1-t)*omega)/sinom,scale1=Math.sin(t*omega)/sinom):(scale0=1-t,scale1=t),out[0]=scale0*ax+scale1*bx,out[1]=scale0*ay+scale1*by,out[2]=scale0*az+scale1*bz,out[3]=scale0*aw+scale1*bw,out}function quaternionToEuler(out,quat){var qx=quat[0],qy=quat[1],qz=quat[2],qw=quat[3],heading=Math.atan2(2*qy*qw-2*qx*qz,1-2*qy*qy-2*qz*qz),attitude=Math.asin(2*qx*qy+2*qz*qw),bank=Math.atan2(2*qx*qw-2*qy*qz,1-2*qx*qx-2*qz*qz);out[0]=heading/degToRads,out[1]=attitude/degToRads,out[2]=bank/degToRads}function createQuaternion(values){var heading=values[0]*degToRads,attitude=values[1]*degToRads,bank=values[2]*degToRads,c1=Math.cos(heading/2),c2=Math.cos(attitude/2),c3=Math.cos(bank/2),s1=Math.sin(heading/2),s2=Math.sin(attitude/2),s3=Math.sin(bank/2);return[s1*s2*c3+c1*c2*s3,s1*c2*c3+c1*s2*s3,c1*s2*c3-s1*c2*s3,c1*c2*c3-s1*s2*s3]}function getValueAtCurrentTime(){var frameNum=this.comp.renderedFrame-this.offsetTime,initTime=this.keyframes[0].t-this.offsetTime,endTime=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(frameNum===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=endTime&&frameNum>=endTime||this._caching.lastFrame<initTime&&frameNum<initTime))){this._caching.lastFrame>=frameNum&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var renderResult=this.interpolateValue(frameNum,this._caching);this.pv=renderResult}return this._caching.lastFrame=frameNum,this.pv}function setVValue(val){var multipliedValue;if("unidimensional"===this.propType)multipliedValue=val*this.mult,math_abs(this.v-multipliedValue)>1e-5&&(this.v=multipliedValue,this._mdf=!0);else for(var i=0,len=this.v.length;i<len;)multipliedValue=val[i]*this.mult,math_abs(this.v[i]-multipliedValue)>1e-5&&(this.v[i]=multipliedValue,this._mdf=!0),i+=1}function processEffectsSequence(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length){if(this.lock)return void this.setVValue(this.pv);this.lock=!0,this._mdf=this._isFirstFrame;var i,len=this.effectsSequence.length,finalValue=this.kf?this.pv:this.data.k;for(i=0;i<len;i+=1)finalValue=this.effectsSequence[i](finalValue);this.setVValue(finalValue),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(effectFunction){this.effectsSequence.push(effectFunction),this.container.addDynamicProperty(this)}function ValueProperty(elem,data,mult,container){this.propType="unidimensional",this.mult=mult||1,this.data=data,this.v=mult?data.k*mult:data.k,this.pv=data.k,this._mdf=!1,this.elem=elem,this.container=container,this.comp=elem.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(elem,data,mult,container){this.propType="multidimensional",this.mult=mult||1,this.data=data,this._mdf=!1,this.elem=elem,this.container=container,this.comp=elem.comp,this.k=!1,this.kf=!1,this.frameId=-1;var i,len=data.k.length;this.v=createTypedArray("float32",len),this.pv=createTypedArray("float32",len);createTypedArray("float32",len);for(this.vel=createTypedArray("float32",len),i=0;i<len;i+=1)this.v[i]=data.k[i]*this.mult,this.pv[i]=data.k[i];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(elem,data,mult,container){this.propType="unidimensional",this.keyframes=data.k,this.offsetTime=elem.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=data,this.mult=mult||1,this.elem=elem,this.container=container,this.comp=elem.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(elem,data,mult,container){this.propType="multidimensional";var i,s,e,to,ti,len=data.k.length;for(i=0;i<len-1;i+=1)data.k[i].to&&data.k[i].s&&data.k[i].e&&(s=data.k[i].s,e=data.k[i].e,to=data.k[i].to,ti=data.k[i].ti,(2===s.length&&(s[0]!==e[0]||s[1]!==e[1])&&bez.pointOnLine2D(s[0],s[1],e[0],e[1],s[0]+to[0],s[1]+to[1])&&bez.pointOnLine2D(s[0],s[1],e[0],e[1],e[0]+ti[0],e[1]+ti[1])||3===s.length&&(s[0]!==e[0]||s[1]!==e[1]||s[2]!==e[2])&&bez.pointOnLine3D(s[0],s[1],s[2],e[0],e[1],e[2],s[0]+to[0],s[1]+to[1],s[2]+to[2])&&bez.pointOnLine3D(s[0],s[1],s[2],e[0],e[1],e[2],e[0]+ti[0],e[1]+ti[1],e[2]+ti[2]))&&(data.k[i].to=null,data.k[i].ti=null),s[0]===e[0]&&s[1]===e[1]&&0===to[0]&&0===to[1]&&0===ti[0]&&0===ti[1]&&(2===s.length||s[2]===e[2]&&0===to[2]&&0===ti[2])&&(data.k[i].to=null,data.k[i].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.keyframes=data.k,this.offsetTime=elem.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=mult||1,this.elem=elem,this.container=container,this.comp=elem.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var arrLen=data.k[0].s.length;for(this.v=createTypedArray("float32",arrLen),this.pv=createTypedArray("float32",arrLen),i=0;i<arrLen;i+=1)this.v[i]=initFrame,this.pv[i]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",arrLen)},this.addEffect=addEffect}function getProp(elem,data,type,mult,container){var p;if(data.k.length)if("number"==typeof data.k[0])p=new MultiDimensionalProperty(elem,data,mult,container);else switch(type){case 0:p=new KeyframedValueProperty(elem,data,mult,container);break;case 1:p=new KeyframedMultidimensionalProperty(elem,data,mult,container)}else p=new ValueProperty(elem,data,mult,container);return p.effectsSequence.length&&container.addDynamicProperty(p),p}var initFrame=initialDefaultFrame,math_abs=Math.abs;return{getProp:getProp}}(),TransformPropertyFactory=function(){function applyToMatrix(mat){var _mdf=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||_mdf,this.a&&mat.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&mat.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&mat.skewFromAxis(-this.sk.v,this.sa.v),this.r?mat.rotate(-this.r.v):mat.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?mat.translate(this.px.v,this.py.v,-this.pz.v):mat.translate(this.px.v,this.py.v,0):mat.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function processKeys(forceRender){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||forceRender){if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var v1,v2,frameRate=this.elem.globalData.frameRate;if(this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(v1=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/frameRate,0),v2=this.p.getValueAtTime(this.p.keyframes[0].t/frameRate,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(v1=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/frameRate,0),v2=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.01)/frameRate,0)):(v1=this.p.pv,v2=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/frameRate,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){v1=[],v2=[];var frameRate,px=this.px,py=this.py;px._caching.lastFrame+px.offsetTime<=px.keyframes[0].t?(v1[0]=px.getValueAtTime((px.keyframes[0].t+.01)/frameRate,0),v1[1]=py.getValueAtTime((py.keyframes[0].t+.01)/frameRate,0),v2[0]=px.getValueAtTime(px.keyframes[0].t/frameRate,0),v2[1]=py.getValueAtTime(py.keyframes[0].t/frameRate,0)):px._caching.lastFrame+px.offsetTime>=px.keyframes[px.keyframes.length-1].t?(v1[0]=px.getValueAtTime(px.keyframes[px.keyframes.length-1].t/frameRate,0),v1[1]=py.getValueAtTime(py.keyframes[py.keyframes.length-1].t/frameRate,0),v2[0]=px.getValueAtTime((px.keyframes[px.keyframes.length-1].t-.01)/frameRate,0),v2[1]=py.getValueAtTime((py.keyframes[py.keyframes.length-1].t-.01)/frameRate,0)):(v1=[px.pv,py.pv],v2[0]=px.getValueAtTime((px._caching.lastFrame+px.offsetTime-.01)/frameRate,px.offsetTime),v2[1]=py.getValueAtTime((py._caching.lastFrame+py.offsetTime-.01)/frameRate,py.offsetTime))}this.v.rotate(-Math.atan2(v1[1]-v2[1],v1[0]-v2[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function precalculateMatrix(){if(!this.a.k&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}if(this.r){if(this.r.effectsSequence.length)return;this.pre.rotate(-this.r.v),this.appliedTransformations=4}else this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}}function autoOrient(){}function addDynamicProperty(prop){this._addDynamicProperty(prop),this.elem.addDynamicProperty(prop),this._isDirty=!0}function TransformProperty(elem,data,container){if(this.elem=elem,this.frameId=-1,this.propType="transform",this.data=data,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(container||elem),data.p&&data.p.s?(this.px=PropertyFactory.getProp(elem,data.p.x,0,0,this),this.py=PropertyFactory.getProp(elem,data.p.y,0,0,this),data.p.z&&(this.pz=PropertyFactory.getProp(elem,data.p.z,0,0,this))):this.p=PropertyFactory.getProp(elem,data.p||{k:[0,0,0]},1,0,this),data.rx){if(this.rx=PropertyFactory.getProp(elem,data.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(elem,data.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(elem,data.rz,0,degToRads,this),data.or.k[0].ti){var i,len=data.or.k.length;for(i=0;i<len;i+=1)data.or.k[i].to=data.or.k[i].ti=null}this.or=PropertyFactory.getProp(elem,data.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(elem,data.r||{k:0},0,degToRads,this);data.sk&&(this.sk=PropertyFactory.getProp(elem,data.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(elem,data.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(elem,data.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(elem,data.s||{k:[100,100,100]},1,.01,this),data.o?this.o=PropertyFactory.getProp(elem,data.o,0,.01,elem):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}function getTransformProperty(elem,data,container){return new TransformProperty(elem,data,container)}return TransformProperty.prototype={applyToMatrix:applyToMatrix,getValue:processKeys,precalculateMatrix:precalculateMatrix,autoOrient:autoOrient},extendPrototype([DynamicPropertyContainer],TransformProperty),TransformProperty.prototype.addDynamicProperty=addDynamicProperty,TransformProperty.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:getTransformProperty}}();ShapePath.prototype.setPathData=function(closed,len){this.c=closed,this.setLength(len);for(var i=0;i<len;)this.v[i]=point_pool.newElement(),this.o[i]=point_pool.newElement(),this.i[i]=point_pool.newElement(),i+=1},ShapePath.prototype.setLength=function(len){for(;this._maxLength<len;)this.doubleArrayLength();this._length=len},ShapePath.prototype.doubleArrayLength=function(){
this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(x,y,type,pos,replace){var arr;switch(this._length=Math.max(this._length,pos+1),this._length>=this._maxLength&&this.doubleArrayLength(),type){case"v":arr=this.v;break;case"i":arr=this.i;break;case"o":arr=this.o}(!arr[pos]||arr[pos]&&!replace)&&(arr[pos]=point_pool.newElement()),arr[pos][0]=x,arr[pos][1]=y},ShapePath.prototype.setTripleAt=function(vX,vY,oX,oY,iX,iY,pos,replace){this.setXYAt(vX,vY,"v",pos,replace),this.setXYAt(oX,oY,"o",pos,replace),this.setXYAt(iX,iY,"i",pos,replace)},ShapePath.prototype.reverse=function(){var newPath=new ShapePath;newPath.setPathData(this.c,this._length);var vertices=this.v,outPoints=this.o,inPoints=this.i,init=0;this.c&&(newPath.setTripleAt(vertices[0][0],vertices[0][1],inPoints[0][0],inPoints[0][1],outPoints[0][0],outPoints[0][1],0,!1),init=1);var i,cnt=this._length-1,len=this._length;for(i=init;i<len;i+=1)newPath.setTripleAt(vertices[cnt][0],vertices[cnt][1],inPoints[cnt][0],inPoints[cnt][1],outPoints[cnt][0],outPoints[cnt][1],i,!1),cnt-=1;return newPath};var ShapePropertyFactory=function(){function interpolateShape(frameNum,previousValue,caching){var keyPropS,keyPropE,isHold,j,k,jLen,kLen,perc,vertexValue,iterationIndex=caching.lastIndex,kf=this.keyframes;if(frameNum<kf[0].t-this.offsetTime)keyPropS=kf[0].s[0],isHold=!0,iterationIndex=0;else if(frameNum>=kf[kf.length-1].t-this.offsetTime)keyPropS=kf[kf.length-1].s?kf[kf.length-1].s[0]:kf[kf.length-2].e[0],isHold=!0;else{for(var keyData,nextKeyData,i=iterationIndex,len=kf.length-1,flag=!0;flag&&(keyData=kf[i],nextKeyData=kf[i+1],!(nextKeyData.t-this.offsetTime>frameNum));)i<len-1?i+=1:flag=!1;if(isHold=1===keyData.h,iterationIndex=i,!isHold){if(frameNum>=nextKeyData.t-this.offsetTime)perc=1;else if(frameNum<keyData.t-this.offsetTime)perc=0;else{var fnc;keyData.__fnct?fnc=keyData.__fnct:(fnc=BezierFactory.getBezierEasing(keyData.o.x,keyData.o.y,keyData.i.x,keyData.i.y).get,keyData.__fnct=fnc),perc=fnc((frameNum-(keyData.t-this.offsetTime))/(nextKeyData.t-this.offsetTime-(keyData.t-this.offsetTime)))}keyPropE=nextKeyData.s?nextKeyData.s[0]:keyData.e[0]}keyPropS=keyData.s[0]}for(jLen=previousValue._length,kLen=keyPropS.i[0].length,caching.lastIndex=iterationIndex,j=0;j<jLen;j+=1)for(k=0;k<kLen;k+=1)vertexValue=isHold?keyPropS.i[j][k]:keyPropS.i[j][k]+(keyPropE.i[j][k]-keyPropS.i[j][k])*perc,previousValue.i[j][k]=vertexValue,vertexValue=isHold?keyPropS.o[j][k]:keyPropS.o[j][k]+(keyPropE.o[j][k]-keyPropS.o[j][k])*perc,previousValue.o[j][k]=vertexValue,vertexValue=isHold?keyPropS.v[j][k]:keyPropS.v[j][k]+(keyPropE.v[j][k]-keyPropS.v[j][k])*perc,previousValue.v[j][k]=vertexValue}function interpolateShapeCurrentTime(){var frameNum=this.comp.renderedFrame-this.offsetTime,initTime=this.keyframes[0].t-this.offsetTime,endTime=this.keyframes[this.keyframes.length-1].t-this.offsetTime,lastFrame=this._caching.lastFrame;return lastFrame!==initFrame&&(lastFrame<initTime&&frameNum<initTime||lastFrame>endTime&&frameNum>endTime)||(this._caching.lastIndex=lastFrame<frameNum?this._caching.lastIndex:0,this.interpolateShape(frameNum,this.pv,this._caching)),this._caching.lastFrame=frameNum,this.pv}function resetShape(){this.paths=this.localShapeCollection}function shapesEqual(shape1,shape2){if(shape1._length!==shape2._length||shape1.c!==shape2.c)return!1;var i,len=shape1._length;for(i=0;i<len;i+=1)if(shape1.v[i][0]!==shape2.v[i][0]||shape1.v[i][1]!==shape2.v[i][1]||shape1.o[i][0]!==shape2.o[i][0]||shape1.o[i][1]!==shape2.o[i][1]||shape1.i[i][0]!==shape2.i[i][0]||shape1.i[i][1]!==shape2.i[i][1])return!1;return!0}function setVValue(newPath){shapesEqual(this.v,newPath)||(this.v=shape_pool.clone(newPath),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function processEffectsSequence(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length){if(this.lock)return void this.setVValue(this.pv);this.lock=!0,this._mdf=!1;var i,finalValue=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k,len=this.effectsSequence.length;for(i=0;i<len;i+=1)finalValue=this.effectsSequence[i](finalValue);this.setVValue(finalValue),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function ShapeProperty(elem,data,type){this.propType="shape",this.comp=elem.comp,this.container=elem,this.elem=elem,this.data=data,this.k=!1,this.kf=!1,this._mdf=!1;var pathData=3===type?data.pt.k:data.ks.k;this.v=shape_pool.clone(pathData),this.pv=shape_pool.clone(this.v),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=resetShape,this.effectsSequence=[]}function addEffect(effectFunction){this.effectsSequence.push(effectFunction),this.container.addDynamicProperty(this)}function KeyframedShapeProperty(elem,data,type){this.propType="shape",this.comp=elem.comp,this.elem=elem,this.container=elem,this.offsetTime=elem.data.st,this.keyframes=3===type?data.pt.k:data.ks.k,this.k=!0,this.kf=!0;var len=this.keyframes[0].s[0].i.length;this.keyframes[0].s[0].i[0].length;this.v=shape_pool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,len),this.pv=shape_pool.clone(this.v),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=initFrame,this.reset=resetShape,this._caching={lastFrame:initFrame,lastIndex:0},this.effectsSequence=[interpolateShapeCurrentTime.bind(this)]}function getShapeProp(elem,data,type){var prop;if(3===type||4===type){prop=(3===type?data.pt:data.ks).k.length?new KeyframedShapeProperty(elem,data,type):new ShapeProperty(elem,data,type)}else 5===type?prop=new RectShapeProperty(elem,data):6===type?prop=new EllShapeProperty(elem,data):7===type&&(prop=new StarShapeProperty(elem,data));return prop.k&&elem.addDynamicProperty(prop),prop}function getConstructorFunction(){return ShapeProperty}function getKeyframedConstructorFunction(){return KeyframedShapeProperty}var initFrame=-999999;ShapeProperty.prototype.interpolateShape=interpolateShape,ShapeProperty.prototype.getValue=processEffectsSequence,ShapeProperty.prototype.setVValue=setVValue,ShapeProperty.prototype.addEffect=addEffect,KeyframedShapeProperty.prototype.getValue=processEffectsSequence,KeyframedShapeProperty.prototype.interpolateShape=interpolateShape,KeyframedShapeProperty.prototype.setVValue=setVValue,KeyframedShapeProperty.prototype.addEffect=addEffect;var EllShapeProperty=function(){function EllShapeProperty(elem,data){this.v=shape_pool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=data.d,this.elem=elem,this.comp=elem.comp,this.frameId=-1,this.initDynamicPropertyContainer(elem),this.p=PropertyFactory.getProp(elem,data.p,1,0,this),this.s=PropertyFactory.getProp(elem,data.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}var cPoint=roundCorner;return EllShapeProperty.prototype={reset:resetShape,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var p0=this.p.v[0],p1=this.p.v[1],s0=this.s.v[0]/2,s1=this.s.v[1]/2,_cw=3!==this.d,_v=this.v;_v.v[0][0]=p0,_v.v[0][1]=p1-s1,_v.v[1][0]=_cw?p0+s0:p0-s0,_v.v[1][1]=p1,_v.v[2][0]=p0,_v.v[2][1]=p1+s1,_v.v[3][0]=_cw?p0-s0:p0+s0,_v.v[3][1]=p1,_v.i[0][0]=_cw?p0-s0*cPoint:p0+s0*cPoint,_v.i[0][1]=p1-s1,_v.i[1][0]=_cw?p0+s0:p0-s0,_v.i[1][1]=p1-s1*cPoint,_v.i[2][0]=_cw?p0+s0*cPoint:p0-s0*cPoint,_v.i[2][1]=p1+s1,_v.i[3][0]=_cw?p0-s0:p0+s0,_v.i[3][1]=p1+s1*cPoint,_v.o[0][0]=_cw?p0+s0*cPoint:p0-s0*cPoint,_v.o[0][1]=p1-s1,_v.o[1][0]=_cw?p0+s0:p0-s0,_v.o[1][1]=p1+s1*cPoint,_v.o[2][0]=_cw?p0-s0*cPoint:p0+s0*cPoint,_v.o[2][1]=p1+s1,_v.o[3][0]=_cw?p0-s0:p0+s0,_v.o[3][1]=p1-s1*cPoint}},extendPrototype([DynamicPropertyContainer],EllShapeProperty),EllShapeProperty}(),StarShapeProperty=function(){function StarShapeProperty(elem,data){this.v=shape_pool.newElement(),this.v.setPathData(!0,0),this.elem=elem,this.comp=elem.comp,this.data=data,this.frameId=-1,this.d=data.d,this.initDynamicPropertyContainer(elem),1===data.sy?(this.ir=PropertyFactory.getProp(elem,data.ir,0,0,this),this.is=PropertyFactory.getProp(elem,data.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(elem,data.pt,0,0,this),this.p=PropertyFactory.getProp(elem,data.p,1,0,this),this.r=PropertyFactory.getProp(elem,data.r,0,degToRads,this),this.or=PropertyFactory.getProp(elem,data.or,0,0,this),this.os=PropertyFactory.getProp(elem,data.os,0,.01,this),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return StarShapeProperty.prototype={reset:resetShape,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var i,rad,roundness,perimSegment,numPts=2*Math.floor(this.pt.v),angle=2*Math.PI/numPts,longFlag=!0,longRad=this.or.v,shortRad=this.ir.v,longRound=this.os.v,shortRound=this.is.v,longPerimSegment=2*Math.PI*longRad/(2*numPts),shortPerimSegment=2*Math.PI*shortRad/(2*numPts),currentAng=-Math.PI/2;currentAng+=this.r.v;var dir=3===this.data.d?-1:1;for(this.v._length=0,i=0;i<numPts;i+=1){rad=longFlag?longRad:shortRad,roundness=longFlag?longRound:shortRound,perimSegment=longFlag?longPerimSegment:shortPerimSegment;var x=rad*Math.cos(currentAng),y=rad*Math.sin(currentAng),ox=0===x&&0===y?0:y/Math.sqrt(x*x+y*y),oy=0===x&&0===y?0:-x/Math.sqrt(x*x+y*y);x+=+this.p.v[0],y+=+this.p.v[1],this.v.setTripleAt(x,y,x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir,x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir,i,!0),longFlag=!longFlag,currentAng+=angle*dir}},convertPolygonToPath:function(){var i,numPts=Math.floor(this.pt.v),angle=2*Math.PI/numPts,rad=this.or.v,roundness=this.os.v,perimSegment=2*Math.PI*rad/(4*numPts),currentAng=-Math.PI/2,dir=3===this.data.d?-1:1;for(currentAng+=this.r.v,this.v._length=0,i=0;i<numPts;i+=1){var x=rad*Math.cos(currentAng),y=rad*Math.sin(currentAng),ox=0===x&&0===y?0:y/Math.sqrt(x*x+y*y),oy=0===x&&0===y?0:-x/Math.sqrt(x*x+y*y);x+=+this.p.v[0],y+=+this.p.v[1],this.v.setTripleAt(x,y,x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir,x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir,i,!0),currentAng+=angle*dir}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],StarShapeProperty),StarShapeProperty}(),RectShapeProperty=function(){function RectShapeProperty(elem,data){this.v=shape_pool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=elem,this.comp=elem.comp,this.frameId=-1,this.d=data.d,this.initDynamicPropertyContainer(elem),this.p=PropertyFactory.getProp(elem,data.p,1,0,this),this.s=PropertyFactory.getProp(elem,data.s,1,0,this),this.r=PropertyFactory.getProp(elem,data.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return RectShapeProperty.prototype={convertRectToPath:function(){var p0=this.p.v[0],p1=this.p.v[1],v0=this.s.v[0]/2,v1=this.s.v[1]/2,round=bm_min(v0,v1,this.r.v),cPoint=round*(1-roundCorner);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(p0+v0,p1-v1+round,p0+v0,p1-v1+round,p0+v0,p1-v1+cPoint,0,!0),this.v.setTripleAt(p0+v0,p1+v1-round,p0+v0,p1+v1-cPoint,p0+v0,p1+v1-round,1,!0),0!==round?(this.v.setTripleAt(p0+v0-round,p1+v1,p0+v0-round,p1+v1,p0+v0-cPoint,p1+v1,2,!0),this.v.setTripleAt(p0-v0+round,p1+v1,p0-v0+cPoint,p1+v1,p0-v0+round,p1+v1,3,!0),this.v.setTripleAt(p0-v0,p1+v1-round,p0-v0,p1+v1-round,p0-v0,p1+v1-cPoint,4,!0),this.v.setTripleAt(p0-v0,p1-v1+round,p0-v0,p1-v1+cPoint,p0-v0,p1-v1+round,5,!0),this.v.setTripleAt(p0-v0+round,p1-v1,p0-v0+round,p1-v1,p0-v0+cPoint,p1-v1,6,!0),this.v.setTripleAt(p0+v0-round,p1-v1,p0+v0-cPoint,p1-v1,p0+v0-round,p1-v1,7,!0)):(this.v.setTripleAt(p0-v0,p1+v1,p0-v0+cPoint,p1+v1,p0-v0,p1+v1,2),this.v.setTripleAt(p0-v0,p1-v1,p0-v0,p1-v1+cPoint,p0-v0,p1-v1,3))):(this.v.setTripleAt(p0+v0,p1-v1+round,p0+v0,p1-v1+cPoint,p0+v0,p1-v1+round,0,!0),0!==round?(this.v.setTripleAt(p0+v0-round,p1-v1,p0+v0-round,p1-v1,p0+v0-cPoint,p1-v1,1,!0),this.v.setTripleAt(p0-v0+round,p1-v1,p0-v0+cPoint,p1-v1,p0-v0+round,p1-v1,2,!0),this.v.setTripleAt(p0-v0,p1-v1+round,p0-v0,p1-v1+round,p0-v0,p1-v1+cPoint,3,!0),this.v.setTripleAt(p0-v0,p1+v1-round,p0-v0,p1+v1-cPoint,p0-v0,p1+v1-round,4,!0),this.v.setTripleAt(p0-v0+round,p1+v1,p0-v0+round,p1+v1,p0-v0+cPoint,p1+v1,5,!0),this.v.setTripleAt(p0+v0-round,p1+v1,p0+v0-cPoint,p1+v1,p0+v0-round,p1+v1,6,!0),this.v.setTripleAt(p0+v0,p1+v1-round,p0+v0,p1+v1-round,p0+v0,p1+v1-cPoint,7,!0)):(this.v.setTripleAt(p0-v0,p1-v1,p0-v0+cPoint,p1-v1,p0-v0,p1-v1,1,!0),this.v.setTripleAt(p0-v0,p1+v1,p0-v0,p1+v1-cPoint,p0-v0,p1+v1,2,!0),this.v.setTripleAt(p0+v0,p1+v1,p0+v0-cPoint,p1+v1,p0+v0,p1+v1,3,!0)))},getValue:function(frameNum){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:resetShape},extendPrototype([DynamicPropertyContainer],RectShapeProperty),RectShapeProperty}(),ob={};return ob.getShapeProp=getShapeProp,ob.getConstructorFunction=getConstructorFunction,ob.getKeyframedConstructorFunction=getKeyframedConstructorFunction,ob}(),ShapeModifiers=function(){function registerModifier(nm,factory){modifiers[nm]||(modifiers[nm]=factory)}function getModifier(nm,elem,data){return new modifiers[nm](elem,data)}var ob={},modifiers={};return ob.registerModifier=registerModifier,ob.getModifier=getModifier,ob}();ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(data){if(!this.closed){var shapeData={shape:data.sh,data:data,localShapeCollection:shapeCollection_pool.newShapeCollection()};this.shapes.push(shapeData),this.addShapeToModifier(shapeData),this._isAnimated&&data.setAsAnimated()}},ShapeModifier.prototype.init=function(elem,data){this.shapes=[],this.elem=elem,this.initDynamicPropertyContainer(elem),this.initModifierProperties(elem,data),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(elem,data){this.s=PropertyFactory.getProp(elem,data.s,0,.01,this),this.e=PropertyFactory.getProp(elem,data.e,0,.01,this),this.o=PropertyFactory.getProp(elem,data.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=data.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(shapeData){shapeData.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(s,e,shapeLength,addedLength,totalModifierLength){var segments=[];e<=1?segments.push({s:s,e:e}):s>=1?segments.push({s:s-1,e:e-1}):(segments.push({s:s,e:1}),segments.push({s:0,e:e-1}));var i,segmentOb,shapeSegments=[],len=segments.length;for(i=0;i<len;i+=1)if(segmentOb=segments[i],segmentOb.e*totalModifierLength<addedLength||segmentOb.s*totalModifierLength>addedLength+shapeLength);else{var shapeS,shapeE;shapeS=segmentOb.s*totalModifierLength<=addedLength?0:(segmentOb.s*totalModifierLength-addedLength)/shapeLength,shapeE=segmentOb.e*totalModifierLength>=addedLength+shapeLength?1:(segmentOb.e*totalModifierLength-addedLength)/shapeLength,shapeSegments.push([shapeS,shapeE])}return shapeSegments.length||shapeSegments.push([0,0]),shapeSegments},TrimModifier.prototype.releasePathsData=function(pathsData){var i,len=pathsData.length;for(i=0;i<len;i+=1)segments_length_pool.release(pathsData[i]);return pathsData.length=0,pathsData},TrimModifier.prototype.processShapes=function(_isFirstFrame){var s,e;if(this._mdf||_isFirstFrame){var o=this.o.v%360/360;if(o<0&&(o+=1),s=(this.s.v>1?1:this.s.v<0?0:this.s.v)+o,e=(this.e.v>1?1:this.e.v<0?0:this.e.v)+o,s>e){var _s=s;s=e,e=_s}s=1e-4*Math.round(1e4*s),e=1e-4*Math.round(1e4*e),this.sValue=s,this.eValue=e}else s=this.sValue,e=this.eValue;var shapePaths,i,j,jLen,pathsData,pathData,totalShapeLength,len=this.shapes.length,totalModifierLength=0;if(e===s)for(i=0;i<len;i+=1)this.shapes[i].localShapeCollection.releaseShapes(),this.shapes[i].shape._mdf=!0,this.shapes[i].shape.paths=this.shapes[i].localShapeCollection;else if(1===e&&0===s||0===e&&1===s){if(this._mdf)for(i=0;i<len;i+=1)this.shapes[i].pathsData.length=0,this.shapes[i].shape._mdf=!0}else{var shapeData,localShapeCollection,segments=[];for(i=0;i<len;i+=1)if(shapeData=this.shapes[i],shapeData.shape._mdf||this._mdf||_isFirstFrame||2===this.m){if(shapePaths=shapeData.shape.paths,jLen=shapePaths._length,totalShapeLength=0,!shapeData.shape._mdf&&shapeData.pathsData.length)totalShapeLength=shapeData.totalShapeLength;else{for(pathsData=this.releasePathsData(shapeData.pathsData),j=0;j<jLen;j+=1)pathData=bez.getSegmentsLength(shapePaths.shapes[j]),pathsData.push(pathData),totalShapeLength+=pathData.totalLength;shapeData.totalShapeLength=totalShapeLength,shapeData.pathsData=pathsData}totalModifierLength+=totalShapeLength,shapeData.shape._mdf=!0}else shapeData.shape.paths=shapeData.localShapeCollection;var edges,shapeS=s,shapeE=e,addedLength=0;for(i=len-1;i>=0;i-=1)if(shapeData=this.shapes[i],shapeData.shape._mdf){for(localShapeCollection=shapeData.localShapeCollection,localShapeCollection.releaseShapes(),2===this.m&&len>1?(edges=this.calculateShapeEdges(s,e,shapeData.totalShapeLength,addedLength,totalModifierLength),addedLength+=shapeData.totalShapeLength):edges=[[shapeS,shapeE]],jLen=edges.length,j=0;j<jLen;j+=1){shapeS=edges[j][0],shapeE=edges[j][1],segments.length=0,shapeE<=1?segments.push({s:shapeData.totalShapeLength*shapeS,e:shapeData.totalShapeLength*shapeE}):shapeS>=1?segments.push({s:shapeData.totalShapeLength*(shapeS-1),e:shapeData.totalShapeLength*(shapeE-1)}):(segments.push({s:shapeData.totalShapeLength*shapeS,e:shapeData.totalShapeLength}),segments.push({s:0,e:shapeData.totalShapeLength*(shapeE-1)}));var newShapesData=this.addShapes(shapeData,segments[0]);if(segments[0].s!==segments[0].e){if(segments.length>1){var lastShapeInCollection=shapeData.shape.paths.shapes[shapeData.shape.paths._length-1];if(lastShapeInCollection.c){var lastShape=newShapesData.pop();this.addPaths(newShapesData,localShapeCollection),newShapesData=this.addShapes(shapeData,segments[1],lastShape)}else this.addPaths(newShapesData,localShapeCollection),newShapesData=this.addShapes(shapeData,segments[1])}this.addPaths(newShapesData,localShapeCollection)}}shapeData.shape.paths=localShapeCollection}}},TrimModifier.prototype.addPaths=function(newPaths,localShapeCollection){var i,len=newPaths.length;for(i=0;i<len;i+=1)localShapeCollection.addShape(newPaths[i])},TrimModifier.prototype.addSegment=function(pt1,pt2,pt3,pt4,shapePath,pos,newShape){shapePath.setXYAt(pt2[0],pt2[1],"o",pos),shapePath.setXYAt(pt3[0],pt3[1],"i",pos+1),newShape&&shapePath.setXYAt(pt1[0],pt1[1],"v",pos),shapePath.setXYAt(pt4[0],pt4[1],"v",pos+1)},TrimModifier.prototype.addSegmentFromArray=function(points,shapePath,pos,newShape){shapePath.setXYAt(points[1],points[5],"o",pos),shapePath.setXYAt(points[2],points[6],"i",pos+1),newShape&&shapePath.setXYAt(points[0],points[4],"v",pos),shapePath.setXYAt(points[3],points[7],"v",pos+1)},TrimModifier.prototype.addShapes=function(shapeData,shapeSegment,shapePath){var i,j,jLen,currentLengthData,segmentCount,lengths,segment,initPos,pathsData=shapeData.pathsData,shapePaths=shapeData.shape.paths.shapes,len=shapeData.shape.paths._length,addedLength=0,shapes=[],newShape=!0;for(shapePath?(segmentCount=shapePath._length,initPos=shapePath._length):(shapePath=shape_pool.newElement(),segmentCount=0,initPos=0),shapes.push(shapePath),i=0;i<len;i+=1){for(lengths=pathsData[i].lengths,shapePath.c=shapePaths[i].c,jLen=shapePaths[i].c?lengths.length:lengths.length+1,j=1;j<jLen;j+=1)if(currentLengthData=lengths[j-1],addedLength+currentLengthData.addedLength<shapeSegment.s)addedLength+=currentLengthData.addedLength,shapePath.c=!1;else{if(addedLength>shapeSegment.e){shapePath.c=!1;break}shapeSegment.s<=addedLength&&shapeSegment.e>=addedLength+currentLengthData.addedLength?(this.addSegment(shapePaths[i].v[j-1],shapePaths[i].o[j-1],shapePaths[i].i[j],shapePaths[i].v[j],shapePath,segmentCount,newShape),newShape=!1):(segment=bez.getNewSegment(shapePaths[i].v[j-1],shapePaths[i].v[j],shapePaths[i].o[j-1],shapePaths[i].i[j],(shapeSegment.s-addedLength)/currentLengthData.addedLength,(shapeSegment.e-addedLength)/currentLengthData.addedLength,lengths[j-1]),this.addSegmentFromArray(segment,shapePath,segmentCount,newShape),newShape=!1,shapePath.c=!1),addedLength+=currentLengthData.addedLength,segmentCount+=1}if(shapePaths[i].c&&lengths.length){if(currentLengthData=lengths[j-1],addedLength<=shapeSegment.e){var segmentLength=lengths[j-1].addedLength;shapeSegment.s<=addedLength&&shapeSegment.e>=addedLength+segmentLength?(this.addSegment(shapePaths[i].v[j-1],shapePaths[i].o[j-1],shapePaths[i].i[0],shapePaths[i].v[0],shapePath,segmentCount,newShape),newShape=!1):(segment=bez.getNewSegment(shapePaths[i].v[j-1],shapePaths[i].v[0],shapePaths[i].o[j-1],shapePaths[i].i[0],(shapeSegment.s-addedLength)/segmentLength,(shapeSegment.e-addedLength)/segmentLength,lengths[j-1]),this.addSegmentFromArray(segment,shapePath,segmentCount,newShape),newShape=!1,shapePath.c=!1)}else shapePath.c=!1;addedLength+=currentLengthData.addedLength,segmentCount+=1}if(shapePath._length&&(shapePath.setXYAt(shapePath.v[initPos][0],shapePath.v[initPos][1],"i",initPos),shapePath.setXYAt(shapePath.v[shapePath._length-1][0],shapePath.v[shapePath._length-1][1],"o",shapePath._length-1)),addedLength>shapeSegment.e)break;i<len-1&&(shapePath=shape_pool.newElement(),newShape=!0,shapes.push(shapePath),segmentCount=0)}return shapes},ShapeModifiers.registerModifier("tm",TrimModifier),extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(elem,data){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(elem,data.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(path,round){var cloned_path=shape_pool.newElement();cloned_path.c=path.c;var i,currentV,currentI,currentO,closerV,distance,newPosPerc,vX,vY,oX,oY,iX,iY,len=path._length,index=0;for(i=0;i<len;i+=1)currentV=path.v[i],currentO=path.o[i],currentI=path.i[i],currentV[0]===currentO[0]&&currentV[1]===currentO[1]&&currentV[0]===currentI[0]&&currentV[1]===currentI[1]?0!==i&&i!==len-1||path.c?(closerV=0===i?path.v[len-1]:path.v[i-1],distance=Math.sqrt(Math.pow(currentV[0]-closerV[0],2)+Math.pow(currentV[1]-closerV[1],2)),newPosPerc=distance?Math.min(distance/2,round)/distance:0,vX=iX=currentV[0]+(closerV[0]-currentV[0])*newPosPerc,vY=iY=currentV[1]-(currentV[1]-closerV[1])*newPosPerc,oX=vX-(vX-currentV[0])*roundCorner,oY=vY-(vY-currentV[1])*roundCorner,cloned_path.setTripleAt(vX,vY,oX,oY,iX,iY,index),index+=1,closerV=i===len-1?path.v[0]:path.v[i+1],distance=Math.sqrt(Math.pow(currentV[0]-closerV[0],2)+Math.pow(currentV[1]-closerV[1],2)),newPosPerc=distance?Math.min(distance/2,round)/distance:0,vX=oX=currentV[0]+(closerV[0]-currentV[0])*newPosPerc,vY=oY=currentV[1]+(closerV[1]-currentV[1])*newPosPerc,iX=vX-(vX-currentV[0])*roundCorner,iY=vY-(vY-currentV[1])*roundCorner,cloned_path.setTripleAt(vX,vY,oX,oY,iX,iY,index),index+=1):(cloned_path.setTripleAt(currentV[0],currentV[1],currentO[0],currentO[1],currentI[0],currentI[1],index),index+=1):(cloned_path.setTripleAt(path.v[i][0],path.v[i][1],path.o[i][0],path.o[i][1],path.i[i][0],path.i[i][1],index),index+=1);return cloned_path},RoundCornersModifier.prototype.processShapes=function(_isFirstFrame){var shapePaths,i,j,jLen,len=this.shapes.length,rd=this.rd.v;if(0!==rd){var shapeData,localShapeCollection;for(i=0;i<len;i+=1){if(shapeData=this.shapes[i],shapeData.shape.paths,localShapeCollection=shapeData.localShapeCollection,shapeData.shape._mdf||this._mdf||_isFirstFrame)for(localShapeCollection.releaseShapes(),shapeData.shape._mdf=!0,shapePaths=shapeData.shape.paths.shapes,jLen=shapeData.shape.paths._length,j=0;j<jLen;j+=1)localShapeCollection.addShape(this.processPath(shapePaths[j],rd));shapeData.shape.paths=shapeData.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)},ShapeModifiers.registerModifier("rd",RoundCornersModifier),extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(elem,data){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(elem,data.c,0,null,this),this.o=PropertyFactory.getProp(elem,data.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(elem,data.tr,this),this.so=PropertyFactory.getProp(elem,data.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(elem,data.tr.eo,0,.01,this),this.data=data,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(pMatrix,rMatrix,sMatrix,transform,perc,inv){var dir=inv?-1:1,scaleX=transform.s.v[0]+(1-transform.s.v[0])*(1-perc),scaleY=transform.s.v[1]+(1-transform.s.v[1])*(1-perc);pMatrix.translate(transform.p.v[0]*dir*perc,transform.p.v[1]*dir*perc,transform.p.v[2]),rMatrix.translate(-transform.a.v[0],-transform.a.v[1],transform.a.v[2]),rMatrix.rotate(-transform.r.v*dir*perc),rMatrix.translate(transform.a.v[0],transform.a.v[1],transform.a.v[2]),sMatrix.translate(-transform.a.v[0],-transform.a.v[1],transform.a.v[2]),sMatrix.scale(inv?1/scaleX:scaleX,inv?1/scaleY:scaleY),sMatrix.translate(transform.a.v[0],transform.a.v[1],transform.a.v[2])},RepeaterModifier.prototype.init=function(elem,arr,pos,elemsData){this.elem=elem,this.arr=arr,this.pos=pos,this.elemsData=elemsData,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(elem),this.initModifierProperties(elem,arr[pos]);for(var cont=0;pos>0;)pos-=1,this._elements.unshift(arr[pos]),cont+=1;this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(elements){var i,len=elements.length;for(i=0;i<len;i+=1)elements[i]._processed=!1,"gr"===elements[i].ty&&this.resetElements(elements[i].it)},RepeaterModifier.prototype.cloneElements=function(elements){var newElements=(elements.length,JSON.parse(JSON.stringify(elements)));return this.resetElements(newElements),newElements},RepeaterModifier.prototype.changeGroupRender=function(elements,renderFlag){var i,len=elements.length;for(i=0;i<len;i+=1)elements[i]._render=renderFlag,"gr"===elements[i].ty&&this.changeGroupRender(elements[i].it,renderFlag)},RepeaterModifier.prototype.processShapes=function(_isFirstFrame){var items,itemsTransform,i,dir,cont;if(this._mdf||_isFirstFrame){var copies=Math.ceil(this.c.v);if(this._groups.length<copies){for(;this._groups.length<copies;){var group={it:this.cloneElements(this._elements),ty:"gr"};group.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,group),this._groups.splice(0,0,group),this._currentCopies+=1}this.elem.reloadShapes()}cont=0;var renderFlag;for(i=0;i<=this._groups.length-1;i+=1)renderFlag=cont<copies,this._groups[i]._render=renderFlag,this.changeGroupRender(this._groups[i].it,renderFlag),cont+=1;this._currentCopies=copies;var offset=this.o.v,offsetModulo=offset%1,roundOffset=offset>0?Math.floor(offset):Math.ceil(offset),pProps=(this.tr.v.props,this.pMatrix.props),rProps=this.rMatrix.props,sProps=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var iteration=0;if(offset>0){for(;iteration<roundOffset;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),iteration+=1;offsetModulo&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,offsetModulo,!1),iteration+=offsetModulo)}else if(offset<0){for(;iteration>roundOffset;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),iteration-=1;offsetModulo&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-offsetModulo,!0),iteration-=offsetModulo)}i=1===this.data.m?0:this._currentCopies-1,dir=1===this.data.m?1:-1,cont=this._currentCopies;for(var j,jLen;cont;){if(items=this.elemsData[i].it,itemsTransform=items[items.length-1].transform.mProps.v.props,jLen=itemsTransform.length,items[items.length-1].transform.mProps._mdf=!0,items[items.length-1].transform.op._mdf=!0,items[items.length-1].transform.op.v=this.so.v+(this.eo.v-this.so.v)*(i/(this._currentCopies-1)),0!==iteration){for((0!==i&&1===dir||i!==this._currentCopies-1&&-1===dir)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(rProps[0],rProps[1],rProps[2],rProps[3],rProps[4],rProps[5],rProps[6],rProps[7],rProps[8],rProps[9],rProps[10],rProps[11],rProps[12],rProps[13],rProps[14],rProps[15]),this.matrix.transform(sProps[0],sProps[1],sProps[2],sProps[3],sProps[4],sProps[5],sProps[6],sProps[7],sProps[8],sProps[9],sProps[10],sProps[11],sProps[12],sProps[13],sProps[14],sProps[15]),this.matrix.transform(pProps[0],pProps[1],pProps[2],pProps[3],pProps[4],pProps[5],pProps[6],pProps[7],pProps[8],pProps[9],pProps[10],pProps[11],pProps[12],pProps[13],pProps[14],pProps[15]),j=0;j<jLen;j+=1)itemsTransform[j]=this.matrix.props[j];this.matrix.reset()}else for(this.matrix.reset(),j=0;j<jLen;j+=1)itemsTransform[j]=this.matrix.props[j];iteration+=1,cont-=1,i+=dir}}else for(cont=this._currentCopies,i=0,dir=1;cont;)items=this.elemsData[i].it,itemsTransform=items[items.length-1].transform.mProps.v.props,items[items.length-1].transform.mProps._mdf=!1,items[items.length-1].transform.op._mdf=!1,cont-=1,i+=dir},RepeaterModifier.prototype.addShape=function(){},ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeCollection.prototype.addShape=function(shapeData){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=shapeData,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var i;for(i=0;i<this._length;i+=1)shape_pool.release(this.shapes[i]);this._length=0},DashProperty.prototype.getValue=function(forceRender){if((this.elem.globalData.frameId!==this.frameId||forceRender)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||forceRender,this._mdf)){var i=0,len=this.dataProps.length;for("svg"===this.renderer&&(this.dashStr=""),i=0;i<len;i+=1)"o"!=this.dataProps[i].n?"svg"===this.renderer?this.dashStr+=" "+this.dataProps[i].p.v:this.dashArray[i]=this.dataProps[i].p.v:this.dashoffset[0]=this.dataProps[i].p.v}},
extendPrototype([DynamicPropertyContainer],DashProperty),GradientProperty.prototype.comparePoints=function(values,points){for(var i=0,len=this.o.length/2;i<len;){if(Math.abs(values[4*i]-values[4*points+2*i])>.01)return!1;i+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var i=0,len=this.data.k.k.length;i<len;){if(!this.comparePoints(this.data.k.k[i].s,this.data.p))return!1;i+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(forceRender){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||forceRender){var i,mult,val,len=4*this.data.p;for(i=0;i<len;i+=1)mult=i%4==0?100:255,val=Math.round(this.prop.v[i]*mult),this.c[i]!==val&&(this.c[i]=val,this._cmdf=!forceRender);if(this.o.length)for(len=this.prop.v.length,i=4*this.data.p;i<len;i+=1)mult=i%2==0?100:1,val=i%2==0?Math.round(100*this.prop.v[i]):this.prop.v[i],this.o[i-4*this.data.p]!==val&&(this.o[i-4*this.data.p]=val,this._omdf=!forceRender);this._mdf=!forceRender}},extendPrototype([DynamicPropertyContainer],GradientProperty);var buildShapeString=function(pathNodes,length,closed,mat){if(0===length)return"";var i,_o=pathNodes.o,_i=pathNodes.i,_v=pathNodes.v,shapeString=" M"+mat.applyToPointStringified(_v[0][0],_v[0][1]);for(i=1;i<length;i+=1)shapeString+=" C"+mat.applyToPointStringified(_o[i-1][0],_o[i-1][1])+" "+mat.applyToPointStringified(_i[i][0],_i[i][1])+" "+mat.applyToPointStringified(_v[i][0],_v[i][1]);return closed&&length&&(shapeString+=" C"+mat.applyToPointStringified(_o[i-1][0],_o[i-1][1])+" "+mat.applyToPointStringified(_i[0][0],_i[0][1])+" "+mat.applyToPointStringified(_v[0][0],_v[0][1]),shapeString+="z"),shapeString},ImagePreloader=function(){function imageLoaded(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function getAssetsPath(assetData,assetsPath,original_path){var path="";if(assetData.e)path=assetData.p;else if(assetsPath){var imagePath=assetData.p;-1!==imagePath.indexOf("images/")&&(imagePath=imagePath.split("/")[1]),path=assetsPath+imagePath}else path=original_path,path+=assetData.u?assetData.u:"",path+=assetData.p;return path}function createImageData(assetData){var path=getAssetsPath(assetData,this.assetsPath,this.path),img=createTag("img");img.crossOrigin="anonymous",img.addEventListener("load",this._imageLoaded.bind(this),!1),img.addEventListener("error",function(){ob.img=proxyImage,this._imageLoaded()}.bind(this),!1),img.src=path;var ob={img:img,assetData:assetData};return ob}function loadAssets(assets,cb){this.imagesLoadedCb=cb;var i,len=assets.length;for(i=0;i<len;i+=1)assets[i].layers||(this.totalImages+=1,this.images.push(this._createImageData(assets[i])))}function setPath(path){this.path=path||""}function setAssetsPath(path){this.assetsPath=path||""}function getImage(assetData){for(var i=0,len=this.images.length;i<len;){if(this.images[i].assetData===assetData)return this.images[i].img;i+=1}}function destroy(){this.imagesLoadedCb=null,this.images.length=0}function loaded(){return this.totalImages===this.loadedAssets}var proxyImage=function(){var canvas=createTag("canvas");canvas.width=1,canvas.height=1;var ctx=canvas.getContext("2d");return ctx.fillStyle="#FF0000",ctx.fillRect(0,0,1,1),canvas}();return function(){this.loadAssets=loadAssets,this.setAssetsPath=setAssetsPath,this.setPath=setPath,this.loaded=loaded,this.destroy=destroy,this.getImage=getImage,this._createImageData=createImageData,this._imageLoaded=imageLoaded,this.assetsPath="",this.path="",this.totalImages=0,this.loadedAssets=0,this.imagesLoadedCb=null,this.images=[]}}(),featureSupport=function(){var ob={maskType:!0};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(ob.maskType=!1),ob}(),filtersFactory=function(){function createFilter(filId){var fil=createNS("filter");return fil.setAttribute("id",filId),fil.setAttribute("filterUnits","objectBoundingBox"),fil.setAttribute("x","0%"),fil.setAttribute("y","0%"),fil.setAttribute("width","100%"),fil.setAttribute("height","100%"),fil}function createAlphaToLuminanceFilter(){var feColorMatrix=createNS("feColorMatrix");return feColorMatrix.setAttribute("type","matrix"),feColorMatrix.setAttribute("color-interpolation-filters","sRGB"),feColorMatrix.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),feColorMatrix}var ob={};return ob.createFilter=createFilter,ob.createAlphaToLuminanceFilter=createAlphaToLuminanceFilter,ob}(),assetLoader=function(){function formatResponse(xhr){return xhr.response&&"object"==typeof xhr.response?xhr.response:xhr.response&&"string"==typeof xhr.response?JSON.parse(xhr.response):xhr.responseText?JSON.parse(xhr.responseText):void 0}function loadAsset(path,callback,errorCallback){var response,xhr=new XMLHttpRequest;xhr.open("GET",path,!0),xhr.responseType="json",xhr.send(),xhr.onreadystatechange=function(){if(4==xhr.readyState)if(200==xhr.status)response=formatResponse(xhr),callback(response);else try{response=formatResponse(xhr),callback(response)}catch(err){errorCallback&&errorCallback(err)}}}return{load:loadAsset}}();TextAnimatorProperty.prototype.searchProperties=function(){var i,animatorProps,len=this._textData.a.length,getProp=PropertyFactory.getProp;for(i=0;i<len;i+=1)animatorProps=this._textData.a[i],this._animatorsData[i]=new TextAnimatorDataProperty(this._elem,animatorProps,this);this._textData.p&&"m"in this._textData.p?(this._pathData={f:getProp(this._elem,this._textData.p.f,0,0,this),l:getProp(this._elem,this._textData.p.l,0,0,this),r:this._textData.p.r,m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=getProp(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(documentData,lettersChangedFlag){if(this.lettersChangedFlag=lettersChangedFlag,this._mdf||this._isFirstFrame||lettersChangedFlag||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var xPos,yPos,i,len,pathInfo,currentLength,currentPoint,segmentLength,flag,pointInd,segmentInd,prevPoint,points,segments,partialLength,totalLength,perc,tanAngle,mask,alignment=this._moreOptions.alignment.v,animators=this._animatorsData,textData=this._textData,matrixHelper=this.mHelper,renderType=this._renderType,renderedLettersCount=this.renderedLetters.length,letters=(this.data,documentData.l);if(this._hasMaskedPath){if(mask=this._pathData.m,!this._pathData.n||this._pathData._mdf){var paths=mask.v;this._pathData.r&&(paths=paths.reverse()),pathInfo={tLength:0,segments:[]},len=paths._length-1;var bezierData;for(totalLength=0,i=0;i<len;i+=1)bezierData=bez.buildBezierData(paths.v[i],paths.v[i+1],[paths.o[i][0]-paths.v[i][0],paths.o[i][1]-paths.v[i][1]],[paths.i[i+1][0]-paths.v[i+1][0],paths.i[i+1][1]-paths.v[i+1][1]]),pathInfo.tLength+=bezierData.segmentLength,pathInfo.segments.push(bezierData),totalLength+=bezierData.segmentLength;i=len,mask.v.c&&(bezierData=bez.buildBezierData(paths.v[i],paths.v[0],[paths.o[i][0]-paths.v[i][0],paths.o[i][1]-paths.v[i][1]],[paths.i[0][0]-paths.v[0][0],paths.i[0][1]-paths.v[0][1]]),pathInfo.tLength+=bezierData.segmentLength,pathInfo.segments.push(bezierData),totalLength+=bezierData.segmentLength),this._pathData.pi=pathInfo}if(pathInfo=this._pathData.pi,currentLength=this._pathData.f.v,segmentInd=0,pointInd=1,segmentLength=0,flag=!0,segments=pathInfo.segments,currentLength<0&&mask.v.c)for(pathInfo.tLength<Math.abs(currentLength)&&(currentLength=-Math.abs(currentLength)%pathInfo.tLength),segmentInd=segments.length-1,points=segments[segmentInd].points,pointInd=points.length-1;currentLength<0;)currentLength+=points[pointInd].partialLength,(pointInd-=1)<0&&(segmentInd-=1,points=segments[segmentInd].points,pointInd=points.length-1);points=segments[segmentInd].points,prevPoint=points[pointInd-1],currentPoint=points[pointInd],partialLength=currentPoint.partialLength}len=letters.length,xPos=0,yPos=0;var animatorProps,animatorSelector,j,jLen,letterValue,yOff=1.2*documentData.finalSize*.714,firstLine=!0;jLen=animators.length;var mult,offf,xPathPos,yPathPos,elemOpacity,sc,sw,fc,k,letterSw,letterSc,letterFc,letterO,ind=-1,initPathPos=currentLength,initSegmentInd=segmentInd,initPointInd=pointInd,currentLine=-1,lineLength=0,letterM="",letterP=this.defaultPropsArray;if(2===documentData.j||1===documentData.j){var animatorJustifyOffset=0,animatorFirstCharOffset=0,justifyOffsetMult=2===documentData.j?-.5:-1,lastIndex=0,isNewLine=!0;for(i=0;i<len;i+=1)if(letters[i].n){for(animatorJustifyOffset&&(animatorJustifyOffset+=animatorFirstCharOffset);lastIndex<i;)letters[lastIndex].animatorJustifyOffset=animatorJustifyOffset,lastIndex+=1;animatorJustifyOffset=0,isNewLine=!0}else{for(j=0;j<jLen;j+=1)animatorProps=animators[j].a,animatorProps.t.propType&&(isNewLine&&2===documentData.j&&(animatorFirstCharOffset+=animatorProps.t.v*justifyOffsetMult),animatorSelector=animators[j].s,mult=animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars),mult.length?animatorJustifyOffset+=animatorProps.t.v*mult[0]*justifyOffsetMult:animatorJustifyOffset+=animatorProps.t.v*mult*justifyOffsetMult);isNewLine=!1}for(animatorJustifyOffset&&(animatorJustifyOffset+=animatorFirstCharOffset);lastIndex<i;)letters[lastIndex].animatorJustifyOffset=animatorJustifyOffset,lastIndex+=1}for(i=0;i<len;i+=1){if(matrixHelper.reset(),elemOpacity=1,letters[i].n)xPos=0,yPos+=documentData.yOffset,yPos+=firstLine?1:0,currentLength=initPathPos,firstLine=!1,lineLength=0,this._hasMaskedPath&&(segmentInd=initSegmentInd,pointInd=initPointInd,points=segments[segmentInd].points,prevPoint=points[pointInd-1],currentPoint=points[pointInd],partialLength=currentPoint.partialLength,segmentLength=0),letterO=letterSw=letterFc=letterM="",letterP=this.defaultPropsArray;else{if(this._hasMaskedPath){if(currentLine!==letters[i].line){switch(documentData.j){case 1:currentLength+=totalLength-documentData.lineWidths[letters[i].line];break;case 2:currentLength+=(totalLength-documentData.lineWidths[letters[i].line])/2}currentLine=letters[i].line}ind!==letters[i].ind&&(letters[ind]&&(currentLength+=letters[ind].extra),currentLength+=letters[i].an/2,ind=letters[i].ind),currentLength+=alignment[0]*letters[i].an/200;var animatorOffset=0;for(j=0;j<jLen;j+=1)animatorProps=animators[j].a,animatorProps.p.propType&&(animatorSelector=animators[j].s,mult=animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars),mult.length?animatorOffset+=animatorProps.p.v[0]*mult[0]:animatorOffset+=animatorProps.p.v[0]*mult),animatorProps.a.propType&&(animatorSelector=animators[j].s,mult=animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars),mult.length?animatorOffset+=animatorProps.a.v[0]*mult[0]:animatorOffset+=animatorProps.a.v[0]*mult);for(flag=!0;flag;)segmentLength+partialLength>=currentLength+animatorOffset||!points?(perc=(currentLength+animatorOffset-segmentLength)/currentPoint.partialLength,xPathPos=prevPoint.point[0]+(currentPoint.point[0]-prevPoint.point[0])*perc,yPathPos=prevPoint.point[1]+(currentPoint.point[1]-prevPoint.point[1])*perc,matrixHelper.translate(-alignment[0]*letters[i].an/200,-alignment[1]*yOff/100),flag=!1):points&&(segmentLength+=currentPoint.partialLength,pointInd+=1,pointInd>=points.length&&(pointInd=0,segmentInd+=1,segments[segmentInd]?points=segments[segmentInd].points:mask.v.c?(pointInd=0,segmentInd=0,points=segments[segmentInd].points):(segmentLength-=currentPoint.partialLength,points=null)),points&&(prevPoint=currentPoint,currentPoint=points[pointInd],partialLength=currentPoint.partialLength));offf=letters[i].an/2-letters[i].add,matrixHelper.translate(-offf,0,0)}else offf=letters[i].an/2-letters[i].add,matrixHelper.translate(-offf,0,0),matrixHelper.translate(-alignment[0]*letters[i].an/200,-alignment[1]*yOff/100,0);for(lineLength+=letters[i].l/2,j=0;j<jLen;j+=1)animatorProps=animators[j].a,animatorProps.t.propType&&(animatorSelector=animators[j].s,mult=animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars),0===xPos&&0===documentData.j||(this._hasMaskedPath?mult.length?currentLength+=animatorProps.t.v*mult[0]:currentLength+=animatorProps.t.v*mult:mult.length?xPos+=animatorProps.t.v*mult[0]:xPos+=animatorProps.t.v*mult));for(lineLength+=letters[i].l/2,documentData.strokeWidthAnim&&(sw=documentData.sw||0),documentData.strokeColorAnim&&(sc=documentData.sc?[documentData.sc[0],documentData.sc[1],documentData.sc[2]]:[0,0,0]),documentData.fillColorAnim&&documentData.fc&&(fc=[documentData.fc[0],documentData.fc[1],documentData.fc[2]]),j=0;j<jLen;j+=1)animatorProps=animators[j].a,animatorProps.a.propType&&(animatorSelector=animators[j].s,mult=animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars),mult.length?matrixHelper.translate(-animatorProps.a.v[0]*mult[0],-animatorProps.a.v[1]*mult[1],animatorProps.a.v[2]*mult[2]):matrixHelper.translate(-animatorProps.a.v[0]*mult,-animatorProps.a.v[1]*mult,animatorProps.a.v[2]*mult));for(j=0;j<jLen;j+=1)animatorProps=animators[j].a,animatorProps.s.propType&&(animatorSelector=animators[j].s,mult=animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars),mult.length?matrixHelper.scale(1+(animatorProps.s.v[0]-1)*mult[0],1+(animatorProps.s.v[1]-1)*mult[1],1):matrixHelper.scale(1+(animatorProps.s.v[0]-1)*mult,1+(animatorProps.s.v[1]-1)*mult,1));for(j=0;j<jLen;j+=1){if(animatorProps=animators[j].a,animatorSelector=animators[j].s,mult=animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars),animatorProps.sk.propType&&(mult.length?matrixHelper.skewFromAxis(-animatorProps.sk.v*mult[0],animatorProps.sa.v*mult[1]):matrixHelper.skewFromAxis(-animatorProps.sk.v*mult,animatorProps.sa.v*mult)),animatorProps.r.propType&&(mult.length?matrixHelper.rotateZ(-animatorProps.r.v*mult[2]):matrixHelper.rotateZ(-animatorProps.r.v*mult)),animatorProps.ry.propType&&(mult.length?matrixHelper.rotateY(animatorProps.ry.v*mult[1]):matrixHelper.rotateY(animatorProps.ry.v*mult)),animatorProps.rx.propType&&(mult.length?matrixHelper.rotateX(animatorProps.rx.v*mult[0]):matrixHelper.rotateX(animatorProps.rx.v*mult)),animatorProps.o.propType&&(mult.length?elemOpacity+=(animatorProps.o.v*mult[0]-elemOpacity)*mult[0]:elemOpacity+=(animatorProps.o.v*mult-elemOpacity)*mult),documentData.strokeWidthAnim&&animatorProps.sw.propType&&(mult.length?sw+=animatorProps.sw.v*mult[0]:sw+=animatorProps.sw.v*mult),documentData.strokeColorAnim&&animatorProps.sc.propType)for(k=0;k<3;k+=1)mult.length?sc[k]=sc[k]+(animatorProps.sc.v[k]-sc[k])*mult[0]:sc[k]=sc[k]+(animatorProps.sc.v[k]-sc[k])*mult;if(documentData.fillColorAnim&&documentData.fc){if(animatorProps.fc.propType)for(k=0;k<3;k+=1)mult.length?fc[k]=fc[k]+(animatorProps.fc.v[k]-fc[k])*mult[0]:fc[k]=fc[k]+(animatorProps.fc.v[k]-fc[k])*mult;animatorProps.fh.propType&&(fc=mult.length?addHueToRGB(fc,animatorProps.fh.v*mult[0]):addHueToRGB(fc,animatorProps.fh.v*mult)),animatorProps.fs.propType&&(fc=mult.length?addSaturationToRGB(fc,animatorProps.fs.v*mult[0]):addSaturationToRGB(fc,animatorProps.fs.v*mult)),animatorProps.fb.propType&&(fc=mult.length?addBrightnessToRGB(fc,animatorProps.fb.v*mult[0]):addBrightnessToRGB(fc,animatorProps.fb.v*mult))}}for(j=0;j<jLen;j+=1)animatorProps=animators[j].a,animatorProps.p.propType&&(animatorSelector=animators[j].s,mult=animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars),this._hasMaskedPath?mult.length?matrixHelper.translate(0,animatorProps.p.v[1]*mult[0],-animatorProps.p.v[2]*mult[1]):matrixHelper.translate(0,animatorProps.p.v[1]*mult,-animatorProps.p.v[2]*mult):mult.length?matrixHelper.translate(animatorProps.p.v[0]*mult[0],animatorProps.p.v[1]*mult[1],-animatorProps.p.v[2]*mult[2]):matrixHelper.translate(animatorProps.p.v[0]*mult,animatorProps.p.v[1]*mult,-animatorProps.p.v[2]*mult));if(documentData.strokeWidthAnim&&(letterSw=sw<0?0:sw),documentData.strokeColorAnim&&(letterSc="rgb("+Math.round(255*sc[0])+","+Math.round(255*sc[1])+","+Math.round(255*sc[2])+")"),documentData.fillColorAnim&&documentData.fc&&(letterFc="rgb("+Math.round(255*fc[0])+","+Math.round(255*fc[1])+","+Math.round(255*fc[2])+")"),this._hasMaskedPath){if(matrixHelper.translate(0,-documentData.ls),matrixHelper.translate(0,alignment[1]*yOff/100+yPos,0),textData.p.p){tanAngle=(currentPoint.point[1]-prevPoint.point[1])/(currentPoint.point[0]-prevPoint.point[0]);var rot=180*Math.atan(tanAngle)/Math.PI;currentPoint.point[0]<prevPoint.point[0]&&(rot+=180),matrixHelper.rotate(-rot*Math.PI/180)}matrixHelper.translate(xPathPos,yPathPos,0),currentLength-=alignment[0]*letters[i].an/200,letters[i+1]&&ind!==letters[i+1].ind&&(currentLength+=letters[i].an/2,currentLength+=documentData.tr/1e3*documentData.finalSize)}else{switch(matrixHelper.translate(xPos,yPos,0),documentData.ps&&matrixHelper.translate(documentData.ps[0],documentData.ps[1]+documentData.ascent,0),documentData.j){case 1:matrixHelper.translate(letters[i].animatorJustifyOffset+documentData.justifyOffset+(documentData.boxWidth-documentData.lineWidths[letters[i].line]),0,0);break;case 2:matrixHelper.translate(letters[i].animatorJustifyOffset+documentData.justifyOffset+(documentData.boxWidth-documentData.lineWidths[letters[i].line])/2,0,0)}matrixHelper.translate(0,-documentData.ls),matrixHelper.translate(offf,0,0),matrixHelper.translate(alignment[0]*letters[i].an/200,alignment[1]*yOff/100,0),xPos+=letters[i].l+documentData.tr/1e3*documentData.finalSize}"html"===renderType?letterM=matrixHelper.toCSS():"svg"===renderType?letterM=matrixHelper.to2dCSS():letterP=[matrixHelper.props[0],matrixHelper.props[1],matrixHelper.props[2],matrixHelper.props[3],matrixHelper.props[4],matrixHelper.props[5],matrixHelper.props[6],matrixHelper.props[7],matrixHelper.props[8],matrixHelper.props[9],matrixHelper.props[10],matrixHelper.props[11],matrixHelper.props[12],matrixHelper.props[13],matrixHelper.props[14],matrixHelper.props[15]],letterO=elemOpacity}renderedLettersCount<=i?(letterValue=new LetterProps(letterO,letterSw,letterSc,letterFc,letterM,letterP),this.renderedLetters.push(letterValue),renderedLettersCount+=1,this.lettersChangedFlag=!0):(letterValue=this.renderedLetters[i],this.lettersChangedFlag=letterValue.update(letterO,letterSw,letterSc,letterFc,letterM,letterP)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),LetterProps.prototype.update=function(o,sw,sc,fc,m,p){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var updated=!1;return this.o!==o&&(this.o=o,this._mdf.o=!0,updated=!0),this.sw!==sw&&(this.sw=sw,this._mdf.sw=!0,updated=!0),this.sc!==sc&&(this.sc=sc,this._mdf.sc=!0,updated=!0),this.fc!==fc&&(this.fc=fc,this._mdf.fc=!0,updated=!0),this.m!==m&&(this.m=m,this._mdf.m=!0,updated=!0),!p.length||this.p[0]===p[0]&&this.p[1]===p[1]&&this.p[4]===p[4]&&this.p[5]===p[5]&&this.p[12]===p[12]&&this.p[13]===p[13]||(this.p=p,this._mdf.p=!0,updated=!0),updated},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(obj,data){for(var s in data)data.hasOwnProperty(s)&&(obj[s]=data[s]);return obj},TextProperty.prototype.setCurrentData=function(data){data.__complete||this.completeTextData(data),this.currentData=data,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(effectFunction){this.effectsSequence.push(effectFunction),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(_finalValue){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||_finalValue){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var currentValue=this.currentData,currentIndex=this.keysIndex;if(this.lock)return void this.setCurrentData(this.currentData);this.lock=!0,this._mdf=!1;var i,len=this.effectsSequence.length,finalValue=_finalValue||this.data.d.k[this.keysIndex].s;for(i=0;i<len;i+=1)finalValue=currentIndex!==this.keysIndex?this.effectsSequence[i](finalValue,finalValue.t):this.effectsSequence[i](this.currentData,finalValue.t);currentValue!==finalValue&&this.setCurrentData(finalValue),this.pv=this.v=this.currentData,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var textKeys=this.data.d.k,frameNum=this.elem.comp.renderedFrame,i=0,len=textKeys.length;i<=len-1&&(textKeys[i].s,!(i===len-1||textKeys[i+1].t>frameNum));)i+=1;return this.keysIndex!==i&&(this.keysIndex=i),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(text){for(var combinedCharacters=FontManager.getCombinedCharacterCodes(),charactersArray=[],i=0,len=text.length;i<len;)-1!==combinedCharacters.indexOf(text.charCodeAt(i))?charactersArray[charactersArray.length-1]+=text.charAt(i):charactersArray.push(text.charAt(i)),i+=1;return charactersArray},TextProperty.prototype.completeTextData=function(documentData){documentData.__complete=!0;var i,len,newLineFlag,val,j,jLen,charData,fontManager=this.elem.globalData.fontManager,data=this.data,letters=[],index=0,anchorGrouping=data.m.g,currentSize=0,currentPos=0,currentLine=0,lineWidths=[],lineWidth=0,maxLineWidth=0,fontData=fontManager.getFontByName(documentData.f),cLength=0,styles=fontData.fStyle?fontData.fStyle.split(" "):[],fWeight="normal",fStyle="normal";len=styles.length;for(i=0;i<len;i+=1)switch(styles[i].toLowerCase()){case"italic":fStyle="italic";break;case"bold":fWeight="700";break;case"black":fWeight="900";break;case"medium":fWeight="500";break;case"regular":case"normal":fWeight="400";break;case"light":case"thin":fWeight="200"}documentData.fWeight=fontData.fWeight||fWeight,documentData.fStyle=fStyle,len=documentData.t.length,documentData.finalSize=documentData.s,documentData.finalText=this.buildFinalText(documentData.t),documentData.finalLineHeight=documentData.lh;var charCode,trackingOffset=documentData.tr/1e3*documentData.finalSize;if(documentData.sz)for(var currentHeight,finalText,flag=!0,boxWidth=documentData.sz[0],boxHeight=documentData.sz[1];flag;){finalText=this.buildFinalText(documentData.t),currentHeight=0,lineWidth=0,len=finalText.length,trackingOffset=documentData.tr/1e3*documentData.finalSize;var lastSpaceIndex=-1;for(i=0;i<len;i+=1)charCode=finalText[i].charCodeAt(0),newLineFlag=!1," "===finalText[i]?lastSpaceIndex=i:13!==charCode&&3!==charCode||(lineWidth=0,newLineFlag=!0,currentHeight+=documentData.finalLineHeight||1.2*documentData.finalSize),fontManager.chars?(charData=fontManager.getCharData(finalText[i],fontData.fStyle,fontData.fFamily),cLength=newLineFlag?0:charData.w*documentData.finalSize/100):cLength=fontManager.measureText(finalText[i],documentData.f,documentData.finalSize),lineWidth+cLength>boxWidth&&" "!==finalText[i]?(-1===lastSpaceIndex?len+=1:i=lastSpaceIndex,currentHeight+=documentData.finalLineHeight||1.2*documentData.finalSize,finalText.splice(i,lastSpaceIndex===i?1:0,"\r"),lastSpaceIndex=-1,lineWidth=0):(lineWidth+=cLength,lineWidth+=trackingOffset);currentHeight+=fontData.ascent*documentData.finalSize/100,this.canResize&&documentData.finalSize>this.minimumFontSize&&boxHeight<currentHeight?(documentData.finalSize-=1,documentData.finalLineHeight=documentData.finalSize*documentData.lh/documentData.s):(documentData.finalText=finalText,len=documentData.finalText.length,flag=!1)}lineWidth=-trackingOffset,cLength=0;var currentChar,uncollapsedSpaces=0;for(i=0;i<len;i+=1)if(newLineFlag=!1,currentChar=documentData.finalText[i],charCode=currentChar.charCodeAt(0)," "===currentChar?val=" ":13===charCode||3===charCode?(uncollapsedSpaces=0,lineWidths.push(lineWidth),maxLineWidth=lineWidth>maxLineWidth?lineWidth:maxLineWidth,lineWidth=-2*trackingOffset,val="",newLineFlag=!0,currentLine+=1):val=documentData.finalText[i],fontManager.chars?(charData=fontManager.getCharData(currentChar,fontData.fStyle,fontManager.getFontByName(documentData.f).fFamily),cLength=newLineFlag?0:charData.w*documentData.finalSize/100):cLength=fontManager.measureText(val,documentData.f,documentData.finalSize)," "===currentChar?uncollapsedSpaces+=cLength+trackingOffset:(lineWidth+=cLength+trackingOffset+uncollapsedSpaces,uncollapsedSpaces=0),letters.push({l:cLength,an:cLength,add:currentSize,n:newLineFlag,anIndexes:[],val:val,line:currentLine,animatorJustifyOffset:0}),2==anchorGrouping){if(currentSize+=cLength,""===val||" "===val||i===len-1){for(""!==val&&" "!==val||(currentSize-=cLength);currentPos<=i;)letters[currentPos].an=currentSize,letters[currentPos].ind=index,letters[currentPos].extra=cLength,currentPos+=1;index+=1,currentSize=0}}else if(3==anchorGrouping){if(currentSize+=cLength,""===val||i===len-1){for(""===val&&(currentSize-=cLength);currentPos<=i;)letters[currentPos].an=currentSize,letters[currentPos].ind=index,letters[currentPos].extra=cLength,currentPos+=1;currentSize=0,index+=1}}else letters[index].ind=index,letters[index].extra=0,index+=1;if(documentData.l=letters,maxLineWidth=lineWidth>maxLineWidth?lineWidth:maxLineWidth,lineWidths.push(lineWidth),documentData.sz)documentData.boxWidth=documentData.sz[0],documentData.justifyOffset=0;else switch(documentData.boxWidth=maxLineWidth,documentData.j){case 1:documentData.justifyOffset=-documentData.boxWidth;break;case 2:documentData.justifyOffset=-documentData.boxWidth/2;break;default:documentData.justifyOffset=0}documentData.lineWidths=lineWidths;var animatorData,letterData,animators=data.a;jLen=animators.length;var based,ind,indexes=[];for(j=0;j<jLen;j+=1){for(animatorData=animators[j],animatorData.a.sc&&(documentData.strokeColorAnim=!0),animatorData.a.sw&&(documentData.strokeWidthAnim=!0),(animatorData.a.fc||animatorData.a.fh||animatorData.a.fs||animatorData.a.fb)&&(documentData.fillColorAnim=!0),ind=0,based=animatorData.s.b,i=0;i<len;i+=1)letterData=letters[i],letterData.anIndexes[j]=ind,(1==based&&""!==letterData.val||2==based&&""!==letterData.val&&" "!==letterData.val||3==based&&(letterData.n||" "==letterData.val||i==len-1)||4==based&&(letterData.n||i==len-1))&&(1===animatorData.s.rn&&indexes.push(ind),ind+=1);data.a[j].s.totalChars=ind;var newInd,currentInd=-1;if(1===animatorData.s.rn)for(i=0;i<len;i+=1)letterData=letters[i],currentInd!=letterData.anIndexes[j]&&(currentInd=letterData.anIndexes[j],newInd=indexes.splice(Math.floor(Math.random()*indexes.length),1)[0]),letterData.anIndexes[j]=newInd}documentData.yOffset=documentData.finalLineHeight||1.2*documentData.finalSize,documentData.ls=documentData.ls||0,documentData.ascent=fontData.ascent*documentData.finalSize/100},TextProperty.prototype.updateDocumentData=function(newData,index){index=void 0===index?this.keysIndex:index;var dData=this.copyData({},this.data.d.k[index].s);dData=this.copyData(dData,newData),this.data.d.k[index].s=dData,this.recalculate(index),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(index){var dData=this.data.d.k[index].s;dData.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(dData)},TextProperty.prototype.canResizeFont=function(_canResize){this.canResize=_canResize,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(_fontValue){this.minimumFontSize=Math.floor(_fontValue)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){function TextSelectorProp(elem,data){this._currentTextLength=-1,this.k=!1,this.data=data,this.elem=elem,this.comp=elem.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(elem),this.s=PropertyFactory.getProp(elem,data.s||{k:0},0,0,this),this.e="e"in data?PropertyFactory.getProp(elem,data.e,0,0,this):{v:100},this.o=PropertyFactory.getProp(elem,data.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(elem,data.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(elem,data.ne||{k:0},0,0,this),this.a=PropertyFactory.getProp(elem,data.a,0,.01,this),this.dynamicProperties.length||this.getValue()}function getTextSelectorProp(elem,data,arr){return new TextSelectorProp(elem,data,arr)}var max=Math.max,min=Math.min,floor=Math.floor;return TextSelectorProp.prototype={getMult:function(ind){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var easer=BezierFactory.getBezierEasing(this.ne.v/100,0,1-this.xe.v/100,1).get,mult=0,s=this.finalS,e=this.finalE,type=this.data.sh;if(2==type)mult=e===s?ind>=e?1:0:max(0,min(.5/(e-s)+(ind-s)/(e-s),1)),mult=easer(mult);else if(3==type)mult=e===s?ind>=e?0:1:1-max(0,min(.5/(e-s)+(ind-s)/(e-s),1)),mult=easer(mult);else if(4==type)e===s?mult=0:(mult=max(0,min(.5/(e-s)+(ind-s)/(e-s),1)),mult<.5?mult*=2:mult=1-2*(mult-.5)),mult=easer(mult);else if(5==type){if(e===s)mult=0;else{var tot=e-s;ind=min(max(0,ind+.5-s),e-s);var x=-tot/2+ind,a=tot/2;mult=Math.sqrt(1-x*x/(a*a))}mult=easer(mult)}else 6==type?(e===s?mult=0:(ind=min(max(0,ind+.5-s),e-s),mult=(1+Math.cos(Math.PI+2*Math.PI*ind/(e-s)))/2),mult=easer(mult)):(ind>=floor(s)&&(mult=ind-s<0?1-(s-ind):max(0,min(e-ind,1))),mult=easer(mult));return mult*this.a.v},getValue:function(newCharsFlag){this.iterateDynamicProperties(),this._mdf=newCharsFlag||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,newCharsFlag&&2===this.data.r&&(this.e.v=this._currentTextLength);var divisor=2===this.data.r?1:100/this.data.totalChars,o=this.o.v/divisor,s=this.s.v/divisor+o,e=this.e.v/divisor+o;if(s>e){var _s=s;s=e,e=_s}this.finalS=s,this.finalE=e}},extendPrototype([DynamicPropertyContainer],TextSelectorProp),{getTextSelectorProp:getTextSelectorProp}}(),pool_factory=function(){return function(initialLength,_create,_release,_clone){function newElement(){var element;return _length?(_length-=1,element=pool[_length]):element=_create(),element}function release(element){_length===_maxLength&&(pool=pooling.double(pool),_maxLength*=2),_release&&_release(element),pool[_length]=element,_length+=1}var _length=0,_maxLength=initialLength,pool=createSizedArray(_maxLength);return{newElement:newElement,release:release}}}(),pooling=function(){function double(arr){return arr.concat(createSizedArray(arr.length))}return{double:double}}(),point_pool=function(){function create(){return createTypedArray("float32",2)}return pool_factory(8,create)}(),shape_pool=function(){function create(){return new ShapePath}function release(shapePath){var i,len=shapePath._length;for(i=0;i<len;i+=1)point_pool.release(shapePath.v[i]),point_pool.release(shapePath.i[i]),point_pool.release(shapePath.o[i]),shapePath.v[i]=null,shapePath.i[i]=null,shapePath.o[i]=null;shapePath._length=0,shapePath.c=!1}function clone(shape){var i,cloned=factory.newElement(),len=void 0===shape._length?shape.v.length:shape._length;cloned.setLength(len),cloned.c=shape.c;for(i=0;i<len;i+=1)cloned.setTripleAt(shape.v[i][0],shape.v[i][1],shape.o[i][0],shape.o[i][1],shape.i[i][0],shape.i[i][1],i);return cloned}var factory=pool_factory(4,create,release);return factory.clone=clone,factory}(),shapeCollection_pool=function(){function newShapeCollection(){var shapeCollection;return _length?(_length-=1,shapeCollection=pool[_length]):shapeCollection=new ShapeCollection,shapeCollection}function release(shapeCollection){var i,len=shapeCollection._length;for(i=0;i<len;i+=1)shape_pool.release(shapeCollection.shapes[i]);shapeCollection._length=0,
_length===_maxLength&&(pool=pooling.double(pool),_maxLength*=2),pool[_length]=shapeCollection,_length+=1}var ob={newShapeCollection:newShapeCollection,release:release},_length=0,_maxLength=4,pool=createSizedArray(_maxLength);return ob}(),segments_length_pool=function(){function create(){return{lengths:[],totalLength:0}}function release(element){var i,len=element.lengths.length;for(i=0;i<len;i+=1)bezier_length_pool.release(element.lengths[i]);element.lengths.length=0}return pool_factory(8,create,release)}(),bezier_length_pool=function(){function create(){return{addedLength:0,percents:createTypedArray("float32",defaultCurveSegments),lengths:createTypedArray("float32",defaultCurveSegments)}}return pool_factory(8,create)}();BaseRenderer.prototype.checkLayers=function(num){var i,data,len=this.layers.length;for(this.completeLayers=!0,i=len-1;i>=0;i--)this.elements[i]||(data=this.layers[i],data.ip-data.st<=num-this.layers[i].st&&data.op-data.st>num-this.layers[i].st&&this.buildItem(i)),this.completeLayers=!!this.elements[i]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(layer){switch(layer.ty){case 2:return this.createImage(layer);case 0:return this.createComp(layer);case 1:return this.createSolid(layer);case 3:return this.createNull(layer);case 4:return this.createShape(layer);case 5:return this.createText(layer);case 13:return this.createCamera(layer)}return this.createNull(layer)},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.buildAllItems=function(){var i,len=this.layers.length;for(i=0;i<len;i+=1)this.buildItem(i);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(newLayers){this.completeLayers=!1;var i,j,len=newLayers.length,jLen=this.layers.length;for(i=0;i<len;i+=1)for(j=0;j<jLen;){if(this.layers[j].id==newLayers[i].id){this.layers[j]=newLayers[i];break}j+=1}},BaseRenderer.prototype.setProjectInterface=function(pInterface){this.globalData.projectInterface=pInterface},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(element,parentName,hierarchy){for(var elements=this.elements,layers=this.layers,i=0,len=layers.length;i<len;)layers[i].ind==parentName&&(elements[i]&&!0!==elements[i]?(hierarchy.push(elements[i]),elements[i].setAsParent(),void 0!==layers[i].parent?this.buildElementParenting(element,layers[i].parent,hierarchy):element.setHierarchy(hierarchy)):(this.buildItem(i),this.addPendingElement(element))),i+=1},BaseRenderer.prototype.addPendingElement=function(element){this.pendingElements.push(element)},BaseRenderer.prototype.searchExtraCompositions=function(assets){var i,len=assets.length;for(i=0;i<len;i+=1)if(assets[i].xt){var comp=this.createComp(assets[i]);comp.initExpressions(),this.globalData.projectInterface.registerComposition(comp)}},BaseRenderer.prototype.setupGlobalData=function(animData,fontsContainer){this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(animData.chars),this.globalData.fontManager.addFonts(animData.fonts,fontsContainer),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.frameId=0,this.globalData.frameRate=animData.fr,this.globalData.nm=animData.nm,this.globalData.compSize={w:animData.w,h:animData.h}},extendPrototype([BaseRenderer],SVGRenderer),SVGRenderer.prototype.createNull=function(data){return new NullElement(data,this.globalData,this)},SVGRenderer.prototype.createShape=function(data){return new SVGShapeElement(data,this.globalData,this)},SVGRenderer.prototype.createText=function(data){return new SVGTextElement(data,this.globalData,this)},SVGRenderer.prototype.createImage=function(data){return new IImageElement(data,this.globalData,this)},SVGRenderer.prototype.createComp=function(data){return new SVGCompElement(data,this.globalData,this)},SVGRenderer.prototype.createSolid=function(data){return new ISolidElement(data,this.globalData,this)},SVGRenderer.prototype.configAnimation=function(animData){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+animData.w+" "+animData.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",animData.w),this.svgElement.setAttribute("height",animData.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)"),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var defs=this.globalData.defs;this.setupGlobalData(animData,defs),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=animData;var maskElement=createNS("clipPath"),rect=createNS("rect");rect.setAttribute("width",animData.w),rect.setAttribute("height",animData.h),rect.setAttribute("x",0),rect.setAttribute("y",0);var maskId=createElementID();maskElement.setAttribute("id",maskId),maskElement.appendChild(rect),this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+maskId+")"),defs.appendChild(maskElement),this.layers=animData.layers,this.elements=createSizedArray(animData.layers.length)},SVGRenderer.prototype.destroy=function(){this.animationItem.wrapper.innerHTML="",this.layerElement=null,this.globalData.defs=null;var i,len=this.layers?this.layers.length:0;for(i=0;i<len;i++)this.elements[i]&&this.elements[i].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRenderer.prototype.updateContainerSize=function(){},SVGRenderer.prototype.buildItem=function(pos){var elements=this.elements;if(!elements[pos]&&99!=this.layers[pos].ty){elements[pos]=!0;var element=this.createItem(this.layers[pos]);elements[pos]=element,expressionsPlugin&&(0===this.layers[pos].ty&&this.globalData.projectInterface.registerComposition(element),element.initExpressions()),this.appendElementInPos(element,pos),this.layers[pos].tt&&(this.elements[pos-1]&&!0!==this.elements[pos-1]?element.setMatte(elements[pos-1].layerId):(this.buildItem(pos-1),this.addPendingElement(element)))}},SVGRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var element=this.pendingElements.pop();if(element.checkParenting(),element.data.tt)for(var i=0,len=this.elements.length;i<len;){if(this.elements[i]===element){element.setMatte(this.elements[i-1].layerId);break}i+=1}}},SVGRenderer.prototype.renderFrame=function(num){if(this.renderedFrame!==num&&!this.destroyed){null===num?num=this.renderedFrame:this.renderedFrame=num,this.globalData.frameNum=num,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=num,this.globalData._mdf=!1;var i,len=this.layers.length;for(this.completeLayers||this.checkLayers(num),i=len-1;i>=0;i--)(this.completeLayers||this.elements[i])&&this.elements[i].prepareFrame(num-this.layers[i].st);if(this.globalData._mdf)for(i=0;i<len;i+=1)(this.completeLayers||this.elements[i])&&this.elements[i].renderFrame()}},SVGRenderer.prototype.appendElementInPos=function(element,pos){var newElement=element.getBaseElement();if(newElement){for(var nextElement,i=0;i<pos;)this.elements[i]&&!0!==this.elements[i]&&this.elements[i].getBaseElement()&&(nextElement=this.elements[i].getBaseElement()),i+=1;nextElement?this.layerElement.insertBefore(newElement,nextElement):this.layerElement.appendChild(newElement)}},SVGRenderer.prototype.hide=function(){this.layerElement.style.display="none"},SVGRenderer.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseRenderer],CanvasRenderer),CanvasRenderer.prototype.createShape=function(data){return new CVShapeElement(data,this.globalData,this)},CanvasRenderer.prototype.createText=function(data){return new CVTextElement(data,this.globalData,this)},CanvasRenderer.prototype.createImage=function(data){return new CVImageElement(data,this.globalData,this)},CanvasRenderer.prototype.createComp=function(data){return new CVCompElement(data,this.globalData,this)},CanvasRenderer.prototype.createSolid=function(data){return new CVSolidElement(data,this.globalData,this)},CanvasRenderer.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRenderer.prototype.ctxTransform=function(props){if(1!==props[0]||0!==props[1]||0!==props[4]||1!==props[5]||0!==props[12]||0!==props[13]){if(!this.renderConfig.clearCanvas)return void this.canvasContext.transform(props[0],props[1],props[4],props[5],props[12],props[13]);this.transformMat.cloneFromProps(props);var cProps=this.contextData.cTr.props;this.transformMat.transform(cProps[0],cProps[1],cProps[2],cProps[3],cProps[4],cProps[5],cProps[6],cProps[7],cProps[8],cProps[9],cProps[10],cProps[11],cProps[12],cProps[13],cProps[14],cProps[15]),this.contextData.cTr.cloneFromProps(this.transformMat.props);var trProps=this.contextData.cTr.props;this.canvasContext.setTransform(trProps[0],trProps[1],trProps[4],trProps[5],trProps[12],trProps[13])}},CanvasRenderer.prototype.ctxOpacity=function(op){if(!this.renderConfig.clearCanvas)return this.canvasContext.globalAlpha*=op<0?0:op,void(this.globalData.currentGlobalAlpha=this.contextData.cO);this.contextData.cO*=op<0?0:op,this.globalData.currentGlobalAlpha!==this.contextData.cO&&(this.canvasContext.globalAlpha=this.contextData.cO,this.globalData.currentGlobalAlpha=this.contextData.cO)},CanvasRenderer.prototype.reset=function(){if(!this.renderConfig.clearCanvas)return void this.canvasContext.restore();this.contextData.reset()},CanvasRenderer.prototype.save=function(actionFlag){if(!this.renderConfig.clearCanvas)return void this.canvasContext.save();actionFlag&&this.canvasContext.save();var props=this.contextData.cTr.props;this.contextData._length<=this.contextData.cArrPos&&this.contextData.duplicate();var i,arr=this.contextData.saved[this.contextData.cArrPos];for(i=0;i<16;i+=1)arr[i]=props[i];this.contextData.savedOp[this.contextData.cArrPos]=this.contextData.cO,this.contextData.cArrPos+=1},CanvasRenderer.prototype.restore=function(actionFlag){if(!this.renderConfig.clearCanvas)return void this.canvasContext.restore();actionFlag&&(this.canvasContext.restore(),this.globalData.blendMode="source-over"),this.contextData.cArrPos-=1;var i,popped=this.contextData.saved[this.contextData.cArrPos],arr=this.contextData.cTr.props;for(i=0;i<16;i+=1)arr[i]=popped[i];this.canvasContext.setTransform(popped[0],popped[1],popped[4],popped[5],popped[12],popped[13]),popped=this.contextData.savedOp[this.contextData.cArrPos],this.contextData.cO=popped,this.globalData.currentGlobalAlpha!==popped&&(this.canvasContext.globalAlpha=popped,this.globalData.currentGlobalAlpha=popped)},CanvasRenderer.prototype.configAnimation=function(animData){this.animationItem.wrapper?(this.animationItem.container=createTag("canvas"),this.animationItem.container.style.width="100%",this.animationItem.container.style.height="100%",this.animationItem.container.style.transformOrigin=this.animationItem.container.style.mozTransformOrigin=this.animationItem.container.style.webkitTransformOrigin=this.animationItem.container.style["-webkit-transform"]="0px 0px 0px",this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className)):this.canvasContext=this.renderConfig.context,this.data=animData,this.layers=animData.layers,this.transformCanvas={w:animData.w,h:animData.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(animData,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(animData.layers.length),this.updateContainerSize()},CanvasRenderer.prototype.updateContainerSize=function(){this.reset();var elementWidth,elementHeight;this.animationItem.wrapper&&this.animationItem.container?(elementWidth=this.animationItem.wrapper.offsetWidth,elementHeight=this.animationItem.wrapper.offsetHeight,this.animationItem.container.setAttribute("width",elementWidth*this.renderConfig.dpr),this.animationItem.container.setAttribute("height",elementHeight*this.renderConfig.dpr)):(elementWidth=this.canvasContext.canvas.width*this.renderConfig.dpr,elementHeight=this.canvasContext.canvas.height*this.renderConfig.dpr);var elementRel,animationRel;if(-1!==this.renderConfig.preserveAspectRatio.indexOf("meet")||-1!==this.renderConfig.preserveAspectRatio.indexOf("slice")){var par=this.renderConfig.preserveAspectRatio.split(" "),fillType=par[1]||"meet",pos=par[0]||"xMidYMid",xPos=pos.substr(0,4),yPos=pos.substr(4);elementRel=elementWidth/elementHeight,animationRel=this.transformCanvas.w/this.transformCanvas.h,animationRel>elementRel&&"meet"===fillType||animationRel<elementRel&&"slice"===fillType?(this.transformCanvas.sx=elementWidth/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=elementWidth/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=elementHeight/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=elementHeight/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx="xMid"===xPos&&(animationRel<elementRel&&"meet"===fillType||animationRel>elementRel&&"slice"===fillType)?(elementWidth-this.transformCanvas.w*(elementHeight/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===xPos&&(animationRel<elementRel&&"meet"===fillType||animationRel>elementRel&&"slice"===fillType)?(elementWidth-this.transformCanvas.w*(elementHeight/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty="YMid"===yPos&&(animationRel>elementRel&&"meet"===fillType||animationRel<elementRel&&"slice"===fillType)?(elementHeight-this.transformCanvas.h*(elementWidth/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===yPos&&(animationRel>elementRel&&"meet"===fillType||animationRel<elementRel&&"slice"===fillType)?(elementHeight-this.transformCanvas.h*(elementWidth/this.transformCanvas.w))*this.renderConfig.dpr:0}else"none"==this.renderConfig.preserveAspectRatio?(this.transformCanvas.sx=elementWidth/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=elementHeight/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip()},CanvasRenderer.prototype.destroy=function(){this.renderConfig.clearCanvas&&(this.animationItem.wrapper.innerHTML="");var i,len=this.layers?this.layers.length:0;for(i=len-1;i>=0;i-=1)this.elements[i]&&this.elements[i].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRenderer.prototype.renderFrame=function(num){if(!(this.renderedFrame==num&&!0===this.renderConfig.clearCanvas||this.destroyed||-1===num)){this.renderedFrame=num,this.globalData.frameNum=num-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas,this.globalData.projectInterface.currentFrame=num;var i,len=this.layers.length;for(this.completeLayers||this.checkLayers(num),i=0;i<len;i++)(this.completeLayers||this.elements[i])&&this.elements[i].prepareFrame(num-this.layers[i].st);if(this.globalData._mdf){for(!0===this.renderConfig.clearCanvas?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),i=len-1;i>=0;i-=1)(this.completeLayers||this.elements[i])&&this.elements[i].renderFrame();!0!==this.renderConfig.clearCanvas&&this.restore()}}},CanvasRenderer.prototype.buildItem=function(pos){var elements=this.elements;if(!elements[pos]&&99!=this.layers[pos].ty){var element=this.createItem(this.layers[pos],this,this.globalData);elements[pos]=element,element.initExpressions()}},CanvasRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){this.pendingElements.pop().checkParenting()}},CanvasRenderer.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRenderer.prototype.show=function(){this.animationItem.container.style.display="block"},extendPrototype([BaseRenderer],HybridRenderer),HybridRenderer.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){this.pendingElements.pop().checkParenting()}},HybridRenderer.prototype.appendElementInPos=function(element,pos){var newDOMElement=element.getBaseElement();if(newDOMElement){var layer=this.layers[pos];if(layer.ddd&&this.supports3d)this.addTo3dContainer(newDOMElement,pos);else if(this.threeDElements)this.addTo3dContainer(newDOMElement,pos);else{for(var nextDOMElement,nextLayer,tmpDOMElement,i=0;i<pos;)this.elements[i]&&!0!==this.elements[i]&&this.elements[i].getBaseElement&&(nextLayer=this.elements[i],tmpDOMElement=this.layers[i].ddd?this.getThreeDContainerByPos(i):nextLayer.getBaseElement(),nextDOMElement=tmpDOMElement||nextDOMElement),i+=1;nextDOMElement?layer.ddd&&this.supports3d||this.layerElement.insertBefore(newDOMElement,nextDOMElement):layer.ddd&&this.supports3d||this.layerElement.appendChild(newDOMElement)}}},HybridRenderer.prototype.createShape=function(data){return this.supports3d?new HShapeElement(data,this.globalData,this):new SVGShapeElement(data,this.globalData,this)},HybridRenderer.prototype.createText=function(data){return this.supports3d?new HTextElement(data,this.globalData,this):new SVGTextElement(data,this.globalData,this)},HybridRenderer.prototype.createCamera=function(data){return this.camera=new HCameraElement(data,this.globalData,this),this.camera},HybridRenderer.prototype.createImage=function(data){return this.supports3d?new HImageElement(data,this.globalData,this):new IImageElement(data,this.globalData,this)},HybridRenderer.prototype.createComp=function(data){return this.supports3d?new HCompElement(data,this.globalData,this):new SVGCompElement(data,this.globalData,this)},HybridRenderer.prototype.createSolid=function(data){return this.supports3d?new HSolidElement(data,this.globalData,this):new ISolidElement(data,this.globalData,this)},HybridRenderer.prototype.createNull=SVGRenderer.prototype.createNull,HybridRenderer.prototype.getThreeDContainerByPos=function(pos){for(var i=0,len=this.threeDElements.length;i<len;){if(this.threeDElements[i].startPos<=pos&&this.threeDElements[i].endPos>=pos)return this.threeDElements[i].perspectiveElem;i+=1}},HybridRenderer.prototype.createThreeDContainer=function(pos,type){var perspectiveElem=createTag("div");styleDiv(perspectiveElem);var container=createTag("div");styleDiv(container),"3d"===type&&(perspectiveElem.style.width=this.globalData.compSize.w+"px",perspectiveElem.style.height=this.globalData.compSize.h+"px",perspectiveElem.style.transformOrigin=perspectiveElem.style.mozTransformOrigin=perspectiveElem.style.webkitTransformOrigin="50% 50%",container.style.transform=container.style.webkitTransform="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)"),perspectiveElem.appendChild(container);var threeDContainerData={container:container,perspectiveElem:perspectiveElem,startPos:pos,endPos:pos,type:type};return this.threeDElements.push(threeDContainerData),threeDContainerData},HybridRenderer.prototype.build3dContainers=function(){var i,lastThreeDContainerData,len=this.layers.length,currentContainer="";for(i=0;i<len;i+=1)this.layers[i].ddd&&3!==this.layers[i].ty?("3d"!==currentContainer&&(currentContainer="3d",lastThreeDContainerData=this.createThreeDContainer(i,"3d")),lastThreeDContainerData.endPos=Math.max(lastThreeDContainerData.endPos,i)):("2d"!==currentContainer&&(currentContainer="2d",lastThreeDContainerData=this.createThreeDContainer(i,"2d")),lastThreeDContainerData.endPos=Math.max(lastThreeDContainerData.endPos,i));for(len=this.threeDElements.length,i=len-1;i>=0;i--)this.resizerElem.appendChild(this.threeDElements[i].perspectiveElem)},HybridRenderer.prototype.addTo3dContainer=function(elem,pos){for(var i=0,len=this.threeDElements.length;i<len;){if(pos<=this.threeDElements[i].endPos){for(var nextElement,j=this.threeDElements[i].startPos;j<pos;)this.elements[j]&&this.elements[j].getBaseElement&&(nextElement=this.elements[j].getBaseElement()),j+=1;nextElement?this.threeDElements[i].container.insertBefore(elem,nextElement):this.threeDElements[i].container.appendChild(elem);break}i+=1}},HybridRenderer.prototype.configAnimation=function(animData){var resizerElem=createTag("div"),wrapper=this.animationItem.wrapper;resizerElem.style.width=animData.w+"px",resizerElem.style.height=animData.h+"px",this.resizerElem=resizerElem,styleDiv(resizerElem),resizerElem.style.transformStyle=resizerElem.style.webkitTransformStyle=resizerElem.style.mozTransformStyle="flat",this.renderConfig.className&&resizerElem.setAttribute("class",this.renderConfig.className),wrapper.appendChild(resizerElem),resizerElem.style.overflow="hidden";var svg=createNS("svg");svg.setAttribute("width","1"),svg.setAttribute("height","1"),styleDiv(svg),this.resizerElem.appendChild(svg);var defs=createNS("defs");svg.appendChild(defs),this.data=animData,this.setupGlobalData(animData,svg),this.globalData.defs=defs,this.layers=animData.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRenderer.prototype.destroy=function(){this.animationItem.wrapper.innerHTML="",this.animationItem.container=null,this.globalData.defs=null;var i,len=this.layers?this.layers.length:0;for(i=0;i<len;i++)this.elements[i].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRenderer.prototype.updateContainerSize=function(){var sx,sy,tx,ty,elementWidth=this.animationItem.wrapper.offsetWidth,elementHeight=this.animationItem.wrapper.offsetHeight,elementRel=elementWidth/elementHeight,animationRel=this.globalData.compSize.w/this.globalData.compSize.h;animationRel>elementRel?(sx=elementWidth/this.globalData.compSize.w,sy=elementWidth/this.globalData.compSize.w,tx=0,ty=(elementHeight-this.globalData.compSize.h*(elementWidth/this.globalData.compSize.w))/2):(sx=elementHeight/this.globalData.compSize.h,sy=elementHeight/this.globalData.compSize.h,tx=(elementWidth-this.globalData.compSize.w*(elementHeight/this.globalData.compSize.h))/2,ty=0),this.resizerElem.style.transform=this.resizerElem.style.webkitTransform="matrix3d("+sx+",0,0,0,0,"+sy+",0,0,0,0,1,0,"+tx+","+ty+",0,1)"},HybridRenderer.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRenderer.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRenderer.prototype.show=function(){this.resizerElem.style.display="block"},HybridRenderer.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var i,cWidth=this.globalData.compSize.w,cHeight=this.globalData.compSize.h,len=this.threeDElements.length;for(i=0;i<len;i+=1)this.threeDElements[i].perspectiveElem.style.perspective=this.threeDElements[i].perspectiveElem.style.webkitPerspective=Math.sqrt(Math.pow(cWidth,2)+Math.pow(cHeight,2))+"px"}},HybridRenderer.prototype.searchExtraCompositions=function(assets){var i,len=assets.length,floatingContainer=createTag("div");for(i=0;i<len;i+=1)if(assets[i].xt){var comp=this.createComp(assets[i],floatingContainer,this.globalData.comp,null);comp.initExpressions(),this.globalData.projectInterface.registerComposition(comp)}},MaskElement.prototype.getMaskProperty=function(pos){return this.viewData[pos].prop},MaskElement.prototype.renderFrame=function(isFirstFrame){var i,finalMat=this.element.finalTransform.mat,len=this.masksProperties.length;for(i=0;i<len;i++)if((this.viewData[i].prop._mdf||isFirstFrame)&&this.drawPath(this.masksProperties[i],this.viewData[i].prop.v,this.viewData[i]),(this.viewData[i].op._mdf||isFirstFrame)&&this.viewData[i].elem.setAttribute("fill-opacity",this.viewData[i].op.v),"n"!==this.masksProperties[i].mode&&(this.viewData[i].invRect&&(this.element.finalTransform.mProp._mdf||isFirstFrame)&&(this.viewData[i].invRect.setAttribute("x",-finalMat.props[12]),this.viewData[i].invRect.setAttribute("y",-finalMat.props[13])),this.storedData[i].x&&(this.storedData[i].x._mdf||isFirstFrame))){var feMorph=this.storedData[i].expan;this.storedData[i].x.v<0?("erode"!==this.storedData[i].lastOperator&&(this.storedData[i].lastOperator="erode",this.storedData[i].elem.setAttribute("filter","url("+locationHref+"#"+this.storedData[i].filterId+")")),feMorph.setAttribute("radius",-this.storedData[i].x.v)):("dilate"!==this.storedData[i].lastOperator&&(this.storedData[i].lastOperator="dilate",this.storedData[i].elem.setAttribute("filter",null)),this.storedData[i].elem.setAttribute("stroke-width",2*this.storedData[i].x.v))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var path="M0,0 ";return path+=" h"+this.globalData.compSize.w,path+=" v"+this.globalData.compSize.h,path+=" h-"+this.globalData.compSize.w,path+=" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(pathData,pathNodes,viewData){var i,len,pathString=" M"+pathNodes.v[0][0]+","+pathNodes.v[0][1];for(len=pathNodes._length,i=1;i<len;i+=1)pathString+=" C"+pathNodes.o[i-1][0]+","+pathNodes.o[i-1][1]+" "+pathNodes.i[i][0]+","+pathNodes.i[i][1]+" "+pathNodes.v[i][0]+","+pathNodes.v[i][1];if(pathNodes.c&&len>1&&(pathString+=" C"+pathNodes.o[i-1][0]+","+pathNodes.o[i-1][1]+" "+pathNodes.i[0][0]+","+pathNodes.i[0][1]+" "+pathNodes.v[0][0]+","+pathNodes.v[0][1]),viewData.lastPath!==pathString){var pathShapeValue="";viewData.elem&&(pathNodes.c&&(pathShapeValue=pathData.inv?this.solidPath+pathString:pathString),viewData.elem.setAttribute("d",pathShapeValue)),viewData.lastPath=pathString}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(hierarchy){this.hierarchy=hierarchy},setAsParent:function(){this._isParent=!0},checkParenting:function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent,[])}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(num,isVisible){var i,len=this.dynamicProperties.length;for(i=0;i<len;i+=1)(isVisible||this._isParent&&"transform"===this.dynamicProperties[i].propType)&&(this.dynamicProperties[i].getValue(),this.dynamicProperties[i]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(prop){-1===this.dynamicProperties.indexOf(prop)&&this.dynamicProperties.push(prop)}},TransformElement.prototype={initTransform:function(){this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_opMdf:!1,mat:new Matrix},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var mat,finalMat=this.finalTransform.mat,i=0,len=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;i<len;){if(this.hierarchy[i].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}i+=1}if(this.finalTransform._matMdf)for(mat=this.finalTransform.mProp.v.props,finalMat.cloneFromProps(mat),i=0;i<len;i+=1)mat=this.hierarchy[i].finalTransform.mProp.v.props,finalMat.transform(mat[0],mat[1],mat[2],mat[3],mat[4],mat[5],mat[6],mat[7],mat[8],mat[9],mat[10],mat[11],mat[12],mat[13],mat[14],mat[15])}},globalToLocal:function(pt){var transforms=[];transforms.push(this.finalTransform);for(var flag=!0,comp=this.comp;flag;)comp.finalTransform?(comp.data.hasMask&&transforms.splice(0,0,comp.finalTransform),comp=comp.comp):flag=!1;var i,ptNew,len=transforms.length;for(i=0;i<len;i+=1)ptNew=transforms[i].mat.applyToPointArray(0,0,0),pt=[pt[0]-ptNew[0],pt[1]-ptNew[1],0];return pt},mHelper:new Matrix},RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(component){-1===this.renderableComponents.indexOf(component)&&this.renderableComponents.push(component)},removeRenderableComponent:function(component){-1!==this.renderableComponents.indexOf(component)&&this.renderableComponents.splice(this.renderableComponents.indexOf(component),1)},prepareRenderableFrame:function(num){this.checkLayerLimits(num)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(num){this.data.ip-this.data.st<=num&&this.data.op-this.data.st>num?!0!==this.isInRange&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):!1!==this.isInRange&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var i,len=this.renderableComponents.length;for(i=0;i<len;i+=1)this.renderableComponents[i].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}},function(){extendPrototype([RenderableElement,createProxyFunction({initElement:function(data,globalData,comp){this.initFrame(),this.initBaseData(data,globalData,comp),this.initTransform(data,globalData,comp),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){(this.baseElement||this.layerElement).style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){(this.baseElement||this.layerElement).style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(num){this._mdf=!1,this.prepareRenderableFrame(num),this.prepareProperties(num,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement)}(),SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),SVGGradientFillStyleData.prototype.initGradientData=function(elem,data,styleOb){this.o=PropertyFactory.getProp(elem,data.o,0,.01,this),
this.s=PropertyFactory.getProp(elem,data.s,1,null,this),this.e=PropertyFactory.getProp(elem,data.e,1,null,this),this.h=PropertyFactory.getProp(elem,data.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(elem,data.a||{k:0},0,degToRads,this),this.g=new GradientProperty(elem,data.g,this),this.style=styleOb,this.stops=[],this.setGradientData(styleOb.pElem,data),this.setGradientOpacity(data,styleOb),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(pathElement,data){var gradientId=createElementID(),gfill=createNS(1===data.t?"linearGradient":"radialGradient");gfill.setAttribute("id",gradientId),gfill.setAttribute("spreadMethod","pad"),gfill.setAttribute("gradientUnits","userSpaceOnUse");var stop,j,jLen,stops=[];for(jLen=4*data.g.p,j=0;j<jLen;j+=4)stop=createNS("stop"),gfill.appendChild(stop),stops.push(stop);pathElement.setAttribute("gf"===data.ty?"fill":"stroke","url("+locationHref+"#"+gradientId+")"),this.gf=gfill,this.cst=stops},SVGGradientFillStyleData.prototype.setGradientOpacity=function(data,styleOb){if(this.g._hasOpacity&&!this.g._collapsable){var stop,j,jLen,mask=createNS("mask"),maskElement=createNS("path");mask.appendChild(maskElement);var opacityId=createElementID(),maskId=createElementID();mask.setAttribute("id",maskId);var opFill=createNS(1===data.t?"linearGradient":"radialGradient");opFill.setAttribute("id",opacityId),opFill.setAttribute("spreadMethod","pad"),opFill.setAttribute("gradientUnits","userSpaceOnUse"),jLen=data.g.k.k[0].s?data.g.k.k[0].s.length:data.g.k.k.length;var stops=this.stops;for(j=4*data.g.p;j<jLen;j+=2)stop=createNS("stop"),stop.setAttribute("stop-color","rgb(255,255,255)"),opFill.appendChild(stop),stops.push(stop);maskElement.setAttribute("gf"===data.ty?"fill":"stroke","url("+locationHref+"#"+opacityId+")"),this.of=opFill,this.ms=mask,this.ost=stops,this.maskId=maskId,styleOb.msElem=maskElement}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var SVGElementsRenderer=function(){function createRenderFunction(data){data.ty;switch(data.ty){case"fl":return renderFill;case"gf":return renderGradient;case"gs":return renderGradientStroke;case"st":return renderStroke;case"sh":case"el":case"rc":case"sr":return renderPath;case"tr":return renderContentTransform}}function renderContentTransform(styleData,itemData,isFirstFrame){(isFirstFrame||itemData.transform.op._mdf)&&itemData.transform.container.setAttribute("opacity",itemData.transform.op.v),(isFirstFrame||itemData.transform.mProps._mdf)&&itemData.transform.container.setAttribute("transform",itemData.transform.mProps.v.to2dCSS())}function renderPath(styleData,itemData,isFirstFrame){var j,jLen,pathStringTransformed,redraw,pathNodes,l,paths,mat,props,iterations,k,lLen=itemData.styles.length,lvl=itemData.lvl;for(l=0;l<lLen;l+=1){if(redraw=itemData.sh._mdf||isFirstFrame,itemData.styles[l].lvl<lvl){for(mat=_matrixHelper.reset(),iterations=lvl-itemData.styles[l].lvl,k=itemData.transformers.length-1;!redraw&&iterations>0;)redraw=itemData.transformers[k].mProps._mdf||redraw,iterations--,k--;if(redraw)for(iterations=lvl-itemData.styles[l].lvl,k=itemData.transformers.length-1;iterations>0;)props=itemData.transformers[k].mProps.v.props,mat.transform(props[0],props[1],props[2],props[3],props[4],props[5],props[6],props[7],props[8],props[9],props[10],props[11],props[12],props[13],props[14],props[15]),iterations--,k--}else mat=_identityMatrix;if(paths=itemData.sh.paths,jLen=paths._length,redraw){for(pathStringTransformed="",j=0;j<jLen;j+=1)(pathNodes=paths.shapes[j])&&pathNodes._length&&(pathStringTransformed+=buildShapeString(pathNodes,pathNodes._length,pathNodes.c,mat));itemData.caches[l]=pathStringTransformed}else pathStringTransformed=itemData.caches[l];itemData.styles[l].d+=!0===styleData.hd?"":pathStringTransformed,itemData.styles[l]._mdf=redraw||itemData.styles[l]._mdf}}function renderFill(styleData,itemData,isFirstFrame){var styleElem=itemData.style;(itemData.c._mdf||isFirstFrame)&&styleElem.pElem.setAttribute("fill","rgb("+bm_floor(itemData.c.v[0])+","+bm_floor(itemData.c.v[1])+","+bm_floor(itemData.c.v[2])+")"),(itemData.o._mdf||isFirstFrame)&&styleElem.pElem.setAttribute("fill-opacity",itemData.o.v)}function renderGradientStroke(styleData,itemData,isFirstFrame){renderGradient(styleData,itemData,isFirstFrame),renderStroke(styleData,itemData,isFirstFrame)}function renderGradient(styleData,itemData,isFirstFrame){var gfill=itemData.gf,hasOpacity=itemData.g._hasOpacity,pt1=itemData.s.v,pt2=itemData.e.v;if(itemData.o._mdf||isFirstFrame){var attr="gf"===styleData.ty?"fill-opacity":"stroke-opacity";itemData.style.pElem.setAttribute(attr,itemData.o.v)}if(itemData.s._mdf||isFirstFrame){var attr1=1===styleData.t?"x1":"cx",attr2="x1"===attr1?"y1":"cy";gfill.setAttribute(attr1,pt1[0]),gfill.setAttribute(attr2,pt1[1]),hasOpacity&&!itemData.g._collapsable&&(itemData.of.setAttribute(attr1,pt1[0]),itemData.of.setAttribute(attr2,pt1[1]))}var stops,i,len,stop;if(itemData.g._cmdf||isFirstFrame){stops=itemData.cst;var cValues=itemData.g.c;for(len=stops.length,i=0;i<len;i+=1)stop=stops[i],stop.setAttribute("offset",cValues[4*i]+"%"),stop.setAttribute("stop-color","rgb("+cValues[4*i+1]+","+cValues[4*i+2]+","+cValues[4*i+3]+")")}if(hasOpacity&&(itemData.g._omdf||isFirstFrame)){var oValues=itemData.g.o;for(stops=itemData.g._collapsable?itemData.cst:itemData.ost,len=stops.length,i=0;i<len;i+=1)stop=stops[i],itemData.g._collapsable||stop.setAttribute("offset",oValues[2*i]+"%"),stop.setAttribute("stop-opacity",oValues[2*i+1])}if(1===styleData.t)(itemData.e._mdf||isFirstFrame)&&(gfill.setAttribute("x2",pt2[0]),gfill.setAttribute("y2",pt2[1]),hasOpacity&&!itemData.g._collapsable&&(itemData.of.setAttribute("x2",pt2[0]),itemData.of.setAttribute("y2",pt2[1])));else{var rad;if((itemData.s._mdf||itemData.e._mdf||isFirstFrame)&&(rad=Math.sqrt(Math.pow(pt1[0]-pt2[0],2)+Math.pow(pt1[1]-pt2[1],2)),gfill.setAttribute("r",rad),hasOpacity&&!itemData.g._collapsable&&itemData.of.setAttribute("r",rad)),itemData.e._mdf||itemData.h._mdf||itemData.a._mdf||isFirstFrame){rad||(rad=Math.sqrt(Math.pow(pt1[0]-pt2[0],2)+Math.pow(pt1[1]-pt2[1],2)));var ang=Math.atan2(pt2[1]-pt1[1],pt2[0]-pt1[0]),percent=itemData.h.v>=1?.99:itemData.h.v<=-1?-.99:itemData.h.v,dist=rad*percent,x=Math.cos(ang+itemData.a.v)*dist+pt1[0],y=Math.sin(ang+itemData.a.v)*dist+pt1[1];gfill.setAttribute("fx",x),gfill.setAttribute("fy",y),hasOpacity&&!itemData.g._collapsable&&(itemData.of.setAttribute("fx",x),itemData.of.setAttribute("fy",y))}}}function renderStroke(styleData,itemData,isFirstFrame){var styleElem=itemData.style,d=itemData.d;d&&(d._mdf||isFirstFrame)&&d.dashStr&&(styleElem.pElem.setAttribute("stroke-dasharray",d.dashStr),styleElem.pElem.setAttribute("stroke-dashoffset",d.dashoffset[0])),itemData.c&&(itemData.c._mdf||isFirstFrame)&&styleElem.pElem.setAttribute("stroke","rgb("+bm_floor(itemData.c.v[0])+","+bm_floor(itemData.c.v[1])+","+bm_floor(itemData.c.v[2])+")"),(itemData.o._mdf||isFirstFrame)&&styleElem.pElem.setAttribute("stroke-opacity",itemData.o.v),(itemData.w._mdf||isFirstFrame)&&(styleElem.pElem.setAttribute("stroke-width",itemData.w.v),styleElem.msElem&&styleElem.msElem.setAttribute("stroke-width",itemData.w.v))}var _identityMatrix=new Matrix,_matrixHelper=new Matrix;return{createRenderFunction:createRenderFunction}}();ShapeTransformManager.prototype={addTransformSequence:function(transforms){var i,len=transforms.length,key="_";for(i=0;i<len;i+=1)key+=transforms[i].transform.key+"_";var sequence=this.sequences[key];return sequence||(sequence={transforms:[].concat(transforms),finalTransform:new Matrix,_mdf:!1},this.sequences[key]=sequence,this.sequenceList.push(sequence)),sequence},processSequence:function(sequence,isFirstFrame){for(var i=0,len=sequence.transforms.length,_mdf=isFirstFrame;i<len&&!isFirstFrame;){if(sequence.transforms[i].transform.mProps._mdf){_mdf=!0;break}i+=1}if(_mdf){var props;for(sequence.finalTransform.reset(),i=len-1;i>=0;i-=1)props=sequence.transforms[i].transform.mProps.v.props,sequence.finalTransform.transform(props[0],props[1],props[2],props[3],props[4],props[5],props[6],props[7],props[8],props[9],props[10],props[11],props[12],props[13],props[14],props[15])}sequence._mdf=_mdf},processSequences:function(isFirstFrame){var i,len=this.sequenceList.length;for(i=0;i<len;i+=1)this.processSequence(this.sequenceList[i],isFirstFrame)},getNewKey:function(){return"_"+this.transform_key_count++}},CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var i=0,len=this.data.masksProperties.length;i<len;){if("n"!==this.data.masksProperties[i].mode&&!1!==this.data.masksProperties[i].cl)return!0;i+=1}return!1},initExpressions:function(){this.layerInterface=LayerExpressionInterface(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var effectsInterface=EffectsExpressionInterface.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(effectsInterface),0===this.data.ty||this.data.xt?this.compInterface=CompExpressionInterface(this):4===this.data.ty?(this.layerInterface.shapeInterface=ShapeExpressionInterface(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):5===this.data.ty&&(this.layerInterface.textInterface=TextExpressionInterface(this),this.layerInterface.text=this.layerInterface.textInterface)},setBlendMode:function(){var blendModeValue=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=blendModeValue},initBaseData:function(data,globalData,comp){this.globalData=globalData,this.comp=comp,this.data=data,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},NullElement.prototype.prepareFrame=function(num){this.prepareProperties(num,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var filId,fil,gg,layerElementParent=null;if(this.data.td){if(3==this.data.td||1==this.data.td){var masker=createNS("mask");masker.setAttribute("id",this.layerId),masker.setAttribute("mask-type",3==this.data.td?"luminance":"alpha"),masker.appendChild(this.layerElement),layerElementParent=masker,this.globalData.defs.appendChild(masker),featureSupport.maskType||1!=this.data.td||(masker.setAttribute("mask-type","luminance"),filId=createElementID(),fil=filtersFactory.createFilter(filId),this.globalData.defs.appendChild(fil),fil.appendChild(filtersFactory.createAlphaToLuminanceFilter()),gg=createNS("g"),gg.appendChild(this.layerElement),layerElementParent=gg,masker.appendChild(gg),gg.setAttribute("filter","url("+locationHref+"#"+filId+")"))}else if(2==this.data.td){var maskGroup=createNS("mask");maskGroup.setAttribute("id",this.layerId),maskGroup.setAttribute("mask-type","alpha");var maskGrouper=createNS("g");maskGroup.appendChild(maskGrouper),filId=createElementID(),fil=filtersFactory.createFilter(filId);var feCTr=createNS("feComponentTransfer");feCTr.setAttribute("in","SourceGraphic"),fil.appendChild(feCTr);var feFunc=createNS("feFuncA");feFunc.setAttribute("type","table"),feFunc.setAttribute("tableValues","1.0 0.0"),feCTr.appendChild(feFunc),this.globalData.defs.appendChild(fil);var alphaRect=createNS("rect");alphaRect.setAttribute("width",this.comp.data.w),alphaRect.setAttribute("height",this.comp.data.h),alphaRect.setAttribute("x","0"),alphaRect.setAttribute("y","0"),alphaRect.setAttribute("fill","#ffffff"),alphaRect.setAttribute("opacity","0"),maskGrouper.setAttribute("filter","url("+locationHref+"#"+filId+")"),maskGrouper.appendChild(alphaRect),maskGrouper.appendChild(this.layerElement),layerElementParent=maskGrouper,featureSupport.maskType||(maskGroup.setAttribute("mask-type","luminance"),fil.appendChild(filtersFactory.createAlphaToLuminanceFilter()),gg=createNS("g"),maskGrouper.appendChild(alphaRect),gg.appendChild(this.layerElement),layerElementParent=gg,maskGrouper.appendChild(gg)),this.globalData.defs.appendChild(maskGroup)}}else this.data.tt?(this.matteElement.appendChild(this.layerElement),layerElementParent=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0===this.data.ty&&!this.data.hd){var cp=createNS("clipPath"),pt=createNS("path");pt.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var clipId=createElementID();if(cp.setAttribute("id",clipId),cp.appendChild(pt),this.globalData.defs.appendChild(cp),this.checkMasks()){var cpGroup=createNS("g");cpGroup.setAttribute("clip-path","url("+locationHref+"#"+clipId+")"),cpGroup.appendChild(this.layerElement),this.transformedElement=cpGroup,layerElementParent?layerElementParent.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+clipId+")")}0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.mat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.mProp.o.v)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this)},setMatte:function(id){this.matteElement&&this.matteElement.setAttribute("mask","url("+locationHref+"#"+id+")")}},IShapeElement.prototype={addShapeToModifiers:function(data){var i,len=this.shapeModifiers.length;for(i=0;i<len;i+=1)this.shapeModifiers[i].addShape(data)},isShapeInAnimatedModifiers:function(data){for(var len=this.shapeModifiers.length;0<len;)if(this.shapeModifiers[0].isAnimatedWithShape(data))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var i,len=this.shapes.length;for(i=0;i<len;i+=1)this.shapes[i].sh.reset();for(len=this.shapeModifiers.length,i=len-1;i>=0;i-=1)this.shapeModifiers[i].processShapes(this._isFirstFrame)}},lcEnum:{1:"butt",2:"round",3:"square"},ljEnum:{1:"miter",2:"round",3:"bevel"},searchProcessedElement:function(elem){for(var elements=this.processedElements,i=0,len=elements.length;i<len;){if(elements[i].elem===elem)return elements[i].pos;i+=1}return 0},addProcessedElement:function(elem,pos){for(var elements=this.processedElements,i=elements.length;i;)if(i-=1,elements[i].elem===elem)return void(elements[i].pos=pos);elements.push(new ProcessedElement(elem,pos))},prepareFrame:function(num){this.prepareRenderableFrame(num),this.prepareProperties(num,this.isInRange)}},ITextElement.prototype.initElement=function(data,globalData,comp){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(data,globalData,comp),this.textProperty=new TextProperty(this,data.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(data.t,this.renderType,this),this.initTransform(data,globalData,comp),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(num){this._mdf=!1,this.prepareRenderableFrame(num),this.prepareProperties(num,this.isInRange),(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)},ITextElement.prototype.createPathShape=function(matrixHelper,shapes){var j,pathNodes,jLen=shapes.length,shapeStr="";for(j=0;j<jLen;j+=1)pathNodes=shapes[j].ks.k,shapeStr+=buildShapeString(pathNodes,pathNodes.i.length,!0,matrixHelper);return shapeStr},ITextElement.prototype.updateDocumentData=function(newData,index){this.textProperty.updateDocumentData(newData,index)},ITextElement.prototype.canResizeFont=function(_canResize){this.textProperty.canResizeFont(_canResize)},ITextElement.prototype.setMinimumFontSize=function(_fontSize){this.textProperty.setMinimumFontSize(_fontSize)},ITextElement.prototype.applyTextPropertiesToMatrix=function(documentData,matrixHelper,lineNumber,xPos,yPos){switch(documentData.ps&&matrixHelper.translate(documentData.ps[0],documentData.ps[1]+documentData.ascent,0),matrixHelper.translate(0,-documentData.ls,0),documentData.j){case 1:matrixHelper.translate(documentData.justifyOffset+(documentData.boxWidth-documentData.lineWidths[lineNumber]),0,0);break;case 2:matrixHelper.translate(documentData.justifyOffset+(documentData.boxWidth-documentData.lineWidths[lineNumber])/2,0,0)}matrixHelper.translate(xPos,yPos,0)},ITextElement.prototype.buildColor=function(colorData){return"rgb("+Math.round(255*colorData[0])+","+Math.round(255*colorData[1])+","+Math.round(255*colorData[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(data,globalData,comp){this.initFrame(),this.initBaseData(data,globalData,comp),this.initTransform(data,globalData,comp),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&globalData.progressiveLoad||this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(num){if(this._mdf=!1,this.prepareRenderableFrame(num),this.prepareProperties(num,this.isInRange),this.isInRange||this.data.xt){if(this.tm._placeholder)this.renderedFrame=num/this.data.sr;else{var timeRemapped=this.tm.v;timeRemapped===this.data.op&&(timeRemapped=this.data.op-1),this.renderedFrame=timeRemapped}var i,len=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),i=len-1;i>=0;i-=1)(this.completeLayers||this.elements[i])&&(this.elements[i].prepareFrame(this.renderedFrame-this.layers[i].st),this.elements[i]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var i,len=this.layers.length;for(i=0;i<len;i+=1)(this.completeLayers||this.elements[i])&&this.elements[i].renderFrame()},ICompElement.prototype.setElements=function(elems){this.elements=elems},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var i,len=this.layers.length;for(i=0;i<len;i+=1)this.elements[i]&&this.elements[i].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var assetPath=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",assetPath),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var rect=createNS("rect");rect.setAttribute("width",this.data.sw),rect.setAttribute("height",this.data.sh),rect.setAttribute("fill",this.data.sc),this.layerElement.appendChild(rect)},extendPrototype([SVGRenderer,ICompElement,SVGBaseElement],SVGCompElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextElement),SVGTextElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextElement.prototype.buildTextContents=function(textArray){for(var i=0,len=textArray.length,textContents=[],currentTextContent="";i<len;)textArray[i]===String.fromCharCode(13)||textArray[i]===String.fromCharCode(3)?(textContents.push(currentTextContent),currentTextContent=""):currentTextContent+=textArray[i],i+=1;return textContents.push(currentTextContent),textContents},SVGTextElement.prototype.buildNewText=function(){var i,len,documentData=this.textProperty.currentData;this.renderedLetters=createSizedArray(documentData?documentData.l.length:0),documentData.fc?this.layerElement.setAttribute("fill",this.buildColor(documentData.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),documentData.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(documentData.sc)),this.layerElement.setAttribute("stroke-width",documentData.sw)),this.layerElement.setAttribute("font-size",documentData.finalSize);var fontData=this.globalData.fontManager.getFontByName(documentData.f);if(fontData.fClass)this.layerElement.setAttribute("class",fontData.fClass);else{this.layerElement.setAttribute("font-family",fontData.fFamily);var fWeight=documentData.fWeight,fStyle=documentData.fStyle;this.layerElement.setAttribute("font-style",fStyle),this.layerElement.setAttribute("font-weight",fWeight)}var letters=documentData.l||[],usesGlyphs=!!this.globalData.fontManager.chars;len=letters.length;var tSpan,shapes,matrixHelper=this.mHelper,shapeStr="",singleShape=this.data.singleShape,xPos=0,yPos=0,firstLine=!0,trackingOffset=documentData.tr/1e3*documentData.finalSize;if(!singleShape||usesGlyphs||documentData.sz){var shapeData,charData,cachedSpansLength=this.textSpans.length;for(i=0;i<len;i+=1)usesGlyphs&&singleShape&&0!==i||(tSpan=cachedSpansLength>i?this.textSpans[i]:createNS(usesGlyphs?"path":"text"),cachedSpansLength<=i&&(tSpan.setAttribute("stroke-linecap","butt"),tSpan.setAttribute("stroke-linejoin","round"),tSpan.setAttribute("stroke-miterlimit","4"),this.textSpans[i]=tSpan,this.layerElement.appendChild(tSpan)),tSpan.style.display="inherit"),matrixHelper.reset(),matrixHelper.scale(documentData.finalSize/100,documentData.finalSize/100),singleShape&&(letters[i].n&&(xPos=-trackingOffset,yPos+=documentData.yOffset,yPos+=firstLine?1:0,firstLine=!1),this.applyTextPropertiesToMatrix(documentData,matrixHelper,letters[i].line,xPos,yPos),xPos+=letters[i].l||0,xPos+=trackingOffset),usesGlyphs?(charData=this.globalData.fontManager.getCharData(documentData.finalText[i],fontData.fStyle,this.globalData.fontManager.getFontByName(documentData.f).fFamily),shapeData=charData&&charData.data||{},shapes=shapeData.shapes?shapeData.shapes[0].it:[],singleShape?shapeStr+=this.createPathShape(matrixHelper,shapes):tSpan.setAttribute("d",this.createPathShape(matrixHelper,shapes))):(singleShape&&tSpan.setAttribute("transform","translate("+matrixHelper.props[12]+","+matrixHelper.props[13]+")"),tSpan.textContent=letters[i].val,tSpan.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"));singleShape&&tSpan&&tSpan.setAttribute("d",shapeStr)}else{var tElement=this.textContainer,justify="start";switch(documentData.j){case 1:justify="end";break;case 2:justify="middle"}tElement.setAttribute("text-anchor",justify),tElement.setAttribute("letter-spacing",trackingOffset);var textContent=this.buildTextContents(documentData.finalText);for(len=textContent.length,yPos=documentData.ps?documentData.ps[1]+documentData.ascent:0,i=0;i<len;i+=1)tSpan=this.textSpans[i]||createNS("tspan"),tSpan.textContent=textContent[i],tSpan.setAttribute("x",0),tSpan.setAttribute("y",yPos),tSpan.style.display="inherit",tElement.appendChild(tSpan),this.textSpans[i]=tSpan,yPos+=documentData.finalLineHeight;this.layerElement.appendChild(tElement)}for(;i<this.textSpans.length;)this.textSpans[i].style.display="none",i+=1;this._sizeChanged=!0},SVGTextElement.prototype.sourceRectAtTime=function(time){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var textBox=this.layerElement.getBBox();this.bbox={top:textBox.y,left:textBox.x,width:textBox.width,height:textBox.height}}return this.bbox},SVGTextElement.prototype.renderInnerContent=function(){if(!this.data.singleShape&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var i,len,renderedLetters=this.textAnimator.renderedLetters,letters=this.textProperty.currentData.l;len=letters.length;var renderedLetter,textSpan;for(i=0;i<len;i+=1)letters[i].n||(renderedLetter=renderedLetters[i],textSpan=this.textSpans[i],renderedLetter._mdf.m&&textSpan.setAttribute("transform",renderedLetter.m),renderedLetter._mdf.o&&textSpan.setAttribute("opacity",renderedLetter.o),renderedLetter._mdf.sw&&textSpan.setAttribute("stroke-width",renderedLetter.sw),renderedLetter._mdf.sc&&textSpan.setAttribute("stroke",renderedLetter.sc),renderedLetter._mdf.fc&&textSpan.setAttribute("fill",renderedLetter.fc))}},extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var i,shape,j,style,len=this.shapes.length,jLen=this.stylesList.length,tempShapes=[],areAnimated=!1;for(j=0;j<jLen;j+=1){for(style=this.stylesList[j],areAnimated=!1,tempShapes.length=0,i=0;i<len;i+=1)shape=this.shapes[i],-1!==shape.styles.indexOf(style)&&(tempShapes.push(shape),areAnimated=shape._isAnimated||areAnimated);tempShapes.length>1&&areAnimated&&this.setShapesAsAnimated(tempShapes)}},SVGShapeElement.prototype.setShapesAsAnimated=function(shapes){var i,len=shapes.length;for(i=0;i<len;i+=1)shapes[i].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(data,level){var elementData,styleOb=new SVGStyleData(data,level),pathElement=styleOb.pElem;if("st"===data.ty)elementData=new SVGStrokeStyleData(this,data,styleOb);else if("fl"===data.ty)elementData=new SVGFillStyleData(this,data,styleOb);else if("gf"===data.ty||"gs"===data.ty){var gradientConstructor="gf"===data.ty?SVGGradientFillStyleData:SVGGradientStrokeStyleData;elementData=new gradientConstructor(this,data,styleOb),this.globalData.defs.appendChild(elementData.gf),elementData.maskId&&(this.globalData.defs.appendChild(elementData.ms),this.globalData.defs.appendChild(elementData.of),pathElement.setAttribute("mask","url("+locationHref+"#"+elementData.maskId+")"))}return"st"!==data.ty&&"gs"!==data.ty||(pathElement.setAttribute("stroke-linecap",this.lcEnum[data.lc]||"round"),pathElement.setAttribute("stroke-linejoin",this.ljEnum[data.lj]||"round"),pathElement.setAttribute("fill-opacity","0"),1===data.lj&&pathElement.setAttribute("stroke-miterlimit",data.ml)),2===data.r&&pathElement.setAttribute("fill-rule","evenodd"),data.ln&&pathElement.setAttribute("id",data.ln),data.cl&&pathElement.setAttribute("class",data.cl),data.bm&&(pathElement.style["mix-blend-mode"]=getBlendMode(data.bm)),this.stylesList.push(styleOb),this.addToAnimatedContents(data,elementData),elementData},SVGShapeElement.prototype.createGroupElement=function(data){var elementData=new ShapeGroupData;return data.ln&&elementData.gr.setAttribute("id",data.ln),data.cl&&elementData.gr.setAttribute("class",data.cl),data.bm&&(elementData.gr.style["mix-blend-mode"]=getBlendMode(data.bm)),elementData},SVGShapeElement.prototype.createTransformElement=function(data,container){var transformProperty=TransformPropertyFactory.getTransformProperty(this,data,this),elementData=new SVGTransformData(transformProperty,transformProperty.o,container);return this.addToAnimatedContents(data,elementData),elementData},SVGShapeElement.prototype.createShapeElement=function(data,ownTransformers,level){var ty=4;"rc"===data.ty?ty=5:"el"===data.ty?ty=6:"sr"===data.ty&&(ty=7);var shapeProperty=ShapePropertyFactory.getShapeProp(this,data,ty,this),elementData=new SVGShapeData(ownTransformers,level,shapeProperty);return this.shapes.push(elementData),this.addShapeToModifiers(elementData),this.addToAnimatedContents(data,elementData),elementData},SVGShapeElement.prototype.addToAnimatedContents=function(data,element){for(var i=0,len=this.animatedContents.length;i<len;){if(this.animatedContents[i].element===element)return;i+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(data),element:element,data:data})},SVGShapeElement.prototype.setElementStyles=function(elementData){var j,arr=elementData.styles,jLen=this.stylesList.length;for(j=0;j<jLen;j+=1)this.stylesList[j].closed||arr.push(this.stylesList[j])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var i,len=this.itemsData.length;for(i=0;i<len;i+=1)this.prevViewData[i]=this.itemsData[i];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),len=this.dynamicProperties.length,i=0;i<len;i+=1)this.dynamicProperties[i].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(arr,itemsData,prevViewData,container,level,transformers,render){var i,j,jLen,currentTransform,modifier,processedPos,ownTransformers=[].concat(transformers),len=arr.length-1,ownStyles=[],ownModifiers=[];for(i=len;i>=0;i-=1){if(processedPos=this.searchProcessedElement(arr[i]),processedPos?itemsData[i]=prevViewData[processedPos-1]:arr[i]._render=render,"fl"==arr[i].ty||"st"==arr[i].ty||"gf"==arr[i].ty||"gs"==arr[i].ty)processedPos?itemsData[i].style.closed=!1:itemsData[i]=this.createStyleElement(arr[i],level),arr[i]._render&&container.appendChild(itemsData[i].style.pElem),ownStyles.push(itemsData[i].style);else if("gr"==arr[i].ty){if(processedPos)for(jLen=itemsData[i].it.length,j=0;j<jLen;j+=1)itemsData[i].prevViewData[j]=itemsData[i].it[j];else itemsData[i]=this.createGroupElement(arr[i]);this.searchShapes(arr[i].it,itemsData[i].it,itemsData[i].prevViewData,itemsData[i].gr,level+1,ownTransformers,render),arr[i]._render&&container.appendChild(itemsData[i].gr)}else"tr"==arr[i].ty?(processedPos||(itemsData[i]=this.createTransformElement(arr[i],container)),currentTransform=itemsData[i].transform,ownTransformers.push(currentTransform)):"sh"==arr[i].ty||"rc"==arr[i].ty||"el"==arr[i].ty||"sr"==arr[i].ty?(processedPos||(itemsData[i]=this.createShapeElement(arr[i],ownTransformers,level)),this.setElementStyles(itemsData[i])):"tm"==arr[i].ty||"rd"==arr[i].ty||"ms"==arr[i].ty?(processedPos?(modifier=itemsData[i],modifier.closed=!1):(modifier=ShapeModifiers.getModifier(arr[i].ty),modifier.init(this,arr[i]),itemsData[i]=modifier,this.shapeModifiers.push(modifier)),ownModifiers.push(modifier)):"rp"==arr[i].ty&&(processedPos?(modifier=itemsData[i],
modifier.closed=!0):(modifier=ShapeModifiers.getModifier(arr[i].ty),itemsData[i]=modifier,modifier.init(this,arr,i,itemsData),this.shapeModifiers.push(modifier),render=!1),ownModifiers.push(modifier));this.addProcessedElement(arr[i],i+1)}for(len=ownStyles.length,i=0;i<len;i+=1)ownStyles[i].closed=!0;for(len=ownModifiers.length,i=0;i<len;i+=1)ownModifiers[i].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var i,len=this.stylesList.length;for(i=0;i<len;i+=1)this.stylesList[i].reset();for(this.renderShape(),i=0;i<len;i+=1)(this.stylesList[i]._mdf||this._isFirstFrame)&&(this.stylesList[i].msElem&&(this.stylesList[i].msElem.setAttribute("d",this.stylesList[i].d),this.stylesList[i].d="M0 0"+this.stylesList[i].d),this.stylesList[i].pElem.setAttribute("d",this.stylesList[i].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var i,animatedContent,len=this.animatedContents.length;for(i=0;i<len;i+=1)animatedContent=this.animatedContents[i],(this._isFirstFrame||animatedContent.element._isAnimated)&&!0!==animatedContent.data&&animatedContent.fn(animatedContent.data,animatedContent.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},SVGTintFilter.prototype.renderFrame=function(forceRender){if(forceRender||this.filterManager._mdf){var colorBlack=this.filterManager.effectElements[0].p.v,colorWhite=this.filterManager.effectElements[1].p.v,opacity=this.filterManager.effectElements[2].p.v/100;this.matrixFilter.setAttribute("values",colorWhite[0]-colorBlack[0]+" 0 0 0 "+colorBlack[0]+" "+(colorWhite[1]-colorBlack[1])+" 0 0 0 "+colorBlack[1]+" "+(colorWhite[2]-colorBlack[2])+" 0 0 0 "+colorBlack[2]+" 0 0 0 "+opacity+" 0")}},SVGFillFilter.prototype.renderFrame=function(forceRender){if(forceRender||this.filterManager._mdf){var color=this.filterManager.effectElements[2].p.v,opacity=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+color[0]+" 0 0 0 0 "+color[1]+" 0 0 0 0 "+color[2]+" 0 0 0 "+opacity+" 0")}},SVGStrokeEffect.prototype.initialize=function(){var path,groupPath,i,len,elemChildren=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(1===this.filterManager.effectElements[1].p.v?(len=this.elem.maskManager.masksProperties.length,i=0):(i=this.filterManager.effectElements[0].p.v-1,len=i+1),groupPath=createNS("g"),groupPath.setAttribute("fill","none"),groupPath.setAttribute("stroke-linecap","round"),groupPath.setAttribute("stroke-dashoffset",1),i;i<len;i+=1)path=createNS("path"),groupPath.appendChild(path),this.paths.push({p:path,m:i});if(3===this.filterManager.effectElements[10].p.v){var mask=createNS("mask"),id=createElementID();mask.setAttribute("id",id),mask.setAttribute("mask-type","alpha"),mask.appendChild(groupPath),this.elem.globalData.defs.appendChild(mask);var g=createNS("g");for(g.setAttribute("mask","url("+locationHref+"#"+id+")");elemChildren[0];)g.appendChild(elemChildren[0]);this.elem.layerElement.appendChild(g),this.masker=mask,groupPath.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v)for(elemChildren=this.elem.layerElement.children||this.elem.layerElement.childNodes;elemChildren.length;)this.elem.layerElement.removeChild(elemChildren[0]);this.elem.layerElement.appendChild(groupPath),this.elem.layerElement.removeAttribute("mask"),groupPath.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=groupPath},SVGStrokeEffect.prototype.renderFrame=function(forceRender){this.initialized||this.initialize();var i,mask,path,len=this.paths.length;for(i=0;i<len;i+=1)if(-1!==this.paths[i].m&&(mask=this.elem.maskManager.viewData[this.paths[i].m],path=this.paths[i].p,(forceRender||this.filterManager._mdf||mask.prop._mdf)&&path.setAttribute("d",mask.lastPath),forceRender||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||mask.prop._mdf)){var dasharrayValue;if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){var s=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100,e=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100,l=path.getTotalLength();dasharrayValue="0 0 0 "+l*s+" ";var j,lineLength=l*(e-s),segment=1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100,units=Math.floor(lineLength/segment);for(j=0;j<units;j+=1)dasharrayValue+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100+" ";dasharrayValue+="0 "+10*l+" 0 0"}else dasharrayValue="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100;path.setAttribute("stroke-dasharray",dasharrayValue)}if((forceRender||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(forceRender||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v)&&(forceRender||this.filterManager.effectElements[3].p._mdf)){var color=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bm_floor(255*color[0])+","+bm_floor(255*color[1])+","+bm_floor(255*color[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(forceRender){if(forceRender||this.filterManager._mdf){var color1=this.filterManager.effectElements[0].p.v,color2=this.filterManager.effectElements[1].p.v,color3=this.filterManager.effectElements[2].p.v,tableR=color3[0]+" "+color2[0]+" "+color1[0],tableG=color3[1]+" "+color2[1]+" "+color1[1],tableB=color3[2]+" "+color2[2]+" "+color1[2];this.feFuncR.setAttribute("tableValues",tableR),this.feFuncG.setAttribute("tableValues",tableG),this.feFuncB.setAttribute("tableValues",tableB)}},SVGProLevelsFilter.prototype.createFeFunc=function(type,feComponentTransfer){var feFunc=createNS(type);return feFunc.setAttribute("type","table"),feComponentTransfer.appendChild(feFunc),feFunc},SVGProLevelsFilter.prototype.getTableValue=function(inputBlack,inputWhite,gamma,outputBlack,outputWhite){for(var perc,colorValue,cnt=0,min=Math.min(inputBlack,inputWhite),max=Math.max(inputBlack,inputWhite),table=Array.call(null,{length:256}),pos=0,outputDelta=outputWhite-outputBlack,inputDelta=inputWhite-inputBlack;cnt<=256;)perc=cnt/256,colorValue=perc<=min?inputDelta<0?outputWhite:outputBlack:perc>=max?inputDelta<0?outputBlack:outputWhite:outputBlack+outputDelta*Math.pow((perc-inputBlack)/inputDelta,1/gamma),table[pos++]=colorValue,cnt+=256/255;return table.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(forceRender){if(forceRender||this.filterManager._mdf){var val,effectElements=this.filterManager.effectElements;this.feFuncRComposed&&(forceRender||effectElements[3].p._mdf||effectElements[4].p._mdf||effectElements[5].p._mdf||effectElements[6].p._mdf||effectElements[7].p._mdf)&&(val=this.getTableValue(effectElements[3].p.v,effectElements[4].p.v,effectElements[5].p.v,effectElements[6].p.v,effectElements[7].p.v),this.feFuncRComposed.setAttribute("tableValues",val),this.feFuncGComposed.setAttribute("tableValues",val),this.feFuncBComposed.setAttribute("tableValues",val)),this.feFuncR&&(forceRender||effectElements[10].p._mdf||effectElements[11].p._mdf||effectElements[12].p._mdf||effectElements[13].p._mdf||effectElements[14].p._mdf)&&(val=this.getTableValue(effectElements[10].p.v,effectElements[11].p.v,effectElements[12].p.v,effectElements[13].p.v,effectElements[14].p.v),this.feFuncR.setAttribute("tableValues",val)),this.feFuncG&&(forceRender||effectElements[17].p._mdf||effectElements[18].p._mdf||effectElements[19].p._mdf||effectElements[20].p._mdf||effectElements[21].p._mdf)&&(val=this.getTableValue(effectElements[17].p.v,effectElements[18].p.v,effectElements[19].p.v,effectElements[20].p.v,effectElements[21].p.v),this.feFuncG.setAttribute("tableValues",val)),this.feFuncB&&(forceRender||effectElements[24].p._mdf||effectElements[25].p._mdf||effectElements[26].p._mdf||effectElements[27].p._mdf||effectElements[28].p._mdf)&&(val=this.getTableValue(effectElements[24].p.v,effectElements[25].p.v,effectElements[26].p.v,effectElements[27].p.v,effectElements[28].p.v),this.feFuncB.setAttribute("tableValues",val)),this.feFuncA&&(forceRender||effectElements[31].p._mdf||effectElements[32].p._mdf||effectElements[33].p._mdf||effectElements[34].p._mdf||effectElements[35].p._mdf)&&(val=this.getTableValue(effectElements[31].p.v,effectElements[32].p.v,effectElements[33].p.v,effectElements[34].p.v,effectElements[35].p.v),this.feFuncA.setAttribute("tableValues",val))}},SVGDropShadowEffect.prototype.renderFrame=function(forceRender){if(forceRender||this.filterManager._mdf){if((forceRender||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),forceRender||this.filterManager.effectElements[0].p._mdf){var col=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*col[0]),Math.round(255*col[1]),Math.round(255*col[2])))}if((forceRender||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),forceRender||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var distance=this.filterManager.effectElements[3].p.v,angle=(this.filterManager.effectElements[2].p.v-90)*degToRads,x=distance*Math.cos(angle),y=distance*Math.sin(angle);this.feOffset.setAttribute("dx",x),this.feOffset.setAttribute("dy",y)}}};var _svgMatteSymbols=[];SVGMatte3Effect.prototype.findSymbol=function(mask){for(var i=0,len=_svgMatteSymbols.length;i<len;){if(_svgMatteSymbols[i]===mask)return _svgMatteSymbols[i];i+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(mask,symbolId){var parentNode=mask.layerElement.parentNode;if(parentNode){for(var children=parentNode.children,i=0,len=children.length;i<len&&children[i]!==mask.layerElement;)i+=1;var nextChild;i<=len-2&&(nextChild=children[i+1]);var useElem=createNS("use");useElem.setAttribute("href","#"+symbolId),nextChild?parentNode.insertBefore(useElem,nextChild):parentNode.appendChild(useElem)}},SVGMatte3Effect.prototype.setElementAsMask=function(elem,mask){if(!this.findSymbol(mask)){var symbolId=createElementID(),masker=createNS("mask");masker.setAttribute("id",mask.layerId),masker.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(mask);var defs=elem.globalData.defs;defs.appendChild(masker);var symbol=createNS("symbol");symbol.setAttribute("id",symbolId),this.replaceInParent(mask,symbolId),symbol.appendChild(mask.layerElement),defs.appendChild(symbol);var useElem=createNS("use");useElem.setAttribute("href","#"+symbolId),masker.appendChild(useElem),mask.data.hd=!1,mask.show()}elem.setMatte(mask.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var ind=this.filterManager.effectElements[0].p.v,elements=this.elem.comp.elements,i=0,len=elements.length;i<len;)elements[i]&&elements[i].data.ind===ind&&this.setElementAsMask(this.elem,elements[i]),i+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGEffects.prototype.renderFrame=function(_isFirstFrame){var i,len=this.filters.length;for(i=0;i<len;i+=1)this.filters[i].renderFrame(_isFirstFrame)},CVContextData.prototype.duplicate=function(){var newLength=2*this._length,currentSavedOp=this.savedOp;this.savedOp=createTypedArray("float32",newLength),this.savedOp.set(currentSavedOp);var i=0;for(i=this._length;i<newLength;i+=1)this.saved[i]=createTypedArray("float32",16);this._length=newLength},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.cO=1},CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){this.canvasContext=this.globalData.canvasContext,this.renderableEffectsManager=new CVEffects(this)},createContent:function(){},setBlendMode:function(){var globalData=this.globalData;if(globalData.blendMode!==this.data.bm){globalData.blendMode=this.data.bm;var blendModeValue=getBlendMode(this.data.bm);globalData.canvasContext.globalCompositeOperation=blendModeValue}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},renderFrame:function(){this.hidden||this.data.hd||(this.renderTransform(),this.renderRenderable(),this.setBlendMode(),this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(this.finalTransform.mat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v),this.renderInnerContent(),this.globalData.renderer.restore(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var canvas=createTag("canvas");canvas.width=this.assetData.w,canvas.height=this.assetData.h;var widthCrop,heightCrop,ctx=canvas.getContext("2d"),imgW=this.img.width,imgH=this.img.height,imgRel=imgW/imgH,canvasRel=this.assetData.w/this.assetData.h,par=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;imgRel>canvasRel&&"xMidYMid slice"===par||imgRel<canvasRel&&"xMidYMid slice"!==par?(heightCrop=imgH,widthCrop=heightCrop*canvasRel):(widthCrop=imgW,heightCrop=widthCrop/canvasRel),ctx.drawImage(this.img,(imgW-widthCrop)/2,(imgH-heightCrop)/2,widthCrop,heightCrop,0,0,this.assetData.w,this.assetData.h),this.img=canvas}},CVImageElement.prototype.renderInnerContent=function(parentMatrix){this.failed||this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([CanvasRenderer,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var i,len=this.layers.length;for(i=len-1;i>=0;i-=1)(this.completeLayers||this.elements[i])&&this.elements[i].renderFrame()},CVCompElement.prototype.destroy=function(){var i,len=this.layers.length;for(i=len-1;i>=0;i-=1)this.elements[i]&&this.elements[i].destroy();this.layers=null,this.elements=null},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var i,pt,pts,data,transform=this.element.finalTransform.mat,ctx=this.element.canvasContext,len=this.masksProperties.length;for(ctx.beginPath(),i=0;i<len;i++)if("n"!==this.masksProperties[i].mode){this.masksProperties[i].inv&&(ctx.moveTo(0,0),ctx.lineTo(this.element.globalData.compSize.w,0),ctx.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),ctx.lineTo(0,this.element.globalData.compSize.h),ctx.lineTo(0,0)),data=this.viewData[i].v,pt=transform.applyToPointArray(data.v[0][0],data.v[0][1],0),ctx.moveTo(pt[0],pt[1]);var j,jLen=data._length;for(j=1;j<jLen;j++)pts=transform.applyToTriplePoints(data.o[j-1],data.i[j],data.v[j]),ctx.bezierCurveTo(pts[0],pts[1],pts[2],pts[3],pts[4],pts[5]);pts=transform.applyToTriplePoints(data.o[j-1],data.i[0],data.v[0]),ctx.bezierCurveTo(pts[0],pts[1],pts[2],pts[3],pts[4],pts[5])}this.element.globalData.renderer.save(!0),ctx.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(data,transforms){var styleElem={data:data,type:data.ty,preTransforms:this.transformsManager.addTransformSequence(transforms),transforms:[],elements:[],closed:!0===data.hd},elementData={};if("fl"==data.ty||"st"==data.ty?(elementData.c=PropertyFactory.getProp(this,data.c,1,255,this),elementData.c.k||(styleElem.co="rgb("+bm_floor(elementData.c.v[0])+","+bm_floor(elementData.c.v[1])+","+bm_floor(elementData.c.v[2])+")")):"gf"!==data.ty&&"gs"!==data.ty||(elementData.s=PropertyFactory.getProp(this,data.s,1,null,this),elementData.e=PropertyFactory.getProp(this,data.e,1,null,this),elementData.h=PropertyFactory.getProp(this,data.h||{k:0},0,.01,this),elementData.a=PropertyFactory.getProp(this,data.a||{k:0},0,degToRads,this),elementData.g=new GradientProperty(this,data.g,this)),elementData.o=PropertyFactory.getProp(this,data.o,0,.01,this),"st"==data.ty||"gs"==data.ty){if(styleElem.lc=this.lcEnum[data.lc]||"round",styleElem.lj=this.ljEnum[data.lj]||"round",1==data.lj&&(styleElem.ml=data.ml),elementData.w=PropertyFactory.getProp(this,data.w,0,null,this),elementData.w.k||(styleElem.wi=elementData.w.v),data.d){var d=new DashProperty(this,data.d,"canvas",this);elementData.d=d,elementData.d.k||(styleElem.da=elementData.d.dashArray,styleElem.do=elementData.d.dashoffset[0])}}else styleElem.r=2===data.r?"evenodd":"nonzero";return this.stylesList.push(styleElem),elementData.style=styleElem,elementData},CVShapeElement.prototype.createGroupElement=function(data){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(data){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,data.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,data,this)}}},CVShapeElement.prototype.createShapeElement=function(data){var elementData=new CVShapeData(this,data,this.stylesList,this.transformsManager);return this.shapes.push(elementData),this.addShapeToModifiers(elementData),elementData},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var i,len=this.itemsData.length;for(i=0;i<len;i+=1)this.prevViewData[i]=this.itemsData[i];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),len=this.dynamicProperties.length,i=0;i<len;i+=1)this.dynamicProperties[i].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(transform){var i,len=this.stylesList.length;for(i=0;i<len;i+=1)this.stylesList[i].closed||this.stylesList[i].transforms.push(transform)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var i,len=this.stylesList.length;for(i=0;i<len;i+=1)this.stylesList[i].closed||this.stylesList[i].transforms.pop()},CVShapeElement.prototype.closeStyles=function(styles){var i,len=styles.length;for(i=0;i<len;i+=1)styles[i].closed=!0},CVShapeElement.prototype.searchShapes=function(arr,itemsData,prevViewData,shouldRender,transforms){var i,j,jLen,processedPos,modifier,currentTransform,len=arr.length-1,ownStyles=[],ownModifiers=[],ownTransforms=[].concat(transforms);for(i=len;i>=0;i-=1){if(processedPos=this.searchProcessedElement(arr[i]),processedPos?itemsData[i]=prevViewData[processedPos-1]:arr[i]._shouldRender=shouldRender,"fl"==arr[i].ty||"st"==arr[i].ty||"gf"==arr[i].ty||"gs"==arr[i].ty)processedPos?itemsData[i].style.closed=!1:itemsData[i]=this.createStyleElement(arr[i],ownTransforms),ownStyles.push(itemsData[i].style);else if("gr"==arr[i].ty){if(processedPos)for(jLen=itemsData[i].it.length,j=0;j<jLen;j+=1)itemsData[i].prevViewData[j]=itemsData[i].it[j];else itemsData[i]=this.createGroupElement(arr[i]);this.searchShapes(arr[i].it,itemsData[i].it,itemsData[i].prevViewData,shouldRender,ownTransforms)}else"tr"==arr[i].ty?(processedPos||(currentTransform=this.createTransformElement(arr[i]),itemsData[i]=currentTransform),ownTransforms.push(itemsData[i]),this.addTransformToStyleList(itemsData[i])):"sh"==arr[i].ty||"rc"==arr[i].ty||"el"==arr[i].ty||"sr"==arr[i].ty?processedPos||(itemsData[i]=this.createShapeElement(arr[i])):"tm"==arr[i].ty||"rd"==arr[i].ty?(processedPos?(modifier=itemsData[i],modifier.closed=!1):(modifier=ShapeModifiers.getModifier(arr[i].ty),modifier.init(this,arr[i]),itemsData[i]=modifier,this.shapeModifiers.push(modifier)),ownModifiers.push(modifier)):"rp"==arr[i].ty&&(processedPos?(modifier=itemsData[i],modifier.closed=!0):(modifier=ShapeModifiers.getModifier(arr[i].ty),itemsData[i]=modifier,modifier.init(this,arr,i,itemsData),this.shapeModifiers.push(modifier),shouldRender=!1),ownModifiers.push(modifier));this.addProcessedElement(arr[i],i+1)}for(this.removeTransformFromStyleList(),this.closeStyles(ownStyles),len=ownModifiers.length,i=0;i<len;i+=1)ownModifiers[i].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(parentTransform,groupTransform){(parentTransform._opMdf||groupTransform.op._mdf||this._isFirstFrame)&&(groupTransform.opacity=parentTransform.opacity,groupTransform.opacity*=groupTransform.op.v,groupTransform._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var i,j,jLen,k,kLen,elems,nodes,type,currentStyle,len=this.stylesList.length,renderer=this.globalData.renderer,ctx=this.globalData.canvasContext;for(i=0;i<len;i+=1)if(currentStyle=this.stylesList[i],("st"!==(type=currentStyle.type)&&"gs"!==type||0!==currentStyle.wi)&&currentStyle.data._shouldRender&&0!==currentStyle.coOp&&0!==this.globalData.currentGlobalAlpha){for(renderer.save(),elems=currentStyle.elements,"st"===type||"gs"===type?(ctx.strokeStyle="st"===type?currentStyle.co:currentStyle.grd,ctx.lineWidth=currentStyle.wi,ctx.lineCap=currentStyle.lc,ctx.lineJoin=currentStyle.lj,ctx.miterLimit=currentStyle.ml||0):ctx.fillStyle="fl"===type?currentStyle.co:currentStyle.grd,renderer.ctxOpacity(currentStyle.coOp),"st"!==type&&"gs"!==type&&ctx.beginPath(),renderer.ctxTransform(currentStyle.preTransforms.finalTransform.props),jLen=elems.length,j=0;j<jLen;j+=1){for("st"!==type&&"gs"!==type||(ctx.beginPath(),currentStyle.da&&(ctx.setLineDash(currentStyle.da),ctx.lineDashOffset=currentStyle.do)),nodes=elems[j].trNodes,kLen=nodes.length,k=0;k<kLen;k+=1)"m"==nodes[k].t?ctx.moveTo(nodes[k].p[0],nodes[k].p[1]):"c"==nodes[k].t?ctx.bezierCurveTo(nodes[k].pts[0],nodes[k].pts[1],nodes[k].pts[2],nodes[k].pts[3],nodes[k].pts[4],nodes[k].pts[5]):ctx.closePath();"st"!==type&&"gs"!==type||(ctx.stroke(),currentStyle.da&&ctx.setLineDash(this.dashResetter))}"st"!==type&&"gs"!==type&&ctx.fill(currentStyle.r),renderer.restore()}},CVShapeElement.prototype.renderShape=function(parentTransform,items,data,isMain){var i,groupTransform,len=items.length-1;for(groupTransform=parentTransform,i=len;i>=0;i-=1)"tr"==items[i].ty?(groupTransform=data[i].transform,this.renderShapeTransform(parentTransform,groupTransform)):"sh"==items[i].ty||"el"==items[i].ty||"rc"==items[i].ty||"sr"==items[i].ty?this.renderPath(items[i],data[i]):"fl"==items[i].ty?this.renderFill(items[i],data[i],groupTransform):"st"==items[i].ty?this.renderStroke(items[i],data[i],groupTransform):"gf"==items[i].ty||"gs"==items[i].ty?this.renderGradientFill(items[i],data[i],groupTransform):"gr"==items[i].ty?this.renderShape(groupTransform,items[i].it,data[i].it):items[i].ty;isMain&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(styledShape,shape){if(this._isFirstFrame||shape._mdf||styledShape.transforms._mdf){var i,len,j,shapeNodes=styledShape.trNodes,paths=shape.paths,jLen=paths._length;shapeNodes.length=0;var groupTransformMat=styledShape.transforms.finalTransform;for(j=0;j<jLen;j+=1){var pathNodes=paths.shapes[j];if(pathNodes&&pathNodes.v){for(len=pathNodes._length,i=1;i<len;i+=1)1===i&&shapeNodes.push({t:"m",p:groupTransformMat.applyToPointArray(pathNodes.v[0][0],pathNodes.v[0][1],0)}),shapeNodes.push({t:"c",pts:groupTransformMat.applyToTriplePoints(pathNodes.o[i-1],pathNodes.i[i],pathNodes.v[i])});1===len&&shapeNodes.push({t:"m",p:groupTransformMat.applyToPointArray(pathNodes.v[0][0],pathNodes.v[0][1],0)}),pathNodes.c&&len&&(shapeNodes.push({t:"c",pts:groupTransformMat.applyToTriplePoints(pathNodes.o[i-1],pathNodes.i[0],pathNodes.v[0])}),shapeNodes.push({t:"z"}))}}styledShape.trNodes=shapeNodes}},CVShapeElement.prototype.renderPath=function(pathData,itemData){if(!0!==pathData.hd&&pathData._shouldRender){var i,len=itemData.styledShapes.length;for(i=0;i<len;i+=1)this.renderStyledShape(itemData.styledShapes[i],itemData.sh)}},CVShapeElement.prototype.renderFill=function(styleData,itemData,groupTransform){var styleElem=itemData.style;(itemData.c._mdf||this._isFirstFrame)&&(styleElem.co="rgb("+bm_floor(itemData.c.v[0])+","+bm_floor(itemData.c.v[1])+","+bm_floor(itemData.c.v[2])+")"),(itemData.o._mdf||groupTransform._opMdf||this._isFirstFrame)&&(styleElem.coOp=itemData.o.v*groupTransform.opacity)},CVShapeElement.prototype.renderGradientFill=function(styleData,itemData,groupTransform){var styleElem=itemData.style;if(!styleElem.grd||itemData.g._mdf||itemData.s._mdf||itemData.e._mdf||1!==styleData.t&&(itemData.h._mdf||itemData.a._mdf)){var grd,ctx=this.globalData.canvasContext,pt1=itemData.s.v,pt2=itemData.e.v;if(1===styleData.t)grd=ctx.createLinearGradient(pt1[0],pt1[1],pt2[0],pt2[1]);else var rad=Math.sqrt(Math.pow(pt1[0]-pt2[0],2)+Math.pow(pt1[1]-pt2[1],2)),ang=Math.atan2(pt2[1]-pt1[1],pt2[0]-pt1[0]),percent=itemData.h.v>=1?.99:itemData.h.v<=-1?-.99:itemData.h.v,dist=rad*percent,x=Math.cos(ang+itemData.a.v)*dist+pt1[0],y=Math.sin(ang+itemData.a.v)*dist+pt1[1],grd=ctx.createRadialGradient(x,y,0,pt1[0],pt1[1],rad);var i,len=styleData.g.p,cValues=itemData.g.c,opacity=1;for(i=0;i<len;i+=1)itemData.g._hasOpacity&&itemData.g._collapsable&&(opacity=itemData.g.o[2*i+1]),grd.addColorStop(cValues[4*i]/100,"rgba("+cValues[4*i+1]+","+cValues[4*i+2]+","+cValues[4*i+3]+","+opacity+")");styleElem.grd=grd}styleElem.coOp=itemData.o.v*groupTransform.opacity},CVShapeElement.prototype.renderStroke=function(styleData,itemData,groupTransform){var styleElem=itemData.style,d=itemData.d;d&&(d._mdf||this._isFirstFrame)&&(styleElem.da=d.dashArray,styleElem.do=d.dashoffset[0]),(itemData.c._mdf||this._isFirstFrame)&&(styleElem.co="rgb("+bm_floor(itemData.c.v[0])+","+bm_floor(itemData.c.v[1])+","+bm_floor(itemData.c.v[2])+")"),(itemData.o._mdf||groupTransform._opMdf||this._isFirstFrame)&&(styleElem.coOp=itemData.o.v*groupTransform.opacity),(itemData.w._mdf||this._isFirstFrame)&&(styleElem.wi=itemData.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){var ctx=this.canvasContext;ctx.fillStyle=this.data.sc,ctx.fillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var documentData=this.textProperty.currentData;this.renderedLetters=createSizedArray(documentData.l?documentData.l.length:0);var hasFill=!1;documentData.fc?(hasFill=!0,this.values.fill=this.buildColor(documentData.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=hasFill;var hasStroke=!1;documentData.sc&&(hasStroke=!0,this.values.stroke=this.buildColor(documentData.sc),this.values.sWidth=documentData.sw);var i,len,fontData=this.globalData.fontManager.getFontByName(documentData.f),letters=documentData.l,matrixHelper=this.mHelper;this.stroke=hasStroke,this.values.fValue=documentData.finalSize+"px "+this.globalData.fontManager.getFontByName(documentData.f).fFamily,len=documentData.finalText.length;var charData,shapeData,k,kLen,shapes,j,jLen,pathNodes,commands,pathArr,singleShape=this.data.singleShape,trackingOffset=documentData.tr/1e3*documentData.finalSize,xPos=0,yPos=0,firstLine=!0,cnt=0;for(i=0;i<len;i+=1){for(charData=this.globalData.fontManager.getCharData(documentData.finalText[i],fontData.fStyle,this.globalData.fontManager.getFontByName(documentData.f).fFamily),shapeData=charData&&charData.data||{},matrixHelper.reset(),singleShape&&letters[i].n&&(xPos=-trackingOffset,yPos+=documentData.yOffset,yPos+=firstLine?1:0,firstLine=!1),shapes=shapeData.shapes?shapeData.shapes[0].it:[],jLen=shapes.length,matrixHelper.scale(documentData.finalSize/100,documentData.finalSize/100),singleShape&&this.applyTextPropertiesToMatrix(documentData,matrixHelper,letters[i].line,xPos,yPos),commands=createSizedArray(jLen),j=0;j<jLen;j+=1){for(kLen=shapes[j].ks.k.i.length,pathNodes=shapes[j].ks.k,pathArr=[],k=1;k<kLen;k+=1)1==k&&pathArr.push(matrixHelper.applyToX(pathNodes.v[0][0],pathNodes.v[0][1],0),matrixHelper.applyToY(pathNodes.v[0][0],pathNodes.v[0][1],0)),pathArr.push(matrixHelper.applyToX(pathNodes.o[k-1][0],pathNodes.o[k-1][1],0),matrixHelper.applyToY(pathNodes.o[k-1][0],pathNodes.o[k-1][1],0),matrixHelper.applyToX(pathNodes.i[k][0],pathNodes.i[k][1],0),matrixHelper.applyToY(pathNodes.i[k][0],pathNodes.i[k][1],0),matrixHelper.applyToX(pathNodes.v[k][0],pathNodes.v[k][1],0),matrixHelper.applyToY(pathNodes.v[k][0],pathNodes.v[k][1],0));pathArr.push(matrixHelper.applyToX(pathNodes.o[k-1][0],pathNodes.o[k-1][1],0),matrixHelper.applyToY(pathNodes.o[k-1][0],pathNodes.o[k-1][1],0),matrixHelper.applyToX(pathNodes.i[0][0],pathNodes.i[0][1],0),matrixHelper.applyToY(pathNodes.i[0][0],pathNodes.i[0][1],0),matrixHelper.applyToX(pathNodes.v[0][0],pathNodes.v[0][1],0),matrixHelper.applyToY(pathNodes.v[0][0],pathNodes.v[0][1],0)),commands[j]=pathArr}singleShape&&(xPos+=letters[i].l,xPos+=trackingOffset),this.textSpans[cnt]?this.textSpans[cnt].elem=commands:this.textSpans[cnt]={elem:commands},cnt+=1}},CVTextElement.prototype.renderInnerContent=function(){var ctx=this.canvasContext;this.finalTransform.mat.props;ctx.font=this.values.fValue,ctx.lineCap="butt",ctx.lineJoin="miter",ctx.miterLimit=4,this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var i,len,j,jLen,k,kLen,renderedLetters=this.textAnimator.renderedLetters,letters=this.textProperty.currentData.l;len=letters.length;var renderedLetter,commands,pathArr,lastFill=null,lastStroke=null,lastStrokeW=null;for(i=0;i<len;i+=1)if(!letters[i].n){if(renderedLetter=renderedLetters[i],renderedLetter&&(this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(renderedLetter.p),this.globalData.renderer.ctxOpacity(renderedLetter.o)),this.fill){
for(renderedLetter&&renderedLetter.fc?lastFill!==renderedLetter.fc&&(lastFill=renderedLetter.fc,ctx.fillStyle=renderedLetter.fc):lastFill!==this.values.fill&&(lastFill=this.values.fill,ctx.fillStyle=this.values.fill),commands=this.textSpans[i].elem,jLen=commands.length,this.globalData.canvasContext.beginPath(),j=0;j<jLen;j+=1)for(pathArr=commands[j],kLen=pathArr.length,this.globalData.canvasContext.moveTo(pathArr[0],pathArr[1]),k=2;k<kLen;k+=6)this.globalData.canvasContext.bezierCurveTo(pathArr[k],pathArr[k+1],pathArr[k+2],pathArr[k+3],pathArr[k+4],pathArr[k+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.fill()}if(this.stroke){for(renderedLetter&&renderedLetter.sw?lastStrokeW!==renderedLetter.sw&&(lastStrokeW=renderedLetter.sw,ctx.lineWidth=renderedLetter.sw):lastStrokeW!==this.values.sWidth&&(lastStrokeW=this.values.sWidth,ctx.lineWidth=this.values.sWidth),renderedLetter&&renderedLetter.sc?lastStroke!==renderedLetter.sc&&(lastStroke=renderedLetter.sc,ctx.strokeStyle=renderedLetter.sc):lastStroke!==this.values.stroke&&(lastStroke=this.values.stroke,ctx.strokeStyle=this.values.stroke),commands=this.textSpans[i].elem,jLen=commands.length,this.globalData.canvasContext.beginPath(),j=0;j<jLen;j+=1)for(pathArr=commands[j],kLen=pathArr.length,this.globalData.canvasContext.moveTo(pathArr[0],pathArr[1]),k=2;k<kLen;k+=6)this.globalData.canvasContext.bezierCurveTo(pathArr[k],pathArr[k+1],pathArr[k+2],pathArr[k+3],pathArr[k+4],pathArr[k+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.stroke()}renderedLetter&&this.globalData.renderer.restore()}},CVEffects.prototype.renderFrame=function(){},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&(this.transformedElement.style.transform=this.transformedElement.style.webkitTransform=this.finalTransform.mat.toCSS()),this.finalTransform._opMdf&&(this.transformedElement.style.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=HybridRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var rect;this.data.hasMask?(rect=createNS("rect"),rect.setAttribute("width",this.data.sw),rect.setAttribute("height",this.data.sh),rect.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(rect=createTag("div"),rect.style.width=this.data.sw+"px",rect.style.height=this.data.sh+"px",rect.style.backgroundColor=this.data.sc),this.layerElement.appendChild(rect)},extendPrototype([HybridRenderer,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(elem,pos){for(var nextElement,j=0;j<pos;)this.elements[j]&&this.elements[j].getBaseElement&&(nextElement=this.elements[j].getBaseElement()),j+=1;nextElement?this.layerElement.insertBefore(elem,nextElement):this.layerElement.appendChild(elem)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var cont;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),cont=this.svgElement;else{cont=createNS("svg");var size=this.comp.data?this.comp.data:this.globalData.compSize;cont.setAttribute("width",size.w),cont.setAttribute("height",size.h),cont.appendChild(this.shapesContainer),this.layerElement.appendChild(cont)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=cont},HShapeElement.prototype.getTransformedPoint=function(transformers,point){var i,len=transformers.length;for(i=0;i<len;i+=1)point=transformers[i].mProps.v.applyToPointArray(point[0],point[1],0);return point},HShapeElement.prototype.calculateShapeBoundingBox=function(item,boundingBox){var i,vPoint,oPoint,nextIPoint,nextVPoint,shape=item.sh.v,transformers=item.transformers,len=shape._length;if(!(len<=1)){for(i=0;i<len-1;i+=1)vPoint=this.getTransformedPoint(transformers,shape.v[i]),oPoint=this.getTransformedPoint(transformers,shape.o[i]),nextIPoint=this.getTransformedPoint(transformers,shape.i[i+1]),nextVPoint=this.getTransformedPoint(transformers,shape.v[i+1]),this.checkBounds(vPoint,oPoint,nextIPoint,nextVPoint,boundingBox);shape.c&&(vPoint=this.getTransformedPoint(transformers,shape.v[i]),oPoint=this.getTransformedPoint(transformers,shape.o[i]),nextIPoint=this.getTransformedPoint(transformers,shape.i[0]),nextVPoint=this.getTransformedPoint(transformers,shape.v[0]),this.checkBounds(vPoint,oPoint,nextIPoint,nextVPoint,boundingBox))}},HShapeElement.prototype.checkBounds=function(vPoint,oPoint,nextIPoint,nextVPoint,boundingBox){this.getBoundsOfCurve(vPoint,oPoint,nextIPoint,nextVPoint);var bounds=this.shapeBoundingBox;boundingBox.x=bm_min(bounds.left,boundingBox.x),boundingBox.xMax=bm_max(bounds.right,boundingBox.xMax),boundingBox.y=bm_min(bounds.top,boundingBox.y),boundingBox.yMax=bm_max(bounds.bottom,boundingBox.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(p0,p1,p2,p3){for(var a,b,c,t,b2ac,t1,t2,bounds=[[p0[0],p3[0]],[p0[1],p3[1]]],i=0;i<2;++i)if(b=6*p0[i]-12*p1[i]+6*p2[i],a=-3*p0[i]+9*p1[i]-9*p2[i]+3*p3[i],c=3*p1[i]-3*p0[i],b|=0,a|=0,c|=0,0!==a)(b2ac=b*b-4*c*a)<0||(t1=(-b+bm_sqrt(b2ac))/(2*a),0<t1&&t1<1&&bounds[i].push(this.calculateF(t1,p0,p1,p2,p3,i)),0<(t2=(-b-bm_sqrt(b2ac))/(2*a))&&t2<1&&bounds[i].push(this.calculateF(t2,p0,p1,p2,p3,i)));else{if(0===b)continue;0<(t=-c/b)&&t<1&&bounds[i].push(this.calculateF(t,p0,p1,p2,p3,i))}this.shapeBoundingBox.left=bm_min.apply(null,bounds[0]),this.shapeBoundingBox.top=bm_min.apply(null,bounds[1]),this.shapeBoundingBox.right=bm_max.apply(null,bounds[0]),this.shapeBoundingBox.bottom=bm_max.apply(null,bounds[1])},HShapeElement.prototype.calculateF=function(t,p0,p1,p2,p3,i){return bm_pow(1-t,3)*p0[i]+3*bm_pow(1-t,2)*t*p1[i]+3*(1-t)*bm_pow(t,2)*p2[i]+bm_pow(t,3)*p3[i]},HShapeElement.prototype.calculateBoundingBox=function(itemsData,boundingBox){var i,len=itemsData.length;for(i=0;i<len;i+=1)itemsData[i]&&itemsData[i].sh?this.calculateShapeBoundingBox(itemsData[i],boundingBox):itemsData[i]&&itemsData[i].it&&this.calculateBoundingBox(itemsData[i].it,boundingBox)},HShapeElement.prototype.currentBoxContains=function(box){return this.currentBBox.x<=box.x&&this.currentBBox.y<=box.y&&this.currentBBox.width+this.currentBBox.x>=box.x+box.width&&this.currentBBox.height+this.currentBBox.y>=box.y+box.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var tempBoundingBox=this.tempBoundingBox,max=999999;if(tempBoundingBox.x=max,tempBoundingBox.xMax=-max,tempBoundingBox.y=max,tempBoundingBox.yMax=-max,this.calculateBoundingBox(this.itemsData,tempBoundingBox),tempBoundingBox.width=tempBoundingBox.xMax<tempBoundingBox.x?0:tempBoundingBox.xMax-tempBoundingBox.x,tempBoundingBox.height=tempBoundingBox.yMax<tempBoundingBox.y?0:tempBoundingBox.yMax-tempBoundingBox.y,this.currentBoxContains(tempBoundingBox))return;var changed=!1;this.currentBBox.w!==tempBoundingBox.width&&(this.currentBBox.w=tempBoundingBox.width,this.shapeCont.setAttribute("width",tempBoundingBox.width),changed=!0),this.currentBBox.h!==tempBoundingBox.height&&(this.currentBBox.h=tempBoundingBox.height,this.shapeCont.setAttribute("height",tempBoundingBox.height),changed=!0),(changed||this.currentBBox.x!==tempBoundingBox.x||this.currentBBox.y!==tempBoundingBox.y)&&(this.currentBBox.w=tempBoundingBox.width,this.currentBBox.h=tempBoundingBox.height,this.currentBBox.x=tempBoundingBox.x,this.currentBBox.y=tempBoundingBox.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),this.shapeCont.style.transform=this.shapeCont.style.webkitTransform="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)")}},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var g=createNS("g");this.maskedElement.appendChild(g),this.innerElem=g}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var documentData=this.textProperty.currentData;this.renderedLetters=createSizedArray(documentData.l?documentData.l.length:0);var innerElemStyle=this.innerElem.style;innerElemStyle.color=innerElemStyle.fill=documentData.fc?this.buildColor(documentData.fc):"rgba(0,0,0,0)",documentData.sc&&(innerElemStyle.stroke=this.buildColor(documentData.sc),innerElemStyle.strokeWidth=documentData.sw+"px");var fontData=this.globalData.fontManager.getFontByName(documentData.f);if(!this.globalData.fontManager.chars)if(innerElemStyle.fontSize=documentData.finalSize+"px",innerElemStyle.lineHeight=documentData.finalSize+"px",fontData.fClass)this.innerElem.className=fontData.fClass;else{innerElemStyle.fontFamily=fontData.fFamily;var fWeight=documentData.fWeight,fStyle=documentData.fStyle;innerElemStyle.fontStyle=fStyle,innerElemStyle.fontWeight=fWeight}var i,len,letters=documentData.l;len=letters.length;var tSpan,tParent,tCont,shapes,matrixHelper=this.mHelper,shapeStr="",cnt=0;for(i=0;i<len;i+=1){if(this.globalData.fontManager.chars?(this.textPaths[cnt]?tSpan=this.textPaths[cnt]:(tSpan=createNS("path"),tSpan.setAttribute("stroke-linecap","butt"),tSpan.setAttribute("stroke-linejoin","round"),tSpan.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[cnt]?(tParent=this.textSpans[cnt],tCont=tParent.children[0]):(tParent=createTag("div"),tCont=createNS("svg"),tCont.appendChild(tSpan),styleDiv(tParent)))):this.isMasked?tSpan=this.textPaths[cnt]?this.textPaths[cnt]:createNS("text"):this.textSpans[cnt]?(tParent=this.textSpans[cnt],tSpan=this.textPaths[cnt]):(tParent=createTag("span"),styleDiv(tParent),tSpan=createTag("span"),styleDiv(tSpan),tParent.appendChild(tSpan)),this.globalData.fontManager.chars){var shapeData,charData=this.globalData.fontManager.getCharData(documentData.finalText[i],fontData.fStyle,this.globalData.fontManager.getFontByName(documentData.f).fFamily);if(shapeData=charData?charData.data:null,matrixHelper.reset(),shapeData&&shapeData.shapes&&(shapes=shapeData.shapes[0].it,matrixHelper.scale(documentData.finalSize/100,documentData.finalSize/100),shapeStr=this.createPathShape(matrixHelper,shapes),tSpan.setAttribute("d",shapeStr)),this.isMasked)this.innerElem.appendChild(tSpan);else{if(this.innerElem.appendChild(tParent),shapeData&&shapeData.shapes){document.body.appendChild(tCont);var boundingBox=tCont.getBBox();tCont.setAttribute("width",boundingBox.width+2),tCont.setAttribute("height",boundingBox.height+2),tCont.setAttribute("viewBox",boundingBox.x-1+" "+(boundingBox.y-1)+" "+(boundingBox.width+2)+" "+(boundingBox.height+2)),tCont.style.transform=tCont.style.webkitTransform="translate("+(boundingBox.x-1)+"px,"+(boundingBox.y-1)+"px)",letters[i].yOffset=boundingBox.y-1}else tCont.setAttribute("width",1),tCont.setAttribute("height",1);tParent.appendChild(tCont)}}else tSpan.textContent=letters[i].val,tSpan.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked?this.innerElem.appendChild(tSpan):(this.innerElem.appendChild(tParent),tSpan.style.transform=tSpan.style.webkitTransform="translate3d(0,"+-documentData.finalSize/1.2+"px,0)");this.isMasked?this.textSpans[cnt]=tSpan:this.textSpans[cnt]=tParent,this.textSpans[cnt].style.display="block",this.textPaths[cnt]=tSpan,cnt+=1}for(;cnt<this.textSpans.length;)this.textSpans[cnt].style.display="none",cnt+=1},HTextElement.prototype.renderInnerContent=function(){if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;this.isMasked&&this.finalTransform._matMdf&&(this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),this.svgElement.style.transform=this.svgElement.style.webkitTransform="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)")}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var i,len,count=0,renderedLetters=this.textAnimator.renderedLetters,letters=this.textProperty.currentData.l;len=letters.length;var renderedLetter,textSpan,textPath;for(i=0;i<len;i+=1)letters[i].n?count+=1:(textSpan=this.textSpans[i],textPath=this.textPaths[i],renderedLetter=renderedLetters[count],count+=1,renderedLetter._mdf.m&&(this.isMasked?textSpan.setAttribute("transform",renderedLetter.m):textSpan.style.transform=textSpan.style.webkitTransform=renderedLetter.m),textSpan.style.opacity=renderedLetter.o,renderedLetter.sw&&renderedLetter._mdf.sw&&textPath.setAttribute("stroke-width",renderedLetter.sw),renderedLetter.sc&&renderedLetter._mdf.sc&&textPath.setAttribute("stroke",renderedLetter.sc),renderedLetter.fc&&renderedLetter._mdf.fc&&(textPath.setAttribute("fill",renderedLetter.fc),textPath.style.color=renderedLetter.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var boundingBox=this.innerElem.getBBox();this.currentBBox.w!==boundingBox.width&&(this.currentBBox.w=boundingBox.width,this.svgElement.setAttribute("width",boundingBox.width)),this.currentBBox.h!==boundingBox.height&&(this.currentBBox.h=boundingBox.height,this.svgElement.setAttribute("height",boundingBox.height));this.currentBBox.w===boundingBox.width+2&&this.currentBBox.h===boundingBox.height+2&&this.currentBBox.x===boundingBox.x-1&&this.currentBBox.y===boundingBox.y-1||(this.currentBBox.w=boundingBox.width+2,this.currentBBox.h=boundingBox.height+2,this.currentBBox.x=boundingBox.x-1,this.currentBBox.y=boundingBox.y-1,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),this.svgElement.style.transform=this.svgElement.style.webkitTransform="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)")}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var assetPath=this.globalData.getAssetsPath(this.assetData),img=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",assetPath),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(img),img.src=assetPath,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var i,comp,len=this.comp.threeDElements.length;for(i=0;i<len;i+=1)comp=this.comp.threeDElements[i],"3d"===comp.type&&(comp.perspectiveElem.style.perspective=comp.perspectiveElem.style.webkitPerspective=this.pe.v+"px",comp.container.style.transformOrigin=comp.container.style.mozTransformOrigin=comp.container.style.webkitTransformOrigin="0px 0px 0px",comp.perspectiveElem.style.transform=comp.perspectiveElem.style.webkitTransform="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)")},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var i,len,_mdf=this._isFirstFrame;if(this.hierarchy)for(len=this.hierarchy.length,i=0;i<len;i+=1)_mdf=this.hierarchy[i].finalTransform.mProp._mdf||_mdf;if(_mdf||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy){for(len=this.hierarchy.length-1,i=len;i>=0;i-=1){var mTransf=this.hierarchy[i].finalTransform.mProp;this.mat.translate(-mTransf.p.v[0],-mTransf.p.v[1],mTransf.p.v[2]),this.mat.rotateX(-mTransf.or.v[0]).rotateY(-mTransf.or.v[1]).rotateZ(mTransf.or.v[2]),this.mat.rotateX(-mTransf.rx.v).rotateY(-mTransf.ry.v).rotateZ(mTransf.rz.v),this.mat.scale(1/mTransf.s.v[0],1/mTransf.s.v[1],1/mTransf.s.v[2]),this.mat.translate(mTransf.a.v[0],mTransf.a.v[1],mTransf.a.v[2])}}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var diffVector=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]],mag=Math.sqrt(Math.pow(diffVector[0],2)+Math.pow(diffVector[1],2)+Math.pow(diffVector[2],2)),lookDir=[diffVector[0]/mag,diffVector[1]/mag,diffVector[2]/mag],lookLengthOnXZ=Math.sqrt(lookDir[2]*lookDir[2]+lookDir[0]*lookDir[0]),m_rotationX=Math.atan2(lookDir[1],lookLengthOnXZ),m_rotationY=Math.atan2(lookDir[0],-lookDir[2]);this.mat.rotateY(m_rotationY).rotateX(-m_rotationX)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var hasMatrixChanged=!this._prevMat.equals(this.mat);if((hasMatrixChanged||this.pe._mdf)&&this.comp.threeDElements){len=this.comp.threeDElements.length;var comp;for(i=0;i<len;i+=1)comp=this.comp.threeDElements[i],"3d"===comp.type&&(hasMatrixChanged&&(comp.container.style.transform=comp.container.style.webkitTransform=this.mat.toCSS()),this.pe._mdf&&(comp.perspectiveElem.style.perspective=comp.perspectiveElem.style.webkitPerspective=this.pe.v+"px"));this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(num){this.prepareProperties(num,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null},HEffects.prototype.renderFrame=function(){};var animationManager=function(){function removeElement(ev){for(var i=0,animItem=ev.target;i<len;)registeredAnimations[i].animation===animItem&&(registeredAnimations.splice(i,1),i-=1,len-=1,animItem.isPaused||subtractPlayingCount()),i+=1}function registerAnimation(element,animationData){if(!element)return null;for(var i=0;i<len;){if(registeredAnimations[i].elem==element&&null!==registeredAnimations[i].elem)return registeredAnimations[i].animation;i+=1}var animItem=new AnimationItem;return setupAnimation(animItem,element),animItem.setData(element,animationData),animItem}function getRegisteredAnimations(){var i,len=registeredAnimations.length,animations=[];for(i=0;i<len;i+=1)animations.push(registeredAnimations[i].animation);return animations}function addPlayingCount(){playingAnimationsNum+=1,activate()}function subtractPlayingCount(){playingAnimationsNum-=1}function setupAnimation(animItem,element){animItem.addEventListener("destroy",removeElement),animItem.addEventListener("_active",addPlayingCount),animItem.addEventListener("_idle",subtractPlayingCount),registeredAnimations.push({elem:element,animation:animItem}),len+=1}function loadAnimation(params){var animItem=new AnimationItem;return setupAnimation(animItem,null),animItem.setParams(params),animItem}function setSpeed(val,animation){var i;for(i=0;i<len;i+=1)registeredAnimations[i].animation.setSpeed(val,animation)}function setDirection(val,animation){var i;for(i=0;i<len;i+=1)registeredAnimations[i].animation.setDirection(val,animation)}function play(animation){var i;for(i=0;i<len;i+=1)registeredAnimations[i].animation.play(animation)}function resume(nowTime){var i,elapsedTime=nowTime-initTime;for(i=0;i<len;i+=1)registeredAnimations[i].animation.advanceTime(elapsedTime);initTime=nowTime,playingAnimationsNum&&!_isFrozen?window.requestAnimationFrame(resume):_stopped=!0}function first(nowTime){initTime=nowTime,window.requestAnimationFrame(resume)}function pause(animation){var i;for(i=0;i<len;i+=1)registeredAnimations[i].animation.pause(animation)}function goToAndStop(value,isFrame,animation){var i;for(i=0;i<len;i+=1)registeredAnimations[i].animation.goToAndStop(value,isFrame,animation)}function stop(animation){var i;for(i=0;i<len;i+=1)registeredAnimations[i].animation.stop(animation)}function togglePause(animation){var i;for(i=0;i<len;i+=1)registeredAnimations[i].animation.togglePause(animation)}function destroy(animation){var i;for(i=len-1;i>=0;i-=1)registeredAnimations[i].animation.destroy(animation)}function searchAnimations(animationData,standalone,renderer){var i,animElements=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),len=animElements.length;for(i=0;i<len;i+=1)renderer&&animElements[i].setAttribute("data-bm-type",renderer),registerAnimation(animElements[i],animationData);if(standalone&&0===len){renderer||(renderer="svg");var body=document.getElementsByTagName("body")[0];body.innerHTML="";var div=createTag("div");div.style.width="100%",div.style.height="100%",div.setAttribute("data-bm-type",renderer),body.appendChild(div),registerAnimation(div,animationData)}}function resize(){var i;for(i=0;i<len;i+=1)registeredAnimations[i].animation.resize()}function activate(){!_isFrozen&&playingAnimationsNum&&_stopped&&(window.requestAnimationFrame(first),_stopped=!1)}function freeze(){_isFrozen=!0}function unfreeze(){_isFrozen=!1,activate()}var moduleOb={},registeredAnimations=[],initTime=0,len=0,playingAnimationsNum=0,_stopped=!0,_isFrozen=!1;return moduleOb.registerAnimation=registerAnimation,moduleOb.loadAnimation=loadAnimation,moduleOb.setSpeed=setSpeed,moduleOb.setDirection=setDirection,moduleOb.play=play,moduleOb.pause=pause,moduleOb.stop=stop,moduleOb.togglePause=togglePause,moduleOb.searchAnimations=searchAnimations,moduleOb.resize=resize,moduleOb.goToAndStop=goToAndStop,moduleOb.destroy=destroy,moduleOb.freeze=freeze,moduleOb.unfreeze=unfreeze,moduleOb.getRegisteredAnimations=getRegisteredAnimations,moduleOb}(),AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.subframeEnabled=subframeEnabled,this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(params){params.context&&(this.context=params.context),(params.wrapper||params.container)&&(this.wrapper=params.wrapper||params.container);var animType=params.animType?params.animType:params.renderer?params.renderer:"svg";switch(animType){case"canvas":this.renderer=new CanvasRenderer(this,params.rendererSettings);break;case"svg":this.renderer=new SVGRenderer(this,params.rendererSettings);break;default:this.renderer=new HybridRenderer(this,params.rendererSettings)}this.renderer.setProjectInterface(this.projectInterface),this.animType=animType,""===params.loop||null===params.loop||(!1===params.loop?this.loop=!1:!0===params.loop?this.loop=!0:this.loop=parseInt(params.loop)),this.autoplay=!("autoplay"in params)||params.autoplay,this.name=params.name?params.name:"",this.autoloadSegments=!params.hasOwnProperty("autoloadSegments")||params.autoloadSegments,this.assetsPath=params.assetsPath,params.animationData?this.configAnimation(params.animationData):params.path&&("json"!=params.path.substr(-4)&&("/"!=params.path.substr(-1,1)&&(params.path+="/"),params.path+="data.json"),-1!=params.path.lastIndexOf("\\")?this.path=params.path.substr(0,params.path.lastIndexOf("\\")+1):this.path=params.path.substr(0,params.path.lastIndexOf("/")+1),this.fileName=params.path.substr(params.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),assetLoader.load(params.path,this.configAnimation.bind(this),function(){this.trigger("data_failed")}.bind(this)))},AnimationItem.prototype.setData=function(wrapper,animationData){var params={wrapper:wrapper,animationData:animationData?"object"==typeof animationData?animationData:JSON.parse(animationData):null},wrapperAttributes=wrapper.attributes;params.path=wrapperAttributes.getNamedItem("data-animation-path")?wrapperAttributes.getNamedItem("data-animation-path").value:wrapperAttributes.getNamedItem("data-bm-path")?wrapperAttributes.getNamedItem("data-bm-path").value:wrapperAttributes.getNamedItem("bm-path")?wrapperAttributes.getNamedItem("bm-path").value:"",params.animType=wrapperAttributes.getNamedItem("data-anim-type")?wrapperAttributes.getNamedItem("data-anim-type").value:wrapperAttributes.getNamedItem("data-bm-type")?wrapperAttributes.getNamedItem("data-bm-type").value:wrapperAttributes.getNamedItem("bm-type")?wrapperAttributes.getNamedItem("bm-type").value:wrapperAttributes.getNamedItem("data-bm-renderer")?wrapperAttributes.getNamedItem("data-bm-renderer").value:wrapperAttributes.getNamedItem("bm-renderer")?wrapperAttributes.getNamedItem("bm-renderer").value:"canvas";var loop=wrapperAttributes.getNamedItem("data-anim-loop")?wrapperAttributes.getNamedItem("data-anim-loop").value:wrapperAttributes.getNamedItem("data-bm-loop")?wrapperAttributes.getNamedItem("data-bm-loop").value:wrapperAttributes.getNamedItem("bm-loop")?wrapperAttributes.getNamedItem("bm-loop").value:"";""===loop||(params.loop="false"!==loop&&("true"===loop||parseInt(loop)));var autoplay=wrapperAttributes.getNamedItem("data-anim-autoplay")?wrapperAttributes.getNamedItem("data-anim-autoplay").value:wrapperAttributes.getNamedItem("data-bm-autoplay")?wrapperAttributes.getNamedItem("data-bm-autoplay").value:!wrapperAttributes.getNamedItem("bm-autoplay")||wrapperAttributes.getNamedItem("bm-autoplay").value;params.autoplay="false"!==autoplay,params.name=wrapperAttributes.getNamedItem("data-name")?wrapperAttributes.getNamedItem("data-name").value:wrapperAttributes.getNamedItem("data-bm-name")?wrapperAttributes.getNamedItem("data-bm-name").value:wrapperAttributes.getNamedItem("bm-name")?wrapperAttributes.getNamedItem("bm-name").value:"","false"===(wrapperAttributes.getNamedItem("data-anim-prerender")?wrapperAttributes.getNamedItem("data-anim-prerender").value:wrapperAttributes.getNamedItem("data-bm-prerender")?wrapperAttributes.getNamedItem("data-bm-prerender").value:wrapperAttributes.getNamedItem("bm-prerender")?wrapperAttributes.getNamedItem("bm-prerender").value:"")&&(params.prerender=!1),this.setParams(params)},AnimationItem.prototype.includeLayers=function(data){data.op>this.animationData.op&&(this.animationData.op=data.op,this.totalFrames=Math.floor(data.op-this.animationData.ip));var i,j,layers=this.animationData.layers,len=layers.length,newLayers=data.layers,jLen=newLayers.length;for(j=0;j<jLen;j+=1)for(i=0;i<len;){if(layers[i].id==newLayers[j].id){layers[i]=newLayers[j];break}i+=1}if((data.chars||data.fonts)&&(this.renderer.globalData.fontManager.addChars(data.chars),this.renderer.globalData.fontManager.addFonts(data.fonts,this.renderer.globalData.defs)),data.assets)for(len=data.assets.length,i=0;i<len;i+=1)this.animationData.assets.push(data.assets[i]);this.animationData.__complete=!1,dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),this.renderer.includeLayers(data.layers),expressionsPlugin&&expressionsPlugin.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var segments=this.animationData.segments;if(!segments||0===segments.length||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);var segment=segments.shift();this.timeCompleted=segment.time*this.frameRate;var segmentPath=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,assetLoader.load(segmentPath,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(animData){this.renderer&&(this.animationData=animData,this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.renderer.configAnimation(animData),animData.assets||(animData.assets=[]),this.renderer.searchExtraCompositions(animData.assets),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.firstFrame=Math.round(this.animationData.ip),this.frameMult=this.animationData.fr/1e3,this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded())},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.loaded()?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){
this.isLoaded||!this.renderer.globalData.fontManager.loaded()||!this.imagePreloader.loaded()&&"canvas"===this.renderer.rendererType||(this.isLoaded=!0,dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),expressionsPlugin&&expressionsPlugin.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play())},AnimationItem.prototype.resize=function(){this.renderer.updateContainerSize()},AnimationItem.prototype.setSubframe=function(flag){this.subframeEnabled=!!flag},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.subframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame()},AnimationItem.prototype.renderFrame=function(){!1!==this.isLoaded&&this.renderer.renderFrame(this.currentFrame+this.firstFrame)},AnimationItem.prototype.play=function(name){name&&this.name!=name||!0===this.isPaused&&(this.isPaused=!1,this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(name){name&&this.name!=name||!1===this.isPaused&&(this.isPaused=!0,this._idle=!0,this.trigger("_idle"))},AnimationItem.prototype.togglePause=function(name){name&&this.name!=name||(!0===this.isPaused?this.play():this.pause())},AnimationItem.prototype.stop=function(name){name&&this.name!=name||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.goToAndStop=function(value,isFrame,name){name&&this.name!=name||(isFrame?this.setCurrentRawFrameValue(value):this.setCurrentRawFrameValue(value*this.frameModifier),this.pause())},AnimationItem.prototype.goToAndPlay=function(value,isFrame,name){this.goToAndStop(value,isFrame,name),this.play()},AnimationItem.prototype.advanceTime=function(value){if(!0!==this.isPaused&&!1!==this.isLoaded){var nextValue=this.currentRawFrame+value*this.frameModifier,_isComplete=!1;nextValue>=this.totalFrames-1&&this.frameModifier>0?this.loop&&this.playCount!==this.loop?nextValue>=this.totalFrames?(this.playCount+=1,this.checkSegments(nextValue%this.totalFrames)||(this.setCurrentRawFrameValue(nextValue%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(nextValue):this.checkSegments(nextValue>this.totalFrames?nextValue%this.totalFrames:0)||(_isComplete=!0,nextValue=this.totalFrames-1):nextValue<0?this.checkSegments(nextValue%this.totalFrames)||(!this.loop||this.playCount--<=0&&!0!==this.loop?(_isComplete=!0,nextValue=0):(this.setCurrentRawFrameValue(this.totalFrames+nextValue%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(nextValue),_isComplete&&(this.setCurrentRawFrameValue(nextValue),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(arr,offset){this.playCount=0,arr[1]<arr[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.timeCompleted=this.totalFrames=arr[0]-arr[1],this.firstFrame=arr[1],this.setCurrentRawFrameValue(this.totalFrames-.001-offset)):arr[1]>arr[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.timeCompleted=this.totalFrames=arr[1]-arr[0],this.firstFrame=arr[0],this.setCurrentRawFrameValue(.001+offset)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(init,end){var pendingFrame=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<init?pendingFrame=init:this.currentRawFrame+this.firstFrame>end&&(pendingFrame=end-init)),this.firstFrame=init,this.timeCompleted=this.totalFrames=end-init,-1!==pendingFrame&&this.goToAndStop(pendingFrame,!0)},AnimationItem.prototype.playSegments=function(arr,forceFlag){if(forceFlag&&(this.segments.length=0),"object"==typeof arr[0]){var i,len=arr.length;for(i=0;i<len;i+=1)this.segments.push(arr[i])}else this.segments.push(arr);this.segments.length&&forceFlag&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(forceFlag){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),forceFlag&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(offset){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),offset),!0)},AnimationItem.prototype.destroy=function(name){name&&this.name!=name||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=this.onLoopComplete=this.onComplete=this.onSegmentStart=this.onDestroy=null,this.renderer=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(value){this.currentRawFrame=value,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(val){this.playSpeed=val,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(val){this.playDirection=val<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(assetData){var path="";if(assetData.e)path=assetData.p;else if(this.assetsPath){var imagePath=assetData.p;-1!==imagePath.indexOf("images/")&&(imagePath=imagePath.split("/")[1]),path=this.assetsPath+imagePath}else path=this.path,path+=assetData.u?assetData.u:"",path+=assetData.p;return path},AnimationItem.prototype.getAssetData=function(id){for(var i=0,len=this.assets.length;i<len;){if(id==this.assets[i].id)return this.assets[i];i+=1}},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(isFrame){return isFrame?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.trigger=function(name){if(this._cbs&&this._cbs[name])switch(name){case"enterFrame":this.triggerEvent(name,new BMEnterFrameEvent(name,this.currentFrame,this.totalFrames,this.frameModifier));break;case"loopComplete":this.triggerEvent(name,new BMCompleteLoopEvent(name,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(name,new BMCompleteEvent(name,this.frameMult));break;case"segmentStart":this.triggerEvent(name,new BMSegmentStartEvent(name,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(name,new BMDestroyEvent(name,this));break;default:this.triggerEvent(name)}"enterFrame"===name&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(name,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===name&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(name,this.loop,this.playCount,this.frameMult)),"complete"===name&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(name,this.frameMult)),"segmentStart"===name&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(name,this.firstFrame,this.totalFrames)),"destroy"===name&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(name,this))};var Expressions=function(){function initExpressions(animation){function pushExpression(){stackCount+=1}function popExpression(){0===(stackCount-=1)&&releaseInstances()}function registerExpressionProperty(expression){-1===registers.indexOf(expression)&&registers.push(expression)}function releaseInstances(){var i,len=registers.length;for(i=0;i<len;i+=1)registers[i].release();registers.length=0}var stackCount=0,registers=[];animation.renderer.compInterface=CompExpressionInterface(animation.renderer),animation.renderer.globalData.projectInterface.registerComposition(animation.renderer),animation.renderer.globalData.pushExpression=pushExpression,animation.renderer.globalData.popExpression=popExpression,animation.renderer.globalData.registerExpressionProperty=registerExpressionProperty}var ob={};return ob.initExpressions=initExpressions,ob}();expressionsPlugin=Expressions;var ExpressionManager=function(){function $bm_isInstanceOfArray(arr){return arr.constructor===Array||arr.constructor===Float32Array}function isNumerable(tOfV,v){return"number"===tOfV||"boolean"===tOfV||"string"===tOfV||v instanceof Number}function $bm_neg(a){var tOfA=typeof a;if("number"===tOfA||"boolean"===tOfA||a instanceof Number)return-a;if($bm_isInstanceOfArray(a)){var i,lenA=a.length,retArr=[];for(i=0;i<lenA;i+=1)retArr[i]=-a[i];return retArr}return a.propType?a.v:void 0}function sum(a,b){var tOfA=typeof a,tOfB=typeof b;if("string"===tOfA||"string"===tOfB)return a+b;if(isNumerable(tOfA,a)&&isNumerable(tOfB,b))return a+b;if($bm_isInstanceOfArray(a)&&isNumerable(tOfB,b))return a=a.slice(0),a[0]=a[0]+b,a;if(isNumerable(tOfA,a)&&$bm_isInstanceOfArray(b))return b=b.slice(0),b[0]=a+b[0],b;if($bm_isInstanceOfArray(a)&&$bm_isInstanceOfArray(b)){for(var i=0,lenA=a.length,lenB=b.length,retArr=[];i<lenA||i<lenB;)("number"==typeof a[i]||a[i]instanceof Number)&&("number"==typeof b[i]||b[i]instanceof Number)?retArr[i]=a[i]+b[i]:retArr[i]=void 0===b[i]?a[i]:a[i]||b[i],i+=1;return retArr}return 0}function sub(a,b){var tOfA=typeof a,tOfB=typeof b;if(isNumerable(tOfA,a)&&isNumerable(tOfB,b))return"string"===tOfA&&(a=parseInt(a)),"string"===tOfB&&(b=parseInt(b)),a-b;if($bm_isInstanceOfArray(a)&&isNumerable(tOfB,b))return a=a.slice(0),a[0]=a[0]-b,a;if(isNumerable(tOfA,a)&&$bm_isInstanceOfArray(b))return b=b.slice(0),b[0]=a-b[0],b;if($bm_isInstanceOfArray(a)&&$bm_isInstanceOfArray(b)){for(var i=0,lenA=a.length,lenB=b.length,retArr=[];i<lenA||i<lenB;)("number"==typeof a[i]||a[i]instanceof Number)&&("number"==typeof b[i]||b[i]instanceof Number)?retArr[i]=a[i]-b[i]:retArr[i]=void 0===b[i]?a[i]:a[i]||b[i],i+=1;return retArr}return 0}function mul(a,b){var arr,tOfA=typeof a,tOfB=typeof b;if(isNumerable(tOfA,a)&&isNumerable(tOfB,b))return a*b;var i,len;if($bm_isInstanceOfArray(a)&&isNumerable(tOfB,b)){for(len=a.length,arr=createTypedArray("float32",len),i=0;i<len;i+=1)arr[i]=a[i]*b;return arr}if(isNumerable(tOfA,a)&&$bm_isInstanceOfArray(b)){for(len=b.length,arr=createTypedArray("float32",len),i=0;i<len;i+=1)arr[i]=a*b[i];return arr}return 0}function div(a,b){var arr,tOfA=typeof a,tOfB=typeof b;if(isNumerable(tOfA,a)&&isNumerable(tOfB,b))return a/b;var i,len;if($bm_isInstanceOfArray(a)&&isNumerable(tOfB,b)){for(len=a.length,arr=createTypedArray("float32",len),i=0;i<len;i+=1)arr[i]=a[i]/b;return arr}if(isNumerable(tOfA,a)&&$bm_isInstanceOfArray(b)){for(len=b.length,arr=createTypedArray("float32",len),i=0;i<len;i+=1)arr[i]=a/b[i];return arr}return 0}function mod(a,b){return"string"==typeof a&&(a=parseInt(a)),"string"==typeof b&&(b=parseInt(b)),a%b}function clamp(num,min,max){if(min>max){var mm=max;max=min,min=mm}return Math.min(Math.max(num,min),max)}function radiansToDegrees(val){return val/degToRads}function degreesToRadians(val){return val*degToRads}function length(arr1,arr2){if("number"==typeof arr1||arr1 instanceof Number)return arr2=arr2||0,Math.abs(arr1-arr2);arr2||(arr2=helperLengthArray);var i,len=Math.min(arr1.length,arr2.length),addedLength=0;for(i=0;i<len;i+=1)addedLength+=Math.pow(arr2[i]-arr1[i],2);return Math.sqrt(addedLength)}function normalize(vec){return div(vec,length(vec))}function rgbToHsl(val){var h,s,r=val[0],g=val[1],b=val[2],max=Math.max(r,g,b),min=Math.min(r,g,b),l=(max+min)/2;if(max==min)h=s=0;else{var d=max-min;switch(s=l>.5?d/(2-max-min):d/(max+min),max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4}h/=6}return[h,s,l,val[3]]}function hue2rgb(p,q,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?p+6*(q-p)*t:t<.5?q:t<2/3?p+(q-p)*(2/3-t)*6:p}function hslToRgb(val){var r,g,b,h=val[0],s=val[1],l=val[2];if(0===s)r=g=b=l;else{var q=l<.5?l*(1+s):l+s-l*s,p=2*l-q;r=hue2rgb(p,q,h+1/3),g=hue2rgb(p,q,h),b=hue2rgb(p,q,h-1/3)}return[r,g,b,val[3]]}function linear(t,tMin,tMax,value1,value2){if(void 0!==value1&&void 0!==value2||(value1=tMin,value2=tMax,tMin=0,tMax=1),tMax<tMin){var _tMin=tMax;tMax=tMin,tMin=_tMin}if(t<=tMin)return value1;if(t>=tMax)return value2;var perc=tMax===tMin?0:(t-tMin)/(tMax-tMin);if(!value1.length)return value1+(value2-value1)*perc;var i,len=value1.length,arr=createTypedArray("float32",len);for(i=0;i<len;i+=1)arr[i]=value1[i]+(value2[i]-value1[i])*perc;return arr}function random(min,max){if(void 0===max&&(void 0===min?(min=0,max=1):(max=min,min=void 0)),max.length){var i,len=max.length;min||(min=createTypedArray("float32",len));var arr=createTypedArray("float32",len),rnd=BMMath.random();for(i=0;i<len;i+=1)arr[i]=min[i]+rnd*(max[i]-min[i]);return arr}return void 0===min&&(min=0),min+BMMath.random()*(max-min)}function createPath(points,inTangents,outTangents,closed){var i,len=points.length,path=shape_pool.newElement();path.setPathData(!!closed,len);var inVertexPoint,outVertexPoint,arrPlaceholder=[0,0];for(i=0;i<len;i+=1)inVertexPoint=inTangents&&inTangents[i]?inTangents[i]:arrPlaceholder,outVertexPoint=outTangents&&outTangents[i]?outTangents[i]:arrPlaceholder,path.setTripleAt(points[i][0],points[i][1],outVertexPoint[0]+points[i][0],outVertexPoint[1]+points[i][1],inVertexPoint[0]+points[i][0],inVertexPoint[1]+points[i][1],i,!0);return path}function initiateExpression(elem,data,property){function loopInDuration(type,duration){return loopIn(type,duration,!0)}function loopOutDuration(type,duration){return loopOut(type,duration,!0)}function lookAt(elem1,elem2){var fVec=[elem2[0]-elem1[0],elem2[1]-elem1[1],elem2[2]-elem1[2]],pitch=Math.atan2(fVec[0],Math.sqrt(fVec[1]*fVec[1]+fVec[2]*fVec[2]))/degToRads;return[-Math.atan2(fVec[1],fVec[2])/degToRads,pitch,0]}function easeOut(t,tMin,tMax,val1,val2){return applyEase(easeOutBez,t,tMin,tMax,val1,val2)}function easeIn(t,tMin,tMax,val1,val2){return applyEase(easeInBez,t,tMin,tMax,val1,val2)}function ease(t,tMin,tMax,val1,val2){return applyEase(easeInOutBez,t,tMin,tMax,val1,val2)}function applyEase(fn,t,tMin,tMax,val1,val2){void 0===val1?(val1=tMin,val2=tMax):t=(t-tMin)/(tMax-tMin),t=t>1?1:t<0?0:t;var mult=fn(t);if($bm_isInstanceOfArray(val1)){var i,len=val1.length,arr=createTypedArray("float32",len);for(i=0;i<len;i+=1)arr[i]=(val2[i]-val1[i])*mult+val1[i];return arr}return(val2-val1)*mult+val1}function nearestKey(time){var i,index,keyTime,len=data.k.length;if(data.k.length&&"number"!=typeof data.k[0])if(index=-1,(time*=elem.comp.globalData.frameRate)<data.k[0].t)index=1,keyTime=data.k[0].t;else{for(i=0;i<len-1;i+=1){if(time===data.k[i].t){index=i+1,keyTime=data.k[i].t;break}if(time>data.k[i].t&&time<data.k[i+1].t){time-data.k[i].t>data.k[i+1].t-time?(index=i+2,keyTime=data.k[i+1].t):(index=i+1,keyTime=data.k[i].t);break}}-1===index&&(index=i+1,keyTime=data.k[i].t)}else index=0,keyTime=0;var ob={};return ob.index=index,ob.time=keyTime/elem.comp.globalData.frameRate,ob}function key(ind){var ob,i,len;if(!data.k.length||"number"==typeof data.k[0])throw new Error("The property has no keyframe at index "+ind);ind-=1,ob={time:data.k[ind].t/elem.comp.globalData.frameRate,value:[]};var arr;for(arr=ind!==data.k.length-1||data.k[ind].h?data.k[ind].s:data.k[ind-1].e,len=arr.length,i=0;i<len;i+=1)ob[i]=arr[i],ob.value[i]=arr[i];return ob}function framesToTime(frames,fps){return fps||(fps=elem.comp.globalData.frameRate),frames/fps}function timeToFrames(t,fps){return t||0===t||(t=time),fps||(fps=elem.comp.globalData.frameRate),t*fps}function seedRandom(seed){BMMath.seedrandom(randSeed+seed)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(init,end){return"string"==typeof value?void 0===end?value.substring(init):value.substring(init,end):""}function substr(init,end){return"string"==typeof value?void 0===end?value.substr(init):value.substr(init,end):""}function executeExpression(_value){return value=_value,_needsRandom&&seedRandom(randSeed),this.frameExpressionId===elem.globalData.frameId&&"textSelector"!==this.propType?value:("textSelector"===this.propType&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!(!elem.hierarchy||!elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,"shape"===scoped_bm_rt.propType&&(scoped_bm_rt=scoped_bm_rt.v),scoped_bm_rt)}var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=-1!==val.indexOf("random"),elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,__expression_functions=[];if(data.xf){var i,len=data.xf.length;for(i=0;i<len;i+=1)__expression_functions[i]=eval("(function(){ return "+data.xf[i]+"}())")}var scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||!0!==this.data.hd,wiggle=function(freq,amp){var i,j,len=this.pv.length?this.pv.length:1,addedAmps=createTypedArray("float32",len);freq=5;var iterations=Math.floor(time*freq);for(i=0,j=0;i<iterations;){for(j=0;j<len;j+=1)addedAmps[j]+=-amp+2*amp*BMMath.random();i+=1}var periods=time*freq,perc=periods-Math.floor(periods),arr=createTypedArray("float32",len);if(len>1){for(j=0;j<len;j+=1)arr[j]=this.pv[j]+addedAmps[j]+(-amp+2*amp*BMMath.random())*perc;return arr}return this.pv+addedAmps[0]+(-amp+2*amp*BMMath.random())*perc}.bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!(!elem.hierarchy||!elem.hierarchy.length),parent,randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;return executeExpression}var ob={},Math=BMMath,window=null,document=null,easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get,add=sum,$bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod,radians_to_degrees=radiansToDegrees,degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];return ob.initiateExpression=initiateExpression,ob}(),expressionHelpers=function(){function searchExpressions(elem,data,prop){data.x&&(prop.k=!0,prop.x=!0,prop.initiateExpression=ExpressionManager.initiateExpression,prop.effectsSequence.push(prop.initiateExpression(elem,data,prop).bind(prop)))}function getValueAtTime(frameNum){return frameNum*=this.elem.globalData.frameRate,frameNum-=this.offsetTime,frameNum!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<frameNum?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(frameNum,this._cachingAtTime),this._cachingAtTime.lastFrame=frameNum),this._cachingAtTime.value}function getSpeedAtTime(frameNum){var v1=this.getValueAtTime(frameNum),v2=this.getValueAtTime(frameNum+-.01),speed=0;if(v1.length){var i;for(i=0;i<v1.length;i+=1)speed+=Math.pow(v2[i]-v1[i],2);speed=100*Math.sqrt(speed)}else speed=0;return speed}function getVelocityAtTime(frameNum){if(void 0!==this.vel)return this.vel;var velocity,v1=this.getValueAtTime(frameNum),v2=this.getValueAtTime(frameNum+-.001);if(v1.length){velocity=createTypedArray("float32",v1.length);var i;for(i=0;i<v1.length;i+=1)velocity[i]=(v2[i]-v1[i])/-.001}else velocity=(v2-v1)/-.001;return velocity}function getStaticValueAtTime(){return this.pv}function setGroupProperty(propertyGroup){this.propertyGroup=propertyGroup}return{searchExpressions:searchExpressions,getSpeedAtTime:getSpeedAtTime,getVelocityAtTime:getVelocityAtTime,getValueAtTime:getValueAtTime,getStaticValueAtTime:getStaticValueAtTime,setGroupProperty:setGroupProperty}}();!function(){function loopOut(type,duration,durationFlag){if(!this.k||!this.keyframes)return this.pv;type=type?type.toLowerCase():"";var currentFrame=this.comp.renderedFrame,keyframes=this.keyframes,lastKeyFrame=keyframes[keyframes.length-1].t;if(currentFrame<=lastKeyFrame)return this.pv;var cycleDuration,firstKeyFrame;durationFlag?(cycleDuration=duration?Math.abs(lastKeyFrame-elem.comp.globalData.frameRate*duration):Math.max(0,lastKeyFrame-this.elem.data.ip),firstKeyFrame=lastKeyFrame-cycleDuration):((!duration||duration>keyframes.length-1)&&(duration=keyframes.length-1),firstKeyFrame=keyframes[keyframes.length-1-duration].t,cycleDuration=lastKeyFrame-firstKeyFrame);var i,len,ret;if("pingpong"===type){if(Math.floor((currentFrame-firstKeyFrame)/cycleDuration)%2!=0)return this.getValueAtTime((cycleDuration-(currentFrame-firstKeyFrame)%cycleDuration+firstKeyFrame)/this.comp.globalData.frameRate,0)}else{if("offset"===type){var initV=this.getValueAtTime(firstKeyFrame/this.comp.globalData.frameRate,0),endV=this.getValueAtTime(lastKeyFrame/this.comp.globalData.frameRate,0),current=this.getValueAtTime(((currentFrame-firstKeyFrame)%cycleDuration+firstKeyFrame)/this.comp.globalData.frameRate,0),repeats=Math.floor((currentFrame-firstKeyFrame)/cycleDuration);if(this.pv.length){for(ret=new Array(initV.length),len=ret.length,i=0;i<len;i+=1)ret[i]=(endV[i]-initV[i])*repeats+current[i];return ret}return(endV-initV)*repeats+current}if("continue"===type){var lastValue=this.getValueAtTime(lastKeyFrame/this.comp.globalData.frameRate,0),nextLastValue=this.getValueAtTime((lastKeyFrame-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(ret=new Array(lastValue.length),len=ret.length,i=0;i<len;i+=1)ret[i]=lastValue[i]+(lastValue[i]-nextLastValue[i])*((currentFrame-lastKeyFrame)/this.comp.globalData.frameRate)/5e-4;return ret}return lastValue+(currentFrame-lastKeyFrame)/.001*(lastValue-nextLastValue)}}return this.getValueAtTime(((currentFrame-firstKeyFrame)%cycleDuration+firstKeyFrame)/this.comp.globalData.frameRate,0)}function loopIn(type,duration,durationFlag){if(!this.k)return this.pv;type=type?type.toLowerCase():"";var currentFrame=this.comp.renderedFrame,keyframes=this.keyframes,firstKeyFrame=keyframes[0].t;if(currentFrame>=firstKeyFrame)return this.pv;var cycleDuration,lastKeyFrame;durationFlag?(cycleDuration=duration?Math.abs(elem.comp.globalData.frameRate*duration):Math.max(0,this.elem.data.op-firstKeyFrame),lastKeyFrame=firstKeyFrame+cycleDuration):((!duration||duration>keyframes.length-1)&&(duration=keyframes.length-1),lastKeyFrame=keyframes[duration].t,cycleDuration=lastKeyFrame-firstKeyFrame);var i,len,ret;if("pingpong"===type){if(Math.floor((firstKeyFrame-currentFrame)/cycleDuration)%2==0)return this.getValueAtTime(((firstKeyFrame-currentFrame)%cycleDuration+firstKeyFrame)/this.comp.globalData.frameRate,0)}else{if("offset"===type){var initV=this.getValueAtTime(firstKeyFrame/this.comp.globalData.frameRate,0),endV=this.getValueAtTime(lastKeyFrame/this.comp.globalData.frameRate,0),current=this.getValueAtTime((cycleDuration-(firstKeyFrame-currentFrame)%cycleDuration+firstKeyFrame)/this.comp.globalData.frameRate,0),repeats=Math.floor((firstKeyFrame-currentFrame)/cycleDuration)+1;if(this.pv.length){for(ret=new Array(initV.length),len=ret.length,i=0;i<len;i+=1)ret[i]=current[i]-(endV[i]-initV[i])*repeats;return ret}return current-(endV-initV)*repeats}if("continue"===type){var firstValue=this.getValueAtTime(firstKeyFrame/this.comp.globalData.frameRate,0),nextFirstValue=this.getValueAtTime((firstKeyFrame+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(ret=new Array(firstValue.length),len=ret.length,i=0;i<len;i+=1)ret[i]=firstValue[i]+(firstValue[i]-nextFirstValue[i])*(firstKeyFrame-currentFrame)/.001;return ret}return firstValue+(firstValue-nextFirstValue)*(firstKeyFrame-currentFrame)/.001}}return this.getValueAtTime((cycleDuration-(firstKeyFrame-currentFrame)%cycleDuration+firstKeyFrame)/this.comp.globalData.frameRate,0)}function smooth(width,samples){if(!this.k)return this.pv;if(width=.5*(width||.4),(samples=Math.floor(samples||5))<=1)return this.pv;var value,currentTime=this.comp.renderedFrame/this.comp.globalData.frameRate,initFrame=currentTime-width,endFrame=currentTime+width,sampleFrequency=samples>1?(endFrame-initFrame)/(samples-1):1,i=0,j=0;value=this.pv.length?createTypedArray("float32",this.pv.length):0;for(var sampleValue;i<samples;){if(sampleValue=this.getValueAtTime(initFrame+i*sampleFrequency),this.pv.length)for(j=0;j<this.pv.length;j+=1)value[j]+=sampleValue[j];else value+=sampleValue;i+=1}if(this.pv.length)for(j=0;j<this.pv.length;j+=1)value[j]/=samples;else value/=samples;return value}function getTransformValueAtTime(time){}function getTransformStaticValueAtTime(time){}function getShapeValueAtTime(frameNum){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shape_pool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),frameNum*=this.elem.globalData.frameRate,frameNum-=this.offsetTime,frameNum!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<frameNum?this._caching.lastIndex:0,this._cachingAtTime.lastTime=frameNum,this.interpolateShape(frameNum,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}function ShapeExpressions(){}var getTransformProperty=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(elem,data,container){var prop=getTransformProperty(elem,data,container);return prop.dynamicProperties.length?prop.getValueAtTime=getTransformValueAtTime.bind(prop):prop.getValueAtTime=getTransformStaticValueAtTime.bind(prop),prop.setGroupProperty=expressionHelpers.setGroupProperty,prop};var propertyGetProp=PropertyFactory.getProp;PropertyFactory.getProp=function(elem,data,type,mult,container){var prop=propertyGetProp(elem,data,type,mult,container);prop.kf?prop.getValueAtTime=expressionHelpers.getValueAtTime.bind(prop):prop.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(prop),prop.setGroupProperty=expressionHelpers.setGroupProperty,prop.loopOut=loopOut,prop.loopIn=loopIn,prop.smooth=smooth,prop.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(prop),prop.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(prop),prop.numKeys=1===data.a?data.k.length:0,prop.propertyIndex=data.ix;var value=0;return 0!==type&&(value=createTypedArray("float32",1===data.a?data.k[0].s.length:data.k.length)),prop._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:value},expressionHelpers.searchExpressions(elem,data,prop),prop.k&&container.addDynamicProperty(prop),prop};var ShapePropertyConstructorFunction=ShapePropertyFactory.getConstructorFunction(),KeyframedShapePropertyConstructorFunction=ShapePropertyFactory.getKeyframedConstructorFunction();ShapeExpressions.prototype={vertices:function(prop,time){this.k&&this.getValue();var shapePath=this.v;void 0!==time&&(shapePath=this.getValueAtTime(time,0));var i,len=shapePath._length,vertices=shapePath[prop],points=shapePath.v,arr=createSizedArray(len);for(i=0;i<len;i+=1)arr[i]="i"===prop||"o"===prop?[vertices[i][0]-points[i][0],vertices[i][1]-points[i][1]]:[vertices[i][0],vertices[i][1]];return arr},points:function(time){return this.vertices("v",time)},inTangents:function(time){return this.vertices("i",time)},outTangents:function(time){return this.vertices("o",time)},isClosed:function(){return this.v.c},pointOnPath:function(perc,time){var shapePath=this.v;void 0!==time&&(shapePath=this.getValueAtTime(time,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(shapePath));for(var pt,segmentsLength=this._segmentsLength,lengths=segmentsLength.lengths,lengthPos=segmentsLength.totalLength*perc,i=0,len=lengths.length,accumulatedLength=0;i<len;){if(accumulatedLength+lengths[i].addedLength>lengthPos){var initIndex=i,endIndex=shapePath.c&&i===len-1?0:i+1,segmentPerc=(lengthPos-accumulatedLength)/lengths[i].addedLength;pt=bez.getPointInSegment(shapePath.v[initIndex],shapePath.v[endIndex],shapePath.o[initIndex],shapePath.i[endIndex],segmentPerc,lengths[i]);break}accumulatedLength+=lengths[i].addedLength,i+=1}return pt||(pt=shapePath.c?[shapePath.v[0][0],shapePath.v[0][1]]:[shapePath.v[shapePath._length-1][0],shapePath.v[shapePath._length-1][1]]),pt},vectorOnPath:function(perc,time,vectorType){perc=1==perc?this.v.c?0:.999:perc;var pt1=this.pointOnPath(perc,time),pt2=this.pointOnPath(perc+.001,time),xLength=pt2[0]-pt1[0],yLength=pt2[1]-pt1[1],magnitude=Math.sqrt(Math.pow(xLength,2)+Math.pow(yLength,2));return"tangent"===vectorType?[xLength/magnitude,yLength/magnitude]:[-yLength/magnitude,xLength/magnitude]},tangentOnPath:function(perc,time){return this.vectorOnPath(perc,time,"tangent")},normalOnPath:function(perc,time){return this.vectorOnPath(perc,time,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([ShapeExpressions],ShapePropertyConstructorFunction),extendPrototype([ShapeExpressions],KeyframedShapePropertyConstructorFunction),KeyframedShapePropertyConstructorFunction.prototype.getValueAtTime=getShapeValueAtTime,KeyframedShapePropertyConstructorFunction.prototype.initiateExpression=ExpressionManager.initiateExpression;var propertyGetShapeProp=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(elem,data,type,arr,trims){var prop=propertyGetShapeProp(elem,data,type,arr,trims);return prop.propertyIndex=data.ix,prop.lock=!1,3===type?expressionHelpers.searchExpressions(elem,data.pt,prop):4===type&&expressionHelpers.searchExpressions(elem,data.ks,prop),prop.k&&elem.addDynamicProperty(prop),prop}}(),function(){function searchExpressions(){if(this.data.d.x)return this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0}TextProperty.prototype.getExpressionValue=function(currentValue,text){var newValue=this.calculateExpression(text);if(currentValue.t!==newValue){var newData={};return this.copyData(newData,currentValue),newData.t=newValue.toString(),newData.__complete=!1,newData}return currentValue},TextProperty.prototype.searchProperty=function(){var isKeyframed=this.searchKeyframes(),hasExpressions=this.searchExpressions();return this.kf=isKeyframed||hasExpressions,this.kf},TextProperty.prototype.searchExpressions=searchExpressions}();var ShapeExpressionInterface=function(){
function iterateElements(shapes,view,propertyGroup){var i,arr=[],len=shapes?shapes.length:0;for(i=0;i<len;i+=1)"gr"==shapes[i].ty?arr.push(groupInterfaceFactory(shapes[i],view[i],propertyGroup)):"fl"==shapes[i].ty?arr.push(fillInterfaceFactory(shapes[i],view[i],propertyGroup)):"st"==shapes[i].ty?arr.push(strokeInterfaceFactory(shapes[i],view[i],propertyGroup)):"tm"==shapes[i].ty?arr.push(trimInterfaceFactory(shapes[i],view[i],propertyGroup)):"tr"==shapes[i].ty||("el"==shapes[i].ty?arr.push(ellipseInterfaceFactory(shapes[i],view[i],propertyGroup)):"sr"==shapes[i].ty?arr.push(starInterfaceFactory(shapes[i],view[i],propertyGroup)):"sh"==shapes[i].ty?arr.push(pathInterfaceFactory(shapes[i],view[i],propertyGroup)):"rc"==shapes[i].ty?arr.push(rectInterfaceFactory(shapes[i],view[i],propertyGroup)):"rd"==shapes[i].ty?arr.push(roundedInterfaceFactory(shapes[i],view[i],propertyGroup)):"rp"==shapes[i].ty&&arr.push(repeaterInterfaceFactory(shapes[i],view[i],propertyGroup)));return arr}function contentsInterfaceFactory(shape,view,propertyGroup){var interfaces,interfaceFunction=function(value){for(var i=0,len=interfaces.length;i<len;){if(interfaces[i]._name===value||interfaces[i].mn===value||interfaces[i].propertyIndex===value||interfaces[i].ix===value||interfaces[i].ind===value)return interfaces[i];i+=1}if("number"==typeof value)return interfaces[value-1]};return interfaceFunction.propertyGroup=function(val){return 1===val?interfaceFunction:propertyGroup(val-1)},interfaces=iterateElements(shape.it,view.it,interfaceFunction.propertyGroup),interfaceFunction.numProperties=interfaces.length,interfaceFunction.propertyIndex=shape.cix,interfaceFunction._name=shape.nm,interfaceFunction}function groupInterfaceFactory(shape,view,propertyGroup){var interfaceFunction=function(value){switch(value){case"ADBE Vectors Group":case"Contents":case 2:return interfaceFunction.content;default:return interfaceFunction.transform}};interfaceFunction.propertyGroup=function(val){return 1===val?interfaceFunction:propertyGroup(val-1)};var content=contentsInterfaceFactory(shape,view,interfaceFunction.propertyGroup),transformInterface=transformInterfaceFactory(shape.it[shape.it.length-1],view.it[view.it.length-1],interfaceFunction.propertyGroup);return interfaceFunction.content=content,interfaceFunction.transform=transformInterface,Object.defineProperty(interfaceFunction,"_name",{get:function(){return shape.nm}}),interfaceFunction.numProperties=shape.np,interfaceFunction.propertyIndex=shape.ix,interfaceFunction.nm=shape.nm,interfaceFunction.mn=shape.mn,interfaceFunction}function fillInterfaceFactory(shape,view,propertyGroup){function interfaceFunction(val){return"Color"===val||"color"===val?interfaceFunction.color:"Opacity"===val||"opacity"===val?interfaceFunction.opacity:void 0}return Object.defineProperties(interfaceFunction,{color:{get:ExpressionPropertyInterface(view.c)},opacity:{get:ExpressionPropertyInterface(view.o)},_name:{value:shape.nm},mn:{value:shape.mn}}),view.c.setGroupProperty(propertyGroup),view.o.setGroupProperty(propertyGroup),interfaceFunction}function strokeInterfaceFactory(shape,view,propertyGroup){function _propertyGroup(val){return 1===val?ob:propertyGroup(val-1)}function _dashPropertyGroup(val){return 1===val?dashOb:_propertyGroup(val-1)}function interfaceFunction(val){return"Color"===val||"color"===val?interfaceFunction.color:"Opacity"===val||"opacity"===val?interfaceFunction.opacity:"Stroke Width"===val||"stroke width"===val?interfaceFunction.strokeWidth:void 0}var i,len=shape.d?shape.d.length:0,dashOb={};for(i=0;i<len;i+=1)!function(i){Object.defineProperty(dashOb,shape.d[i].nm,{get:ExpressionPropertyInterface(view.d.dataProps[i].p)})}(i),view.d.dataProps[i].p.setGroupProperty(_dashPropertyGroup);return Object.defineProperties(interfaceFunction,{color:{get:ExpressionPropertyInterface(view.c)},opacity:{get:ExpressionPropertyInterface(view.o)},strokeWidth:{get:ExpressionPropertyInterface(view.w)},dash:{get:function(){return dashOb}},_name:{value:shape.nm},mn:{value:shape.mn}}),view.c.setGroupProperty(_propertyGroup),view.o.setGroupProperty(_propertyGroup),view.w.setGroupProperty(_propertyGroup),interfaceFunction}function trimInterfaceFactory(shape,view,propertyGroup){function _propertyGroup(val){return 1==val?interfaceFunction:propertyGroup(--val)}function interfaceFunction(val){return val===shape.e.ix||"End"===val||"end"===val?interfaceFunction.end:val===shape.s.ix?interfaceFunction.start:val===shape.o.ix?interfaceFunction.offset:void 0}return interfaceFunction.propertyIndex=shape.ix,view.s.setGroupProperty(_propertyGroup),view.e.setGroupProperty(_propertyGroup),view.o.setGroupProperty(_propertyGroup),interfaceFunction.propertyIndex=shape.ix,interfaceFunction.propertyGroup=propertyGroup,Object.defineProperties(interfaceFunction,{start:{get:ExpressionPropertyInterface(view.s)},end:{get:ExpressionPropertyInterface(view.e)},offset:{get:ExpressionPropertyInterface(view.o)},_name:{value:shape.nm}}),interfaceFunction.mn=shape.mn,interfaceFunction}function transformInterfaceFactory(shape,view,propertyGroup){function _propertyGroup(val){return 1==val?interfaceFunction:propertyGroup(--val)}function interfaceFunction(value){return shape.a.ix===value||"Anchor Point"===value?interfaceFunction.anchorPoint:shape.o.ix===value||"Opacity"===value?interfaceFunction.opacity:shape.p.ix===value||"Position"===value?interfaceFunction.position:shape.r.ix===value||"Rotation"===value||"ADBE Vector Rotation"===value?interfaceFunction.rotation:shape.s.ix===value||"Scale"===value?interfaceFunction.scale:shape.sk&&shape.sk.ix===value||"Skew"===value?interfaceFunction.skew:shape.sa&&shape.sa.ix===value||"Skew Axis"===value?interfaceFunction.skewAxis:void 0}return view.transform.mProps.o.setGroupProperty(_propertyGroup),view.transform.mProps.p.setGroupProperty(_propertyGroup),view.transform.mProps.a.setGroupProperty(_propertyGroup),view.transform.mProps.s.setGroupProperty(_propertyGroup),view.transform.mProps.r.setGroupProperty(_propertyGroup),view.transform.mProps.sk&&(view.transform.mProps.sk.setGroupProperty(_propertyGroup),view.transform.mProps.sa.setGroupProperty(_propertyGroup)),view.transform.op.setGroupProperty(_propertyGroup),Object.defineProperties(interfaceFunction,{opacity:{get:ExpressionPropertyInterface(view.transform.mProps.o)},position:{get:ExpressionPropertyInterface(view.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(view.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(view.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(view.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(view.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(view.transform.mProps.sa)},_name:{value:shape.nm}}),interfaceFunction.ty="tr",interfaceFunction.mn=shape.mn,interfaceFunction.propertyGroup=propertyGroup,interfaceFunction}function ellipseInterfaceFactory(shape,view,propertyGroup){function _propertyGroup(val){return 1==val?interfaceFunction:propertyGroup(--val)}function interfaceFunction(value){return shape.p.ix===value?interfaceFunction.position:shape.s.ix===value?interfaceFunction.size:void 0}interfaceFunction.propertyIndex=shape.ix;var prop="tm"===view.sh.ty?view.sh.prop:view.sh;return prop.s.setGroupProperty(_propertyGroup),prop.p.setGroupProperty(_propertyGroup),Object.defineProperties(interfaceFunction,{size:{get:ExpressionPropertyInterface(prop.s)},position:{get:ExpressionPropertyInterface(prop.p)},_name:{value:shape.nm}}),interfaceFunction.mn=shape.mn,interfaceFunction}function starInterfaceFactory(shape,view,propertyGroup){function _propertyGroup(val){return 1==val?interfaceFunction:propertyGroup(--val)}function interfaceFunction(value){return shape.p.ix===value?interfaceFunction.position:shape.r.ix===value?interfaceFunction.rotation:shape.pt.ix===value?interfaceFunction.points:shape.or.ix===value||"ADBE Vector Star Outer Radius"===value?interfaceFunction.outerRadius:shape.os.ix===value?interfaceFunction.outerRoundness:!shape.ir||shape.ir.ix!==value&&"ADBE Vector Star Inner Radius"!==value?shape.is&&shape.is.ix===value?interfaceFunction.innerRoundness:void 0:interfaceFunction.innerRadius}var prop="tm"===view.sh.ty?view.sh.prop:view.sh;return interfaceFunction.propertyIndex=shape.ix,prop.or.setGroupProperty(_propertyGroup),prop.os.setGroupProperty(_propertyGroup),prop.pt.setGroupProperty(_propertyGroup),prop.p.setGroupProperty(_propertyGroup),prop.r.setGroupProperty(_propertyGroup),shape.ir&&(prop.ir.setGroupProperty(_propertyGroup),prop.is.setGroupProperty(_propertyGroup)),Object.defineProperties(interfaceFunction,{position:{get:ExpressionPropertyInterface(prop.p)},rotation:{get:ExpressionPropertyInterface(prop.r)},points:{get:ExpressionPropertyInterface(prop.pt)},outerRadius:{get:ExpressionPropertyInterface(prop.or)},outerRoundness:{get:ExpressionPropertyInterface(prop.os)},innerRadius:{get:ExpressionPropertyInterface(prop.ir)},innerRoundness:{get:ExpressionPropertyInterface(prop.is)},_name:{value:shape.nm}}),interfaceFunction.mn=shape.mn,interfaceFunction}function rectInterfaceFactory(shape,view,propertyGroup){function _propertyGroup(val){return 1==val?interfaceFunction:propertyGroup(--val)}function interfaceFunction(value){return shape.p.ix===value?interfaceFunction.position:shape.r.ix===value?interfaceFunction.roundness:shape.s.ix===value||"Size"===value||"ADBE Vector Rect Size"===value?interfaceFunction.size:void 0}var prop="tm"===view.sh.ty?view.sh.prop:view.sh;return interfaceFunction.propertyIndex=shape.ix,prop.p.setGroupProperty(_propertyGroup),prop.s.setGroupProperty(_propertyGroup),prop.r.setGroupProperty(_propertyGroup),Object.defineProperties(interfaceFunction,{position:{get:ExpressionPropertyInterface(prop.p)},roundness:{get:ExpressionPropertyInterface(prop.r)},size:{get:ExpressionPropertyInterface(prop.s)},_name:{value:shape.nm}}),interfaceFunction.mn=shape.mn,interfaceFunction}function roundedInterfaceFactory(shape,view,propertyGroup){function _propertyGroup(val){return 1==val?interfaceFunction:propertyGroup(--val)}function interfaceFunction(value){if(shape.r.ix===value||"Round Corners 1"===value)return interfaceFunction.radius}var prop=view;return interfaceFunction.propertyIndex=shape.ix,prop.rd.setGroupProperty(_propertyGroup),Object.defineProperties(interfaceFunction,{radius:{get:ExpressionPropertyInterface(prop.rd)},_name:{value:shape.nm}}),interfaceFunction.mn=shape.mn,interfaceFunction}function repeaterInterfaceFactory(shape,view,propertyGroup){function _propertyGroup(val){return 1==val?interfaceFunction:propertyGroup(--val)}function interfaceFunction(value){return shape.c.ix===value||"Copies"===value?interfaceFunction.copies:shape.o.ix===value||"Offset"===value?interfaceFunction.offset:void 0}var prop=view;return interfaceFunction.propertyIndex=shape.ix,prop.c.setGroupProperty(_propertyGroup),prop.o.setGroupProperty(_propertyGroup),Object.defineProperties(interfaceFunction,{copies:{get:ExpressionPropertyInterface(prop.c)},offset:{get:ExpressionPropertyInterface(prop.o)},_name:{value:shape.nm}}),interfaceFunction.mn=shape.mn,interfaceFunction}function pathInterfaceFactory(shape,view,propertyGroup){function _propertyGroup(val){return 1==val?interfaceFunction:propertyGroup(--val)}function interfaceFunction(val){if("Shape"===val||"shape"===val||"Path"===val||"path"===val||"ADBE Vector Shape"===val||2===val)return interfaceFunction.path}var prop=view.sh;return prop.setGroupProperty(_propertyGroup),Object.defineProperties(interfaceFunction,{path:{get:function(){return prop.k&&prop.getValue(),prop}},shape:{get:function(){return prop.k&&prop.getValue(),prop}},_name:{value:shape.nm},ix:{value:shape.ix},mn:{value:shape.mn}}),interfaceFunction}return function(shapes,view,propertyGroup){function _interfaceFunction(value){if("number"==typeof value)return interfaces[value-1];for(var i=0,len=interfaces.length;i<len;){if(interfaces[i]._name===value)return interfaces[i];i+=1}}var interfaces;return _interfaceFunction.propertyGroup=propertyGroup,interfaces=iterateElements(shapes,view,_interfaceFunction),_interfaceFunction.numProperties=interfaces.length,_interfaceFunction}}(),TextExpressionInterface=function(){return function(elem){function _thisLayerFunction(){}var _sourceText;return Object.defineProperty(_thisLayerFunction,"sourceText",{get:function(){elem.textProperty.getValue();var stringValue=elem.textProperty.currentData.t;return void 0!==stringValue&&(elem.textProperty.currentData.t=void 0,_sourceText=new String(stringValue),_sourceText.value=stringValue||new String(stringValue)),_sourceText}}),_thisLayerFunction}}(),LayerExpressionInterface=function(){function toWorld(arr,time){var toWorldMat=new Matrix;toWorldMat.reset();var transformMat;if(transformMat=this._elem.finalTransform.mProp,transformMat.applyToMatrix(toWorldMat),this._elem.hierarchy&&this._elem.hierarchy.length){var i,len=this._elem.hierarchy.length;for(i=0;i<len;i+=1)this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat);return toWorldMat.applyToPointArray(arr[0],arr[1],arr[2]||0)}return toWorldMat.applyToPointArray(arr[0],arr[1],arr[2]||0)}function fromWorld(arr,time){var toWorldMat=new Matrix;toWorldMat.reset();var transformMat;if(transformMat=this._elem.finalTransform.mProp,transformMat.applyToMatrix(toWorldMat),this._elem.hierarchy&&this._elem.hierarchy.length){var i,len=this._elem.hierarchy.length;for(i=0;i<len;i+=1)this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat);return toWorldMat.inversePoint(arr)}return toWorldMat.inversePoint(arr)}function fromComp(arr){var toWorldMat=new Matrix;if(toWorldMat.reset(),this._elem.finalTransform.mProp.applyToMatrix(toWorldMat),this._elem.hierarchy&&this._elem.hierarchy.length){var i,len=this._elem.hierarchy.length;for(i=0;i<len;i+=1)this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat);return toWorldMat.inversePoint(arr)}return toWorldMat.inversePoint(arr)}function sampleImage(){return[1,1,1,1]}return function(elem){function _registerMaskInterface(maskManager){_thisLayerFunction.mask=new MaskManagerInterface(maskManager,elem)}function _registerEffectsInterface(effects){_thisLayerFunction.effect=effects}function _thisLayerFunction(name){switch(name){case"ADBE Root Vectors Group":case"Contents":case 2:return _thisLayerFunction.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return transformInterface;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return _thisLayerFunction.effect}}var transformInterface;_thisLayerFunction.toWorld=toWorld,_thisLayerFunction.fromWorld=fromWorld,_thisLayerFunction.toComp=toWorld,_thisLayerFunction.fromComp=fromComp,_thisLayerFunction.sampleImage=sampleImage,_thisLayerFunction.sourceRectAtTime=elem.sourceRectAtTime.bind(elem),_thisLayerFunction._elem=elem,transformInterface=TransformExpressionInterface(elem.finalTransform.mProp);var anchorPointDescriptor=getDescriptor(transformInterface,"anchorPoint");return Object.defineProperties(_thisLayerFunction,{hasParent:{get:function(){return elem.hierarchy.length}},parent:{get:function(){return elem.hierarchy[0].layerInterface}},rotation:getDescriptor(transformInterface,"rotation"),scale:getDescriptor(transformInterface,"scale"),position:getDescriptor(transformInterface,"position"),opacity:getDescriptor(transformInterface,"opacity"),anchorPoint:anchorPointDescriptor,anchor_point:anchorPointDescriptor,transform:{get:function(){return transformInterface}},active:{get:function(){return elem.isInRange}}}),_thisLayerFunction.startTime=elem.data.st,_thisLayerFunction.index=elem.data.ind,_thisLayerFunction.source=elem.data.refId,_thisLayerFunction.height=0===elem.data.ty?elem.data.h:100,_thisLayerFunction.width=0===elem.data.ty?elem.data.w:100,_thisLayerFunction.inPoint=elem.data.ip/elem.comp.globalData.frameRate,_thisLayerFunction.outPoint=elem.data.op/elem.comp.globalData.frameRate,_thisLayerFunction._name=elem.data.nm,_thisLayerFunction.registerMaskInterface=_registerMaskInterface,_thisLayerFunction.registerEffectsInterface=_registerEffectsInterface,_thisLayerFunction}}(),CompExpressionInterface=function(){return function(comp){function _thisLayerFunction(name){for(var i=0,len=comp.layers.length;i<len;){if(comp.layers[i].nm===name||comp.layers[i].ind===name)return comp.elements[i].layerInterface;i+=1}return null}return Object.defineProperty(_thisLayerFunction,"_name",{value:comp.data.nm}),_thisLayerFunction.layer=_thisLayerFunction,_thisLayerFunction.pixelAspect=1,_thisLayerFunction.height=comp.data.h||comp.globalData.compSize.h,_thisLayerFunction.width=comp.data.w||comp.globalData.compSize.w,_thisLayerFunction.pixelAspect=1,_thisLayerFunction.frameDuration=1/comp.globalData.frameRate,_thisLayerFunction.displayStartTime=0,_thisLayerFunction.numLayers=comp.layers.length,_thisLayerFunction}}(),TransformExpressionInterface=function(){return function(transform){function _thisFunction(name){switch(name){case"scale":case"Scale":case"ADBE Scale":case 6:return _thisFunction.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return _thisFunction.rotation;case"ADBE Rotate X":return _thisFunction.xRotation;case"ADBE Rotate Y":return _thisFunction.yRotation;case"position":case"Position":case"ADBE Position":case 2:return _thisFunction.position;case"ADBE Position_0":return _thisFunction.xPosition;case"ADBE Position_1":return _thisFunction.yPosition;case"ADBE Position_2":return _thisFunction.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return _thisFunction.anchorPoint;case"opacity":case"Opacity":case 11:return _thisFunction.opacity}}if(Object.defineProperty(_thisFunction,"rotation",{get:ExpressionPropertyInterface(transform.r||transform.rz)}),Object.defineProperty(_thisFunction,"zRotation",{get:ExpressionPropertyInterface(transform.rz||transform.r)}),Object.defineProperty(_thisFunction,"xRotation",{get:ExpressionPropertyInterface(transform.rx)}),Object.defineProperty(_thisFunction,"yRotation",{get:ExpressionPropertyInterface(transform.ry)}),Object.defineProperty(_thisFunction,"scale",{get:ExpressionPropertyInterface(transform.s)}),transform.p)var _transformFactory=ExpressionPropertyInterface(transform.p);return Object.defineProperty(_thisFunction,"position",{get:function(){return transform.p?_transformFactory():[transform.px.v,transform.py.v,transform.pz?transform.pz.v:0]}}),Object.defineProperty(_thisFunction,"xPosition",{get:ExpressionPropertyInterface(transform.px)}),Object.defineProperty(_thisFunction,"yPosition",{get:ExpressionPropertyInterface(transform.py)}),Object.defineProperty(_thisFunction,"zPosition",{get:ExpressionPropertyInterface(transform.pz)}),Object.defineProperty(_thisFunction,"anchorPoint",{get:ExpressionPropertyInterface(transform.a)}),Object.defineProperty(_thisFunction,"opacity",{get:ExpressionPropertyInterface(transform.o)}),Object.defineProperty(_thisFunction,"skew",{get:ExpressionPropertyInterface(transform.sk)}),Object.defineProperty(_thisFunction,"skewAxis",{get:ExpressionPropertyInterface(transform.sa)}),Object.defineProperty(_thisFunction,"orientation",{get:ExpressionPropertyInterface(transform.or)}),_thisFunction}}(),ProjectInterface=function(){function registerComposition(comp){this.compositions.push(comp)}return function(){function _thisProjectFunction(name){for(var i=0,len=this.compositions.length;i<len;){if(this.compositions[i].data&&this.compositions[i].data.nm===name)return this.compositions[i].prepareFrame&&this.compositions[i].data.xt&&this.compositions[i].prepareFrame(this.currentFrame),this.compositions[i].compInterface;i+=1}}return _thisProjectFunction.compositions=[],_thisProjectFunction.currentFrame=0,_thisProjectFunction.registerComposition=registerComposition,_thisProjectFunction}}(),EffectsExpressionInterface=function(){function createEffectsInterface(elem,propertyGroup){if(elem.effectsManager){var i,effectElements=[],effectsData=elem.data.ef,len=elem.effectsManager.effectElements.length;for(i=0;i<len;i+=1)effectElements.push(createGroupInterface(effectsData[i],elem.effectsManager.effectElements[i],propertyGroup,elem));return function(name){for(var effects=elem.data.ef||[],i=0,len=effects.length;i<len;){if(name===effects[i].nm||name===effects[i].mn||name===effects[i].ix)return effectElements[i];i+=1}}}}function createGroupInterface(data,elements,propertyGroup,elem){function _propertyGroup(val){return 1===val?groupInterface:propertyGroup(val-1)}var i,effectElements=[],len=data.ef.length;for(i=0;i<len;i+=1)5===data.ef[i].ty?effectElements.push(createGroupInterface(data.ef[i],elements.effectElements[i],elements.effectElements[i].propertyGroup,elem)):effectElements.push(createValueInterface(elements.effectElements[i],data.ef[i].ty,elem,_propertyGroup));var groupInterface=function(name){for(var effects=data.ef,i=0,len=effects.length;i<len;){if(name===effects[i].nm||name===effects[i].mn||name===effects[i].ix)return 5===effects[i].ty?effectElements[i]:effectElements[i]();i+=1}return effectElements[0]()};return groupInterface.propertyGroup=_propertyGroup,"ADBE Color Control"===data.mn&&Object.defineProperty(groupInterface,"color",{get:function(){return effectElements[0]()}}),Object.defineProperty(groupInterface,"numProperties",{get:function(){return data.np}}),groupInterface.active=groupInterface.enabled=0!==data.en,groupInterface}function createValueInterface(element,type,elem,propertyGroup){function interfaceFunction(){return 10===type?elem.comp.compInterface(element.p.v):expressionProperty()}var expressionProperty=ExpressionPropertyInterface(element.p);return element.p.setGroupProperty&&element.p.setGroupProperty(propertyGroup),interfaceFunction}return{createEffectsInterface:createEffectsInterface}}(),MaskManagerInterface=function(){function MaskInterface(mask,data){this._mask=mask,this._data=data}return Object.defineProperty(MaskInterface.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),function(maskManager,elem){var i,_masksInterfaces=createSizedArray(maskManager.viewData.length),len=maskManager.viewData.length;for(i=0;i<len;i+=1)_masksInterfaces[i]=new MaskInterface(maskManager.viewData[i],maskManager.masksProperties[i]);return function(name){for(i=0;i<len;){if(maskManager.masksProperties[i].nm===name)return _masksInterfaces[i];i+=1}}}}(),ExpressionPropertyInterface=function(){function completeProperty(expressionValue,property,type){Object.defineProperty(expressionValue,"velocity",{get:function(){return property.getVelocityAtTime(property.comp.currentFrame)}}),expressionValue.numKeys=property.keyframes?property.keyframes.length:0,expressionValue.key=function(pos){if(expressionValue.numKeys){var value="";value="s"in property.keyframes[pos-1]?property.keyframes[pos-1].s:"e"in property.keyframes[pos-2]?property.keyframes[pos-2].e:property.keyframes[pos-2].s;var valueProp="unidimensional"===type?new Number(value):Object.assign({},value);return valueProp.time=property.keyframes[pos-1].t/property.elem.comp.globalData.frameRate,valueProp}return 0},expressionValue.valueAtTime=property.getValueAtTime,expressionValue.speedAtTime=property.getSpeedAtTime,expressionValue.velocityAtTime=property.getVelocityAtTime,expressionValue.propertyGroup=property.propertyGroup}function UnidimensionalPropertyInterface(property){property&&"pv"in property||(property=defaultUnidimensionalValue);var mult=1/property.mult,val=property.pv*mult,expressionValue=new Number(val);return expressionValue.value=val,completeProperty(expressionValue,property,"unidimensional"),function(){return property.k&&property.getValue(),val=property.v*mult,expressionValue.value!==val&&(expressionValue=new Number(val),expressionValue.value=val,completeProperty(expressionValue,property,"unidimensional")),expressionValue}}function MultidimensionalPropertyInterface(property){property&&"pv"in property||(property=defaultMultidimensionalValue);var mult=1/property.mult,len=property.pv.length,expressionValue=createTypedArray("float32",len),arrValue=createTypedArray("float32",len);return expressionValue.value=arrValue,completeProperty(expressionValue,property,"multidimensional"),function(){property.k&&property.getValue();for(var i=0;i<len;i+=1)expressionValue[i]=arrValue[i]=property.v[i]*mult;return expressionValue}}function defaultGetter(){return defaultUnidimensionalValue}var defaultUnidimensionalValue={pv:0,v:0,mult:1},defaultMultidimensionalValue={pv:[0,0,0],v:[0,0,0],mult:1};return function(property){return property?"unidimensional"===property.propType?UnidimensionalPropertyInterface(property):MultidimensionalPropertyInterface(property):defaultGetter}}();!function(){var TextExpressionSelectorProp=function(){function getValueProxy(index,total){return this.textIndex=index+1,this.textTotal=total,this.v=this.getValue()*this.mult,this.v}return function(elem,data){this.pv=1,this.comp=elem.comp,this.elem=elem,this.mult=.01,this.propType="textSelector",this.textTotal=data.totalChars,this.selectorValue=100,this.lastValue=[1,1,1],this.k=!0,this.x=!0,this.getValue=ExpressionManager.initiateExpression.bind(this)(elem,data,this),this.getMult=getValueProxy,this.getVelocityAtTime=expressionHelpers.getVelocityAtTime,this.kf?this.getValueAtTime=expressionHelpers.getValueAtTime.bind(this):this.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(this),this.setGroupProperty=expressionHelpers.setGroupProperty}}(),propertyGetTextProp=TextSelectorProp.getTextSelectorProp;TextSelectorProp.getTextSelectorProp=function(elem,data,arr){return 1===data.t?new TextExpressionSelectorProp(elem,data,arr):propertyGetTextProp(elem,data,arr)}}(),extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(data,element){this.data=data,this.effectElements=[],this.initDynamicPropertyContainer(element);var i,eff,len=this.data.ef.length,effects=this.data.ef;for(i=0;i<len;i+=1){switch(eff=null,effects[i].ty){case 0:eff=new SliderEffect(effects[i],element,this);break;case 1:eff=new AngleEffect(effects[i],element,this);break;case 2:eff=new ColorEffect(effects[i],element,this);break;case 3:eff=new PointEffect(effects[i],element,this);break;case 4:case 7:eff=new CheckboxEffect(effects[i],element,this);break;case 10:eff=new LayerIndexEffect(effects[i],element,this);break;case 11:eff=new MaskIndexEffect(effects[i],element,this);break;case 5:eff=new EffectsManager(effects[i],element,this);break;default:eff=new NoValueEffect(effects[i],element,this)}eff&&this.effectElements.push(eff)}};var lottiejs={},_isFrozen=!1;lottiejs.play=animationManager.play,lottiejs.pause=animationManager.pause,lottiejs.setLocationHref=setLocationHref,lottiejs.togglePause=animationManager.togglePause,lottiejs.setSpeed=animationManager.setSpeed,lottiejs.setDirection=animationManager.setDirection,lottiejs.stop=animationManager.stop,lottiejs.searchAnimations=searchAnimations,lottiejs.registerAnimation=animationManager.registerAnimation,lottiejs.loadAnimation=loadAnimation,lottiejs.setSubframeRendering=setSubframeRendering,lottiejs.resize=animationManager.resize,lottiejs.goToAndStop=animationManager.goToAndStop,lottiejs.destroy=animationManager.destroy,lottiejs.setQuality=setQuality,lottiejs.inBrowser=inBrowser,lottiejs.installPlugin=installPlugin,lottiejs.freeze=animationManager.freeze,lottiejs.unfreeze=animationManager.unfreeze,lottiejs.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottiejs.__getFactory=getFactory,lottiejs.version="5.5.0";var standalone="__[STANDALONE]__",animationData="__[ANIMATIONDATA]__",renderer="";if(standalone){var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""},queryString=myScript.src.replace(/^[^\?]+\??/,"");renderer=getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);return lottiejs}),angular.module("google.places",[]).factory("googlePlacesApi",["$window",function($window){if(!$window.google)throw"Global `google` var missing. Did you forget to include the places API script?";return $window.google}]).directive("gPlacesAutocomplete",["$parse","$compile","$timeout","$document","googlePlacesApi",function($parse,$compile,$timeout,$document,google){return{restrict:"A",require:"^ngModel",scope:{model:"=ngModel",options:"=?",forceSelection:"=?",customPlaces:"=?",limitCity:"=?",drawerFile:"=?",locVerified:"=?"},controller:["$scope",function($scope){}],link:function($scope,element,attrs,controller){function initEvents(){element.bind("keydown",onKeydown),element.bind("blur",onBlur),element.bind("submit",onBlur),$scope.$watch("selected",select)}function initAutocompleteDrawer(){var $drawer,drawerElement=angular.element("<div g-places-autocomplete-drawer></div>"),elemId=(angular.element($document[0].body),"g-autocomp-pred-container-"+$scope.drawerFile),gContainer=angular.element(document.getElementById(elemId));drawerElement.attr({input:"input",query:"query",predictions:"predictions",active:"active",selected:"selected"}),$drawer=$compile(drawerElement)($scope),gContainer.append($drawer)}function initNgModelController(){controller.$parsers.push(parse),controller.$formatters.push(format),controller.$render=render}function onKeydown(event){$scope.locVerified=1,0!==$scope.predictions.length&&-1!==indexOf(hotkeys,event.which)&&(event.preventDefault(),event.which===keymap.down?($scope.active=($scope.active+1)%$scope.predictions.length,$scope.$digest()):event.which===keymap.up?($scope.active=($scope.active?$scope.active:$scope.predictions.length)-1,$scope.$digest()):13===event.which||9===event.which?($scope.forceSelection&&($scope.active=-1===$scope.active?0:$scope.active),$scope.$apply(function(){$scope.selected=$scope.active,-1===$scope.selected&&clearPredictions()})):27===event.which&&$scope.$apply(function(){event.stopPropagation(),clearPredictions()}))}function onBlur(event){0!==$scope.predictions.length&&($scope.forceSelection&&($scope.selected=-1===$scope.selected?0:$scope.selected),$scope.$digest(),$scope.$apply(function(){-1===$scope.selected&&clearPredictions()}))}function select(){var prediction;if($scope.locVerified=2,prediction=$scope.predictions[$scope.selected]){if(prediction.is_custom)$scope.$apply(function(){$scope.model=prediction.place,$scope.$emit("g-places-autocomplete:select",prediction.place),$timeout(function(){controller.$viewChangeListeners.forEach(function(fn){fn()})})});else{var requestParams={placeId:prediction.place_id,sessionToken:sessionToken,fields:["name","geometry","formatted_address","place_id"]};placesService.getDetails(requestParams,function(place,status){status==google.maps.places.PlacesServiceStatus.OK&&$scope.$apply(function(){$scope.model=place,$scope.$emit("g-places-autocomplete:select",place),$timeout(function(){controller.$viewChangeListeners.forEach(function(fn){fn()})})})})}clearPredictions()}}function parse(viewValue){if(!(viewValue.length<=3)){viewValue.includes($scope.limitCity)||(viewValue=$scope.limitCity+viewValue);var request;return viewValue&&isString(viewValue)?($scope.query=viewValue,request=angular.extend({input:viewValue,sessionToken:sessionToken},$scope.options),autocompleteService.getPlacePredictions(request,function(predictions,status){$scope.$apply(function(){var customPlacePredictions;clearPredictions(),$scope.customPlaces&&(customPlacePredictions=getCustomPlacePredictions($scope.query),$scope.predictions.push.apply($scope.predictions,customPlacePredictions)),status==google.maps.places.PlacesServiceStatus.OK&&$scope.predictions.push.apply($scope.predictions,predictions),$scope.predictions.length>5&&($scope.predictions.length=5)})}),$scope.forceSelection?controller.$modelValue:viewValue):viewValue}}function format(modelValue){var viewValue="";return isString(modelValue)?viewValue=modelValue:isObject(modelValue)&&(viewValue=modelValue.formatted_address),viewValue}function render(){return element.val(controller.$viewValue)}function clearPredictions(){
$scope.active=-1,$scope.selected=-1,$scope.predictions=[]}function getCustomPlacePredictions(query){var place,match,i,predictions=[];for(i=0;i<$scope.customPlaces.length;i++)place=$scope.customPlaces[i],match=getCustomPlaceMatches(query,place),match.matched_substrings.length>0&&predictions.push({is_custom:!0,custom_prediction_label:place.custom_prediction_label||"(Custom Non-Google Result)",description:place.formatted_address,place:place,matched_substrings:match.matched_substrings,terms:match.terms});return predictions}function getCustomPlaceMatches(query,place){var fragment,termFragments,i,q=query+"",terms=[],matched_substrings=[];for(termFragments=place.formatted_address.split(","),i=0;i<termFragments.length;i++)fragment=termFragments[i].trim(),q.length>0&&(fragment.length>=q.length?(startsWith(fragment,q)&&matched_substrings.push({length:q.length,offset:i}),q=""):startsWith(q,fragment)?(matched_substrings.push({length:fragment.length,offset:i}),q=q.replace(fragment,"").trim()):q=""),terms.push({value:fragment,offset:place.formatted_address.indexOf(fragment)});return{matched_substrings:matched_substrings,terms:terms}}function isString(val){return"[object String]"==Object.prototype.toString.call(val)}function isObject(val){return"[object Object]"==Object.prototype.toString.call(val)}function indexOf(array,item){var i,length;if(null==array)return-1;for(length=array.length,i=0;i<length;i++)if(array[i]===item)return i;return-1}function startsWith(string1,string2){return 0===toLower(string1).lastIndexOf(toLower(string2),0)}function toLower(string){return null==string?"":string.toLowerCase()}var keymap={tab:9,enter:13,esc:27,up:38,down:40},hotkeys=[keymap.tab,keymap.enter,keymap.esc,keymap.up,keymap.down],autocompleteService=new google.maps.places.AutocompleteService,placesService=new google.maps.places.PlacesService(element[0]);sessionToken=new google.maps.places.AutocompleteSessionToken,function(){$scope.query="",$scope.predictions=[],$scope.input=element,$scope.options=$scope.options||{},$scope.limitCity=$scope.limitCity||"",$scope.drawerFile=$scope.drawerFile||"all",initAutocompleteDrawer(),initEvents(),initNgModelController()}()}}}]).directive("gPlacesAutocompleteDrawer",["$window","$document",function($window,$document){return{restrict:"A",scope:{input:"=",query:"=",predictions:"=",active:"=",selected:"="},template:['<div ng-class="isAddAddrPopup ? \'pac-container-fixed\' : \'pac-container\'" ng-if="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\', width: position.width+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">','  <div class="pac-item" g-places-autocomplete-prediction index="$index" prediction="prediction" query="query"','       ng-repeat="prediction in predictions track by $index" ng-class="{\'pac-item-selected\': isActive($index) }"','       ng-mouseenter="selectActive($index)" ng-click="selectPrediction($index)" role="option" id="{{prediction.id}}">',"  </div>","</div>"].join(""),link:function($scope,element){function getDrawerPosition(element){$scope.isAddAddrPopup=!!document.getElementById("add-new-addr-auto-complete");var domEl=element[0],rect=domEl.getBoundingClientRect(),docEl=$document[0].documentElement,body=$document[0].body,scrollTop=$window.pageYOffset||docEl.scrollTop||body.scrollTop,scrollLeft=$window.pageXOffset||docEl.scrollLeft||body.scrollLeft;return{width:rect.width,height:rect.height,top:rect.top+rect.height+scrollTop,left:rect.left+scrollLeft}}element.bind("mousedown",function(event){event.preventDefault()}),$window.onscroll=function(){$scope.position=getDrawerPosition($scope.input)},$window.onresize=function(){$scope.$apply(function(){$scope.position=getDrawerPosition($scope.input)})},$scope.isOpen=function(){return $scope.predictions.length>0},$scope.isActive=function(index){return $scope.active===index},$scope.selectActive=function(index){$scope.active=index},$scope.selectPrediction=function(index){$scope.selected=index},$scope.$watch("predictions",function(){$scope.position=getDrawerPosition($scope.input)},!0)}}}]).directive("gPlacesAutocompletePrediction",[function(){return{restrict:"A",scope:{index:"=",prediction:"=",query:"="},template:['<span class="pac-icon pac-icon-marker"></span>','<span class="pac-item-query" ng-bind-html="prediction | highlightMatched"></span>','<span ng-repeat="term in prediction.terms | unmatchedTermsOnly:prediction">{{term.value | trailingComma:!$last}}&nbsp;</span>','<span class="custom-prediction-label" ng-if="prediction.is_custom">&nbsp;{{prediction.custom_prediction_label}}</span>'].join("")}}]).filter("highlightMatched",["$sce",function($sce){return function(prediction){var matched,matchedPortion="",unmatchedPortion="";return prediction.matched_substrings.length>0&&prediction.terms.length>0&&(matched=prediction.matched_substrings[0],matchedPortion=prediction.terms[0].value.substr(matched.offset,matched.length),unmatchedPortion=prediction.terms[0].value.substr(matched.offset+matched.length)),$sce.trustAsHtml('<span class="pac-matched">'+matchedPortion+"</span>"+unmatchedPortion)}}]).filter("unmatchedTermsOnly",[function(){return function(terms,prediction){var i,term,filtered=[];for(i=0;i<terms.length;i++)term=terms[i],prediction.matched_substrings.length>0&&term.offset>prediction.matched_substrings[0].length&&filtered.push(term);return filtered}}]).filter("trailingComma",[function(){return function(input,condition){return condition?input+",":input}}]);var hex_chr="0123456789abcdef".split("");md5("hello"),function(){"use strict";var keys={enter:13,esc:27,left:37,right:39};angular.module("ng-image-gallery",["ngAnimate"]).provider("ngImageGalleryOpts",function(){var defOpts={thumbnails:!0,thumbSize:80,inline:!1,bubbles:!0,bubbleSize:20,imgBubbles:!1,bgClose:!1,piracy:!1,imgAnim:"fadeup",errorPlaceHolder:"Error when loading the image!"};return{setOpts:function(newOpts){angular.extend(defOpts,newOpts)},$get:function(){return defOpts}}}).filter("ngImageGalleryTrust",["$sce",function($sce){return function(value,type){return $sce.trustAs(type||"html",value)}}]).directive("ngRightClick",["$parse",function($parse){return{restrict:"A",scope:!1,link:function(scope,element,attrs){element.bind("contextmenu",function(event){if(0==scope.piracy)return event.preventDefault(),scope.piracy})}}}]).directive("showImageAsync",[function(){return{restrict:"A",scope:!1,link:function(scope,element,attributes){var image=new Image;image.src=attributes.showImageAsync,image.onload=function(){scope.$apply(function(){"thumb"==attributes.asyncKind?(element.css({backgroundImage:'url("'+attributes.showImageAsync+'")'}),element.empty()):"bubble"==attributes.asyncKind&&element.css({backgroundImage:'url("'+attributes.showImageAsync+'")'})})},image.onerror=function(){element.empty()}}}}]).directive("bubbleAutoFit",["$window","$timeout",function($window,$timeout){return{restrict:"A",scope:!1,link:{pre:function(scope,element,attributes){var autoFitBubbles=function(){var scrollerWidth=element[0].getBoundingClientRect().width;if(0!=scrollerWidth){var bubbleSize=scope.bubbleSize,bubbleSpace=bubbleSize+8,rawQuotient=scrollerWidth/bubbleSpace,bubblesInView=Math.floor(rawQuotient),extraSpace=scrollerWidth-bubblesInView*bubbleSpace,extraMargin=extraSpace/bubblesInView,bubbleMargin=8+extraMargin,finalBubbleSpace=bubbleMargin+bubbleSize;scope._bubblesInView=bubblesInView,scope._finalBubbleSpace=finalBubbleSpace,scope._bubbleMargin="0 "+bubbleMargin/2+"px",scope._safeApply(angular.noop)}};$timeout(autoFitBubbles),angular.element($window).bind("resize",function(){$timeout(autoFitBubbles)}),scope.$watch("inline",function(){$timeout(autoFitBubbles)}),scope.$watch("bubbleSize",function(){$timeout(autoFitBubbles)}),scope.$watchCollection("images",function(){$timeout(autoFitBubbles)})}}}}]).directive("bubbleAutoScroll",["$window","$timeout",function($window,$timeout){return{restrict:"A",scope:!1,link:function(scope,element,attributes){var indexCalc=function(){var relativeIndexToBubbleWrapper=scope._bubblesInView-(scope._bubblesInView-scope._activeImageIndex);$timeout(function(){if(relativeIndexToBubbleWrapper>scope._bubblesInView-2){var outBubbles=scope._activeImageIndex+1-scope._bubblesInView+1;scope._activeImageIndex!=scope.images.length-1?scope._bubblesContainerMarginLeft="-"+scope._finalBubbleSpace*outBubbles+"px":scope._bubblesContainerMarginLeft="-"+scope._finalBubbleSpace*(outBubbles-1)+"px"}else scope._bubblesContainerMarginLeft="0px"})};angular.element($window).bind("resize",function(){$timeout(indexCalc)}),scope.$watch("_bubblesInView",function(){$timeout(indexCalc)}),scope.$watch("_activeImageIndex",function(){$timeout(indexCalc)}),scope.$watchCollection("images",function(){$timeout(indexCalc)})}}}]).directive("ngImageGallery",["$rootScope","$timeout","$q","ngImageGalleryOpts",function($rootScope,$timeout,$q,ngImageGalleryOpts){return{replace:!0,transclude:!1,restrict:"AE",scope:{images:"=",methods:"=?",conf:"=?",thumbnails:"=?",thumbSize:"=?",inline:"=?",bubbles:"=?",bubbleSize:"=?",imgBubbles:"=?",bgClose:"=?",piracy:"=?",imgAnim:"@?",errorPlaceHolder:"@?",onOpen:"&?",onClose:"&?",onDelete:"&?"},template:'<div flex="100" class="ng-image-gallery img-move-dir-{{_imgMoveDirection}}" ng-class="{inline:inline}" ng-hide="images.length == 0"><div ng-if="thumbnails && !inline" layout="row" layout-wrap layout-align="center center" class="ng-image-gallery-thumbnails"><div class="thumb" ng-repeat="image in images track by image.id" ng-click="methods.open($index);" show-image-async="{{image.thumbUrl || image.url}}" async-kind="thumb" ng-style="{\'width\' : thumbSize+\'px\', \'height\' : thumbSize+\'px\'}"><div class="loader"></div></div></div><div class="ng-image-gallery-modal" ng-if="opened" ng-cloak><div class="ng-image-gallery-backdrop" ng-if="!inline"></div><div class="ng-image-gallery-content" ng-show="!imgLoading" ng-click="backgroundClose($event);"><div class="actions-icons-container"><div class="delete-img" ng-repeat="image in images track by image.id" ng-if="_activeImg == image && image.deletable" title="Delete this image..." ng-click="_deleteImg(image)"></div></div><div class="control-icons-container"><a class="ext-url" ng-repeat="image in images track by image.id" ng-if="_activeImg == image && image.extUrl" href="{{image.extUrl}}" target="_blank" title="Open image in new tab..."></a><div class="close" ng-click="methods.close();" ng-if="!inline"></div></div><div class="prev" ng-click="methods.prev();" ng-class="{\'bubbles-on\':bubbles}" ng-hide="images.length == 1"></div><div class="next" ng-click="methods.next();" ng-class="{\'bubbles-on\':bubbles}" ng-hide="images.length == 1"></div><div class="galleria"><div class="galleria-images img-anim-{{imgAnim}} img-move-dir-{{_imgMoveDirection}}"><img class="galleria-image" ng-right-click ng-repeat="image in images track by image.id" ng-if="_activeImg == image" ng-src="{{image.url}}" ondragstart="return false;" ng-attr-alt="{{image.alt || undefined}}"/></div><div class="galleria-title-description-wrapper"><div ng-repeat="image in images track by image.id" ng-if="(image.title || image.desc) && (_activeImg == image)"><div class="title" ng-if="image.title" ng-bind-html="image.title | ngImageGalleryTrust"></div><div class="desc" ng-if="image.desc" ng-bind-html="image.desc | ngImageGalleryTrust"></div></div></div><div class="galleria-bubbles-wrapper" ng-if="bubbles && !imgBubbles" ng-hide="images.length == 1" ng-style="{\'height\' : bubbleSize+\'px\'}" bubble-auto-fit><div class="galleria-bubbles" bubble-auto-scroll ng-style="{\'margin-left\': _bubblesContainerMarginLeft}"><span class="galleria-bubble" ng-click="_setActiveImg(image);" ng-repeat="image in images track by image.id" ng-class="{active : (_activeImg == image)}" ng-style="{\'width\' : bubbleSize+\'px\', \'height\' : bubbleSize+\'px\', margin: _bubbleMargin}"></span></div></div><div class="galleria-bubbles-wrapper" ng-if="bubbles && imgBubbles" ng-hide="images.length == 1" ng-style="{\'height\' : bubbleSize+\'px\'}" bubble-auto-fit><div class="galleria-bubbles" bubble-auto-scroll ng-style="{\'margin-left\': _bubblesContainerMarginLeft}"><span class="galleria-bubble img-bubble" ng-click="_setActiveImg(image);" ng-repeat="image in images track by image.id" ng-class="{active : (_activeImg == image)}" show-image-async="{{image.bubbleUrl || image.thumbUrl || image.url}}" async-kind="bubble" ng-style="{\'width\' : bubbleSize+\'px\', \'height\' : bubbleSize+\'px\', \'border-width\' : bubbleSize/10+\'px\', margin: _bubbleMargin}"></span></div></div></div></div><div class="ng-image-gallery-loader" ng-show="imgLoading"><div class="spinner"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div></div><div class="ng-image-gallery-errorplaceholder" ng-show="imgError"><div class="ng-image-gallery-error-placeholder" ng-bind-html="errorPlaceHolder | ngImageGalleryTrust"></div></div></div></div>',link:{pre:function(scope,elem,attr){scope._showLoader=function(){scope.imgLoading=!0},scope._hideLoader=function(){scope.imgLoading=!1},scope._loadImg=function(imgObj){if(!imgObj)return $q.reject();var deferred=$q.defer();imgObj.hasOwnProperty("cached")||scope._showLoader();var img=new Image;return img.src=imgObj.url,img.onload=function(){imgObj.hasOwnProperty("cached")||scope._hideLoader(),imgObj.hasOwnProperty("cached")||(imgObj.cached=!0),deferred.resolve(imgObj)},img.onerror=function(){imgObj.hasOwnProperty("cached")||scope._hideLoader(),deferred.reject("Error when loading img")},deferred.promise},scope._setActiveImg=function(imgObj){scope.images.indexOf(scope._activeImg)-scope.images.indexOf(imgObj)==scope.images.length-1||scope.images.indexOf(scope._activeImg)-scope.images.indexOf(imgObj)<=0&&scope.images.indexOf(scope._activeImg)-scope.images.indexOf(imgObj)!=-(scope.images.length-1)?scope._imgMoveDirection="forward":scope._imgMoveDirection="backward",scope._loadImg(imgObj).then(function(imgObj){scope._activeImg=imgObj,scope._activeImageIndex=scope.images.indexOf(imgObj),scope.imgError=!1},function(){scope._activeImg=null,scope._activeImageIndex=scope.images.indexOf(imgObj),scope.imgError=!0})},scope._safeApply=function(fn){var phase=this.$root.$$phase;"$apply"==phase||"$digest"==phase?fn&&"function"==typeof fn&&fn():this.$apply(fn)},scope._deleteImg=function(img){var _deleteImgCallback=function(){var index=scope.images.indexOf(img);scope.images.splice(index,1),scope._activeImageIndex=0};scope.onDelete({img:img,cb:_deleteImgCallback})},scope.images=void 0!=scope.images?scope.images:[],scope.methods=void 0!=scope.methods?scope.methods:{},scope.conf=void 0!=scope.conf?scope.conf:{},scope.$watchCollection("conf",function(conf){scope.thumbnails=void 0!=conf.thumbnails?conf.thumbnails:void 0!=scope.thumbnails?scope.thumbnails:ngImageGalleryOpts.thumbnails,scope.thumbSize=void 0!=conf.thumbSize?conf.thumbSize:void 0!=scope.thumbSize?scope.thumbSize:ngImageGalleryOpts.thumbSize,scope.inline=void 0!=conf.inline?conf.inline:void 0!=scope.inline?scope.inline:ngImageGalleryOpts.inline,scope.bubbles=void 0!=conf.bubbles?conf.bubbles:void 0!=scope.bubbles?scope.bubbles:ngImageGalleryOpts.bubbles,scope.bubbleSize=void 0!=conf.bubbleSize?conf.bubbleSize:void 0!=scope.bubbleSize?scope.bubbleSize:ngImageGalleryOpts.bubbleSize,scope.imgBubbles=void 0!=conf.imgBubbles?conf.imgBubbles:void 0!=scope.imgBubbles?scope.imgBubbles:ngImageGalleryOpts.imgBubbles,scope.bgClose=void 0!=conf.bgClose?conf.bgClose:void 0!=scope.bgClose?scope.bgClose:ngImageGalleryOpts.bgClose,scope.piracy=void 0!=conf.piracy?conf.piracy:void 0!=scope.piracy?scope.piracy:ngImageGalleryOpts.piracy,scope.imgAnim=void 0!=conf.imgAnim?conf.imgAnim:void 0!=scope.imgAnim?scope.imgAnim:ngImageGalleryOpts.imgAnim,scope.errorPlaceHolder=void 0!=conf.errorPlaceHolder?conf.errorPlaceHolder:void 0!=scope.errorPlaceHolder?scope.errorPlaceHolder:ngImageGalleryOpts.errorPlaceHolder}),scope.onOpen=void 0!=scope.onOpen?scope.onOpen:angular.noop,scope.onClose=void 0!=scope.onClose?scope.onClose:angular.noop,scope.onDelete=void 0!=scope.onDelete?scope.onDelete:angular.noop;var imagesFirstWatch=!0;scope.$watchCollection("images",function(){imagesFirstWatch?imagesFirstWatch=!1:scope.images.length&&scope._setActiveImg(scope.images[scope._activeImageIndex||0])});var activeImageIndexFirstWatch=!0;if(scope.$watch("_activeImageIndex",function(newImgIndex){activeImageIndexFirstWatch?activeImageIndexFirstWatch=!1:scope.images.length&&scope._setActiveImg(scope.images[newImgIndex])}),scope.$watch("inline",function(){$timeout(function(){scope.inline&&scope.methods.open()})}),scope.methods.open=function(imgIndex){scope._activeImageIndex=imgIndex||0,scope.opened=!0,scope.inline||angular.element(document.body).addClass("body-overflow-hidden"),$timeout(function(){scope.onOpen()},300)},scope.methods.close=function(){scope.opened=!1,angular.element(document.body).removeClass("body-overflow-hidden"),$timeout(function(){scope.onClose(),scope._activeImageIndex=0},300)},scope.methods.next=function(){scope._activeImageIndex==scope.images.length-1?scope._activeImageIndex=0:scope._activeImageIndex=scope._activeImageIndex+1},scope.methods.prev=function(){0==scope._activeImageIndex?scope._activeImageIndex=scope.images.length-1:scope._activeImageIndex--},scope.backgroundClose=function(e){if(scope.bgClose&&!scope.inline)for(var noCloseClasses=["galleria-image","destroy-icons-container","ext-url","close","next","prev","galleria-bubble"],i=0;i<e.target.classList.length&&-1==noCloseClasses.indexOf(e.target.classList[i]);i++)scope.methods.close()},angular.element(document).bind("keyup",function(event){scope.inline||(event.which==keys.right||event.which==keys.enter?$timeout(function(){scope.methods.next()}):event.which==keys.left?$timeout(function(){scope.methods.prev()}):event.which==keys.esc&&$timeout(function(){scope.methods.close()}))}),window.Hammer){var hammerElem=new Hammer(elem[0]);hammerElem.on("swiperight",function(ev){$timeout(function(){scope.methods.prev()})}),hammerElem.on("swipeleft",function(ev){$timeout(function(){scope.methods.next()})}),hammerElem.on("doubletap",function(ev){scope.inline||$timeout(function(){scope.methods.close()})})}var removeClassFromDocumentBody=function(){angular.element(document.body).removeClass("body-overflow-hidden")};$rootScope.$on("$stateChangeSuccess",removeClassFromDocumentBody),$rootScope.$on("$routeChangeSuccess",removeClassFromDocumentBody)}}}}])}(),function(){"use strict";var crop=angular.module("ngImgCrop",[]);crop.factory("cropAreaCircle",["cropArea",function(CropArea){var CropAreaCircle=function(){CropArea.apply(this,arguments),this._boxResizeBaseSize=20,this._boxResizeNormalRatio=.9,this._boxResizeHoverRatio=1.2,this._iconMoveNormalRatio=.9,this._iconMoveHoverRatio=1.2,this._boxResizeNormalSize=this._boxResizeBaseSize*this._boxResizeNormalRatio,this._boxResizeHoverSize=this._boxResizeBaseSize*this._boxResizeHoverRatio,this._posDragStartX=0,this._posDragStartY=0,this._posResizeStartX=0,this._posResizeStartY=0,this._posResizeStartSize=0,this._boxResizeIsHover=!1,this._areaIsHover=!1,this._boxResizeIsDragging=!1,this._areaIsDragging=!1};return CropAreaCircle.prototype=new CropArea,CropAreaCircle.prototype._calcCirclePerimeterCoords=function(angleDegrees){var hSize=this._size/2,angleRadians=angleDegrees*(Math.PI/180);return[this._x+hSize*Math.cos(angleRadians),this._y+hSize*Math.sin(angleRadians)]},CropAreaCircle.prototype._calcResizeIconCenterCoords=function(){return this._calcCirclePerimeterCoords(-45)},CropAreaCircle.prototype._isCoordWithinArea=function(coord){return Math.sqrt((coord[0]-this._x)*(coord[0]-this._x)+(coord[1]-this._y)*(coord[1]-this._y))<this._size/2},CropAreaCircle.prototype._isCoordWithinBoxResize=function(coord){var resizeIconCenterCoords=this._calcResizeIconCenterCoords(),hSize=this._boxResizeHoverSize/2;return coord[0]>resizeIconCenterCoords[0]-hSize&&coord[0]<resizeIconCenterCoords[0]+hSize&&coord[1]>resizeIconCenterCoords[1]-hSize&&coord[1]<resizeIconCenterCoords[1]+hSize},CropAreaCircle.prototype._drawArea=function(ctx,centerCoords,size){ctx.arc(centerCoords[0],centerCoords[1],size/2,0,2*Math.PI)},CropAreaCircle.prototype.draw=function(){CropArea.prototype.draw.apply(this,arguments),this._cropCanvas.drawIconMove([this._x,this._y],this._areaIsHover?this._iconMoveHoverRatio:this._iconMoveNormalRatio),this._cropCanvas.drawIconResizeBoxNESW(this._calcResizeIconCenterCoords(),this._boxResizeBaseSize,this._boxResizeIsHover?this._boxResizeHoverRatio:this._boxResizeNormalRatio)},CropAreaCircle.prototype.processMouseMove=function(mouseCurX,mouseCurY){var cursor="default",res=!1;if(this._boxResizeIsHover=!1,this._areaIsHover=!1,this._areaIsDragging)this._x=mouseCurX-this._posDragStartX,this._y=mouseCurY-this._posDragStartY,this._areaIsHover=!0,cursor="move",res=!0,this._events.trigger("area-move");else if(this._boxResizeIsDragging){cursor="nesw-resize";var iFR,iFX,iFY;iFX=mouseCurX-this._posResizeStartX,iFY=this._posResizeStartY-mouseCurY,iFR=iFX>iFY?this._posResizeStartSize+2*iFY:this._posResizeStartSize+2*iFX,this._size=Math.max(this._minSize,iFR),this._boxResizeIsHover=!0,res=!0,this._events.trigger("area-resize")}else this._isCoordWithinBoxResize([mouseCurX,mouseCurY])?(cursor="nesw-resize",this._areaIsHover=!1,this._boxResizeIsHover=!0,res=!0):this._isCoordWithinArea([mouseCurX,mouseCurY])&&(cursor="move",this._areaIsHover=!0,res=!0);return this._dontDragOutside(),angular.element(this._ctx.canvas).css({cursor:cursor}),res},CropAreaCircle.prototype.processMouseDown=function(mouseDownX,mouseDownY){this._isCoordWithinBoxResize([mouseDownX,mouseDownY])?(this._areaIsDragging=!1,this._areaIsHover=!1,this._boxResizeIsDragging=!0,this._boxResizeIsHover=!0,this._posResizeStartX=mouseDownX,this._posResizeStartY=mouseDownY,this._posResizeStartSize=this._size,this._events.trigger("area-resize-start")):this._isCoordWithinArea([mouseDownX,mouseDownY])&&(this._areaIsDragging=!0,this._areaIsHover=!0,this._boxResizeIsDragging=!1,this._boxResizeIsHover=!1,this._posDragStartX=mouseDownX-this._x,this._posDragStartY=mouseDownY-this._y,this._events.trigger("area-move-start"))},CropAreaCircle.prototype.processMouseUp=function(){this._areaIsDragging&&(this._areaIsDragging=!1,this._events.trigger("area-move-end")),this._boxResizeIsDragging&&(this._boxResizeIsDragging=!1,this._events.trigger("area-resize-end")),this._areaIsHover=!1,this._boxResizeIsHover=!1,this._posDragStartX=0,this._posDragStartY=0},CropAreaCircle}]),crop.factory("cropAreaSquare",["cropArea",function(CropArea){var CropAreaSquare=function(){CropArea.apply(this,arguments),this._resizeCtrlBaseRadius=10,this._resizeCtrlNormalRatio=.75,this._resizeCtrlHoverRatio=1,this._iconMoveNormalRatio=.9,this._iconMoveHoverRatio=1.2,this._resizeCtrlNormalRadius=this._resizeCtrlBaseRadius*this._resizeCtrlNormalRatio,this._resizeCtrlHoverRadius=this._resizeCtrlBaseRadius*this._resizeCtrlHoverRatio,this._posDragStartX=0,this._posDragStartY=0,this._posResizeStartX=0,this._posResizeStartY=0,this._posResizeStartSize=0,this._resizeCtrlIsHover=-1,this._areaIsHover=!1,this._resizeCtrlIsDragging=-1,this._areaIsDragging=!1};return CropAreaSquare.prototype=new CropArea,CropAreaSquare.prototype._calcSquareCorners=function(){var hSize=this._size/2;return[[this._x-hSize,this._y-hSize],[this._x+hSize,this._y-hSize],[this._x-hSize,this._y+hSize],[this._x+hSize,this._y+hSize]]},CropAreaSquare.prototype._calcSquareDimensions=function(){var hSize=this._size/2;return{left:this._x-hSize,top:this._y-hSize,right:this._x+hSize,bottom:this._y+hSize}},CropAreaSquare.prototype._isCoordWithinArea=function(coord){var squareDimensions=this._calcSquareDimensions();return coord[0]>=squareDimensions.left&&coord[0]<=squareDimensions.right&&coord[1]>=squareDimensions.top&&coord[1]<=squareDimensions.bottom},CropAreaSquare.prototype._isCoordWithinResizeCtrl=function(coord){for(var resizeIconsCenterCoords=this._calcSquareCorners(),res=-1,i=0,len=resizeIconsCenterCoords.length;i<len;i++){var resizeIconCenterCoords=resizeIconsCenterCoords[i];if(coord[0]>resizeIconCenterCoords[0]-this._resizeCtrlHoverRadius&&coord[0]<resizeIconCenterCoords[0]+this._resizeCtrlHoverRadius&&coord[1]>resizeIconCenterCoords[1]-this._resizeCtrlHoverRadius&&coord[1]<resizeIconCenterCoords[1]+this._resizeCtrlHoverRadius){res=i;break}}return res},CropAreaSquare.prototype._drawArea=function(ctx,centerCoords,size){var hSize=size/2;ctx.rect(centerCoords[0]-hSize,centerCoords[1]-hSize,size,size)},CropAreaSquare.prototype.draw=function(){CropArea.prototype.draw.apply(this,arguments),this._cropCanvas.drawIconMove([this._x,this._y],this._areaIsHover?this._iconMoveHoverRatio:this._iconMoveNormalRatio);for(var resizeIconsCenterCoords=this._calcSquareCorners(),i=0,len=resizeIconsCenterCoords.length;i<len;i++){var resizeIconCenterCoords=resizeIconsCenterCoords[i];this._cropCanvas.drawIconResizeCircle(resizeIconCenterCoords,this._resizeCtrlBaseRadius,this._resizeCtrlIsHover===i?this._resizeCtrlHoverRatio:this._resizeCtrlNormalRatio)}},CropAreaSquare.prototype.processMouseMove=function(mouseCurX,mouseCurY){var cursor="default",res=!1;if(this._resizeCtrlIsHover=-1,this._areaIsHover=!1,this._areaIsDragging)this._x=mouseCurX-this._posDragStartX,this._y=mouseCurY-this._posDragStartY,this._areaIsHover=!0,cursor="move",res=!0,this._events.trigger("area-move");else if(this._resizeCtrlIsDragging>-1){var xMulti,yMulti;switch(this._resizeCtrlIsDragging){case 0:xMulti=-1,yMulti=-1,cursor="nwse-resize";break;case 1:xMulti=1,yMulti=-1,cursor="nesw-resize";break;case 2:xMulti=-1,yMulti=1,cursor="nesw-resize";break;case 3:xMulti=1,yMulti=1,cursor="nwse-resize"}var iFR,iFX=(mouseCurX-this._posResizeStartX)*xMulti,iFY=(mouseCurY-this._posResizeStartY)*yMulti;iFR=iFX>iFY?this._posResizeStartSize+iFY:this._posResizeStartSize+iFX;var wasSize=this._size;this._size=Math.max(this._minSize,iFR);var posModifier=(this._size-wasSize)/2;this._x+=posModifier*xMulti,this._y+=posModifier*yMulti,this._resizeCtrlIsHover=this._resizeCtrlIsDragging,res=!0,this._events.trigger("area-resize")}else{var hoveredResizeBox=this._isCoordWithinResizeCtrl([mouseCurX,mouseCurY]);if(hoveredResizeBox>-1){switch(hoveredResizeBox){case 0:cursor="nwse-resize";break;case 1:case 2:cursor="nesw-resize";break;case 3:cursor="nwse-resize"}this._areaIsHover=!1,this._resizeCtrlIsHover=hoveredResizeBox,res=!0}else this._isCoordWithinArea([mouseCurX,mouseCurY])&&(cursor="move",this._areaIsHover=!0,res=!0)}return this._dontDragOutside(),angular.element(this._ctx.canvas).css({cursor:cursor}),res},CropAreaSquare.prototype.processMouseDown=function(mouseDownX,mouseDownY){var isWithinResizeCtrl=this._isCoordWithinResizeCtrl([mouseDownX,mouseDownY]);isWithinResizeCtrl>-1?(this._areaIsDragging=!1,this._areaIsHover=!1,this._resizeCtrlIsDragging=isWithinResizeCtrl,this._resizeCtrlIsHover=isWithinResizeCtrl,this._posResizeStartX=mouseDownX,this._posResizeStartY=mouseDownY,this._posResizeStartSize=this._size,this._events.trigger("area-resize-start")):this._isCoordWithinArea([mouseDownX,mouseDownY])&&(this._areaIsDragging=!0,this._areaIsHover=!0,this._resizeCtrlIsDragging=-1,this._resizeCtrlIsHover=-1,this._posDragStartX=mouseDownX-this._x,this._posDragStartY=mouseDownY-this._y,this._events.trigger("area-move-start"))},CropAreaSquare.prototype.processMouseUp=function(){this._areaIsDragging&&(this._areaIsDragging=!1,this._events.trigger("area-move-end")),this._resizeCtrlIsDragging>-1&&(this._resizeCtrlIsDragging=-1,this._events.trigger("area-resize-end")),this._areaIsHover=!1,this._resizeCtrlIsHover=-1,this._posDragStartX=0,this._posDragStartY=0},CropAreaSquare}]),crop.factory("cropArea",["cropCanvas",function(CropCanvas){var CropArea=function(ctx,events){this._ctx=ctx,this._events=events,this._minSize=80,this._cropCanvas=new CropCanvas(ctx),this._image=new Image,this._x=0,this._y=0,this._size=200};return CropArea.prototype.getImage=function(){return this._image},CropArea.prototype.setImage=function(image){this._image=image},CropArea.prototype.getX=function(){return this._x},CropArea.prototype.setX=function(x){this._x=x,this._dontDragOutside()},CropArea.prototype.getY=function(){return this._y},CropArea.prototype.setY=function(y){this._y=y,this._dontDragOutside()},CropArea.prototype.getSize=function(){return this._size},CropArea.prototype.setSize=function(size){this._size=Math.max(this._minSize,size),this._dontDragOutside()},CropArea.prototype.getMinSize=function(){return this._minSize},CropArea.prototype.setMinSize=function(size){this._minSize=size,this._size=Math.max(this._minSize,this._size),this._dontDragOutside()},CropArea.prototype._dontDragOutside=function(){var h=this._ctx.canvas.height,w=this._ctx.canvas.width;this._size>w&&(this._size=w),this._size>h&&(this._size=h),this._x<this._size/2&&(this._x=this._size/2),this._x>w-this._size/2&&(this._x=w-this._size/2),this._y<this._size/2&&(this._y=this._size/2),this._y>h-this._size/2&&(this._y=h-this._size/2)},CropArea.prototype._drawArea=function(){},CropArea.prototype.draw=function(){this._cropCanvas.drawCropArea(this._image,[this._x,this._y],this._size,this._drawArea)},CropArea.prototype.processMouseMove=function(){},CropArea.prototype.processMouseDown=function(){},CropArea.prototype.processMouseUp=function(){},CropArea}]),crop.factory("cropCanvas",[function(){var shapeArrowNW=[[-.5,-2],[-3,-4.5],[-.5,-7],[-7,-7],[-7,-.5],[-4.5,-3],[-2,-.5]],shapeArrowNE=[[.5,-2],[3,-4.5],[.5,-7],[7,-7],[7,-.5],[4.5,-3],[2,-.5]],shapeArrowSW=[[-.5,2],[-3,4.5],[-.5,7],[-7,7],[-7,.5],[-4.5,3],[-2,.5]],shapeArrowSE=[[.5,2],[3,4.5],[.5,7],[7,7],[7,.5],[4.5,3],[2,.5]],shapeArrowN=[[-1.5,-2.5],[-1.5,-6],[-5,-6],[0,-11],[5,-6],[1.5,-6],[1.5,-2.5]],shapeArrowW=[[-2.5,-1.5],[-6,-1.5],[-6,-5],[-11,0],[-6,5],[-6,1.5],[-2.5,1.5]],shapeArrowS=[[-1.5,2.5],[-1.5,6],[-5,6],[0,11],[5,6],[1.5,6],[1.5,2.5]],shapeArrowE=[[2.5,-1.5],[6,-1.5],[6,-5],[11,0],[6,5],[6,1.5],[2.5,1.5]],colors={areaOutline:"#fff",resizeBoxStroke:"#fff",resizeBoxFill:"#444",resizeBoxArrowFill:"#fff",resizeCircleStroke:"#fff",resizeCircleFill:"#444",moveIconFill:"#fff"};return function(ctx){var calcPoint=function(point,offset,scale){return[scale*point[0]+offset[0],scale*point[1]+offset[1]]},drawFilledPolygon=function(shape,fillStyle,centerCoords,scale){ctx.save(),ctx.fillStyle=fillStyle,ctx.beginPath();var pc,pc0=calcPoint(shape[0],centerCoords,scale);ctx.moveTo(pc0[0],pc0[1]);for(var p in shape)p>0&&(pc=calcPoint(shape[p],centerCoords,scale),ctx.lineTo(pc[0],pc[1]));ctx.lineTo(pc0[0],pc0[1]),ctx.fill(),ctx.closePath(),ctx.restore()};this.drawIconMove=function(centerCoords,scale){drawFilledPolygon(shapeArrowN,colors.moveIconFill,centerCoords,scale),drawFilledPolygon(shapeArrowW,colors.moveIconFill,centerCoords,scale),drawFilledPolygon(shapeArrowS,colors.moveIconFill,centerCoords,scale),drawFilledPolygon(shapeArrowE,colors.moveIconFill,centerCoords,scale)},this.drawIconResizeCircle=function(centerCoords,circleRadius,scale){var scaledCircleRadius=circleRadius*scale;ctx.save(),ctx.strokeStyle=colors.resizeCircleStroke,ctx.lineWidth=2,ctx.fillStyle=colors.resizeCircleFill,ctx.beginPath(),ctx.arc(centerCoords[0],centerCoords[1],scaledCircleRadius,0,2*Math.PI),ctx.fill(),ctx.stroke(),ctx.closePath(),ctx.restore()},this.drawIconResizeBoxBase=function(centerCoords,boxSize,scale){var scaledBoxSize=boxSize*scale;ctx.save(),ctx.strokeStyle=colors.resizeBoxStroke,ctx.lineWidth=2,ctx.fillStyle=colors.resizeBoxFill,ctx.fillRect(centerCoords[0]-scaledBoxSize/2,centerCoords[1]-scaledBoxSize/2,scaledBoxSize,scaledBoxSize),ctx.strokeRect(centerCoords[0]-scaledBoxSize/2,centerCoords[1]-scaledBoxSize/2,scaledBoxSize,scaledBoxSize),ctx.restore()},this.drawIconResizeBoxNESW=function(centerCoords,boxSize,scale){this.drawIconResizeBoxBase(centerCoords,boxSize,scale),drawFilledPolygon(shapeArrowNE,colors.resizeBoxArrowFill,centerCoords,scale),drawFilledPolygon(shapeArrowSW,colors.resizeBoxArrowFill,centerCoords,scale)},
this.drawIconResizeBoxNWSE=function(centerCoords,boxSize,scale){this.drawIconResizeBoxBase(centerCoords,boxSize,scale),drawFilledPolygon(shapeArrowNW,colors.resizeBoxArrowFill,centerCoords,scale),drawFilledPolygon(shapeArrowSE,colors.resizeBoxArrowFill,centerCoords,scale)},this.drawCropArea=function(image,centerCoords,size,fnDrawClipPath){var xRatio=image.width/ctx.canvas.width,yRatio=image.height/ctx.canvas.height,xLeft=centerCoords[0]-size/2,yTop=centerCoords[1]-size/2;ctx.save(),ctx.strokeStyle=colors.areaOutline,ctx.lineWidth=2,ctx.beginPath(),fnDrawClipPath(ctx,centerCoords,size),ctx.stroke(),ctx.clip(),size>0&&ctx.drawImage(image,xLeft*xRatio,yTop*yRatio,size*xRatio,size*yRatio,xLeft,yTop,size,size),ctx.beginPath(),fnDrawClipPath(ctx,centerCoords,size),ctx.stroke(),ctx.clip(),ctx.restore()}}}]),crop.service("cropEXIF",[function(){function imageHasData(img){return!!img.exifdata}function base64ToArrayBuffer(base64,contentType){contentType=contentType||base64.match(/^data\:([^\;]+)\;base64,/im)[1]||"",base64=base64.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var binary=atob(base64),len=binary.length,buffer=new ArrayBuffer(len),view=new Uint8Array(buffer),i=0;i<len;i++)view[i]=binary.charCodeAt(i);return buffer}function objectURLToBlob(url,callback){var http=new XMLHttpRequest;http.open("GET",url,!0),http.responseType="blob",http.onload=function(e){200!=this.status&&0!==this.status||callback(this.response)},http.send()}function getImageData(img,callback){function handleBinaryFile(binFile){var data=findEXIFinJPEG(binFile),iptcdata=findIPTCinJPEG(binFile);img.exifdata=data||{},img.iptcdata=iptcdata||{},callback&&callback.call(img)}if(img.src)if(/^data\:/i.test(img.src)){var arrayBuffer=base64ToArrayBuffer(img.src);handleBinaryFile(arrayBuffer)}else if(/^blob\:/i.test(img.src)){var fileReader=new FileReader;fileReader.onload=function(e){handleBinaryFile(e.target.result)},objectURLToBlob(img.src,function(blob){fileReader.readAsArrayBuffer(blob)})}else{var http=new XMLHttpRequest;http.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";handleBinaryFile(http.response),http=null},http.open("GET",img.src,!0),http.responseType="arraybuffer",http.send(null)}else if(window.FileReader&&(img instanceof window.Blob||img instanceof window.File)){var fileReader=new FileReader;fileReader.onload=function(e){handleBinaryFile(e.target.result)},fileReader.readAsArrayBuffer(img)}}function findEXIFinJPEG(file){var dataView=new DataView(file);if(255!=dataView.getUint8(0)||216!=dataView.getUint8(1))return!1;for(var offset=2,length=file.byteLength;offset<length;){if(255!=dataView.getUint8(offset))return!1;if(225==dataView.getUint8(offset+1))return readEXIFData(dataView,offset+4,dataView.getUint16(offset+2));offset+=2+dataView.getUint16(offset+2)}}function findIPTCinJPEG(file){var dataView=new DataView(file);if(255!=dataView.getUint8(0)||216!=dataView.getUint8(1))return!1;for(var offset=2,length=file.byteLength;offset<length;){if(function(dataView,offset){return 56===dataView.getUint8(offset)&&66===dataView.getUint8(offset+1)&&73===dataView.getUint8(offset+2)&&77===dataView.getUint8(offset+3)&&4===dataView.getUint8(offset+4)&&4===dataView.getUint8(offset+5)}(dataView,offset)){var nameHeaderLength=dataView.getUint8(offset+7);nameHeaderLength%2!=0&&(nameHeaderLength+=1),0===nameHeaderLength&&(nameHeaderLength=4);return readIPTCData(file,offset+8+nameHeaderLength,dataView.getUint16(offset+6+nameHeaderLength))}offset++}}function readIPTCData(file,startOffset,sectionLength){for(var fieldValue,fieldName,dataSize,segmentType,dataView=new DataView(file),data={},segmentStartPos=startOffset;segmentStartPos<startOffset+sectionLength;)28===dataView.getUint8(segmentStartPos)&&2===dataView.getUint8(segmentStartPos+1)&&(segmentType=dataView.getUint8(segmentStartPos+2))in IptcFieldMap&&(dataSize=dataView.getInt16(segmentStartPos+3),dataSize+5,fieldName=IptcFieldMap[segmentType],fieldValue=getStringFromDB(dataView,segmentStartPos+5,dataSize),data.hasOwnProperty(fieldName)?data[fieldName]instanceof Array?data[fieldName].push(fieldValue):data[fieldName]=[data[fieldName],fieldValue]:data[fieldName]=fieldValue),segmentStartPos++;return data}function readTags(file,tiffStart,dirStart,strings,bigEnd){var entryOffset,tag,i,entries=file.getUint16(dirStart,!bigEnd),tags={};for(i=0;i<entries;i++)entryOffset=dirStart+12*i+2,tag=strings[file.getUint16(entryOffset,!bigEnd)],tags[tag]=readTagValue(file,entryOffset,tiffStart,dirStart,bigEnd);return tags}function readTagValue(file,entryOffset,tiffStart,dirStart,bigEnd){var offset,vals,val,n,numerator,denominator,type=file.getUint16(entryOffset+2,!bigEnd),numValues=file.getUint32(entryOffset+4,!bigEnd),valueOffset=file.getUint32(entryOffset+8,!bigEnd)+tiffStart;switch(type){case 1:case 7:if(1==numValues)return file.getUint8(entryOffset+8,!bigEnd);for(offset=numValues>4?valueOffset:entryOffset+8,vals=[],n=0;n<numValues;n++)vals[n]=file.getUint8(offset+n);return vals;case 2:return offset=numValues>4?valueOffset:entryOffset+8,getStringFromDB(file,offset,numValues-1);case 3:if(1==numValues)return file.getUint16(entryOffset+8,!bigEnd);for(offset=numValues>2?valueOffset:entryOffset+8,vals=[],n=0;n<numValues;n++)vals[n]=file.getUint16(offset+2*n,!bigEnd);return vals;case 4:if(1==numValues)return file.getUint32(entryOffset+8,!bigEnd);for(vals=[],n=0;n<numValues;n++)vals[n]=file.getUint32(valueOffset+4*n,!bigEnd);return vals;case 5:if(1==numValues)return numerator=file.getUint32(valueOffset,!bigEnd),denominator=file.getUint32(valueOffset+4,!bigEnd),val=new Number(numerator/denominator),val.numerator=numerator,val.denominator=denominator,val;for(vals=[],n=0;n<numValues;n++)numerator=file.getUint32(valueOffset+8*n,!bigEnd),denominator=file.getUint32(valueOffset+4+8*n,!bigEnd),vals[n]=new Number(numerator/denominator),vals[n].numerator=numerator,vals[n].denominator=denominator;return vals;case 9:if(1==numValues)return file.getInt32(entryOffset+8,!bigEnd);for(vals=[],n=0;n<numValues;n++)vals[n]=file.getInt32(valueOffset+4*n,!bigEnd);return vals;case 10:if(1==numValues)return file.getInt32(valueOffset,!bigEnd)/file.getInt32(valueOffset+4,!bigEnd);for(vals=[],n=0;n<numValues;n++)vals[n]=file.getInt32(valueOffset+8*n,!bigEnd)/file.getInt32(valueOffset+4+8*n,!bigEnd);return vals}}function getStringFromDB(buffer,start,length){for(var outstr="",n=start;n<start+length;n++)outstr+=String.fromCharCode(buffer.getUint8(n));return outstr}function readEXIFData(file,start){if("Exif"!=getStringFromDB(file,start,4))return!1;var bigEnd,tags,tag,exifData,gpsData,tiffOffset=start+6;if(18761==file.getUint16(tiffOffset))bigEnd=!1;else{if(19789!=file.getUint16(tiffOffset))return!1;bigEnd=!0}if(42!=file.getUint16(tiffOffset+2,!bigEnd))return!1;var firstIFDOffset=file.getUint32(tiffOffset+4,!bigEnd);if(firstIFDOffset<8)return!1;if(tags=readTags(file,tiffOffset,tiffOffset+firstIFDOffset,TiffTags,bigEnd),tags.ExifIFDPointer){exifData=readTags(file,tiffOffset,tiffOffset+tags.ExifIFDPointer,ExifTags,bigEnd);for(tag in exifData){switch(tag){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":exifData[tag]=StringValues[tag][exifData[tag]];break;case"ExifVersion":case"FlashpixVersion":exifData[tag]=String.fromCharCode(exifData[tag][0],exifData[tag][1],exifData[tag][2],exifData[tag][3]);break;case"ComponentsConfiguration":exifData[tag]=StringValues.Components[exifData[tag][0]]+StringValues.Components[exifData[tag][1]]+StringValues.Components[exifData[tag][2]]+StringValues.Components[exifData[tag][3]]}tags[tag]=exifData[tag]}}if(tags.GPSInfoIFDPointer){gpsData=readTags(file,tiffOffset,tiffOffset+tags.GPSInfoIFDPointer,GPSTags,bigEnd);for(tag in gpsData){switch(tag){case"GPSVersionID":gpsData[tag]=gpsData[tag][0]+"."+gpsData[tag][1]+"."+gpsData[tag][2]+"."+gpsData[tag][3]}tags[tag]=gpsData[tag]}}return tags}var ExifTags=this.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},TiffTags=this.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},GPSTags=this.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},StringValues=this.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},IptcFieldMap={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};this.getData=function(img,callback){return!((img instanceof Image||img instanceof HTMLImageElement)&&!img.complete)&&(imageHasData(img)?callback&&callback.call(img):getImageData(img,callback),!0)},this.getTag=function(img,tag){if(imageHasData(img))return img.exifdata[tag]},this.getAllTags=function(img){if(!imageHasData(img))return{};var a,data=img.exifdata,tags={};for(a in data)data.hasOwnProperty(a)&&(tags[a]=data[a]);return tags},this.pretty=function(img){if(!imageHasData(img))return"";var a,data=img.exifdata,strPretty="";for(a in data)data.hasOwnProperty(a)&&("object"==typeof data[a]?data[a]instanceof Number?strPretty+=a+" : "+data[a]+" ["+data[a].numerator+"/"+data[a].denominator+"]\r\n":strPretty+=a+" : ["+data[a].length+" values]\r\n":strPretty+=a+" : "+data[a]+"\r\n");return strPretty},this.readFromBinaryFile=function(file){return findEXIFinJPEG(file)}}]),crop.factory("cropHost",["$document","cropAreaCircle","cropAreaSquare","cropEXIF",function($document,CropAreaCircle,CropAreaSquare,cropEXIF){var getElementOffset=function(elem){var box=elem.getBoundingClientRect(),body=document.body,docElem=document.documentElement,scrollTop=window.pageYOffset||docElem.scrollTop||body.scrollTop,scrollLeft=window.pageXOffset||docElem.scrollLeft||body.scrollLeft,clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,top=box.top+scrollTop-clientTop,left=box.left+scrollLeft-clientLeft;return{top:Math.round(top),left:Math.round(left)}};return function(elCanvas,opts,events){function drawScene(){ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height),null!==image&&(ctx.drawImage(image,0,0,ctx.canvas.width,ctx.canvas.height),ctx.save(),ctx.fillStyle="rgba(0, 0, 0, 0.65)",ctx.fillRect(0,0,ctx.canvas.width,ctx.canvas.height),ctx.restore(),theArea.draw())}var ctx=null,image=null,theArea=null,minCanvasDims=[100,100],maxCanvasDims=[300,300],resImgSize=200,resImgFormat="image/png",resImgQuality=null,resetCropHost=function(){if(null!==image){theArea.setImage(image);var imageDims=[image.width,image.height],imageRatio=image.width/image.height,canvasDims=imageDims;canvasDims[0]>maxCanvasDims[0]?(canvasDims[0]=maxCanvasDims[0],canvasDims[1]=canvasDims[0]/imageRatio):canvasDims[0]<minCanvasDims[0]&&(canvasDims[0]=minCanvasDims[0],canvasDims[1]=canvasDims[0]/imageRatio),canvasDims[1]>maxCanvasDims[1]?(canvasDims[1]=maxCanvasDims[1],canvasDims[0]=canvasDims[1]*imageRatio):canvasDims[1]<minCanvasDims[1]&&(canvasDims[1]=minCanvasDims[1],canvasDims[0]=canvasDims[1]*imageRatio),elCanvas.prop("width",canvasDims[0]).prop("height",canvasDims[1]).css({"margin-left":-canvasDims[0]/2+"px","margin-top":-canvasDims[1]/2+"px"}),theArea.setX(ctx.canvas.width/2),theArea.setY(ctx.canvas.height/2),theArea.setSize(Math.min(200,ctx.canvas.width/2,ctx.canvas.height/2))}else elCanvas.prop("width",0).prop("height",0).css({"margin-top":0});drawScene()},getChangedTouches=function(event){return angular.isDefined(event.changedTouches)?event.changedTouches:event.originalEvent.changedTouches},onMouseMove=function(e){if(null!==image){var pageX,pageY,offset=getElementOffset(ctx.canvas);"touchmove"===e.type?(pageX=getChangedTouches(e)[0].pageX,pageY=getChangedTouches(e)[0].pageY):(pageX=e.pageX,pageY=e.pageY),theArea.processMouseMove(pageX-offset.left,pageY-offset.top),drawScene()}},onMouseDown=function(e){if(e.preventDefault(),e.stopPropagation(),null!==image){var pageX,pageY,offset=getElementOffset(ctx.canvas);"touchstart"===e.type?(pageX=getChangedTouches(e)[0].pageX,pageY=getChangedTouches(e)[0].pageY):(pageX=e.pageX,pageY=e.pageY),theArea.processMouseDown(pageX-offset.left,pageY-offset.top),drawScene()}},onMouseUp=function(e){if(null!==image){var pageX,pageY,offset=getElementOffset(ctx.canvas);"touchend"===e.type?(pageX=getChangedTouches(e)[0].pageX,pageY=getChangedTouches(e)[0].pageY):(pageX=e.pageX,pageY=e.pageY),theArea.processMouseUp(pageX-offset.left,pageY-offset.top),drawScene()}};this.getResultImageDataURI=function(){var temp_ctx,temp_canvas;return temp_canvas=angular.element("<canvas></canvas>")[0],temp_ctx=temp_canvas.getContext("2d"),temp_canvas.width=resImgSize,temp_canvas.height=resImgSize,null!==image&&temp_ctx.drawImage(image,(theArea.getX()-theArea.getSize()/2)*(image.width/ctx.canvas.width),(theArea.getY()-theArea.getSize()/2)*(image.height/ctx.canvas.height),theArea.getSize()*(image.width/ctx.canvas.width),theArea.getSize()*(image.height/ctx.canvas.height),0,0,resImgSize,resImgSize),null!==resImgQuality?temp_canvas.toDataURL(resImgFormat,resImgQuality):temp_canvas.toDataURL(resImgFormat)},this.setNewImageSource=function(imageSource){if(image=null,resetCropHost(),events.trigger("image-updated"),imageSource){var newImage=new Image;"http"===imageSource.substring(0,4).toLowerCase()&&(newImage.crossOrigin="anonymous"),newImage.onload=function(){events.trigger("load-done"),cropEXIF.getData(newImage,function(){var orientation=cropEXIF.getTag(newImage,"Orientation");if([3,6,8].indexOf(orientation)>-1){var canvas=document.createElement("canvas"),ctx=canvas.getContext("2d"),cw=newImage.width,ch=newImage.height,cx=0,cy=0,deg=0;switch(orientation){case 3:cx=-newImage.width,cy=-newImage.height,deg=180;break;case 6:cw=newImage.height,ch=newImage.width,cy=-newImage.height,deg=90;break;case 8:cw=newImage.height,ch=newImage.width,cx=-newImage.width,deg=270}canvas.width=cw,canvas.height=ch,ctx.rotate(deg*Math.PI/180),ctx.drawImage(newImage,cx,cy),image=new Image,image.src=canvas.toDataURL("image/png")}else image=newImage;resetCropHost(),events.trigger("image-updated")})},newImage.onerror=function(){events.trigger("load-error")},events.trigger("load-start"),newImage.src=imageSource}},this.setMaxDimensions=function(width,height){if(maxCanvasDims=[width,height],null!==image){var curWidth=ctx.canvas.width,curHeight=ctx.canvas.height,imageDims=[image.width,image.height],imageRatio=image.width/image.height,canvasDims=imageDims;canvasDims[0]>maxCanvasDims[0]?(canvasDims[0]=maxCanvasDims[0],canvasDims[1]=canvasDims[0]/imageRatio):canvasDims[0]<minCanvasDims[0]&&(canvasDims[0]=minCanvasDims[0],canvasDims[1]=canvasDims[0]/imageRatio),canvasDims[1]>maxCanvasDims[1]?(canvasDims[1]=maxCanvasDims[1],canvasDims[0]=canvasDims[1]*imageRatio):canvasDims[1]<minCanvasDims[1]&&(canvasDims[1]=minCanvasDims[1],canvasDims[0]=canvasDims[1]*imageRatio),elCanvas.prop("width",canvasDims[0]).prop("height",canvasDims[1]).css({"margin-left":-canvasDims[0]/2+"px","margin-top":-canvasDims[1]/2+"px"});var ratioNewCurWidth=ctx.canvas.width/curWidth,ratioNewCurHeight=ctx.canvas.height/curHeight,ratioMin=Math.min(ratioNewCurWidth,ratioNewCurHeight);theArea.setX(theArea.getX()*ratioNewCurWidth),theArea.setY(theArea.getY()*ratioNewCurHeight),theArea.setSize(theArea.getSize()*ratioMin)}else elCanvas.prop("width",0).prop("height",0).css({"margin-top":0});drawScene()},this.setAreaMinSize=function(size){size=parseInt(size,10),isNaN(size)||(theArea.setMinSize(size),drawScene())},this.setResultImageSize=function(size){size=parseInt(size,10),isNaN(size)||(resImgSize=size)},this.setResultImageFormat=function(format){resImgFormat=format},this.setResultImageQuality=function(quality){quality=parseFloat(quality),!isNaN(quality)&&quality>=0&&quality<=1&&(resImgQuality=quality)},this.setAreaType=function(type){var curSize=theArea.getSize(),curMinSize=theArea.getMinSize(),curX=theArea.getX(),curY=theArea.getY(),AreaClass=CropAreaCircle;"square"===type&&(AreaClass=CropAreaSquare),theArea=new AreaClass(ctx,events),theArea.setMinSize(curMinSize),theArea.setSize(curSize),theArea.setX(curX),theArea.setY(curY),null!==image&&theArea.setImage(image),drawScene()},ctx=elCanvas[0].getContext("2d"),theArea=new CropAreaCircle(ctx,events),$document.on("mousemove",onMouseMove),elCanvas.on("mousedown",onMouseDown),$document.on("mouseup",onMouseUp),$document.on("touchmove",onMouseMove),elCanvas.on("touchstart",onMouseDown),$document.on("touchend",onMouseUp),this.destroy=function(){$document.off("mousemove",onMouseMove),elCanvas.off("mousedown",onMouseDown),$document.off("mouseup",onMouseMove),$document.off("touchmove",onMouseMove),elCanvas.off("touchstart",onMouseDown),$document.off("touchend",onMouseMove),elCanvas.remove()}}}]),crop.factory("cropPubSub",[function(){return function(){var events={};this.on=function(names,handler){return names.split(" ").forEach(function(name){events[name]||(events[name]=[]),events[name].push(handler)}),this},this.trigger=function(name,args){return angular.forEach(events[name],function(handler){handler.call(null,args)}),this}}}]),crop.directive("imgCrop",["$timeout","cropHost","cropPubSub",function($timeout,CropHost,CropPubSub){return{restrict:"E",scope:{image:"=",resultImage:"=",changeOnFly:"=",areaType:"@",areaMinSize:"=",resultImageSize:"=",resultImageFormat:"@",resultImageQuality:"=",onChange:"&",onLoadBegin:"&",onLoadDone:"&",onLoadError:"&"},template:"<canvas></canvas>",controller:["$scope",function($scope){$scope.events=new CropPubSub}],link:function(scope,element){var storedResultImage,events=scope.events,cropHost=new CropHost(element.find("canvas"),{},events),updateResultImage=function(scope){var resultImage=cropHost.getResultImageDataURI();storedResultImage!==resultImage&&(storedResultImage=resultImage,angular.isDefined(scope.resultImage)&&(scope.resultImage=resultImage),scope.onChange({$dataURI:scope.resultImage}))},fnSafeApply=function(fn){return function(){$timeout(function(){scope.$apply(function(scope){fn(scope)})})}};events.on("load-start",fnSafeApply(function(scope){scope.onLoadBegin({})})).on("load-done",fnSafeApply(function(scope){scope.onLoadDone({})})).on("load-error",fnSafeApply(function(scope){scope.onLoadError({})})).on("area-move area-resize",fnSafeApply(function(scope){scope.changeOnFly&&updateResultImage(scope)})).on("area-move-end area-resize-end image-updated",fnSafeApply(function(scope){updateResultImage(scope)})),scope.$watch("image",function(){cropHost.setNewImageSource(scope.image)}),scope.$watch("areaType",function(){cropHost.setAreaType(scope.areaType),updateResultImage(scope)}),scope.$watch("areaMinSize",function(){cropHost.setAreaMinSize(scope.areaMinSize),updateResultImage(scope)}),scope.$watch("resultImageSize",function(){cropHost.setResultImageSize(scope.resultImageSize),updateResultImage(scope)}),scope.$watch("resultImageFormat",function(){cropHost.setResultImageFormat(scope.resultImageFormat),updateResultImage(scope)}),scope.$watch("resultImageQuality",function(){cropHost.setResultImageQuality(scope.resultImageQuality),updateResultImage(scope)}),scope.$watch(function(){return[element[0].clientWidth,element[0].clientHeight]},function(value){cropHost.setMaxDimensions(value[0],value[1]),updateResultImage(scope)},!0),scope.$on("$destroy",function(){cropHost.destroy()})}}}])}(),function(){"use strict";function pagination($location){return{restrict:"E",scope:{count:"=",take:"=",activate:"&",maxSize:"=?",hideArrows:"=?"},template:template,link:function(scope,element){function isCurrent(page){return page.value===current}function isDisabled(page){return"separator"===page.type||"prev"===page.type&&1===current||"next"===page.type&&current===pagesCount}function toPage(page){if(page.value!==current&&"separator"!==page.type){if("page"===page.type)current=page.value;else if("prev"===page.type){if(!(current>1))return;current--}else if("next"===page.type){if(!(current<pagesCount))return;current++}activate(current,scope.take),rebuild()}}function rebuild(){var options=buildOptions(),pages=calc(options);if(!pages)return void(scope.pages=[]);pagesCount=pages.count,scope.pages=generate(pages,options),$location.search("page",current)}function locationChanged(){var page=parseInt($location.search().page);page&&scope.toPage({type:"page",value:page})}function buildOptions(){var options={count:scope.count,take:scope.take,maxSize:11,current:current,hideArrows:scope.hideArrows};return scope.maxSize&&(scope.maxSize<7?options.maxSize=7:options.maxSize=scope.maxSize),options}function calc(options){var pages={};if(pages.count=Math.ceil(options.count/options.take),pages.count&&1!==pages.count)return options.maxSize%2==0?(pages.cellsLeft=options.maxSize/2-1,pages.cellsRight=options.maxSize/2):(pages.cellsLeft=(options.maxSize-1)/2,pages.cellsRight=(options.maxSize-1)/2),options.hideArrows||(pages.cellsLeft--,pages.cellsRight--),options.current>pages.cellsLeft+1&&pages.cellsLeft--,options.current>pages.cellsLeft+1&&pages.cellsLeft--,options.current<pages.count-pages.cellsRight&&pages.cellsRight--,options.current<pages.count-pages.cellsRight&&pages.cellsRight--,pages.lo=options.current-pages.cellsLeft,pages.hi=options.current+pages.cellsRight,pages.lo<1&&(pages.hi+=1-pages.lo,pages.lo=1),pages.hi>pages.count&&(pages.lo-=pages.hi-pages.count,pages.hi=pages.count),pages}function generate(pages,options){var list;return list=pages.count<=options.maxSize?generateFlat(pages):generateFull(pages),options.hideArrows||(list.unshift({type:"prev",value:"<"}),list.push({type:"next",value:">"})),list}function generateFlat(pages){for(var list=[],i=1;i<=pages.count;i++)list.push({type:"page",value:i});return list}function generateFull(pages){var list=[];pages.lo>1&&list.push({type:"page",value:1}),pages.lo>2&&list.push({type:"separator",value:"..."});for(var i=pages.lo;i<=pages.hi;i++)i<=0||i>pages.count||list.push({type:"page",value:i});return pages.hi<pages.count-1&&list.push({type:"separator",value:"..."}),pages.hi<pages.count&&list.push({type:"page",value:pages.count}),list}var pagesCount,activate=scope.activate(),queryPage=$location.search().page,current=queryPage?parseInt(queryPage):1;activate(current,scope.take),scope.$watchGroup(["take","count","maxSize","hideArrows"],rebuild),scope.isCurrent=isCurrent,scope.isDisabled=isDisabled,scope.pages=[],scope.toPage=toPage,scope.$on("$locationChangeSuccess",locationChanged)}}}function template(){return'<div class="pagination"><div class="page"ng-repeat="page in pages"ng-class="{ \'active\': isCurrent(page), \'disabled\': isDisabled(page) }"ng-click="toPage(page)">{{ page.value }}</div></div>'}angular.module("ng-pagination",[]).directive("pagination",["$location",pagination])}(),function(angular){angular.module("ui.carousel.config",[]).value("ui.carousel.config",{debug:!0}),angular.module("ui.carousel.providers",[]),angular.module("ui.carousel.controllers",[]),angular.module("ui.carousel.directives",[]),angular.module("ui.carousel",["ui.carousel.config","ui.carousel.directives","ui.carousel.controllers","ui.carousel.providers"])}(angular),angular.module("ui.carousel.controllers").controller("CarouselController",["$scope","$element","$timeout","$q","Carousel","$window","hsOrder",function($scope,$element,$timeout,$q,Carousel,$window,hsOrder){var _this=this;_this.bannerRedirection=function(item){item.cat_id&&""!=item.cat_id&&hsOrder.bannerRedirectionHandler(item)},this.$onInit=function(){_this.initOptions(),_this.initRanges(),_this.setProps(),_this.setupInfinite()},this.initOptions=function(){_this.options=angular.extend({},Carousel.getOptions()),void 0!==_this.initialSlide&&(_this.options.initialSlide=_this.initialSlide),void 0!==_this.fade&&(_this.options.fade=_this.fade),void 0!==_this.autoplay&&(_this.options.autoplay=_this.autoplay),void 0!==_this.autoplaySpeed&&(_this.options.autoplaySpeed=_this.autoplaySpeed),void 0!==_this.cssEase&&(_this.options.cssEase=_this.cssEase),void 0!==_this.speed&&(_this.options.speed=_this.speed),void 0!==_this.infinite&&(_this.options.infinite=_this.infinite),void 0!==_this.arrows&&(_this.options.arrows=_this.arrows),void 0!==_this.dots&&(_this.options.dots=_this.dots),void 0!==_this.visiblePrev&&(_this.options.visiblePrev=_this.visiblePrev),void 0!==_this.visibleNext&&(_this.options.visibleNext=_this.visibleNext),_this.options.fade?(_this.options.slidesToShow=1,_this.options.slidesToScroll=1):(_this.show&&(_this.options.slidesToShow=_this.show),_this.scroll&&(_this.options.slidesToScroll=_this.scroll))},this.initRanges=function(){_this.slides||(_this.slides=[]),_this.isCarouselReady=!1,_this.isTrackMoving=!1,_this.track=$element.find(".track"),_this.width=1,_this.currentSlide=_this.options.initialSlide,_this.trackStyle={},_this.slideStyle={},_this.isVisibleDots=!1,_this.isVisiblePrev=_this.options.visiblePrev,_this.isVisibleNext=_this.options.visibleNext,_this.isClickablePrev=!1,_this.isClickableNext=!1,_this.animType=null,_this.transformType=null,_this.transitionType=null},this.initUI=function(){_this.width=$element[0].clientWidth,_this.initTrack(),$timeout(function(){_this.width=$element[0].clientWidth,_this.initTrack(),_this.updateItemStyle()},550)},this.updateItemStyle=function(){_this.itemWidth=_this.width/_this.options.slidesToShow,_this.slideStyle={width:_this.itemWidth+"px"}},this.initTrack=function(){var itemWidth=_this.width/_this.options.slidesToShow,trackWidth=itemWidth*_this.slidesInTrack.length;_this.trackStyle.width=trackWidth+"px",_this.slideHandler(_this.currentSlide).finally(function(){_this.isCarouselReady=!0,_this.options.fade||_this.refreshTrackStyle(),_this.onInit&&_this.onInit()}).catch(function(){})},this.next=function(){if(!_this.isClickableNext)return!1;var indexOffset=_this.getIndexOffset(),slideOffset=0===indexOffset?_this.options.slidesToScroll:indexOffset;_this.slideHandler(_this.currentSlide+slideOffset).catch(function(){})},this.prev=function(){if(!_this.isClickablePrev)return!1;var indexOffset=_this.getIndexOffset(),slideOffset=0===indexOffset?_this.options.slidesToScroll:_this.options.slidesToShow-indexOffset;_this.slideHandler(_this.currentSlide-slideOffset).catch(function(){})},this.getIndexOffset=function(){return _this.slides.length%_this.options.slidesToScroll!=0?0:(_this.slides.length-_this.currentSlide)%_this.options.slidesToScroll},this.movePage=function(page){var target=_this.options.slidesToScroll*page;_this.slideHandler(target).catch(function(){})},this.slideHandler=function(index){if(!_this.slides)return $q.reject("Carousel not fully setup");if(_this.isTrackMoving)return $q.reject("Track is moving");var len=_this.slides.length,show=_this.options.slidesToShow;if(len<=show)return _this.correctTrack(),$q.reject("Length of slides smaller than slides to show");var anim=index,target=null
;if(target=anim<0?len%_this.options.slidesToScroll!=0?len-len%_this.options.slidesToScroll:len+anim:anim>=len?len%_this.options.slidesToScroll!=0?0:anim-len:anim,_this.onBeforeChange&&_this.onBeforeChange({currentSlide:_this.currentSlide,target:target}),_this.options.fade)return _this.currentSlide=target,$timeout(function(){_this.autoplayTrack(),_this.onAfterChange&&_this.onAfterChange({currentSlide:_this.currentSlide})},_this.options.speed),$q.when("Handler fade");var itemWidth=_this.width/_this.options.slidesToShow,left=-1*target*itemWidth;return _this.options.infinite&&(left=-1*(anim+show)*itemWidth),_this.isTrackMoving=!0,_this.moveTrack(left).then(function(){_this.isTrackMoving=!1,_this.currentSlide=target,_this.autoplayTrack(),target!==anim&&_this.correctTrack(),_this.options.infinite||(0===_this.currentSlide?(_this.isClickablePrev=!1,_this.isClickableNext=!0):_this.currentSlide===_this.slidesInTrack.length-_this.options.slidesToShow?(_this.isClickableNext=!1,_this.isClickablePrev=!0):(_this.isClickablePrev=!0,_this.isClickableNext=!0)),$timeout(function(){_this.onAfterChange&&_this.onAfterChange({currentSlide:_this.currentSlide})},200)})},this.moveTrack=function(left){var deferred=$q.defer();return!1===_this.options.vertical?_this.trackStyle[_this.animType]="translate3d("+left+"px, 0px, 0px)":_this.trackStyle[_this.animType]="translate3d(0px, "+left+"px, 0px)",$timeout(function(){deferred.resolve("Track moved")},_this.options.speed),deferred.promise},this.correctTrack=function(){_this.options.infinite&&function(){var left=0;_this.slides.length>_this.options.slidesToShow&&(left=-1*(_this.currentSlide+_this.options.slidesToShow)*_this.itemWidth),_this.trackStyle[_this.transitionType]=_this.transformType+" 0ms "+_this.options.cssEase,_this.isTrackMoving=!0,$timeout(function(){_this.trackStyle[_this.animType]="translate3d("+left+"px, 0, 0px)",$timeout(function(){_this.refreshTrackStyle(),_this.isTrackMoving=!1},200)})}()},this.refreshTrackStyle=function(){_this.trackStyle[_this.transitionType]=_this.transformType+" "+_this.options.speed+"ms "+_this.options.cssEase},this.autoplayTrack=function(){_this.options.autoplay&&(_this.timeout&&$timeout.cancel(_this.timeout),_this.timeout=$timeout(function(){_this.next(),$timeout.cancel(_this.timeout),_this.timeout=null},_this.options.autoplaySpeed))},this.getSlideStyle=function(index){var style=_this.slideStyle;if(_this.options.fade){var left=-1*index*_this.itemWidth,uniqueStyle={position:"relative",top:"0px",left:left+"px","z-index":index===_this.currentSlide?10:9,opacity:index===_this.currentSlide?1:0};index>=_this.currentSlide-1&&index<=_this.currentSlide+1&&(uniqueStyle.transition="opacity 250ms linear"),style=angular.extend(style,uniqueStyle)}return style},this.setupInfinite=function(){var len=_this.slides.length,show=_this.options.slidesToShow,tmpTrack=angular.copy(_this.slides);if(_this.options.infinite&&!1===_this.options.fade&&len>show){for(var number=show,i=0;i<number;i++)tmpTrack.push(angular.copy(_this.slides[i]));for(var _i=len-1;_i>=len-show;_i--)tmpTrack.unshift(angular.copy(_this.slides[_i]))}_this.slidesInTrack=tmpTrack},this.getDots=function(){if(!_this.slides)return[];for(var dots=Math.ceil(_this.slides.length/_this.options.slidesToScroll),res=[],i=0;i<dots;i++)res.push(i);return res},this.setProps=function(){var bodyStyle=document.body.style;void 0!==bodyStyle.OTransform&&(_this.animType="OTransform",_this.transformType="-o-transform",_this.transitionType="OTransition"),void 0!==bodyStyle.MozTransform&&(_this.animType="MozTransform",_this.transformType="-moz-transform",_this.transitionType="MozTransition"),void 0!==bodyStyle.webkitTransform&&(_this.animType="webkitTransform",_this.transformType="-webkit-transform",_this.transitionType="webkitTransition"),void 0!==bodyStyle.msTransform&&(_this.animType="msTransform",_this.transformType="-ms-transform",_this.transitionType="msTransition"),void 0!==bodyStyle.transform&&!1!==_this.animType&&(_this.animType="transform",_this.transformType="transform",_this.transitionType="transition"),_this.transformsEnabled=!0},this.refreshCarousel=function(){_this.slides&&_this.slides.length&&_this.slides.length>_this.options.slidesToShow?(_this.isVisibleDots=!0,_this.isVisiblePrev=!0,_this.isVisibleNext=!0,_this.isClickablePrev=!0,_this.isClickableNext=!0):(_this.isVisibleDots=!1,_this.isVisiblePrev=_this.options.visiblePrev||!1,_this.isVisibleNext=_this.options.visibleNext||!1,_this.isClickablePrev=!1,_this.isClickableNext=!1),_this.initUI()},$scope.$watchCollection("ctrl.slides",function(slides){slides&&(_this.currentSlide>slides.length-1&&(_this.currentSlide=slides.length-1),_this.setupInfinite(),_this.refreshCarousel())}),angular.element($window).on("resize",this.refreshCarousel),$scope.$on("$destroy",function(){angular.element($window).off("resize")}),1===angular.version.major&&angular.version.minor<5&&this.$onInit()}]),angular.module("ui.carousel.directives").directive("uiCarousel",["$compile","$templateCache","$sce",function($compile,$templateCache,$sce){return{restrict:"AE",bindToController:!0,scope:{name:"=?",slides:"=",show:"=?slidesToShow",scroll:"=?slidesToScroll",classes:"@",fade:"=?",onChange:"=?",disableArrow:"=?",autoplay:"=?",autoplaySpeed:"=?",cssEase:"=?",speed:"=?",infinite:"=?",arrows:"=?",dots:"=?",initialSlide:"=?",visibleNext:"=?",visiblePrev:"=?",onBeforeChange:"&",onAfterChange:"&",onInit:"&"},link:function($scope,el){var template=angular.element($templateCache.get("ui-carousel/carousel.template.html")),injectComponentMap={"carousel-item":".carousel-item","carousel-prev":".carousel-prev","carousel-next":".carousel-next"},templateInstance=template.clone();angular.forEach(injectComponentMap,function(innerSelector,outerSelector){var outerElement=el[0].querySelector(outerSelector);outerElement&&angular.element(templateInstance[0].querySelector(innerSelector)).html(outerElement.innerHTML)});var compiledElement=$compile(templateInstance)($scope);el.addClass("ui-carousel").html("").append(compiledElement)},controller:"CarouselController",controllerAs:"ctrl"}}]),angular.module("ui.carousel.providers").provider("Carousel",function(){var _this=this;this.options={arrows:!0,autoplay:!1,autoplaySpeed:3e3,cssEase:"ease",dots:!1,easing:"linear",fade:!1,infinite:!0,initialSlide:0,slidesToShow:1,slidesToScroll:1,speed:500,visiblePrev:!1,visibleNext:!1,draggable:!0,lazyLoad:"ondemand",swipe:!0,swipeToSlide:!1,touchMove:!0,vertical:!1,verticalSwiping:!1},this.$get=[function(){return{setOptions:function(options){_this.options=angular.extend(_this.options,options)},getOptions:function(){return _this.options}}}]}),function(module){try{module=angular.module("ui.carousel")}catch(e){module=angular.module("ui.carousel",[])}module.run(["$templateCache",function($templateCache){$templateCache.put("ui-carousel/carousel.template.html",'<div class="carousel-wrapper" ng-show="ctrl.isCarouselReady"><div class="track-wrapper"><div class="track" ng-style="ctrl.trackStyle"><div class="slide" ng-repeat="item in ctrl.slidesInTrack track by $index" ng-style="ctrl.getSlideStyle($index)"><div class="carousel-item"></div></div></div></div><div class="carousel-prev" ng-if="!ctrl.disableArrow" ng-show="ctrl.isVisiblePrev &amp;&amp; ctrl.options.arrows" ng-class="{\'carousel-disable\': !ctrl.isClickablePrev}" ng-click="ctrl.prev()"><button class="carousel-btn"><i class="fa fa-chevron-left"></i></button></div><div class="carousel-next" ng-if="!ctrl.disableArrow" ng-show="ctrl.isVisibleNext &amp;&amp; ctrl.options.arrows" ng-class="{\'carousel-disable\': !ctrl.isClickableNext}" ng-click="ctrl.next()"><button class="carousel-btn"><i class="fa fa-chevron-right"></i></button></div><ul class="carousel-dots" ng-show="ctrl.isVisibleDots &amp;&amp; ctrl.options.dots"><li ng-repeat="dot in ctrl.getDots()" ng-class="{ \'carousel-active\': dot == ctrl.currentSlide/ctrl.options.slidesToScroll }" ng-click="ctrl.movePage(dot)"><button>{{ dot }}</button></li></ul></div>')}])}(),function(){"use strict";function Utils(){function isObjectEmpty(obj){try{return void 0===obj||!obj||0===Object.keys(obj).length&&obj.constructor===Object}catch(e){return!0}}return{isObjectEmpty:isObjectEmpty}}angular.module("bro4uWebapp").factory("utils",Utils),Utils.$inject=[]}(),function(){angular.module("core.utils").run(["$window","$rootScope","$interval",function($window,$rootScope,$interval){window.addEventListener("resize",function(){var htmlElement=document.querySelector("html"),outerHeight=window.outerHeight+"px";htmlElement.style.height=outerHeight}),bodymovin.loadAnimation({container:document.getElementById("loader")}),$rootScope.loaderObject={apiCallQueue:{},loaderInitiatedAt:null,loaderVisibility:!1,apiQueueSize:0},$interval(function(){if($rootScope.loaderObject.apiQueueSize){var firstIndex=0,firstCallInitiated=null,responsePending=!1,currentTimestamp=(new Date).getTime(),loaderElement=document.getElementById("loader-wrapper");angular.forEach($rootScope.loaderObject.apiCallQueue,function(apiCallObject,api){firstIndex||(firstCallInitiated=apiCallObject.callInitiated),apiCallObject.callTerminated||(responsePending=!0),firstIndex++}),responsePending?currentTimestamp-firstCallInitiated>500?$rootScope.loaderVisibility?$rootScope.loaderObject.loaderVisibility=!0:($rootScope.loaderObject.loaderVisibility=!0,$rootScope.loaderObject.loaderInitiatedAt=(new Date).getTime()):($rootScope.loaderObject.loaderVisibility=!1,$rootScope.loaderObject.loaderInitiatedAt=null):$rootScope.loaderObject.loaderVisibility?currentTimestamp-$rootScope.loaderObject.loaderInitiatedAt>400?($rootScope.loaderObject.apiCallQueue={},$rootScope.loaderObject.apiQueueSize=0,$rootScope.loaderObject.loaderVisibility=!1,$rootScope.loaderObject.loaderInitiatedAt=null):$rootScope.loaderObject.loaderVisibility=!0:($rootScope.loaderObject.apiCallQueue={},$rootScope.loaderObject.apiQueueSize=0,$rootScope.loaderObject.loaderVisibility=!1,$rootScope.loaderObject.loaderInitiatedAt=null),$rootScope.loaderObject.loaderVisibility?loaderElement.style.display="block":loaderElement.style.display="none"}},200)}])}(),function(){"use strict";function AmtInput(){return{require:"ngModel",link:function(scope,elm,attrs,ctrl){elm.on("keypress keyup",function(event){if(!attrs.amtInput)return!1;if(8!=event.which&&isNaN(String.fromCharCode(event.which))&&"."!==event.key)return event.preventDefault(),!1;var amount=event.target.value,firstDotIndex=amount.indexOf(".");if(0===firstDotIndex)return event.target.value="",!1;if(-1!=firstDotIndex){var leftAmount=amount.substring(0,firstDotIndex);if(leftAmount.length>6)return event.target.value=leftAmount.substring(0,6),!1}if(-1==firstDotIndex&&amount.length>=6&&"."!=event.key)return event.preventDefault(),!1;for(var dotCounts=0,i=0;i<amount.length;i++)"."==amount[i]&&dotCounts++;if("."==event.key&&dotCounts>0)return event.preventDefault(),!1;if(dotCounts>0){if(amount.substring(firstDotIndex,amount.length).length>2)return event.preventDefault(),!1}if(amount.length>=9)return event.preventDefault(),!1;var parsedData=parseFloat(amount);return isNaN(parsedData)?(event.target.value="",!1):parsedData<1?(event.target.value="10",!1):void 0})}}}angular.module("hsOrderModule").directive("amtInput",AmtInput)}(),angular.module("hsOrderModule").directive("autoOpen",function(){function compile(tElement){return tElement[0].childNodes[1].setAttribute("ng-click","ctrl.onFocus($event)"),tElement.find("input").attr("ng-focus","ctrl.onFocus($event)"),tElement.find("input").attr("readonly","readonly"),function(scope,element,attrs,datePicker){var focused=!1;datePicker.onFocus=function(event){(focused=!focused)&&datePicker.openCalendarPane(event)}}}return{compile:compile,priority:-1,require:"mdDatepicker",restrict:"A"}}),function(){"use strict";function doubleClickHandler(){return{scope:{doubleClickHandler:"&"},link:function(scope,elm,attrs,ctrl){var clicks=0;elm.on("click",function(event){return++clicks>1?(event.preventDefault(),!1):(setTimeout(function(){clicks=0},3e3),1==clicks?(scope.doubleClickHandler(),!1):void 0)})}}}angular.module("hsOrderModule").directive("doubleClickHandler",doubleClickHandler)}(),function(){"use strict";angular.module("hsOrderModule").directive("imgDefHandler",["$window",function($window){return{restrict:"A",link:function(scope,element,attrs){scope.safeApply=function(fn){var phase=this.$root.$$phase;"$apply"==phase||"$digest"==phase?fn&&"function"==typeof fn&&fn():this.$apply(fn)};var defaults={1:"dist/img/default/default_profile.png",2:"dist/img/default/default_category.png",3:"dist/img/default/default_banner.png",4:"dist/img/avatar.png",5:"dist/img/default/default_product.png",6:"dist/img/default/default_profile_grey.png"};if(""===attrs.ngSrc||void 0===attrs.ngSrc){var defaultImage=defaults[attrs.imgDefHandler];attrs.$set("ngSrc",defaultImage),attrs.$set("src",defaultImage)}else attrs.ngSrc.indexOf("/img/default/")&&attrs.item&&(attrs.$set("ngSrc",attrs.item),attrs.$set("src",attrs.item))}}}])}(),function(){"use strict";angular.module("hsOrderModule").directive("img",["$window","ApiService",function($window,ApiService){return{restrict:"E",replace:!1,link:function(scope,elem,attr){attr.src?"dist/"===attr.src.substring(0,5)&&attr.$set("src",ApiService.get().staticImagePath+attr.src):attr.ngSrc&&"dist/"===attr.ngSrc.substring(0,5)&&attr.$set("ngSrc",ApiService.get().staticImagePath+attr.ngSrc)}}}])}(),function(){"use strict";function JsonSchema($filter,$sce){return{restrict:"E",template:function(){return'<script type="application/ld+json" ng-bind-html="onGetJson()"><\/script>'},scope:{json:"=json"},link:function(scope,element,attrs){scope.onGetJson=function(){return $sce.trustAsHtml($filter("json")(scope.json))}},replace:!0}}angular.module("core").directive("jsonld",JsonSchema),JsonSchema.$inject=["$filter","$sce"]}(),function(){"use strict";function noStartZero(){return{require:"ngModel",link:function(scope,elm,attrs,ctrl){elm.bind("propertychange keyup paste",function(blurEvent){var value=elm.val();value&&value.length&&(isNaN(parseInt(value))?elm.val(""):elm.val(parseInt(value)))})}}}angular.module("hsOrderModule").directive("noStartZero",noStartZero)}(),function(){"use strict";function NumberInput(){return{require:"ngModel",link:function(scope,elm,attrs,ctrl){elm.on("keypress",function(event){var key=event.which||event.keyCode||event.charCode;return key>=48&&key<=57||8===key?attrs.maxlength&&elm.val().length>=attrs.maxlength&&8!==key?(event.preventDefault(),!1):void 0:(event.preventDefault(),!1)}),elm.bind("mousewheel",function(event){elm.blur()})}}}angular.module("hsOrderModule").directive("numberInput",NumberInput)}(),function(){"use strict";angular.module("hsOrderModule").directive("premiumModal",["$mdDialog",function($mdDialog){return{restrict:"A",replace:!1,link:function(scope,elem,attr){elem.bind("click",function(){var desc=JSON.parse(attr.desc);desc.length&&$mdDialog.show({templateUrl:"components/popup/premium-badge-popup.temp.html",clickOutsideToClose:!0,escapeToClose:!0,controller:function(){},controllerAs:"VLSCtrl",bindToController:!0,locals:{title:attr.title,desc:desc,closeDialog:function(){$mdDialog.hide()}}})})}}}])}(),function(){"use strict";angular.module("hsOrderModule").directive("starRating",["$window",function($window){return{restrict:"AE",template:['<ul class="star-rating" ng-class="{readonly: readonly}">','  <li ng-repeat="star in stars" class="star" ng-class="{filled: star.filled}" ng-click="toggle($index)">','    <i class="fa fa-star fa-lg"></i>',"  </li>","</ul>"].join(""),scope:{ratingValue:"=ngModel",max:"=?",onRatingSelect:"&?",readonly:"=?"},link:function(scope,element,attrs){function updateStars(){scope.stars=[];for(var i=0;i<scope.max;i++)scope.stars.push({filled:i<scope.ratingValue})}void 0==scope.max&&(scope.max=5),scope.toggle=function(index){void 0!=scope.readonly&&!1!==scope.readonly||(scope.ratingValue=index+1,scope.onRatingSelect({rating:index+1}))},scope.$watch("ratingValue",function(oldValue,newValue){(newValue||0===newValue)&&updateStars()})}}}])}(),function(){"use strict";function DataServiceFactory($q,$httpParamSerializerJQLike,ApiService,StorageService,HttpService){function viewBill(cn,op,cir,adParams){function getViewBillComplete(response){return response}function getException(error){}var data={cn:cn,op:op};return cir&&(data.cir=cir),adParams&&(data.adParams=adParams),HttpService.call(generateRequestObject("POST",ApiService.get().recharge.viewBill,data,!1)).then(getViewBillComplete).catch(getException)}function updateProfile(user){function getUpdateProfileComplete(response){return response}function getException(error){return $q.reject(response.data)}return HttpService.call(generateRequestObject("POST",ApiService.get().internal.updateProfileAPI,user,!1)).then(getUpdateProfileComplete).catch(getException)}function getMetaData(){function getMetaDataComplete(response){return response}function getException(error){return $q.reject(response.data)}return HttpService.call(generateRequestObject("GET",ApiService.get().recharge.getMetaData,null,!0)).then(getMetaDataComplete).catch(getException)}function getViewConfig(){function getViewConfigComplete(response){return response}function getException(error){return $q.reject(response.data)}return HttpService.call(generateRequestObject("GET",ApiService.get().recharge.getViewConfig,null,!0)).then(getViewConfigComplete).catch(getException)}function getAllPlanType(){function getPlanTypesComplete(response){return response}function getException(error){}var url=ApiService.get().recharge.getRechargePlanType;return HttpService.call(generateRequestObject("GET",url,null,!0)).then(getPlanTypesComplete).catch(getException)}function getPlans(oid,cid,pid){function getException(error){}var url=ApiService.get().recharge.getRechargePlans,urlParams="";return null===oid||oid<0?urlParams+="":null===cid||cid<0?urlParams+="/"+oid:null===pid||pid<0?(urlParams+="/"+oid,urlParams+="/"+cid):(urlParams+="/"+oid,urlParams+="/"+cid,urlParams+="/"+pid),url+=urlParams,HttpService.call(generateRequestObject("GET",url,null,!0)).then(function(response){return response}()).catch(getException)}function findOperatorCircle(connectionNumber){function getException(error){}var url=ApiService.get().recharge.findOperatorCircle+connectionNumber;return HttpService.call(generateRequestObject("GET",url,null,!0)).then(function(response){return response}()).catch(getException)}function doRecharge(cn,op,cir,amt,payableAmt,isSR,ad1,pt,paymentInfo,custid,cnntyp,paymentType){var params={},pmt={};if(params.sprc=!0===isSR?"specialRecharge":null,params.cnntyp=cnntyp,params.cn=cn,params.op=op,params.cir=cir,params.amt=amt,params.payableamt=payableAmt,pt&&(params.pt=pt),null!==params)switch(pmt.custid=custid,pmt.coupon=paymentInfo.coupon,pmt.paymenttype=paymentType,StorageService.set("params",params),StorageService.set("payment",pmt),paymentType){case"debitcard":return debitCardPayment(params,pmt,paymentInfo);case"netbanking":return netBankingPayment(params,pmt,paymentInfo);case"wallet:paytm":return paytmWalletPayment(params,pmt,paymentInfo)}}function doService(amt,payableAmt,paymentInfo,custid,paymentType,orderId,checksum){var params={},pmt={};if(params.amt=amt,params.payableamt=payableAmt,null!==params)switch(pmt.paymenttype=paymentType,pmt.flowType="services",pmt.orderid=orderId,pmt.CHECKSUMHASH=checksum,pmt.custid=custid,pmt.orderid,StorageService.set("params",params),StorageService.set("payment",pmt),paymentType){case"debitcard":return debitCardPayment(params,pmt,paymentInfo);case"netbanking":return netBankingPayment(params,pmt,paymentInfo);case"wallet:paytm":return paytmWalletPayment(params,pmt,paymentInfo)}}function debitCardPayment(params,pmt,ccinfo){return generateToken(ccinfo,pmt.custid).then(function(response){return response.hasOwnProperty("data")&&(response=response.data),response.hasOwnProperty("STATUS")&&"FAILURE"===response.STATUS?response:(pmt.token=response.TOKEN,doPost({params:params,payment:pmt,user_id:pmt.custid}))},function(error){})}function netBankingPayment(params,pmt,paymentInfo){return pmt.bankcode=paymentInfo.nbinfo.BANK_CODE,doPost({params:params,payment:pmt,user_id:pmt.custid})}function paytmWalletPayment(params,pmt,paymentInfo){return pmt.mode=paymentInfo.mode,pmt=angular.extend({},pmt,paymentInfo),"paytm:wallet"===pmt.mode?doPost({params:params,payment:pmt,user_id:pmt.custid}):"paytm:nb"===pmt.mode?netBankingPayment(params,pmt,paymentInfo):"paytm:cc"===pmt.mode||"paytm:dc"===pmt.mode?debitCardPayment(params,pmt,paymentInfo):generateSavedCardToken(paymentInfo,pmt.custid).then(function(response){return pmt.token=response.data.TOKEN,doPost({params:params,payment:pmt,user_id:pmt.custid})},function(error){})}function doPost(data){function getResponse(response){return response}function getException(error){}return data.ref_source=window.BRO4U_HTTP_REFRRER,data.hasOwnProperty("payment")&&(data.payment.hasOwnProperty("nbinfo")&&delete data.payment.nbinfo,data.payment.hasOwnProperty("scinfo")&&delete data.payment.scinfo,data.payment.hasOwnProperty("ccinfo")&&delete data.payment.ccinfo,data.payment.hasOwnProperty("dcinfo")&&delete data.payment.dcinfo),data.hasOwnProperty("payment")&&data.payment.hasOwnProperty("flowType")&&"services"===data.payment.flowType?(delete data.payment.flowType,HttpService.call(generateRequestObject("POST",ApiService.get().paymentModule.preServiceAPI,data,!1)).then(getResponse()).catch(getException)):HttpService.call(generateRequestObject("POST",ApiService.get().recharge.preRecharge,data,!1)).then(getResponse).catch(getException)}function fetchSummary(txnId){function getFetchSummaryResponse(response){deferred.resolve(response)}function errHandler(error){deferred.reject(error)}var deferred=$q.defer(),data={txnid:txnId};return HttpService.call(generateRequestObject("POST",ApiService.get().recharge.fetchSummary,data,!1)).then(getFetchSummaryResponse,errHandler),deferred.promise}function rechargeHistory(showAll,connectionType,userId){function getException(error){}showAll=void 0!==showAll&&showAll,connectionType=void 0===connectionType?"":connectionType;var req={user_id:userId,showAll:showAll,connTyp:connectionType};return HttpService.call(generateRequestObject("POST",ApiService.get().recharge.rechargeHistory,req,!1)).then(function(response){return response}()).catch(getException)}function validation(cn,op,cir,amt,adParams){function getException(error){}var data={cn:cn,op:op,amt:amt};return cir&&(data.cir=cir),adParams&&(data.adParams=adParams),HttpService.call(generateRequestObject("POST",ApiService.get().recharge.validation,data,!1)).then(function(response){return response}()).catch(getException)}function fetchBankList(){function getException(error){}return HttpService.call(generateRequestObject("GET",ApiService.get().paymentModule.getBankList,null,!0)).then(function(response){return response}()).catch(getException)}function fetchBankListFromPaytm(){function getBankListResponse(data){}function getException(error){}var req={MID:MID};return HttpService.call({method:"POST",url:ApiService.get().external.getBankList,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$httpParamSerializerJQLike(req),cache:!0}).then(getBankListResponse).catch(getException)}function generatePaytmLoginOTP(mobile){function paytmResponse(response){return response=response.data}function getException(error){}var req={USER_MOBILE:mobile};return HttpService.call(generateRequestObject("POST",ApiService.get().paymentModule.generatePaytmOTP,req,!1)).then(paytmResponse).catch(getException)}function validateCouponCode(coupon,amount,userId){function couponResponse(response){return response=response.data}function getException(error){}var req={user_id:userId,coupon_code:coupon,amount:amount};return HttpService.call(generateRequestObject("POST",ApiService.get().paymentModule.validateCoupon,req,!1)).then(couponResponse).catch(getException)}function verifyPaytmLoginOTP(otp,state){function getException(error){}var req={STATE:state,OTP:otp};return HttpService.call(generateRequestObject("POST",ApiService.get().paymentModule.verifyPaytmOTP,req,!1)).then(function(response){return response}()).catch(getException)}function getPaytmSavedCards(paytmToken){function getException(error){}var req={PAYTM_TOKEN:paytmToken};return HttpService.call(generateRequestObject("POST",ApiService.get().paymentModule.getPaytmSavedCards,req,!1)).then(function(response){return response}()).catch(getException)}function getWalletInfo(ssotoken){function getException(error){}var req={PAYTM_TOKEN:ssotoken};return HttpService.call(generateRequestObject("POST",ApiService.get().paymentModule.checkBalance,req,!1)).then(function(response){return response}()).catch(getException)}function getPaytmTokenFromDb(user_id){function getException(error){}var req={user_id:user_id};return HttpService.call(generateRequestObject("POST",ApiService.get().paymentModule.fetchPaytmToken,req,!1)).then(function(response){return response}()).catch(getException)}function setPaytmTokenInDb(params,checksum){function getException(error){}var req=angular.extend({},params,{CHECKSUMHASH:checksum});return HttpService.call(generateRequestObject("POST",ApiService.get().paymentModule.addOrUpdateToken,req,!1)).then(function(response){return response}()).catch(getException)}function generateSavedCardToken(data,cust_id){function getSavedCardTokenResponse(data){return API_Response="SUCCESS"===data.STATUS?data.TOKEN:data}function getException(error){}var API_Response,req={MID:MID,CUST_ID:cust_id,SAVED_CARD_ID:data.scinfo.SAVE_CARD_ID,CVV:data.scinfo.cvv};return HttpService.call({method:"POST",url:ApiService.get().external.generateToken,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$httpParamSerializerJQLike(req)}).then(getSavedCardTokenResponse).catch(getException)}function generateInternalChecksum(params){function getChecksumResponse(res){return res?def.resolve(res.data):def.reject(),def.promise}function getException(error){}var def=$q.defer();return HttpService.call(generateRequestObject("POST",ApiService.get().paymentModule.genInterCheckSum,params,!1)).then(getChecksumResponse).catch(getException)}function generateToken(ccinfo,cust_id){function getTokenResponse(data){return API_Response="SUCCESS"===data.STATUS?data.TOKEN:data}function getException(error){}var API_Response;ccinfo.hasOwnProperty("ccinfo")&&(ccinfo=ccinfo.ccinfo);var CARD_NUMBER="";CARD_NUMBER="number"==typeof ccinfo.number?ccinfo.number.toString().trim():ccinfo.number.replace(/\s/g,"");var req={MID:MID,CARD_EXPIRY_MONTH:ccinfo.month,CARD_EXPIRY_YEAR:ccinfo.year,CARD_NUMBER:CARD_NUMBER,CVV:ccinfo.securityCode,CUST_ID:cust_id};return HttpService.call({method:"POST",url:ApiService.get().external.generateToken,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$httpParamSerializerJQLike(req)}).then(getTokenResponse).catch(getException)}function generateRequestObject(method,url,data,isCacheEnabled){var requestObject={method:method,url:url,headers:ApiService.getHeader()};return"POST"===method&&(requestObject.data=$httpParamSerializerJQLike(data)),isCacheEnabled&&(requestObject.cache=!0),requestObject}var paytm,self=this;self.BASE_URL=ApiService.get().recharge.baseAPI;var MID="BRO4UO21090263316002";return paytm={getWalletInfo:getWalletInfo,generatePaytmLoginOTP:generatePaytmLoginOTP,verifyPaytmLoginOTP:verifyPaytmLoginOTP,getPaytmSavedCards:getPaytmSavedCards},{getMetaData:getMetaData,viewBill:viewBill,findOperatorCircle:findOperatorCircle,getPlans:getPlans,getAllPlanType:getAllPlanType,doRc:doRecharge,doSc:doService,validation:validation,fetchSummary:fetchSummary,rechargeHistory:rechargeHistory,fetchBankList:fetchBankList,fetchBankListFromPaytm:fetchBankListFromPaytm,updateProfile:updateProfile,validateCoupon:validateCouponCode,generateRequestObject:generateRequestObject,getPaytmTokenFromDb:getPaytmTokenFromDb,generateInternalChecksum:generateInternalChecksum,setPaytmTokenInDb:setPaytmTokenInDb,paytm:paytm,getViewConfig:getViewConfig}}angular.module("core.factory").factory("dataFactory",DataServiceFactory),DataServiceFactory.$inject=["$q","$httpParamSerializerJQLike","ApiService","StorageService","HttpService"]}(),function(){function FbAuthProvider($window,$q,$log){function fbGetLoginStatus(){var deferred=$q.defer();return $window.FB.getLoginStatus(function(response){!response||response.error?deferred.reject("NO_RESPONSE"):deferred.resolve(response)}),deferred.promise}function fbLogMeIn(){var deferred=$q.defer();return $window.FB.login(function(response){!response||response.error?deferred.reject("NO_RESPONSE"):deferred.resolve(response)},{scope:"public_profile,email",return_scopes:!0}),deferred.promise}function fbLogMeOut(){var deferred=$q.defer();return $window.FB.logout(function(response){!response||response.error?deferred.reject("NO_RESPONSE"):deferred.resolve(response)}),deferred.promise}return{fbLoginStatus:fbGetLoginStatus,fbLogIn:fbLogMeIn,fbLogOut:fbLogMeOut}}angular.module("core.factory.auth").factory("fbAuthProvider",FbAuthProvider),FbAuthProvider.$inject=["$window","$q","$log"]}(),function(){function GpAuthProvider(){function gpLogMeIn(auth2){function signedIn(response){}function notSignedIn(response){}auth2.signIn().then(signedIn,notSignedIn)}function gpLogMeOut(auth2){function signedOut(response){auth2.disconnect()}function notSignedOut(response){}auth2.signOut().then(signedOut,notSignedOut)}return{gpLogIn:gpLogMeIn,gpLogOut:gpLogMeOut}}angular.module("core.factory.auth").factory("gpAuthProvider",GpAuthProvider),GpAuthProvider.$inject=[]}(),function(){function HODProvider($state,$mdToast,$q,$http,$httpParamSerializerJQLike,$cacheFactory,$rootScope,ApiService,AuthService,Upload){function getCitiesData(){return formConfigObj(1,!0,!1).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function verifyPinCode(dataToSend){return formConfigObj(2,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function intermediateScreenData(dataToSend){return dataToSend.options=void 0!==dataToSend.options?dataToSend.options:"",formConfigObj(3,!0,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function requirementScreenData(dataToSend){return formConfigObj(4,!0,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function getFutureTimeslots(dataToSend){return formConfigObj(5,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function vendorProductList(dataToSend){return formConfigObj(6,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){AuthService.isLoggedIn()?$state.go("my-orders"):($mdToast.showSimple(fallBackMessage),$state.go(fallBackState))})}function customCatalogData(dataToSend){return formConfigObj(7,!0,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function vendorProfileData(dataToSend){return formConfigObj(8,!0,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function vendorGalleryData(dataToSend){return formConfigObj(9,!0,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function vendorReviewData(dataToSend){return formConfigObj(10,!0,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function addAddress(dataToSend){return formConfigObj(11,!1,dataToSend).then(function(configObj){
return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function manageAddress(dataToSend){return formConfigObj(12,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function editAddress(dataToSend){return formConfigObj(13,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function deleteAddress(dataToSend){return formConfigObj(14,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function setDefaultAddress(dataToSend){return formConfigObj(15,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function getNotifications(dataToSend){return formConfigObj(16,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function clearNotifications(dataToSend){return formConfigObj(17,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function getOffers(dataToSend){return formConfigObj(18,!0,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function raiseIssue(dataToSend){return formConfigObj(19,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function cancelOrder(dataToSend){return formConfigObj(20,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function getIssues(dataToSend){return formConfigObj(21,!0,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function myOrders(dataToSend){return formConfigObj(22,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function getExploreServices(){return formConfigObj(23,!0,!1).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function getPopularServices(dataToSend){return formConfigObj(24,!0,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function getBusinessTrades(){return formConfigObj(25,!0,!1).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function getAboutCompany(){return formConfigObj(26,!0,!1).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function getHomePageBanner(dataToSend){return formConfigObj(27,!0,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function searchService(dataToSend){return formConfigObj(28,!0,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function getAllServices(dataToSend){return formConfigObj(29,!0,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function myQuotes(dataToSend){return formConfigObj(30,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function reorder(dataToSend){return formConfigObj(31,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function orderSummary(dataToSend){return formConfigObj(32,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function vendorArrivalStatusUpdate(dataToSend){return formConfigObj(33,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function fetchVendorRating(dataToSend){return formConfigObj(34,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function fetchQuoteOrders(dataToSend){return formConfigObj(35,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function quoteOrderAction(dataToSend){return formConfigObj(36,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function fetchTrendingServices(dataToSend){return formConfigObj(37,!0,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function requirementScreenExtData(dataToSend){return formConfigObj(38,!0,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function orderReviewScreen(dataToSend){return formConfigObj(39,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){AuthService.isLoggedIn()?$state.go("my-orders"):($mdToast.showSimple(fallBackMessage),$state.go(fallBackState))})}function placeOrderHomeService(dataToSend){return formConfigObj(40,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function placeQuoteHomeService(dataToSend){return formConfigObj(41,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function placeEnquiryHomeService(dataToSend){return formConfigObj(42,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function contactSummaryScreen(dataToSend){return formConfigObj(43,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function contactSummaryScnUpdate(dataToSend){return formConfigObj(44,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function productViewScreen(dataToSend){return formConfigObj(45,!0,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function fetchOrderOperationsReasons(dataToSend){return formConfigObj(46,!0,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function rescheduleOrder(dataToSend){return formConfigObj(47,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function getPaymentInfo(dataToSend){return formConfigObj(48,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function applyCouponPaymentSummary(dataToSend){return formConfigObj(49,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function getMyWalletData(dataToSend){return formConfigObj(50,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function getMyReferralsData(dataToSend){return formConfigObj(51,!0,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function getActivitiesData(dataToSend){return formConfigObj(52,!0,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function getPriceChartData(dataToSend){return formConfigObj(53,!0,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function getFAQData(dataToSend){return formConfigObj(54,!0,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function getFAQSearchData(dataToSend){return formConfigObj(55,!0,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function getChatData(dataToSend){return formConfigObj(56,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function sendChatMessage(dataToSend){return formConfigObj(57,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function fetchPaymentStatus(dataToSend){return formConfigObj(58,!0,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function validatePrePayment(dataToSend){return formConfigObj(59,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function uploadProfilePic(dataToSend){return formConfigObj(60,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function getAboutUs(dataToSend){return formConfigObj(61,!0,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function addVendorReview(dataToSend){return formConfigObj(62,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function verifyOtp(dataToSend){return formConfigObj(63,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function updateProfileData(dataToSend){return formConfigObj(64,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function homeScreenData(dataToSend){return formConfigObj(65,!0,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function validateCat(dataToSend){return formConfigObj(66,!0,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function triggerAppLink(dataToSend){return formConfigObj(67,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function preListVendor(dataToSend){return formConfigObj(68,!0,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function listVendor(dataToSend){return formConfigObj(69,!0,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function umbrellaScreenData(dataToSend){return formConfigObj(70,!0,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function businessScnData(dataToSend){return formConfigObj(71,!0,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function addBusinessLead(dataToSend){return formConfigObj(72,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function sendOrderFeedback(dataToSend){return formConfigObj(73,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function preReviewShortLink(dataToSend){return formConfigObj(74,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function postReviewShortLink(dataToSend){return formConfigObj(75,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function getOrderVendorStatus(dataToSend){return formConfigObj(77,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function setChatRestoreId(dataToSend){return formConfigObj(78,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}function getServerDate(){return formConfigObj(79,!1).then(function(configObj){return httpServiceWrapper(configObj)},function(){return new Date})}function getUserLastAddressDetails(dataToSend){return formConfigObj(80,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){return!1})}function formConfigObj(apiIndex,cache,data){var dataObj,x,apiURL,dependencies,deferred=$q.defer(),validity=!0,apiMap={1:{api:"getCitiesAPI",dependencies:[]},2:{api:"verifyPinAPI",dependencies:[]},3:{api:"interMedScnAPI",dependencies:[]},4:{api:"reqScnAPI",dependencies:["cat_id"]},5:{api:"futSlotAPI",dependencies:[]},6:{api:"venProListAPI",dependencies:["cat_id","service_date","service_time"]},7:{api:"custCatAPI",dependencies:[]},8:{api:"venProAPI",dependencies:[]},9:{api:"venGalAPI",dependencies:[]},10:{api:"venRevAPI",dependencies:[]},11:{api:"addAddressAPI",dependencies:[]},12:{api:"mngAddressAPI",dependencies:[]},13:{api:"edtAddressAPI",dependencies:[]},14:{api:"delAddressAPI",dependencies:[]},15:{api:"defAddressAPI",dependencies:[]},16:{api:"notificsAPI",dependencies:[]},17:{api:"clrNotificsAPI",dependencies:[]},18:{api:"offersAPI",dependencies:[]},19:{api:"raiseIssueAPI",dependencies:[]},20:{api:"cancelOrderAPI",dependencies:[]},21:{api:"getIssueAPI",dependencies:[]},22:{api:"myOrdersAPI",dependencies:[]},23:{api:"expServAPI",dependencies:[]},24:{api:"popServAPI",dependencies:[]},25:{api:"busTradeAPI",dependencies:[]},26:{api:"aboutCompanyAPI",dependencies:[]},27:{api:"hpBannerAPI",dependencies:[]},28:{api:"searchServAPI",dependencies:[]},29:{api:"exploreServAPI",dependencies:[]},30:{api:"myQuotesAPI",dependencies:[]},31:{api:"reorderAPI",dependencies:[]},32:{api:"odrSummaryAPI",dependencies:[]},33:{api:"vdrArrivalAPI",dependencies:[]},34:{api:"vdrRatingFetchAPI",dependencies:[]},35:{api:"quoteOdrAPI",dependencies:[]},36:{api:"quoteOdrActionAPI",dependencies:[]},37:{api:"trendingServAPI",dependencies:[]},38:{api:"reqScnExtAPI",dependencies:[]},39:{api:"odrRevScnAPI",dependencies:["filter_options","item_id","cat_id","service_date","service_time"]},40:{api:"placeHSOrderAPI",dependencies:[]},41:{api:"placeHSQuoteAPI",dependencies:[]},42:{api:"placeHSEnquiryAPI",dependencies:[]},43:{api:"contactSummaryAPI",dependencies:[]},44:{api:"conSumUpdateAPI",dependencies:[]},45:{api:"productViewAPI",dependencies:[]},46:{api:"odrOprReasonsAPI",dependencies:[]},47:{api:"reshOrderAPI",dependencies:[]},48:{api:"odrSumPaymentAPI",dependencies:[]},49:{api:"applyCouponPSAPI",dependencies:[]},50:{api:"myWalletAPI",dependencies:[]},51:{api:"referralAPI",dependencies:[]},52:{api:"activitiesAPI",dependencies:[]},53:{api:"priceChartAPI",dependencies:[]},54:{api:"fetchFAQsAPI",dependencies:[]},55:{api:"searchFAQAPI",dependencies:[]},56:{api:"fetchChatAPI",dependencies:[]},57:{api:"sendChatMessageAPI",dependencies:[]},58:{api:"fetchPaymentStatus",dependencies:[]},59:{api:"validatePrePayment",dependencies:[]},60:{api:"uploadProfilePic",dependencies:[]},61:{api:"aboutUsAPI",dependencies:[]},62:{api:"vdrReviewAddAPI",dependencies:[]},63:{api:"verifyOtpAPI",dependencies:[]},64:{api:"updateProfileAPI",dependencies:[]},65:{api:"homeScnApi",dependencies:[]},66:{api:"validateCatAPI",dependencies:[]},67:{api:"triggerAppDownloadLinkAPI",dependencies:[]},68:{api:"preEnquiryAPI",dependencies:[]},69:{api:"vendorAddAPI",dependencies:[]},70:{api:"umbrellaScnAPI",dependencies:[]},71:{api:"businessScnData",dependencies:[]},72:{api:"addBusinessLead",dependencies:[]},73:{api:"sendOrderFeedback",dependencies:[]},74:{api:"reviewShortLinkAPI",dependencies:[]},75:{api:"postReviewShortLinkAPI",dependencies:[]},76:{api:"sendAppDownloadMessageAPI",dependencies:[]},77:{api:"getOrderVendorDetailsAPI",dependencies:[]},78:{api:"setChatRestoreIdAPI",dependencies:[]},79:{api:"getServerDateTime",dependencies:[]},80:{api:"getUserDetails",dependencies:[]}};if(apiURL=apiMap[apiIndex].api,dependencies=apiMap[apiIndex].dependencies,configObj={method:"POST",url:ApiService.get().internal[apiURL],headers:ApiService.getHeader(),cache:cache},data){if(dependencies.length)for(x in dependencies)if(data.hasOwnProperty(x)&&!data[dependencies[x]]){validity=!1;break}validity?(dataObj={data:$httpParamSerializerJQLike(data)},angular.extend(configObj,dataObj),deferred.resolve(configObj)):deferred.reject()}else deferred.resolve(configObj);return deferred.promise}function httpServiceWrapper(request){var hash,deferred=$q.defer(),cacheFlag=request.cache,responseData={},currentCallBag={};if(hash=md5(angular.toJson(request)),currentCallBag[hash])return currentCallBag[hash].promise;if(currentCallBag[hash]=deferred,_CACHE.get(hash))deferred.resolve(_CACHE.get(hash));else{var apiCallObject={callInitiated:(new Date).getTime(),callTerminated:!1};$rootScope.loaderObject.apiCallQueue[request.url]=apiCallObject,$rootScope.loaderObject.apiQueueSize=$rootScope.loaderObject.apiQueueSize+1,$http(request).then(function(response){responseData.status="HTTP_SUCCESS","true"==response.data.status?responseData.status+="_DATA":responseData.status+="_NO_DATA",responseData.data=response.data},function(){responseData.status="HTTP_FAILURE",responseData.data="N/A"}).finally(function(){void 0!==$rootScope.loaderObject.apiCallQueue&&void 0!==$rootScope.loaderObject.apiCallQueue[request.url]&&($rootScope.loaderObject.apiCallQueue[request.url].callTerminated=(new Date).getTime()),"HTTP_SUCCESS_DATA"===responseData.status&&cacheFlag&&_CACHE.put(hash,responseData),deferred.resolve(responseData),delete currentCallBag[hash]})}return deferred.promise}function generateAppDownloadMessage(dataToSend){return formConfigObj(76,!1,dataToSend).then(function(configObj){return httpServiceWrapper(configObj)},function(){$mdToast.showSimple(fallBackMessage),$state.go(fallBackState)})}var _CACHE=$cacheFactory("hsOrderHttpCache"),fallBackState="genesis.home",fallBackMessage="Not Allowed or Session Lost";return{getCities:getCitiesData,verifyPin:verifyPinCode,interMedScnData:intermediateScreenData,reqScnData:requirementScreenData,venProList:vendorProductList,custCatData:customCatalogData,getFutTime:getFutureTimeslots,venProfile:vendorProfileData,venGallery:vendorGalleryData,venReview:vendorReviewData,addAddress:addAddress,mngAddress:manageAddress,edtAddress:editAddress,delAddress:deleteAddress,defAddress:setDefaultAddress,getNotifications:getNotifications,clrNotifications:clearNotifications,getOffers:getOffers,raiseIssue:raiseIssue,cancelOrder:cancelOrder,getIssues:getIssues,myOrders:myOrders,getBusTrades:getBusinessTrades,getExpServices:getExploreServices,getPopServices:getPopularServices,getAboutComp:getAboutCompany,getHpBanner:getHomePageBanner,searchServ:searchService,getAllServ:getAllServices,myQuotes:myQuotes,reorder:reorder,orderSummary:orderSummary,vdrArrivalStatus:vendorArrivalStatusUpdate,fetchVdrRating:fetchVendorRating,fetchQteOdr:fetchQuoteOrders,actionQteOdr:quoteOrderAction,gettrendServ:fetchTrendingServices,reqScnExtData:requirementScreenExtData,odrRevScn:orderReviewScreen,placeHSOrder:placeOrderHomeService,placeHSQuote:placeQuoteHomeService,placeHSEnquiry:placeEnquiryHomeService,contactSumScn:contactSummaryScreen,conSumScnUpdate:contactSummaryScnUpdate,productView:productViewScreen,fetchOdrOprReason:fetchOrderOperationsReasons,rescheduleOrder:rescheduleOrder,getPaymentInfo:getPaymentInfo,applyCouponPS:applyCouponPaymentSummary,myWalletData:getMyWalletData,myReferralsData:getMyReferralsData,getActivities:getActivitiesData,getPriceChartData:getPriceChartData,getFAQData:getFAQData,getFAQSearchData:getFAQSearchData,getChatMessage:getChatData,sendChatMessage:sendChatMessage,fetchPaymentStatus:fetchPaymentStatus,validatePrePayment:validatePrePayment,uploadProfilePic:uploadProfilePic,getAboutUs:getAboutUs,addVdrReview:addVendorReview,verifyOtp:verifyOtp,updateProfileData:updateProfileData,homeScnData:homeScreenData,validateCat:validateCat,triggerAppLink:triggerAppLink,preListVendor:preListVendor,listVendor:listVendor,umbrellaScnData:umbrellaScreenData,businessScnData:businessScnData,addBusinessLead:addBusinessLead,sendOrderFeedback:sendOrderFeedback,preReviewSL:preReviewShortLink,postReviewSL:postReviewShortLink,generateMessage:generateAppDownloadMessage,getVendorStatus:getOrderVendorStatus,setChatRestoreID:setChatRestoreId,getServerDate:getServerDate,getLastOdrAddr:getUserLastAddressDetails}}angular.module("hsOrderModule").factory("HODProvider",HODProvider),HODProvider.$inject=["$state","$mdToast","$q","$http","$httpParamSerializerJQLike","$cacheFactory","$rootScope","ApiService","AuthService","Upload"]}(),function(){"use strict";function MetaDataFactory(http,api,$q,RichFaqSchema){function getMetaData(req){return http.call(api.generateRequestObject("POST",api.get().seo.getMetaData,req,!0)).then(success).catch(failure)}function success(response){var pageFaqsArr=response.data.data.FOOTER.PAGE_FOOTER_FAQ;return RichFaqSchema.makeFAQSchema(pageFaqsArr),response}function failure(error){return $q.reject(error.data)}return{getMetaData:getMetaData}}angular.module("bro4uWebapp").factory("metaFactory",MetaDataFactory),MetaDataFactory.$inject=["HttpService","ApiService","$q","RichFaqSchema"]}(),function(){function orderUiFactory(){return{}}angular.module("core.factory").factory("orderUiFactory",orderUiFactory),orderUiFactory.$inject=[]}(),function(){"use strict";function ViewConfigFactory(){return{}}angular.module("core.factory").factory("viewConfigFactory",ViewConfigFactory),ViewConfigFactory.$inject=[]}(),function(){function ApiService(__env,$httpParamSerializerJQLike,HeaderService){function get(){return{seo:{getMetaData:__env.baseApiUrl+"/seo/get_meta_data"},internal:{otpAPI:__env.baseApiUrl+"/Login/user_otp_login",triggerOtpAPI:__env.baseApiUrl+"/Login/trigger_otp",socialLogin:__env.baseApiUrl+"/Login/user_social_signin",homeScnApi:__env.baseApiUrl+"/home/home_screen_data",popServAPI:__env.baseApiUrl+"/home/home_screen_categories",busTradeAPI:__env.baseApiUrl+"",verifyOtpAPI:__env.baseApiUrl+"/Login/verify_otp",autoLoginApi:__env.baseApiUrl+"/home/fetch_auth",logout:__env.baseApiUrl+"/Login/logout",userInfo:__env.baseApiUrl+"/Login/user_info",aboutCompanyAPI:__env.baseApiUrl+"/home/home_screen_company_info",getToken:__env.baseApiUrl+"/splash/retrieve_api_token",socialSignInAPI:__env.baseApiUrl+"/Login/user_social_login",updateProfileAPI:__env.baseApiUrl+"/Login/update_user_info",hpBannerAPI:__env.baseApiUrl+"/home/home_screen_banners",expServAPI:__env.baseApiUrl+"/home/home_screen_services",searchServAPI:__env.baseApiUrl+"/home/home_screen_search",getCitiesAPI:__env.baseApiUrl+"/location/location_data",verifyPinAPI:__env.baseApiUrl+"/location/verify_location_data",exploreServAPI:__env.baseApiUrl+"/category/categories",interMedScnAPI:__env.baseApiUrl+"/category/intermediatory_data",reqScnAPI:__env.baseApiUrl+"/catalog/display_filters",futSlotAPI:__env.baseApiUrl+"/catalog/future_timeslots",venProListAPI:__env.baseApiUrl+"/catalog/suggested_vendors",custCatAPI:__env.baseApiUrl+"/catalog/custom_catalog",venProAPI:__env.baseApiUrl+"/vendor/vendor_profile_data",venGalAPI:__env.baseApiUrl+"/vendor/vendor_gallery",venRevAPI:__env.baseApiUrl+"/vendor/vendor_reviews",addAddressAPI:__env.baseApiUrl+"/user/add_address",mngAddressAPI:__env.baseApiUrl+"/user/user_addresses",edtAddressAPI:__env.baseApiUrl+"/user/edit_address",delAddressAPI:__env.baseApiUrl+"/user/delete_address",defAddressAPI:__env.baseApiUrl+"/user/make_default_address",notificsAPI:__env.baseApiUrl+"/user/notification",clrNotificsAPI:__env.baseApiUrl+"/user/clear_notification",offersAPI:__env.baseApiUrl+"/user/offer_zone",raiseIssueAPI:__env.baseApiUrl+"/order/raise_issue",cancelOrderAPI:__env.baseApiUrl+"/order/cancel_order",reshOrderAPI:__env.baseApiUrl+"/order/reschedule_order",myOrdersAPI:__env.baseApiUrl+"/order/my_orders",myQuotesAPI:__env.baseApiUrl+"/order/quote_orders",reorderAPI:__env.baseApiUrl+"/order/reorder",odrSummaryAPI:__env.baseApiUrl+"/order/order_details",vdrArrivalAPI:__env.baseApiUrl+"/order/update_vendor_arrived",vdrRatingFetchAPI:__env.baseApiUrl+"/order/display_review_details",quoteOdrAPI:__env.baseApiUrl+"/order/quote_order_details",quoteOdrActionAPI:__env.baseApiUrl+"/order/process_quote_orders",trendingServAPI:__env.baseApiUrl+"/home/top_search_services",reqScnExtAPI:__env.baseApiUrl+"/catalog/custom_filters",odrRevScnAPI:__env.baseApiUrl+"/order/order_review",placeHSOrderAPI:__env.baseApiUrl+"/order/place_order",placeHSQuoteAPI:__env.baseApiUrl+"/order/place_quote_order",placeHSEnquiryAPI:__env.baseApiUrl+"/order/place_contact_enquiry",contactSummaryAPI:__env.baseApiUrl+"/order/contact_enquiry_details",conSumUpdateAPI:__env.baseApiUrl+"/order/update_contact_enquiry",productViewAPI:__env.baseApiUrl+"/catalog/product_view",odrOprReasonsAPI:__env.baseApiUrl+"/order/order_flow_reasons",odrSumPaymentAPI:__env.baseApiUrl+"/payment_api/payment_info",applyCouponPSAPI:__env.baseApiUrl+"/coupon/apply_coupon",myWalletAPI:__env.baseApiUrl+"/user/wallet",referralAPI:__env.baseApiUrl+"/user/fetch_referral_settings",activitiesAPI:__env.baseApiUrl+"/home/home_screen_activities",priceChartAPI:__env.baseApiUrl+"/catalog/view_price_chart",fetchFAQsAPI:__env.baseApiUrl+"/faq/fetch_faqs",searchFAQAPI:__env.baseApiUrl+"/faq/search",fetchChatAPI:__env.baseApiUrl+"/user/fetch_chat_data",sendChatMessageAPI:__env.baseApiUrl+"/user/insert_message",fetchPaymentStatus:__env.baseApiUrl+"/payment_api/fetch_summary",validatePrePayment:__env.baseApiUrl+"/payment_api/create_checksum",uploadProfilePic:__env.baseApiUrl+"/user/upload_profile_pic",aboutUsAPI:__env.baseApiUrl+"/home/about_us",vdrReviewAddAPI:__env.baseApiUrl+"/order/add_review",validateCatAPI:__env.baseApiUrl+"/category/validate_category",triggerAppDownloadLinkAPI:__env.baseApiUrl+"/user/trigger_app_download_message",preEnquiryAPI:__env.baseApiUrl+"/vendor/fetch_pre_enquiry_data",vendorAddAPI:__env.baseApiUrl+"/vendor/add_vendor_enquiry",umbrellaScnAPI:__env.baseApiUrl+"/category/umbrella_data",businessScnData:__env.baseApiUrl+"/business/business_screen_data",addBusinessLead:__env.baseApiUrl+"/business/add_business_lead",sendOrderFeedback:__env.baseApiUrl+"/order/save_feedback_response",reviewShortLinkAPI:__env.baseApiUrl+"/vendor/vendor_review_page",postReviewShortLinkAPI:__env.baseApiUrl+"/vendor/insert_review",sendAppDownloadMessageAPI:__env.baseApiUrl+"/user/trigger_app_download_message",getOrderVendorDetailsAPI:__env.baseApiUrl+"/order/assigned_vendor_status",setChatRestoreIdAPI:__env.baseApiUrl+"/order/add_chat_restore_id",getServerDateTime:__env.baseApiUrl+"/home/get_current_ts",getUserDetails:__env.baseApiUrl+"/home/get_user_details"},external:{processTransaction:"https://secure.paytm.in/oltp-web/processTransaction",generateToken:"https://secure.paytm.in/oltp/HANDLER_INTERNAL/CARD_TOKEN_GENERATOR",generateOTP:"https://secure.paytm.in/oltp/HANDLER_INTERNAL/GENERATE_OTP",verifyOTP:"https://secure.paytm.in/oltp/HANDLER_INTERNAL/VALIDATE_OTP",getBankList:"https://secure.paytm.in/oltp/HANDLER_INTERNAL/BANK_LIST",checkBalance:"https://trust.paytm.in/wallet-web/checkBalance"},recharge:{baseAPI:__env.baseApiUrl+"/recharge_api/",viewBill:__env.baseApiUrl+"/recharge_api/viewbill",getMetaData:__env.baseApiUrl+"/recharge_api/get_meta_data",getRechargePlanType:__env.baseApiUrl+"/recharge_api/get_recharge_plan_type",getRechargePlans:__env.baseApiUrl+"/recharge_api/get_recharge_plans",findOperatorCircle:__env.baseApiUrl+"/recharge_api/find_operator_circle/",preRecharge:__env.baseApiUrl+"/recharge_api/pre_recharge",fetchSummary:__env.baseApiUrl+"/recharge_api/fetch_summary",validation:__env.baseApiUrl+"/recharge_api/validation",auth:__env.baseApiUrl+"/recharge_api/auth",lsCheck:__env.baseApiUrl+"/recharge_api/storage_clean",sessionCache:__env.baseApiUrl+"/recharge_api/session",rechargeHistory:__env.baseApiUrl+"/recharge_api/recharge_history",getBankList:__env.baseApiUrl+"/recharge_api/get_banklist",getViewConfig:__env.baseApiUrl+"/recharge_api/recharge_view_configuration"},paymentModule:{genTransCheckSum:__env.baseApiUrl+"/paytm/generate_transaction_checksum",genOTPCheckSum:__env.baseApiUrl+"/paytm/generate_login_otp_checksum",generatePaytmOTP:__env.baseApiUrl+"/paytm/generate_login_otp",verifyPaytmOTP:__env.baseApiUrl+"/paytm/verify_login_otp",checkBalance:__env.baseApiUrl+"/paytm/check_balance",getPaytmSavedCards:__env.baseApiUrl+"/paytm/get_savedcards",validateCoupon:__env.baseApiUrl+"/paytm/validate_coupon",getBankList:__env.baseApiUrl+"/paytm/get_banklist",genInterCheckSum:__env.baseApiUrl+"/paytm/generate_checksum",fetchPaytmToken:__env.baseApiUrl+"/paytm/fetch_paytm_token",addOrUpdateToken:__env.baseApiUrl+"/paytm/add_or_update_token",preServiceAPI:__env.baseApiUrl+"/payment_api/pre_order_payment"},baseUrl:__env.baseUrl,baseApiUrl:__env.baseApiUrl,baseOrigin:__env.baseOrigin,baseAppPath:__env.baseAppPath,staticFilePath:__env.staticFilePath,staticImagePath:__env.staticImagePath}}function getHeader(){return{Pf:1,Token:"abcde123",Utoken:HeaderService.getUToken(),"Content-Type":"application/x-www-form-urlencoded"}}function generateRequestObject(method,url,data,isCacheEnabled){var requestObject={method:method,url:url,headers:getHeader()};return"POST"===method&&(requestObject.data=$httpParamSerializerJQLike(data)),isCacheEnabled&&(requestObject.cache=!0),requestObject}return{get:get,getHeader:getHeader,generateRequestObject:generateRequestObject}}var env={};window&&(env=window.__env),angular.module("core.service").constant("__env",env),angular.module("core.service").service("ApiService",ApiService),ApiService.$inject=["__env","$httpParamSerializerJQLike","HeaderService"]}(),function(){"use strict"
;function AuthService($http,ApiService,$httpParamSerializerJQLike,StorageService,$state,HttpService,$q,$rootScope,HeaderService,LocationStorageService,$mdToast){function getCurrentUser(){return StorageService.get("user")&&!angular.equals(currentUser,StorageService.get("user"))&&(currentUser=StorageService.get("user")),currentUser}function isProfileComplete(){return"true"===currentUser.pro_comp}function updateUserLocation(location){currentUser.location=location,changeUser(currentUser)}function getPendingRequirement(state,reqArr){if(void 0!==reqArr&&reqArr.length){var index=0;reqArr.forEach(function(key){switch(key){case"profile":"true"!==currentUser.pro_comp?revised_requirement_map.profile||(revised_requirement.push("profile"),revised_requirement_map.profile=state):(index=revised_requirement.indexOf("profile"),-1!==index&&revised_requirement.splice(index,1),delete revised_requirement_map.profile);break;case"location-search":void 0===currentUser.location?revised_requirement_map.location||(revised_requirement.push("location-search"),revised_requirement_map.location=state):(index=revised_requirement.indexOf("location-search"),-1!==index&&revised_requirement.splice(index,1),delete revised_requirement_map.location)}})}return revised_requirement}function changeUser(user){user&&user.user_id?user.role=userRoles.user:user.role=userRoles.public,user.isOTPVerified=user.mobile&&10===user.mobile.toString().length,user.location=currentUser.location||void 0,angular.extend(currentUser,user),currentUser.mobile&&(currentUser.mobile=parseInt(currentUser.mobile)),preserve_hash_and_reset(),StorageService.set("user",currentUser),HeaderService.setUToken(currentUser.user_id)}function verifyOTP(otpData,success,error){HttpService.call(constructConfig("POST",ApiService.get().internal.verifyOtpAPI,otpData)).then(function(user){log_user_in(user,success,error)},function(err){error("OTP verification failed")})}function autoLogin(autologinData,success,error){HttpService.call(constructConfig("POST",ApiService.get().internal.autoLoginApi,autologinData)).then(function(user){log_user_in(user,success,error)},function(err){error("OTP verification failed")})}function triggerOTP(otpData,success,error){HttpService.call(constructConfig("POST",ApiService.get().internal.triggerOtpAPI,otpData)).then(function(user){user&&user.hasOwnProperty("data")&&user.data.status&&"false"===user.data.status&&user.data.hasOwnProperty("statusCode")&&user.data.statusCode?error(user.data):log_user_in(user,success,error)},function(err){error("OTP verification failed")})}function logout(hash){HttpService.call(constructConfig("GET",ApiService.get().internal.logout,{})).then(function(data){var location=void 0!==StorageService.get("user")?StorageService.get("user").location:{};preserve_hash_and_reset(),void 0!==hash&&StorageService.set("hash",hash),currentUser={},changeUser({role:userRoles.public,isOTPVerified:!1,location:location}),$rootScope.$broadcast("logout",currentUser),$mdToast.showSimple("You have been logged out."),$state.go("genesis.home")})}function login(loginData,success,error){loginData&&"social"===loginData.type?social_login(loginData,success,error):HttpService.call(constructConfig("POST",ApiService.get().internal.otpAPI,loginData)).then(function(user){success(user)},function(err){error(err)})}function social_login(loginData,success,error){HttpService.call(constructConfig("POST",ApiService.get().internal.socialLogin,loginData)).then(function(user){log_user_in(user,success,error)},function(err){error(err)})}function authorize(accessLevel,role){return void 0===role&&(role=currentUser.role),accessLevel.bitMask&role.bitMask}function isLoggedIn(user){return void 0===user&&(user=currentUser),user.role.title===userRoles.user.title}function auth(){return HttpService.call(constructConfig("GET",ApiService.get().recharge.auth,{})).then(function(response){var deferred=$q.defer();return"SUCCESS"!==response.data.status?(logout(),deferred.reject(response)):(currentUser&&currentUser.user_id||changeUser(response.data.session),deferred.resolve(response.data.session)),deferred.promise})}function lsCheck(){var request=constructConfig("GET",ApiService.get().recharge.lsCheck,{});return request.cache=!0,HttpService.call(request).then(function(response){response=response.data;var deferred=$q.defer();return StorageService.get("hash")?response.status&&StorageService.get("hash")!==response.hash&&(LocationStorageService.destroy(),$rootScope.$broadcast("userLocationDataUpdated"),logout(response.hash)):StorageService.set("hash",response.hash),deferred.resolve(),deferred.promise})}function constructConfig(method,url,data){return{method:method,url:url,headers:ApiService.getHeader(),data:$httpParamSerializerJQLike(data)}}function log_user_in(user,success,error){changeUser(StorageService.get("user")||{role:userRoles.public,isOTPVerified:!1}),"true"===user.data.status&&1===user.data.status_code?(changeUser(user.data.data),success(user.data)):error(user.data.message)}function preserve_hash_and_reset(){var checksum=StorageService.get("hash");StorageService.reset(),StorageService.set("hash",checksum)}var accessLevels=routingConfig.accessLevels,userRoles=routingConfig.userRoles,currentUser=StorageService.get("user")||{role:userRoles.public,isOTPVerified:!1},urlParams={},revised_requirement=[],revised_requirement_map={};return{authorize:authorize,isLoggedIn:isLoggedIn,login:login,logout:logout,auth:auth,lsCheck:lsCheck,verifyOTP:verifyOTP,autoLogin:autoLogin,triggerOTP:triggerOTP,getPendingRequirement:getPendingRequirement,updateUserLocation:updateUserLocation,isProfileComplete:isProfileComplete,updateUser:changeUser,getCurrentUser:getCurrentUser,accessLevels:accessLevels,userRoles:userRoles,user:currentUser,urlParams:urlParams,selectedIndex:0,isTransitionLocked:!1,isForcedStateChangeSuccess:!0,requirementMap:revised_requirement_map}}angular.module("core.service.auth").service("AuthService",AuthService),AuthService.$inject=["$http","ApiService","$httpParamSerializerJQLike","StorageService","$state","HttpService","$q","$rootScope","HeaderService","LocationStorageService","$mdToast"]}(),function(){function facebookAuthService(fbAuthProvider,$window,AuthService){function onSuccess(response){if("connected"===response.status){FB.responseData.status="CONNECTED";var loginData={token:response.authResponse.accessToken,id:response.authResponse.id,type:"social",via:"facebook"};AuthService.login(loginData,resolve,reject)}else FB.responseData.status="NOT_CONNECTED";FB.responseData.response=response}function onFailure(response){FB.responseData.status="NO_RESPONSE",FB.responseData.response=response}var resolve,reject,self=this,FB=this;self.loginStatusCheck=function(){return fbAuthProvider.fbLoginStatus().then(onSuccess,onFailure),FB.responseData={status:"",response:{}},FB.responseData},self.loginFB=function(res,rej){resolve=res,reject=rej,"CONNECTED"===self.loginStatusCheck().status?onSuccess(response):fbAuthProvider.fbLogIn().then(onSuccess,onFailure)}}angular.module("core.service.auth").service("facebookAuthService",facebookAuthService),facebookAuthService.$inject=["fbAuthProvider","$window","AuthService"]}(),function(){"use strict";function GoogleAuthService(gpAuthProvider,AuthService,window,$q){var resolve,reject,self=this;self.loginGP=function(res,rej){function onSuccess(response){GoogleAuth.isSignedIn.get()?self.backendValidation(GoogleAuth):gpAuthProvider.gpLogIn(GoogleAuth)}function onFailure(reject){}function signinChanged(value){value&&self.backendValidation(GoogleAuth)}var GoogleAuth;resolve=res,reject=rej,GoogleAuth=gapi.auth2.getAuthInstance(),GoogleAuth.isSignedIn.listen(signinChanged),GoogleAuth.then(onSuccess,onFailure)},self.backendValidation=function(GoogleAuth){var GoogleUser=GoogleAuth.currentUser.get(),authRespones=GoogleUser.getAuthResponse(!0),loginData=(GoogleUser.getBasicProfile(),{token:authRespones.id_token,id:authRespones.id,type:"social",via:"google"});AuthService.login(loginData,resolve,reject)},self.logOutGP=function(){var GoogleAuth;GoogleAuth=gapi.auth2.getAuthInstance(),GoogleAuth.isSignedIn.get()&&GoogleAuth.disconnect()},self.isSignedIn=function(){return gapi.auth2.getAuthInstance().isSignedIn}}angular.module("core.service.auth").service("googleAuthService",GoogleAuthService),GoogleAuthService.$inject=["gpAuthProvider","AuthService","$window","$q"]}(),function(){function chatSupport($rootScope,AuthService,HODProvider,$window){function isChatSdkLoaded(){return!!$window.fcWidget}function openChatWidget(){isChatSdkLoaded()&&$window.fcWidget.open()}function initalizeFreshChart(chatObj){var dateNow=Date(),newRestoreId=AuthService.isLoggedIn()?AuthService.getCurrentUser().user_id:Date.now(),hashedId=md5(dateNow+newRestoreId);hashedId=hashedId.length>32?hashedId.substr(0,32):hashedId;var initObj={config:{showFAQOnOpen:!0,headerProperty:{hideChatButton:!0}},token:"1a2dd30d-ccc0-4bfa-9483-9620eae89e78",host:"https://wchat.freshchat.com",externalId:chatObj.basics.externalId,restoreId:chatObj.restore_id?chatObj.restore_id:hashedId};$window.fcWidget.init(initObj),$window.fcWidget.user.get(function(resp){var status=resp&&resp.status;resp&&resp.data;200!==status?($window.fcWidget.user.setProperties(chatObj.userProperties),$window.fcWidget.on("user:created",function(resp){var status=resp&&resp.status,data=resp&&resp.data;if(200===status&&data.restoreId){$window.fcWidget.user.setProperties(chatObj.userProperties);var dataToSend={order_id:chatObj.order_id,restore_id:data.restoreId};HODProvider.setChatRestoreID(dataToSend).then(function(response){},function(err){})}})):($window.fcWidget.user.setProperties(chatObj.basics),$window.fcWidget.user.setProperties(chatObj.userProperties))})}function destroyChat(){$window.fcWidget.destroy()}function updateuserMeta(newMeta){$window.fcWidget.user.setMeta(newMeta).then(function(resp){}).catch(function(err){})}return $rootScope.$on("$locationChangeStart",function(event,next,current){destroyChat()}),{openChat:openChatWidget,initChat:initalizeFreshChart,destroyChat:destroyChat,updateuserMeta:updateuserMeta}}angular.module("core.service").service("chatSupport",chatSupport),chatSupport.$inject=["$rootScope","AuthService","HODProvider","$window"]}(),function(){function MdToast(){this.addLayer=function(dataToUpdate){var scriptPageView=document.createElement("script");scriptPageView.type="text/javascript",scriptPageView.innerHTML="var google_tag_params = "+JSON.stringify(dataToUpdate),document.body.appendChild(scriptPageView);var secondScript=document.createElement("script");secondScript.type="text/javascript",secondScript.innerHTML="/* <![CDATA[ */\n var google_conversion_id = 864727994; \n var google_custom_params = window.google_tag_params; \n var google_remarketing_only = true; \n /* ]]> */ ",document.body.appendChild(secondScript);var thirdScript=document.createElement("script");thirdScript.type="text/javascript",thirdScript.src="//www.googleadservices.com/pagead/conversion.js",document.body.appendChild(thirdScript);var finalScript=document.createElement("noscript");finalScript.type="text/javascript",finalScript.innerHTML='<div style="display:inline;"><img height="1" width="1" style="border-style:none;" alt="" src="//googleads.g.doubleclick.net/pagead/viewthroughconversion/864727994/?guid=ON&amp;script=0"/></div>',document.body.appendChild(finalScript)}}angular.module("core.service").service("DataLayer",MdToast),MdToast.$inject=[]}(),function(){function GtmDataLayer($window){var dataLayer=$window.dataLayer=$window.dataLayer||[];this.addDataLayer=function(data){dataLayer.push({event:data.eventName,orderId:data.orderId,c_price:data.c_price})}}angular.module("core.service").service("GtmDataLayer",GtmDataLayer),GtmDataLayer.$inject=["$window"]}(),function(){function HeaderService(storage){function setUToken(uToken){self.uToken=uToken||0}function getUToken(){return storage.recharge.user&&storage.recharge.user.global_user_id?storage.recharge.user.global_user_id:0}var self=this;return self.uToken=0,{setUToken:setUToken,getUToken:getUToken}}angular.module("core.service").service("HeaderService",HeaderService),HeaderService.$inject=["$localStorage"]}(),function(){function hsOrder($q,$rootScope,$window,$state,$mdToast,HODProvider,AuthService,IntegrationService,LocationStorageService,GtmDataLayer){var self=this;self.hsOrderDataLocal={cityId:void 0,pinCode:void 0,latitude:void 0,longitude:void 0,formattedAddress:void 0,isHyperlocal:void 0,placeId:void 0,cityName:void 0,citySlug:void 0,localitySlug:void 0,locVerified:void 0,catId:void 0,catName:void 0,attrId:void 0,optionId:void 0,opsIMS:void 0,intermediateURL:void 0,odrMode:void 0,filterOptions:void 0,selection:void 0,date:void 0,time:void 0,vendorId:void 0,vendorName:void 0,itemId:void 0,orderId:void 0,odrFlow:void 0,ratingLoad:void 0,quoteId:void 0,catModel:void 0,reqModel:void 0,venProMode:void 0,unitQuantity:void 0,finalPrice:void 0,deliveryCharge:void 0,paymentMode:void 0,addressRestrict:void 0,vlQuoteObject:void 0,quotedVendors:void 0,enquiryId:void 0,vlContactObject:void 0,analysisKey:void 0,considerVid:void 0,docsSelected:void 0,flowType:void 0,paymentAmount:void 0,productFilters:void 0,productSortBy:void 0,requirementFilters:void 0,transactionId:void 0,prePayCheckSum:void 0,tempReqQuote:void 0,alreadyReqQuote:void 0,jrneyLevel:void 0,landingDefault:void 0,isNormalFlow:void 0,utmQuery:void 0,force_cod:void 0,price_chart_ids:void 0,priceChartData:void 0,exp_btn:void 0,newAddressId:void 0,c_price:void 0,serverDate:void 0,isManualLocation:!1},self.tempData={vlsFilter:void 0},self.clearDataVars=["catId","catName","attrId","optionId","intermediateURL","opsIMS","odrMode","filterOptions","selection","date","time","vendorId","vendorName","itemId","ratingLoad","catModel","reqModel","venProMode","unitQuantity","finalPrice","deliveryCharge","paymentMode","addressRestrict","vlQuoteObject","quotedVendors","vlContactObject","analysisKey","considerVid","docsSelected","productFilters","requirementFilters","transactionId","prePayCheckSum","odrFlow","jrneyLevel","landingDefault","isNormalFlow","utmQuery","newAddressId","c_price"],self.setTempData=function(key,value){self.tempData[key]=value},self.getTempData=function(key){return self.tempData[key]},self.clearTempData=function(key){delete tempData[key]},self.setHSOData=function(key,value){self.hsOrderDataLocal[key]=value,self.checkForLocationData(key)?LocationStorageService.set(key,value):self.setSessLocal(key,value)},self.getHSOData=function(key){return void 0!==self.hsOrderDataLocal[key]?self.hsOrderDataLocal[key]:self.checkForLocationData(key)?LocationStorageService.get(key):self.getSessLocal(key)},self.clearHSOData=function(option){option=void 0===option?0:option,0===option?(self.clearSessLocal(),self.hsOrderDataLocal={}):angular.isArray(option)?angular.forEach(option,function(value){self.hsOrderDataLocal[value]=void 0,self.checkForLocationData(value)?LocationStorageService.clear(value):self.clearSessLocal(value)}):(self.hsOrderDataLocal[option]=void 0,self.checkForLocationData(option)?LocationStorageService.clear(option):self.clearSessLocal(option))},self.setSessLocal=function(key,value){var hsOrderData=$window.sessionStorage.getItem("hsOrderData");null===hsOrderData?(hsOrderData={},hsOrderData[key]=value):(hsOrderData=JSON.parse(hsOrderData),hsOrderData[key]=value),$window.sessionStorage.setItem("hsOrderData",JSON.stringify(hsOrderData))},self.getSessLocal=function(key){var hsOrderData=$window.sessionStorage.getItem("hsOrderData");return null===hsOrderData?void 0:(hsOrderData=JSON.parse(hsOrderData),hsOrderData[key])},self.clearSessLocal=function(option){option=void 0===option?0:option;var hsOrderData=$window.sessionStorage.getItem("hsOrderData");null!==hsOrderData&&(0===option?$window.sessionStorage.clear("hsOrderData"):(hsOrderData=JSON.parse(hsOrderData),delete hsOrderData[option],$window.sessionStorage.setItem("hsOrderData",JSON.stringify(hsOrderData))))},self.checkForLocationData=function(key){return["cityId","cityName","citySlug","localitySlug","locVerified","pinCode","latitude","longitude","formattedAddress","placeId","isHyperlocal"].indexOf(key)>=0},self.getMessage=function(index){return{11:"Response submitted, Thank you for feedback",21:"Please fill all the details",22:"Sorry, you can not edit now",23:"Sorry, No results to display",24:"Sorry, We are not serving this area",25:"Sorry, This product is not available",26:"Please enter some message",27:"Please accept terms and conditions",31:"Something went wrong, Please try later",32:"Not reachable, Please check your connection",33:"URL Not Found, Please enter valid URL",34:"Unauthorised access",51:"Address added successfully",52:"Address edited successfully",53:"Address deleted successfully",54:"Default address changed successfully",55:"Notifications cleared successfully",56:"You do not have any notifications",57:"You do not have any orders",58:"You do not have any quotes",59:"Reorder placed successfully",60:"Issue raised successfully",61:"Please select all requirements",62:"Please select date",63:"Please select time",64:"You reached maximum limit",65:"You cannot go below this",66:"Please add your address, before continue",67:"Please select some address",68:"You have exceeded the maximun number of selection.",69:"Cannot change now, vendor has been quoted already",70:"Cannot proceed, three vendors has been quoted already",71:"Cannot proceed, no new vendor selected",72:"Cannot proceed, You already requested this vendor",73:"Your message has been updated",74:"Cannot proceed, Please select atleast one package",75:"Order cancel requested successfully",76:"Order reschedule requested successfully",77:"You need to pay minimum amount",78:"You cannot pay more than total outstanding",79:"Cannot proceed, please rate vendor",80:"Cannot proceed, atleast write 40 words",81:"Invalid Location, Please select a valid location",82:"Profile updated successfully",83:"Please Enter Your Pincode",84:"SMS limit exceeded for",85:"SMS sent to",86:"Finding a best partner for you",87:"Select booking address",88:"Please login to Book an order",89:"Cannot proceed, atleast write 5 words",90:"Please make a selection"}[index]},self.verifyPin=function(){var dataToSend={city_id:self.getHSOData("cityId"),pincode:self.getHSOData("pinCode")};return HODProvider.verifyPin(dataToSend).then(function(response){return 1!==response.data.v_code&&(self.clearHSOData("pinCode"),self.clearHSOData("locVerified")),response})},self.resolvePinFromLatLng=function(){var dataToSend={city_id:self.getHSOData("cityId"),lat:self.getHSOData("latitude"),lng:self.getHSOData("longitude"),formatted_address:self.getHSOData("formattedAddress"),place_id:self.getHSOData("placeId")};return HODProvider.verifyPin(dataToSend).then(function(response){return 1!==response.data.v_code&&(self.clearHSOData("pinCode"),self.clearHSOData("locVerified"),self.clearHSOData("latitude"),self.clearHSOData("longitude")),response})},self.setLocation=function(){self.setHSOData("locVerified",!0)},self.applyFilters=function(filters,callback){var filterOptions=self.getHSOData("filterOptions");filterOptions=filters,angular.forEach(filterOptions,function(value,key){angular.isArray(value)&&0===value.length&&(filterOptions[key]=25==key||26==key?[]:void 0)}),self.setHSOData("filterOptions",filterOptions),callback()},self.getFormatedDate=function(dateObject,format){var date,day=dateObject.getDate();day=day<10?"0"+day.toString():day.toString();var month=dateObject.getMonth()+1;month=month<10?"0"+month.toString():month.toString();var year=dateObject.getFullYear();switch(format){case 1:date=day+"-"+month+"-"+year;break;default:date=year+"-"+month+"-"+day}return date},self.verifyOTP=function(dataObject){var otp=JSON.stringify(dataObject.otp),deferred=$q.defer(),responseObj={status:void 0,response:void 0,message:void 0};return void 0===otp||5!==otp.length?(responseObj.status=0,responseObj.response=null,responseObj.message="Please Enter Correct OTP (5-digits)",deferred.reject(responseObj)):HODProvider.verifyOtp(dataObject).then(function(response){responseObj.status=1,responseObj.response=response.data,"HTTP_SUCCESS_DATA"==response.status?responseObj.message="HTTP_SUCCESS_DATA":"HTTP_SUCCESS_NO_DATA"==response.status?responseObj.message="HTTP_SUCCESS_NO_DATA":responseObj.message="HTTP_FAILURE",deferred.resolve(responseObj)}),deferred.promise},self.updateProfile=function(dataObject){var deferred=$q.defer(),validated=!0,currentUser=AuthService.getCurrentUser();return responseObj={status:void 0,data:void 0,message:void 0},angular.forEach(dataObject,function(value,key){value||(validated=!1)}),validated?(dataObject.dob=self.getFormatedDate(new Date(dataObject.dob),2),HODProvider.updateProfileData(dataObject).then(function(response){responseObj.status=1,responseObj.data=response.data,"HTTP_SUCCESS_DATA"==response.status?(responseObj.message="HTTP_SUCCESS_DATA",angular.extend(currentUser,dataObject),AuthService.updateUser(currentUser)):"HTTP_SUCCESS_NO_DATA"==response.status?responseObj.message="HTTP_SUCCESS_NO_DATA":responseObj.message="HTTP_FAILURE",deferred.resolve(responseObj)})):(responseObj.status=0,responseObj.data=null,responseObj.message="Pre Validation Failed",deferred.reject(responseObj)),deferred.promise},self.checkLocationDependency=function(){var deferred=$q.defer(),cityId=self.getHSOData("cityId"),pinCode=self.getHSOData("pinCode"),locVerified=self.getHSOData("locVerified");return cityId&&pinCode&&locVerified?deferred.resolve(!0):deferred.resolve(!1),deferred.promise},self.orderFlowRedirection=function(redirectFunc,dependency,params){var redirectFunctions=($rootScope.toState,{1:self.bannerRedirectionHandler,2:self.categoryRedirectionHandler,3:self.gotoExploreServices,4:self.gotoSearchService}),dependencies={1:"location-search"};switch(dependency){case 0:break;case 1:self.checkLocationDependency().then(function(response){response?redirectFunctions[redirectFunc](params):"location-search"==dependencies[dependency]?IntegrationService.openLocationSearchModal(redirectFunc,dependency,params):$state.go(dependencies[dependency])});break;case 2:self.getHSOData("cityId")?redirectFunctions[redirectFunc](params):IntegrationService.openLocationSearchModal(redirectFunc,dependency,params)}},self.bannerRedirectionHandler=function(item){var redirectTo=!1,slugParams=!1,temp={};switch(item.banner_type){case 0:break;case 1:item.coming_soon?$mdToast.showSimple(self.getMessage(24)):(self.setHSOData("catId",item.cat_id),self.setHSOData("catModel",item.cat_model_code),self.setHSOData("reqModel",item.req_flow_code),self.setHSOData("vendorId",item.vendor_id),self.setHSOData("odrFlow",14),self.setHSOData("intermediateURL",item.category_slug),self.clearHSOData("filterOptions"),item.attr_id&&item.option_id&&(self.setHSOData("attrId",item.attr_id),self.setHSOData("optionId",item.option_id),temp[item.attr_id]=item.option_id,self.applyFilters(temp,function(){})),3===item.cat_model_code?redirectTo="requirement-screen-product":(redirectTo="genesis.intermediate-screen",slugParams={urlSlug:item.category_slug}));break;default:redirectTo="explore-services"}slugParams?$state.go(redirectTo,slugParams):$state.go(redirectTo)},self.categoryRedirectionHandler=function(item){var redirectTo=!1,slugParams=!1,option=!1;if(item.coming_soon)$mdToast.showSimple(self.getMessage(24));else{if(self.setHSOData("catId",item.cat_id),self.setHSOData("catName",item.cat_name),self.setHSOData("catModel",item.cat_model_code),self.setHSOData("reqModel",item.req_flow_code),self.setHSOData("opsIMS",item.options),self.setHSOData("attrId",item.attr_id),self.setHSOData("optionId",item.option_id),self.setHSOData("intermediateURL",item.category_slug),self.clearHSOData("filterOptions"),item.attr_id){var temp={};temp[item.attr_id]=item.option_id,self.applyFilters(temp,function(){})}var checkProduct=function(item){var deferred=$q.defer();return 3===item.cat_model_code?redirectTo="requirement-screen-product":item.is_hyperlocal?(redirectTo="hyper-local-service",slugParams={citySlug:self.getHSOData("citySlug"),urlSlug:item.category_slug}):(redirectTo="genesis.intermediate-screen",slugParams={urlSlug:item.category_slug}),deferred.resolve(!0),deferred.promise},redirect=function(){option?$state.go(redirectTo,option):slugParams?$state.go(redirectTo,slugParams):$state.go(redirectTo)};switch(self.getHSOData("odrFlow")){case 11:(function(value){var deferred=$q.defer();return"yes"===value?(redirectTo="service-search",option={serSearchParams:{catName:item.cat_name}},deferred.resolve(!0)):deferred.resolve(!1),deferred.promise})(item.options).then(function(response){response?redirect():checkProduct(item).then(function(response){redirect()})});break;case 13:case 200:case 12:case 15:checkProduct(item).then(function(response){redirect()})}}},self.quickBook=function(){var gotData,vendorProductData,dataToSend={user_id:AuthService.getCurrentUser().user_id,vendor_id:0,cat_id:self.getHSOData("catId"),cat_name:self.getHSOData("catName"),consider_vid:14==self.getHSOData("odrFlow"),option_id:self.getHSOData("optionId"),city_id:self.getHSOData("cityId"),pincode:self.getHSOData("pinCode"),latitude:self.getHSOData("latitude")||"",longitude:self.getHSOData("longitude")||"",service_time:self.getHSOData("time"),service_date:self.getHSOData("date"),filter_options:JSON.stringify(self.getHSOData("filterOptions")),cat_model_code:self.getHSOData("catModel"),page:0,quick_book:1,ref_source:window.BRO4U_HTTP_REFRRER};self.vendorListingData(dataToSend).then(function(response){response.dataReceived.data&&response.dataReceived.data.length&&null!=response.dataReceived.data[0]?(gotData=response.gotData,vendorProductData=response.dataReceived,self.setHSOData("vendorId",vendorProductData.data[0].vendor_id),self.setHSOData("selection",vendorProductData.data[0].selection),self.setHSOData("itemId",vendorProductData.data[0].item_id),self.setHSOData("finalPrice",vendorProductData.data[0].final_price),self.setHSOData("deliveryCharge",vendorProductData.data[0].delivery_charge),self.setHSOData("analysisKey",vendorProductData.data[0].analysis_key),self.setHSOData("jrneyLevel",3),self.vendorListFlow()):$mdToast.showSimple("Vendors not found for this category")})},self.gotoExploreServices=function(option){var params={expSerParams:option,citySlug:self.getHSOData("citySlug").toLowerCase()};$state.go("explore-services",params)},self.gotoSearchService=function(option){$state.go("service-search")},self.requirementFlow=function(){var redirectTo,catModel=(self.getHSOData("reqModel"),self.getHSOData("catModel")),odrMode=self.getHSOData("odrMode");switch(catModel){case 3:redirectTo="product-list";break;case 4:redirectTo="vendor-list-quote";break;default:1===odrMode?redirectTo="vendor-list":2===odrMode&&(redirectTo=0)}0===redirectTo?self.quickBook():$state.go(redirectTo)},self.extRequirementFlow=function(){var redirectTo,catModel=(self.getHSOData("reqModel"),self.getHSOData("catModel")),odrMode=self.getHSOData("odrMode");switch(catModel){case 3:redirectTo="product-list";break;case 4:redirectTo="vendor-list-quote";break;default:1===odrMode?redirectTo="vendor-list":2===odrMode&&(redirectTo=0)}0===redirectTo?self.quickBook():$state.go(redirectTo)},self.vendorListFlow=function(){var redirectTo;redirectTo=2===self.getHSOData("reqModel")?"custom-catalog":"order-review",$state.go(redirectTo)},self.vendorListingData=function(dataToSend,mode){return HODProvider.venProList(dataToSend).then(function(response){var responseData={gotData:!1,dataReceived:void 0,isVendorAvailable:void 0};return"HTTP_SUCCESS_DATA"==response.status?(responseData.gotData=!0,responseData.dataReceived=response.data,responseData.dataReceived.isBanner=!!response.data.banner.length,responseData.dataReceived.isFilter=!!response.data.filter.length,responseData.isVendorAvailable=response.data.data.length>0,responseData.dataReceived.mode=mode):"HTTP_SUCCESS_NO_DATA"==response.status&&(responseData.gotData=!0,responseData.isVendorAvailable=response.data.data.length>0,responseData.dataReceived=response.data),responseData})},self.redirectAfterAddressSet=function(){var redirectTo,addressRestrict=self.getHSOData("addressRestrict"),catModel=self.getHSOData("catModel");addressRestrict&&(redirectTo=4===catModel?"quote-review":"order-review",$state.go(redirectTo),self.clearHSOData("addressRestrict"))},self.placeHSEnquiry=function(){var indexOfvar=self.clearDataVars.indexOf("odrMode");self.clearDataVars.splice(indexOfvar,1),indexOfvar=self.clearDataVars.indexOf("catModel"),self.clearDataVars.splice(indexOfvar,1),indexOfvar=self.clearDataVars.indexOf("reqModel"),self.clearDataVars.splice(indexOfvar,1);var dataToSend={},temp={session_data:$window.sessionStorage.getItem("hsOrderData"),error_codes:void 0};dataToSend={user_id:AuthService.getCurrentUser().user_id,email:AuthService.getCurrentUser().email,mobile:AuthService.getCurrentUser().mobile,customer_name:AuthService.getCurrentUser().full_name,service_date:self.getHSOData("date"),service_time:self.getHSOData("time"),unit_quantity:self.getHSOData("unitQuantity")||1,city_id:self.getHSOData("cityId"),pincode:self.getHSOData("pinCode"),selection:JSON.stringify(self.getHSOData("selection")),suggested_vendor_data:JSON.stringify(self.getHSOData("vlContactObject")),filter_options:JSON.stringify(self.getHSOData("filterOptions")),item_id:self.getHSOData("itemId"),price:self.getHSOData("finalPrice"),cat_id:self.getHSOData("catId"),option_id:self.getHSOData("optionId"),vendor_id:self.getHSOData("vendorId"),ref_source:window.BRO4U_HTTP_REFRRER,address_id:1,latitude:self.getHSOData("latitude"),longitude:self.getHSOData("longitude")},self.validationHSOrder(dataToSend).then(function(response){response.validateFlag?(angular.extend(dataToSend,temp),HODProvider.placeHSEnquiry(dataToSend).then(function(responseData){"HTTP_SUCCESS_DATA"==responseData.status?responseData.data.status&&(self.setHSOData("enquiryId",responseData.data.enquiry_id),self.insetDataLayer(responseData.data.enquiry_id,"enquiry-order"),self.clearHSOData(self.clearDataVars),$state.go("contact-summary")):responseData.status})):self.errorHandlerHSOrder(response.errorCode)})},self.placeHSQuote=function(data){var mainData=data,temp={session_data:$window.sessionStorage.getItem("hsOrderData"),error_codes:void 0};self.validationHSOrder(data).then(function(response){response.validateFlag?(angular.extend(data,temp),HODProvider.placeHSQuote(data).then(function(responseData){"HTTP_SUCCESS_DATA"==responseData.status?responseData.data.status&&(self.setHSOData("quoteId",responseData.data.quote_id),self.insetDataLayer(responseData.data.quote_id,"quote-order"),self.updateLocalUser(mainData),self.clearHSOData(self.clearDataVars),$state.go("order-quotes")):responseData.status})):self.errorHandlerHSOrder(response.errorCode)})},self.placeHSOrder=function(data){var mainData=data,temp={session_data:$window.sessionStorage.getItem("hsOrderData"),error_codes:void 0};self.validationHSOrder(data).then(function(response){response.validateFlag?(angular.extend(data,temp),HODProvider.placeHSOrder(data).then(function(responseData){"HTTP_SUCCESS_DATA"==responseData.status?responseData.data.status&&(self.setHSOData("orderId",responseData.data.order_id),self.insetDataLayer(responseData.data.order_id,"Home-service-order"),self.clearHSOData(self.clearDataVars),self.updateLocalUser(mainData),self.setHSOData("isManualLocation",!1),$state.go("order-summary")):responseData.status})):self.errorHandlerHSOrder(response.errorCode)})},self.validationHSOrder=function(data){var deferred=$q.defer(),response={validateFlag:!0,errorCode:[]};return data.user_id?data.city_id?data.pincode?data.cat_id?data.item_id?data.service_time?data.service_date||(response.errorCode.push(51),response.validateFlag=!1):(response.errorCode.push(50),response.validateFlag=!1):(response.errorCode.push(31),response.validateFlag=!1):(response.errorCode.push(30),response.validateFlag=!1):(response.errorCode.push(21),response.validateFlag=!1):(response.errorCode.push(20),response.validateFlag=!1):(response.errorCode.push(10),response.validateFlag=!1),
deferred.resolve(response),deferred.promise},self.errorHandlerHSOrder=function(errCode){},self.navigateHome=function(){$state.go("genesis.home")},self.customCatalogHandler=function(data){var sel,key,selection=self.getHSOData("selection"),temp={},newSel=[];angular.forEach(data,function(attribute){angular.forEach(attribute.card,function(option){option.quantity&&(key="option_"+option.option_id,temp[key]=option.quantity)})}),selection&&selection.length?(sel=selection[0],angular.extend(sel,temp)):sel=temp,newSel.push(sel),self.setHSOData("selection",newSel),$state.go("order-review")},self.initiatePayment=function(amount,couponApplied){var deferred=$q.defer(),data={order_id:self.getHSOData("orderId"),payable_amt:amount,coupon_applied:couponApplied};return HODProvider.validatePrePayment(data).then(function(responseData){"HTTP_SUCCESS_DATA"==responseData.status?responseData.data.match_found?(self.setHSOData("flowType","services"),self.setHSOData("paymentAmount",amount),self.setHSOData("prePayCheckSum",responseData.data.CHECKSUMHASH),$state.go("paymentOptions",{flowType:"services",amount:amount,checksum:responseData.data.CHECKSUMHASH,orderId:self.getHSOData("orderId")}),deferred.resolve(!0)):($mdToast.showSimple(responseData.data.message),deferred.resolve(!1)):"HTTP_SUCCESS_NO_DATA"==responseData.status?($mdToast.showSimple(self.getMessage(31)),deferred.resolve(!1)):($mdToast.showSimple(self.getMessage(32)),deferred.resolve(!1))}),deferred.promise},self.placePartnerEnquiry=function(data){var deferred=$q.defer();return data.name&&data.city_id&&data.cat_ids&&data.cat_ids.length?"number"==typeof data.phone&&10==data.phone.toString().length?HODProvider.listVendor(data).then(function(response){deferred.resolve(response.data)}):$mdToast.showSimple("Please enter valid phone number"):$mdToast.showSimple(self.getMessage(21)),deferred.promise},self.validateCategory=function(){var isCategoryAvailable,deferred=$q.defer(),validateCatVars={city_id:self.getHSOData("cityId"),pincode:self.getHSOData("pinCode"),cat_id:self.getHSOData("catId")};return HODProvider.validateCat(validateCatVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(response.data.coming_soon?(isCategoryAvailable=!1,$mdToast.showSimple(response.data.message)):isCategoryAvailable=!0,deferred.resolve(response.data),$rootScope.$broadcast("categoryValidated",{isCategoryAvailable:isCategoryAvailable})):response.status}),deferred.promise},self.submitFormOtpLogin=function(mobile_number,login_state){var deferred=$q.defer();return mobile_number&&AuthService.login({mobile:mobile_number},function(res){deferred.resolve(res)},function(err){deferred.reject(error)}),deferred.promise},self.submitFormOtpLoginRec=function(mobile_number,otp){var deferred=$q.defer();if(mobile_number&&otp){var loginData={mobile:mobile_number,otp:otp};AuthService.verifyOTP(loginData,function(res){try{AuthService.isTransitionLocked=!1,deferred.resolve(res),$rootScope.$broadcast("userLoggedIn")}catch(err){$mdToast.showSimple(hsOrder.getMessage(31))}},function(err){deferred.reject(err)})}return deferred.promise},self.insetDataLayer=function(odrId,catName){GtmDataLayer.addDataLayer({eventName:"new_order_placed",orderId:odrId,c_price:self.getHSOData("c_price"),orderType:catName})},HODProvider.getServerDate().then(function(data){var utcSeconds=data.data&&data.data.current_epoch_ts?data.data.current_epoch_ts:"false";if("false"==utcSeconds)return new Date;var tempDate=new Date(0);tempDate.setUTCSeconds(utcSeconds),self.setHSOData("serverDate",tempDate),$rootScope.currDate=tempDate}),self.updateLocalUser=function(data){var newUserData={},currUser=AuthService.getCurrentUser();!currUser.email&&data.addr_email&&(newUserData.email=data.addr_email),!currUser.full_name&&data.name&&(newUserData.full_name=data.name),newUserData&&(angular.extend(currUser,newUserData),AuthService.updateUser(currUser))}}angular.module("hsOrderModule").service("hsOrder",hsOrder),hsOrder.$inject=["$q","$rootScope","$window","$state","$mdToast","HODProvider","AuthService","IntegrationService","LocationStorageService","GtmDataLayer"]}(),function(){function HttpService($http,$rootScope,$q,$cacheFactory){function call(request){var deferred=$q.defer(),hash=md5(angular.toJson(request));if(currentCallBag[hash])return currentCallBag[hash].promise;if(currentCallBag[hash]=deferred,cache.get(hash))deferred.resolve(cache.get(hash));else{var apiCallObject={callInitiated:(new Date).getTime(),callTerminated:!1};$rootScope.loaderObject.apiCallQueue[request.url]=apiCallObject,$rootScope.loaderObject.apiQueueSize=$rootScope.loaderObject.apiQueueSize+1,$http(request).then(function(response){request.cache&&"POST"===request.method&&cache.put(hash,response),deferred.resolve(response)},function(error){deferred.reject(error)}).finally(function(){void 0!==$rootScope.loaderObject.apiCallQueue&&void 0!==$rootScope.loaderObject.apiCallQueue[request.url]&&($rootScope.loaderObject.apiCallQueue[request.url].callTerminated=(new Date).getTime()),delete currentCallBag[hash]})}return deferred.promise}var cache=$cacheFactory("httpCache"),currentCallBag={};return{call:call}}angular.module("core.service").service("HttpService",HttpService),HttpService.$inject=["$http","$rootScope","$q","$cacheFactory"]}(),function(){function IntegrationService($mdDialog,$mdToast,HODProvider,$q){var self=this;self.openSerachServiceModal=function(){$mdDialog.show({clickOutsideToClose:!1,controller:SearchServicePopupController,controllerAs:"searchServiceCtrl",templateUrl:"components/search/search.template.html",bindToController:!0,escapeToClose:!1})},self.openLoginModal=function(){$mdDialog.show({escapeToClose:!1,controller:LoginController,controllerAs:"ctrl",templateUrl:"components/popup/login-popup.temp.html",bindToController:!0,clickOutsideToClose:!1})},self.loginWithPromise=function(screen){return self.loginDeffered=$q.defer(),$mdDialog.show({escapeToClose:!1,controller:LoginController,controllerAs:"ctrl",templateUrl:"components/popup/login-popup.temp.html",bindToController:!0,clickOutsideToClose:!1,locals:{loginDeffered:self.loginDeffered,screen:screen}}),self.loginDeffered.promise},self.reviewOrder=function(){$mdDialog.show({clickOutsideToClose:!0,controller:VendorRatingController,controllerAs:"ctrl",templateUrl:"components/popup/vendor-rating.temp.html",bindToController:!0})},self.openLocationSearchModal=function(redirectFunc,dependency,params){$mdDialog.show({escapeToClose:!1,controller:locSearchController,controllerAs:"ctrl",templateUrl:"components/popup/location-search.temp.html",bindToController:!0,clickOutsideToClose:!1,locals:{flowRedirectFunc:redirectFunc,flowDependency:dependency,flowParams:params}})},self.downloadApp=function(params){HODProvider.triggerAppLink(params).then(function(response){"HTTP_SUCCESS_DATA"==response.status?$mdToast.showSimple(response.data.message):"HTTP_SUCCESS_NO_DATA"==response.status?$mdToast.showSimple("Something went wrong, Please try later"):$mdToast.showSimple("Not reachable, Please check your connection")})}}function SearchServicePopupController($scope,$stateParams,$mdDialog,hsOrder,HODProvider,$state,$rootScope){var self=this;self.keywordLen=0,self.gotSearchResult=!1,self.gotTrendingServ=!1,self.clearButtonVisible=!1,self.searchResult=void 0,self.trendingServices=void 0,self.pageLoadVars={city_id:hsOrder.getHSOData("cityId"),pincode:hsOrder.getHSOData("pinCode"),keyword:$stateParams.serSearchParams?$stateParams.serSearchParams.catName:""},self.search=function(){self.pageLoadVars.keyword&&(self.keywordLen=self.pageLoadVars.keyword.length),self.keywordLen>=2&&HODProvider.searchServ(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.gotSearchResult=!0,self.searchResult=response.data.search_details):"HTTP_SUCCESS_NO_DATA"==response.status&&(self.gotSearchResult=!0)}),self.keywordLen>0?self.clearButtonVisible=!0:self.clearButtonVisible=!1},HODProvider.gettrendServ(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.gotTrendingServ=!0,self.trendingServices=response.data.data,response.data.landing_page?hsOrder.setHSOData("landingDefault",!0):hsOrder.setHSOData("landingDefault",!1)):response.status}),self.clearInput=function(){self.pageLoadVars.keyword=""},self.closeDialog=function(){$mdDialog.hide();var stateName=$rootScope.dialogPrevStateName||"genesis.home";$rootScope.dialogPrevStateName=void 0,$rootScope.dialogPrevStateParams?$state.go(stateName,$rootScope.dialogPrevStateParams):$state.go(stateName)},self.popServiceDestiny=function(item){hsOrder.setHSOData("odrFlow",11),hsOrder.orderFlowRedirection(2,2,item)},self.pageLoadVars.keyword&&self.search()}function VendorRatingController($rootScope,$mdDialog,$timeout,$mdToast,hsOrder,HODProvider,AuthService){var self=this;self.pageLoadVars={order_id:hsOrder.getHSOData("orderId"),user_id:AuthService.getCurrentUser().user_id},self.pageRenderVars={reviewMode:hsOrder.getHSOData("ratingLoad").mode,reviewData:void 0,review:{order_id:hsOrder.getHSOData("orderId"),user_id:AuthService.getCurrentUser().user_id,rating:0,review:"",time:0,quality:0,price:0,skills:0,experience:0,profile_pic:void 0,vendor_name:void 0,cat_name:void 0},check:{0:"dist/img/icons/option-buttons/circle_fill_grey.png",1:"dist/img/icons/option-buttons/circle_fill.png"}},HODProvider.fetchVdrRating(self.pageLoadVars).then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.pageRenderVars.reviewData=response.data,self.extractData()):response.status}),self.extractData=function(){self.pageRenderVars.review.rating=parseInt(self.pageRenderVars.reviewData.rating),self.pageRenderVars.review.review=self.pageRenderVars.reviewData.review,self.pageRenderVars.review.time=self.pageRenderVars.reviewData.time,self.pageRenderVars.review.quality=self.pageRenderVars.reviewData.quality,self.pageRenderVars.review.price=self.pageRenderVars.reviewData.price,self.pageRenderVars.review.skills=self.pageRenderVars.reviewData.skills,self.pageRenderVars.review.experience=self.pageRenderVars.reviewData.experience,self.pageRenderVars.review.profile_pic=self.pageRenderVars.reviewData.profile_pic,self.pageRenderVars.review.vendor_name=self.pageRenderVars.reviewData.vendor_name,self.pageRenderVars.review.cat_name=self.pageRenderVars.reviewData.cat_name},self.toggleOptions=function(option){if(1!==self.pageRenderVars.reviewMode)switch(option){case"time":self.pageRenderVars.review.time=+!self.pageRenderVars.review.time;break;case"quality":self.pageRenderVars.review.quality=+!self.pageRenderVars.review.quality;break;case"price":self.pageRenderVars.review.price=+!self.pageRenderVars.review.price;break;case"skills":self.pageRenderVars.review.skills=+!self.pageRenderVars.review.skills;break;case"experience":self.pageRenderVars.review.experience=+!self.pageRenderVars.review.experience}else $mdToast.showSimple(hsOrder.getMessage(22))},self.goBack=function(){$mdDialog.hide()},self.submitReview=function(){self.pageRenderVars.review.rating?self.pageRenderVars.review.review.length>=5?HODProvider.addVdrReview(self.pageRenderVars.review).then(function(response){"HTTP_SUCCESS_DATA"==response.status?($mdToast.showSimple(response.data.message),$rootScope.$broadcast("reviewSubmitted",self.pageLoadVars),self.goBack()):response.status}):$mdToast.showSimple(hsOrder.getMessage(89)):$mdToast.showSimple(hsOrder.getMessage(79))},self.rateFunction=function(rating){$timeout(function(){},1e3)}}function LoginController($rootScope,facebookAuthService,googleAuthService,AuthService,$state,$stateParams,utils,$interval,$mdToast,$mdDialog){function onSuccess(res){try{if($mdDialog.hide(),self.loginDeffered)self.loginDeffered.resolve(res);else{var stateName=utils.isObjectEmpty($rootScope.toState)?"genesis.home":$rootScope.toState.name;AuthService.isTransitionLocked=!1,$state.go(stateName,AuthService.urlParams),$rootScope.$broadcast("userLoggedIn")}}catch(err){$state.go("genesis.home")}}function onFailure(err){$rootScope.error=err,self.formOtpLoginRec&&(self.formOtpLoginRec.otpEntered.$invalid=!0),"google"===self.via?(googleAuthService.logOutGP(),googleAuthService.isSignedIn().get()||googleAuthService.loginGP(onSuccess,onFailure)):self.via,self.loginDeffered&&self.loginDeffered.reject(err)}var self=this;self.state="NO_OTP",self.loginFormData={mobileNumber:"",otpEntered:""},self.via="otp",self.otpResendCountDown=0,self.submitFormOtpLogin=function(){self.formOtpLogin.$valid&&AuthService.login({mobile:self.loginFormData.mobileNumber},function(res){res.data&&"true"==res.data.status?(self.message="OTP sent to your mobile no.",self.state="OTP_PRO",self.resetOTPCountDown()):$mdToast.showSimple(res.data.otp_message)},function(err){$rootScope.error="Failed to login"})},self.isOtpCountDownZero=function(){return self.otpResendCountDown<=0},self.resetOTPCountDown=function(){self.otpResendCountDown=60,$interval(function(){self.otpResendCountDown>0&&self.otpResendCountDown--},1e3,60)},self.resendOtp=function(){self.loginFormData.otpEntered="",AuthService.login({mobile:self.loginFormData.mobileNumber},function(res){},function(err){$rootScope.error="Failed to login"}),self.resetOTPCountDown()},self.submitFormOtpLoginRec=function(){self.formOtpLoginRec.$valid&&AuthService.verifyOTP({mobile:self.loginFormData.mobileNumber,otp:self.loginFormData.otpEntered},onSuccess,onFailure)},self.toFbLogin=function(){self.via="facebook",facebookAuthService.loginFB(onSuccess,onFailure)},self.toGpLogin=function(){self.via="google",googleAuthService.loginGP(onSuccess,onFailure)},self.closeDialog=function(){$mdDialog.hide()},self.removeMessage=function(){self.loginFormData.otpEntered&&(self.message="")}}function locSearchController($scope,$rootScope,$window,$mdDialog,hsOrder,HODProvider,$mdToast,$state){var self=this,backupLoc={};self.isCityAvail=!1,self.cities=void 0,self.optionImages={active:"dist/img/icons/option-buttons/circle_fill.png",inactive:"dist/img/icons/option-buttons/circle_blank.png"},self.selectCityType=void 0,self.pinCode="",self.pinVerification=0,self.pinVerMessage="",self.pinStatus={verified:"dist/img/icons/option-buttons/circle_fill.png",pending:"dist/img/icons/option-buttons/circle_fill_grey.png"},self.googlePlacesOptions={componentRestrictions:{country:"in"}},self.limitCity="",backupLoc.cityId=hsOrder.getHSOData("cityId"),backupLoc.cityName=hsOrder.getHSOData("cityName"),backupLoc.citySlug=hsOrder.getHSOData("citySlug"),backupLoc.locVerified=hsOrder.getHSOData("locVerified"),hsOrder.getHSOData("locVerified")&&(backupLoc.pinCode=hsOrder.getHSOData("pinCode"),backupLoc.latitude=hsOrder.getHSOData("latitude"),backupLoc.longitude=hsOrder.getHSOData("longitude"),backupLoc.formattedAddress=hsOrder.getHSOData("formattedAddress"),backupLoc.placeId=hsOrder.getHSOData("placeId")),self.selectCity=function(city){angular.forEach(self.cities,function(value,key){value.selection="inactive",value.city_id==city.city_id&&(value.selection="active")}),hsOrder.setHSOData("cityId",city.city_id),hsOrder.setHSOData("cityName",city.city_name),hsOrder.setHSOData("citySlug",city.city_slug),hsOrder.setHSOData("locVerified",!1),hsOrder.setHSOData("pinCode",void 0),hsOrder.setHSOData("latitude",void 0),hsOrder.setHSOData("longitude",void 0),hsOrder.setHSOData("formattedAddress",void 0),hsOrder.setHSOData("placeId",void 0),self.resetForm(),city.pincodes?self.selectCityType="pincode":(self.limitCity=city.city_name+", ",self.selectCityType="locality")},self.restorePrevSelection=function(){hsOrder.setHSOData("cityId",backupLoc.cityId),hsOrder.setHSOData("cityName",backupLoc.cityName),hsOrder.setHSOData("citySlug",backupLoc.citySlug),hsOrder.setHSOData("locVerified",backupLoc.locVerified),hsOrder.setHSOData("pinCode",backupLoc.pinCode),hsOrder.setHSOData("latitude",backupLoc.latitude),hsOrder.setHSOData("longitude",backupLoc.longitude),hsOrder.setHSOData("formattedAddress",backupLoc.formattedAddress),hsOrder.setHSOData("placeId",backupLoc.placeId),$rootScope.$broadcast("userLocationDataUpdated")},self.forwardRedirection=function(){self.flowRedirectFunc&&self.flowDependency&&self.flowParams&&hsOrder.orderFlowRedirection(self.flowRedirectFunc,self.flowDependency,self.flowParams)},self.resetForm=function(){self.pinCode="",self.pinVerMessage="",self.pinVerification=0,self.googlePlacesObject=""},self.extractCities=function(){angular.forEach(self.cities,function(value,key){value.selection="inactive",hsOrder.getHSOData("cityId")&&value.city_id===hsOrder.getHSOData("cityId")&&self.selectCity(value)})},HODProvider.getCities().then(function(response){"HTTP_SUCCESS_DATA"==response.status?(self.isCityAvail=!0,self.cities=response.data.cities,self.extractCities()):response.status}),self.setLocation=function(){2==self.pinVerification?(hsOrder.setLocation(),$mdDialog.hide(),$rootScope.$broadcast("userLocationDataUpdated"),hsOrder.setHSOData("isManualLocation",!0),self.forwardRedirection()):$mdToast.show($mdToast.simple().textContent("Please Provide Correct Detail.").hideDelay(2e3))},self.verifyPin=function(){if(null!==self.pinCode&&void 0!==self.pinCode){var pinCode=self.pinCode.toString(),pinLength=pinCode.length;0!==pinLength&&pinLength>=6?(hsOrder.setHSOData("pinCode",self.pinCode),hsOrder.verifyPin().then(function(response){"HTTP_SUCCESS_DATA"==response.status?1==response.data.v_code?(self.pinVerification=2,self.pinVerMessage=response.data.message):(self.pinVerification=1,self.pinVerMessage=response.data.message,self.pinCode=""):response.status})):pinLength<6?(self.pinVerification=0,self.pinVerMessage=""):pinLength>6&&(self.pinVerification=1,self.pinVerMessage="Pin should have six digits only",self.pinCode="",$mdToast.showSimple(self.pinVerMessage))}},$scope.$on("g-places-autocomplete:select",function(evt,place){self.resolvePin(place)}),self.resolvePin=function(place){if(place&&(self.lat=place.geometry.location.lat(),self.lng=place.geometry.location.lng(),self.formattedAddress=place.formatted_address,self.placeId=place.place_id,null!==self.lat&&null!==self.lng)){var lat=self.lat.toString(),lng=self.lng.toString(),formatted_address=self.formattedAddress.toString(),place_id=self.placeId.toString();""!==lat&&""!==lng?(hsOrder.setHSOData("latitude",lat),hsOrder.setHSOData("longitude",lng),hsOrder.setHSOData("formattedAddress",formatted_address),hsOrder.setHSOData("placeId",place_id),hsOrder.resolvePinFromLatLng().then(function(response){"HTTP_SUCCESS_DATA"==response.status?1==response.data.v_code?(self.pinVerification=2,self.pinVerMessage=response.data.message,self.pinCode=response.data.pincode,hsOrder.setHSOData("pinCode",self.pinCode),self.setLocation()):(self.pinVerification=1,self.pinVerMessage=response.data.message,self.pinCode=""):response.status})):(self.pinVerification=1,self.pinVerMessage="Please select a location",self.pinCode="",self.lat="",self.lng="",self.formattedAddress="",self.placeId="",$mdToast.showSimple(self.pinVerMessage))}},self.closeDialog=function(){self.restorePrevSelection(),$mdDialog.hide()}}angular.module("core.service").service("IntegrationService",IntegrationService),IntegrationService.$inject=["$mdDialog","$mdToast","HODProvider","$q"],SearchServicePopupController.$inject=["$scope","$stateParams","$mdDialog","hsOrder","HODProvider","$state","$rootScope"],VendorRatingController.$inject=["$rootScope","$mdDialog","$timeout","$mdToast","hsOrder","HODProvider","AuthService"],LoginController.$inject=["$rootScope","facebookAuthService","googleAuthService","AuthService","$state","$stateParams","utils","$interval","$mdToast","$mdDialog"],locSearchController.$inject=["$scope","$rootScope","$window","$mdDialog","hsOrder","HODProvider","$mdToast","$state"]}(),function(){"use strict";function LocationStorageService(storage){function set(key,value){storage.location[key]=value}function get(key){return storage.location[key]}function clear(key){delete storage.location[key]}function destroy(){storage.location={}}return storage.location||(storage.location={}),{set:set,get:get,clear:clear,destroy:destroy}}angular.module("core.service").service("LocationStorageService",LocationStorageService),LocationStorageService.$inject=["$localStorage"]}(),function(){function MdToast(){this.showSimple=function(message){var snackBar=document.getElementById("snackbar");snackBar.innerHTML=message,snackBar.className="show",setTimeout(function(){snackBar.className=snackBar.className.replace("show","")},3e3)}}angular.module("core.service").service("$mdToast",MdToast),MdToast.$inject=[]}(),function(){"use strict";function MetaService(MetaFactory){function resetSEOParams(){self.seoParams={type:void 0,city_slug:void 0,locality_slug:void 0,url_slug:void 0,product_slug:void 0}}function fetchSeoData(){return MetaFactory.getMetaData(self.seoParams).then(function(response){return response.data.data&&(response=response.data.data,self.metaData=response),self.metaData})}function setMetadata(){}function getMetadata(sec,key){if(void 0!==sec&&void 0!==key&&void 0!==self.metaData)return htmlDecode(self.metaData[sec][key])}function getAllMetaData(){return self.metaData}function setSEOParams(key,val){self.seoParams[key]=val,"type"===key&&clearAppropriateSeoParams(val)}function getSEOParams(key){return self.seoParams[key]}function clearAppropriateSeoParams(type){switch(type){case"city":clearAllExcept(["type","city_slug"]);break;case"intermediate":clearAllExcept(["type","url_slug"]);break;case"product":clearAllExcept(["type","url_slug","product_slug"]);break;case"hyperlocal":clearAllExcept(["type","city_slug","locality_slug"]);break;case"hyperlocal_services":clearAllExcept(["type","city_slug","service_slug"])}}function clearAllExcept(arr){arr.forEach(function(key){self.seoParams[key]||(self.seoParams[key]=void 0)})}function htmlDecode(input){if(input){var e=document.createElement("div");return e.innerHTML=input,e.childNodes[0].nodeValue}return""}var self=this;return self.seoParams={type:void 0,city_slug:void 0,locality_slug:void 0,url_slug:void 0,product_slug:void 0},self.metaData={BASIC:{breadcumb:void 0,city_id:void 0,city_name:void 0,city_slug:void 0,latitude:void 0,longitude:void 0,locality_latitude:void 0,locality_longitude:void 0,pincode:void 0,locality_name:void 0,locality_slug:void 0,locality_pincode:void 0},HEADER:{PAGE_TITLE:"",PAGE_DESC:"",PAGE_KEYWORDS:"",PAGE_CANONICAL_URL:window.location.href,PAGE_ALTERNATE_URL:function(url){if(url&&url.indexOf("://m."))return url.replace("://m.","://")}(window.location.href),PAGE_OG_URL:window.location.href,PAGE_OG_TITLE:"",PAGE_OG_TYPE:"",PAGE_OG_IMAGE:"",PAGE_OG_DESC:""},FOOTER:{INTERLINK:"",PAGE_FOOTER_DESC:"",PAGE_FOOTER_CONTENT:[]}},{setMetadata:setMetadata,getMetadata:getMetadata,setSEOParams:setSEOParams,getSEOParams:getSEOParams,fetchSeoData:fetchSeoData,resetSEOParams:resetSEOParams,metaData:self.metaData,getAllMetaData:getAllMetaData}}angular.module("bro4uWebapp").service("metaService",MetaService),MetaService.$inject=["metaFactory"]}(),function(){function OrderUiService(){function setCurrentView(view){self.currentView=view}function getCurrentView(){return self.currentView}var self=this;return self.currentView="",self.setCurrentView=setCurrentView,self.getCurrentView=getCurrentView,{currentView:self.currentView,setCurrentView:self.setCurrentView,getCurrentView:self.getCurrentView}}angular.module("core.service").service("OrderUiService",OrderUiService),OrderUiService.$inject=[]}(),function(){"use strict";function PaymentService(RechargeOrderService,DataFactory,StorageService,$rootScope,RechargeDataService,AuthService,$q,hsOrder){function initWalletAPIConfig(){void 0===self.payment.wallet?initWalletConfig().then(function(){renderWalletAPIConfig()}):renderWalletAPIConfig()}function renderWalletAPIConfig(){self.payment.wallet.paytm.api={isPaytmUserAlreadyLoggedIn:isPaytmUserAlreadyLoggedIn,generatePaytmOTP:generatePaytmOTP,verifyPaytmOTP:verifyPaytmOTP,walletInfo:getWalletInfo,getPaytmSavedCards:getPaytmSavedCards,getPaytmTokenFromDb:getPaytmTokenFromDb,setPaytmTokenInDb:setPaytmTokenInDb}}function initWalletConfig(){var def=$q.defer();return self.payment.wallet={paytm:{i:{data:{id:100,name:"Paytm",code:"paytm",active:!0},info:{PAYTM_MOBILE:void 0,STATE:void 0,RESOURCE_OWNER_ID:void 0,TOKEN_DETAILS:{PAYTM_TOKEN:void 0,TXN_TOKEN:void 0},WALLET:void 0,SAVED_CARDS:void 0}}}},updateLocalStorage(self.payment),initWalletAPIConfig(),def.resolve(self.payment),def.promise}function resetPayment(){initWalletConfig()}function resetCoupon(){return{coupon_code:"",amount:self.payment.amount,is_valid:!1,offer_amount:0,net_payable:self.payment.amount,checksum:"",msg:""}}function setPaymentFlowType(flowType){self.payment.paymentFlowType=flowType,self.payment.showCouponOption=flowType&&"services"!==flowType,hsOrder.setHSOData("flowType",self.payment.showCouponOption?void 0:"services"),self.payment.orderId=hsOrder.getHSOData("orderId")}function setPaymentEntities(amount,checksum,orderId){RechargeOrderService.udf.amount=amount,self.payment.amount=amount,self.payment.netPayable=amount,self.payment.orderId=orderId,self.payment.CHECKSUMHASH=checksum,updateLocalStorage(self.payment)}function getPayment(){return self.payment}function getOptions(){return self.options}function pay(detail){return angular.merge(self.payment,detail),updateLocalStorage(self.payment),RechargeDataService.doRc(self.payment).then(function(message){if(!message||!message.hasOwnProperty("method"))return message;$rootScope.$broadcast("gateway.redirect",message)})}function updateLocalStorage(payment){angular.equals(StorageService.get("payment"),payment)||(payment&&payment.wallet&&payment.wallet.paytm&&payment.wallet.paytm.api&&delete payment.wallet.paytm.api,payment&&payment.coupon&&delete payment.coupon,StorageService.set("payment",payment),initWalletAPIConfig())}function selectPaymentOption(paymentType){void 0!==paymentType&&(self.payment.selectedPaymentOption=paymentType,updateLocalStorage(self.payment))}function fetchBankList(){return DataFactory.fetchBankList().then(function(response){if(response.data.success)return response.data.data.BANK_LIST},function(){}).finally(function(){})}function isPaytmUserAlreadyLoggedIn(){return getPaytmTokenFromDb()}function generatePaytmOTP(mobile){return self.payment.wallet.paytm.i.info.PAYTM_MOBILE=mobile,DataFactory.paytm.generatePaytmLoginOTP(mobile).then(function(paytmGenOTPResponse){return paytmGenOTPResponse=paytmGenOTPResponse.data,"SUCCESS"===paytmGenOTPResponse.status&&(self.payment.wallet.paytm.i.info.STATE=paytmGenOTPResponse.state),paytmGenOTPResponse},function(){}).finally(function(){updateLocalStorage(self.payment)})}function verifyPaytmOTP(otp,state){return DataFactory.paytm.verifyPaytmLoginOTP(otp,state).then(function(response){if(response=response.data.data,response.hasOwnProperty("STATUS")&&"SUCCESS"===response.STATUS){self.payment.wallet.paytm.i.info.TOKEN_DETAILS.PAYTM_TOKEN=response.TOKEN_DETAILS.PAYTM_TOKEN,self.payment.wallet.paytm.i.info.TOKEN_DETAILS.TXN_TOKEN=response.TOKEN_DETAILS.TXN_TOKEN,self.payment.wallet.paytm.i.info.RESOURCE_OWNER_ID=response.RESOURCE_OWNER_ID;setPaytmTokenInDb({user_id:AuthService.getCurrentUser().user_id,PAYTM_MOBILE:self.payment.wallet.paytm.i.info.PAYTM_MOBILE,PAYTM_TOKEN:self.payment.wallet.paytm.i.info.TOKEN_DETAILS.PAYTM_TOKEN,RESOURCE_OWNER_ID:self.payment.wallet.paytm.i.info.RESOURCE_OWNER_ID}).then(function(){updateLocalStorage(self.payment)})}return response},function(){}).finally(function(){updateLocalStorage(self.payment)})}function getWalletInfo(){return DataFactory.paytm.getWalletInfo(self.payment.wallet.paytm.i.info.TOKEN_DETAILS.PAYTM_TOKEN).then(function(res){return res=res.data.data,null!==res&&res.hasOwnProperty("statusCode")&&"SUCCESS"===res.statusCode?(self.payment.wallet.paytm.i.info.WALLET=res.response,self.payment.wallet.paytm.i.info.WALLET.amount=parseFloat(self.payment.wallet.paytm.i.info.WALLET.amount),self.diffAmount=Math.abs(self.payment.wallet.paytm.i.info.WALLET.amount-parseFloat(self.payment.netPayable)),updateLocalStorage(self.payment),self.payment.wallet.paytm.i.info.WALLET):getWalletInfo()},function(){}).finally(function(){updateLocalStorage(self.payment)})}function getPaytmSavedCards(){return DataFactory.paytm.getPaytmSavedCards(self.payment.wallet.paytm.i.info.TOKEN_DETAILS.PAYTM_TOKEN).then(function(res){return res=res.data.data,"SUCCESS"===res.STATUS&&res.hasOwnProperty("STATUS")&&res.hasOwnProperty("BIN_DETAILS")?(self.payment.wallet.paytm.i.info.SAVED_CARDS=res.BIN_DETAILS,self.payment.wallet.paytm.i.info.SAVED_CARDS):res},function(){}).finally(function(){updateLocalStorage(self.payment)})}function verifyCoupon(coupon){return DataFactory.validateCoupon(coupon,self.payment.amount,AuthService.getCurrentUser().user_id).then(function(res){if(res.hasOwnProperty("STATUS")&&res.hasOwnProperty("COUPON_DETAILS"))return self.payment.coupon=res.COUPON_DETAILS,self.payment.netPayable=res.COUPON_DETAILS.net_payable,self.diffAmount=self.payment.wallet.paytm.i.info.WALLET?Math.abs(self.payment.wallet.paytm.i.info.WALLET.amount-parseFloat(self.payment.netPayable)):self.diffAmount,self.payment.coupon},function(){}).finally(function(){$rootScope.$broadcast("couponApplied",self.payment.coupon),updateLocalStorage(self.payment)})}function getPaytmTokenFromDb(){var deferred=$q.defer();return DataFactory.getPaytmTokenFromDb(AuthService.getCurrentUser().user_id).then(function(res){res=res.data,res.hasOwnProperty("status")&&res.hasOwnProperty("data")&&res.data.hasOwnProperty("PAYTM_TOKEN")&&res.data.PAYTM_TOKEN?(self.payment.wallet.paytm.i.info.PAYTM_MOBILE=res.data.PAYTM_MOBILE,self.payment.wallet.paytm.i.info.RESOURCE_OWNER_ID=res.data.RESOURCE_OWNER_ID,self.payment.wallet.paytm.i.info.TOKEN_DETAILS.PAYTM_TOKEN=res.data.PAYTM_TOKEN,deferred.resolve(self.payment.wallet.paytm.i.info)):deferred.reject()},function(err){deferred.reject(err)}).finally(function(){return updateLocalStorage(self.payment),deferred.promise})}function setPaytmTokenInDb(params){$q.defer();return DataFactory.generateInternalChecksum(params).then(function(checksum){var temp=$q.defer();return DataFactory.setPaytmTokenInDb(params,checksum).then(function(res){res.hasOwnProperty("status")&&res.hasOwnProperty("data")&&("SUCCESS"===res.data.status?temp.resolve(self.payment.wallet.paytm.i.info):temp.reject(res.data.message))}).then(function(res){return updateLocalStorage(self.payment),temp.promise})})}function ensureTxnToken(data){payInfo.data=data;var deferred=$q.defer();return"wallet:paytm"!==self.payment.selectedPaymentOption?deferred.resolve():self.payment.wallet.paytm.i.info.TOKEN_DETAILS.TXN_TOKEN?deferred.resolve():deferred.reject(),deferred.promise}var self=this,payInfo={};return self.payment=StorageService.get("payment")||{},self.options={currentYear:(new Date).getFullYear()||2018,validTillYearMax:2050,disableButton:!0,cardTypeImages:{visa:"dist/img/cardtype/visa.png",VISA:"dist/img/cardtype/visa.png",mastercard:"dist/img/cardtype/mastercard.png",MASTER:"dist/img/cardtype/mastercard.png",amex:"dist/img/cardtype/amex.png",AMEX:"dist/img/cardtype/amex.png",discover:"dist/img/cardtype/discover.png",DISCOVER:"dist/img/cardtype/discover.png",dinners:"dist/img/cardtype/dinners.png",DINNERS:"dist/img/cardtype/dinners.png",rupay:"dist/img/cardtype/rupay.png",RUPAY:"dist/img/cardtype/rupay.png",maestro:"dist/img/cardtype/maestro.png",MAESTRO:"dist/img/cardtype/maestro.png"}},self.payment.amount=RechargeOrderService.udf.amount,self.payment.netPayable=RechargeOrderService.udf.amount,self.payment.paymentFlowType=hsOrder.getHSOData("flowType")||"recharge","services"===self.payment.paymentFlowType?(self.payment.showCouponOption=!1,setPaymentEntities(hsOrder.getHSOData("paymentAmount"),hsOrder.getHSOData("prePayCheckSum"),hsOrder.getHSOData("orderId"))):(self.payment.showCouponOption=!0,hsOrder.setHSOData("flowType",void 0)),self.payment.coupon=resetCoupon(),function(){var netPayable=RechargeOrderService.udf.amount;if(self.payment.netPayable=netPayable,self.payment.coupon&&self.payment.coupon.coupon_code)verifyCoupon(self.payment.coupon.coupon_code).then(function(data){netPayable=self.payment.coupon.net_payable,
self.payment.netPayable=self.payment.coupon.net_payable,self.diffAmount=self.payment.wallet.paytm.i.info.WALLET?Math.abs(self.payment.wallet.paytm.i.info.WALLET.amount-parseFloat(self.payment.netPayable)):self.diffAmount})}(),self.payment.diffAmount=0,self.payment.getAmount=function(){return self.payment.amount=RechargeOrderService.udf.amount,self.payment.amount},self.payment.selectPaymentOption=selectPaymentOption,self.payment.verifyCoupon=verifyCoupon,self.payment.netbanking={fetchBankList:fetchBankList},void 0===self.payment.wallet&&initWalletConfig(),initWalletAPIConfig(),$rootScope.$on("logout",function(event,udf){initWalletConfig()}),!self.payment.wallet.paytm.i.info.PAYTM_MOBILE&&AuthService.getCurrentUser()&&(self.payment.wallet.paytm.i.info.PAYTM_MOBILE=AuthService.getCurrentUser().mobile,updateLocalStorage(self.payment)),{payment:self.payment,options:self.options,getPayment:getPayment,getOptions:getOptions,pay:pay,updateLocalStorage:updateLocalStorage,resetPayment:resetPayment,resetCoupon:resetCoupon,ensureTxnToken:ensureTxnToken,setPaymentFlowType:setPaymentFlowType,setPaymentEntities:setPaymentEntities}}angular.module("core.service").service("PaymentService",PaymentService),PaymentService.$inject=["RechargeOrderService","dataFactory","StorageService","$rootScope","RechargeDataService","AuthService","$q","hsOrder"]}(),function(){function PubNubService(__env,Pubnub,$rootScope){function subscribe(c){Pubnub.subscribe({channels:[c]}),Pubnub.addListener({message:function(vendDetails){$rootScope.$broadcast("orderAssignedToVendor",vendDetails.message)}})}function unSubscribe(c){Pubnub.unsubscribe({channels:[c]})}return Pubnub.init({subscribe_key:__env.pnSubscribe}),$rootScope.$on("logout",function(event,args){unSubscribe(args.global_user_id)}),{subscribe:subscribe,unSubscribe:unSubscribe}}var env={};window&&(env=window.__env),angular.module("core.service").constant("__env",env),angular.module("core.service").service("PubNubService",PubNubService),PubNubService.$inject=["__env","Pubnub","$rootScope"]}(),function(){"use strict";function RechargeOrderService(AuthService,UtilService,$rootScope,StorageService,vcs,$state){function resetCodes(){udf.isSet=!1,udf.connectionNumber=null,udf.amount=void 0,udf.operator=null,udf.operatorId=1,udf.circle=null,udf.connectionType="",udf.planTypeId=0,udf.rechargeType="",udf.specialRecharge=!1,udf.isCircleRequired=!0,udf.cycleNumber=null,udf.billingUnit=null,udf.adParams={},udf.error={message:"",visible:!1},udf.bill={disablePayment:!1},udf.viewBill=!1,udf.recentTransaction=[],udf.planTypeName="",udf.netPayable=udf.amount,updateLocalStorage(udf)}function updateLocalStorage(rcOrder){rcOrder.error={},StorageService.get("rcOrder")!==rcOrder&&(StorageService.set("rcOrder",rcOrder),udf=StorageService.get("rcOrder"))}function setSummary(summary){udf.summary=summary,updateLocalStorage(udf)}function getCurrentState(connType){switch(connType&&(udf.connectionType=connType),udf.connectionType){case"prepaid":case"postpaid":return $state.current.name;case"dth":return"recharge.dth";case"electricity":return"recharge.electricity";default:return"recharge.mobile"}}function isValid(){return!!(null!==udf.circleId&&udf.operatorId&&udf.amount&&udf.netPayable&&udf.connectionNumber&&udf.connectionType)}function isSet(){return udf.isSet}function getConnectionType(){return udf.connectionType}function setConnectionType(cnnTyp){udf.connectionType=cnnTyp,updateLocalStorage(udf)}function isSpecialRecharge(){return"special"===udf.rechargeType}function getConnectionNumber(){return udf.connectionNumber}function setConnectionNumber(cnnNmr){udf.connectionNumber=cnnNmr,updateLocalStorage(udf)}function getRechargeType(){return udf.rechargeType}function setRechargeType(rechargeType){udf.rechargeType=rechargeType,updateLocalStorage(udf)}function getOperator(){return udf.operator}function setOperator(op){udf.isSet=!0,udf.specialRecharge=op.special,udf.operator=op,updateLocalStorage(udf)}function getOperatorId(){return udf.operatorId}function setOperatorId(opId){return udf.isSet=!0,udf.operatorId=opId,UtilService.getOperator(udf.operatorId,udf.connectionType).then(function(operator){return udf.operator=operator,updateLocalStorage(udf),operator})}function getCircle(){return udf.circle}function setCircle(cr){udf.isSet=!0,udf.circle=cr,updateLocalStorage(udf)}function getCircleId(){return udf.circleId}function setCircleId(crId){udf.isSet=!0,udf.circleId=crId,UtilService.getCircle(udf.circleId,udf.connectionType).then(function(circle){udf.circle=circle,updateLocalStorage(udf)})}function getAmount(){return udf.amount}function setAmount(amt){udf.isSet=!0,udf.amount=amt,udf.netPayable=amt,updateLocalStorage(udf)}function getPlan(){return udf.plan}function getUserId(){return AuthService.user.user_id}function setPlan(plan,connType){udf.isSet=!0,udf.plan=plan,udf.specialRecharge=plan.special,udf.rechargeType=plan.special?"special":"topup",udf.operatorId=plan.operatorId,udf.circleId=plan.circleId,UtilService.getOperator(udf.operatorId,udf.connectionType).then(function(operator){udf.operator=operator}),UtilService.getCircle(udf.circleId,udf.connectionType).then(function(circle){udf.circle=circle}),udf.amount=plan.amount,udf.netPayable=udf.amount,udf.planTypeId=plan.planType,udf.autoCircle=!0,connType&&(udf.connectionType=connType,angular.extend(udf,udf)),updateLocalStorage(udf)}function getPlanType(){return udf.planType}function setPlanType(planType){udf.isSet=!0,udf.planType=planType,updateLocalStorage(udf)}function getPlanTypeId(){return udf.planTypeId}function setPlanTypeId(planTypeId){udf.isSet=!0,udf.planTypeId=planTypeId,updateLocalStorage(udf)}function getPlanTypeName(){return UtilService.getPlanType(udf.planTypeId,udf.connectionType).then(function(planTypeName){return udf.planTypeName=planTypeName,updateLocalStorage(udf),planTypeName})}var udf=StorageService.get("rcOrder")||{},historyBag={};return udf.connectionType||resetCodes(),{getCircleId:getCircleId,setCircleId:setCircleId,getCircle:getCircle,setCircle:setCircle,getOperator:getOperator,setOperator:setOperator,getOperatorId:getOperatorId,setOperatorId:setOperatorId,getConnectionType:getConnectionType,setConnectionType:setConnectionType,getAmount:getAmount,setAmount:setAmount,getPlan:getPlan,setPlan:setPlan,getPlanType:getPlanType,setPlanType:setPlanType,getPlanTypeId:getPlanTypeId,setPlanTypeId:setPlanTypeId,getRechargeType:getRechargeType,setRechargeType:setRechargeType,getConnectionNumber:getConnectionNumber,setConnectionNumber:setConnectionNumber,isSpecialRecharge:isSpecialRecharge,isValid:isValid,isSet:isSet,getCurrentState:getCurrentState,resetCodes:resetCodes,getUserId:getUserId,getPlanTypeName:getPlanTypeName,setSummary:setSummary,updateLocalStorage:updateLocalStorage,udf:udf,historyBag:historyBag}}angular.module("core.service").service("RechargeOrderService",RechargeOrderService),RechargeOrderService.$inject=["AuthService","UtilService","$rootScope","StorageService","ViewConfigService","$state"]}(),function(){"use strict";function RechargeDataService(dataFactory,RechargeOrderService,utils,ViewConfigService,APIService,$sce,StorageService,$q,$mdToast){function getOperatorMap(connectionType){switch(connectionType){case"prepaid":return getPrePaidOperatorMap();case"postpaid":return getPostPaidOperatorMap();case"dth":return getDthOperatorMap();case"electricity":return getElectricityOperatorMap()}}function getPrePaidOperatorMap(){return fetchMetaData().then(function(metaData){return utils.isObjectEmpty(self.prePaidOperatorCodeKeyMap)?generatePrePaidOperatorCodeMap(metaData):self.prePaidOperatorCodeKeyMap})}function getPostPaidOperatorMap(){return fetchMetaData().then(function(metaData){return utils.isObjectEmpty(self.postPaidOperatorCodeKeyMap)?generatePostPaidOperatorCodeMap(metaData):self.postPaidOperatorCodeKeyMap})}function getDthOperatorMap(){return fetchMetaData().then(function(metaData){return utils.isObjectEmpty(self.dthOperatorCodeKeyMap)?generateDthOperatorCodeMap(metaData):self.dthOperatorCodeKeyMap})}function getCircleMap(){return fetchMetaData().then(function(metaData){return utils.isObjectEmpty(self.circleCodeToKeyMap)?generateCircleCodeMap(metaData):self.circleCodeToKeyMap})}function getElectricityOperatorMap(){return fetchMetaData().then(function(metaData){return utils.isObjectEmpty(self.electricityCodeToKeyMap)?generateElectricityCodeMap(metaData):self.electricityCodeToKeyMap})}function getPlanTypeMap(){return getAllPlanType().then(function(allPlanType){return utils.isObjectEmpty(self.planTypeNameToKeyMap[getMapType(allPlanType)])?generatePlanTypeMap(allPlanType):self.planTypeNameToKeyMap[getMapType(allPlanType)]})}function prepMap(response){var metaData=response.data;!0===metaData.success&&(utils.isObjectEmpty(self.prePaidOperatorCodeKeyMap)&&generatePrePaidOperatorCodeMap(metaData),utils.isObjectEmpty(self.postPaidOperatorCodeKeyMap)&&generatePostPaidOperatorCodeMap(metaData),utils.isObjectEmpty(self.circleCodeToKeyMap)&&generateCircleCodeMap(metaData),utils.isObjectEmpty(self.dthOperatorCodeKeyMap)&&generateDthOperatorCodeMap(metaData),utils.isObjectEmpty(self.electricityCodeToKeyMap)&&generateCircleCodeMap(metaData))}function getAllPlanType(){return allPlanTypeCall().then(function(response){if(!0===response.data.success)return self.allPlanType=response.data.types,ViewConfigService.prepPlanType(response.data.types,self.formData.connectionType)},function(err){})}function getCircleId(selectedCircle){return getCircleMap()[selectedCircle.code]}function getOperatorId(selectedOperator){return getOperatorMap(self.formData.connectionType)[selectedOperator.code]}function getOperators(connectionType){if(self.formData.connectionType=connectionType,self.metaData.data)return self.operators=self.metaData.data.operator[self.formData.connectionType],self.operators}function fetchCircles(operator){var circleIdList=operator.circles;return self.operatorCircles=[],circleIdList&&circleIdList.forEach(function(circleId){self.operatorCircles.push(self.metaData.data.circle[circleId])}),self.operatorCircles}function viewBill(){var cn=self.formData.connectionNumber,op=self.formData.operatorId,cir=self.formData.circleId,adParams={};if(self.formData.billingUnit&&(adParams.billingUnit=self.formData.billingUnit),self.formData.cycleNumber){adParams["39"===self.formData.operatorId?"processingCycle":"cycleNumber"]=self.formData.cycleNumber}return dataFactory.viewBill(cn,op,cir,adParams).then(function(response){if(self.viewBillResponse=response.data,!0===self.viewBillResponse.success)return self.viewBillResponse=self.viewBillResponse.data,self.viewBillResponse}).finally(function(){})}function findOperatorCircle(connectionNumber){return RechargeOrderService.setConnectionNumber(connectionNumber),dataFactory.findOperatorCircle(connectionNumber).then(function(data){return data}).finally(function(){})}function fetchMetaData(){return metaDataCall().then(function(response){if(self.metaData=response.data,self.metaData.success)return prepMap(response),self.metaData},function(){})}function fetchBankList(){return dataFactory.fetchBankList().then(function(response){if(!0===response.success)return response.data},function(){}).finally(function(){})}function metaDataCall(){return dataFactory.getMetaData().then(function(data){return data}).finally(function(){})}function getPlans(operatorId,circleId,planTypeId){return plansCall(operatorId,circleId,planTypeId).then(function(response){if(void 0!==response&&response.hasOwnProperty("data"))return response.data},function(err){}).finally(function(){})}function doApiValidation(){var cn=RechargeOrderService.getConnectionNumber(),op=RechargeOrderService.getOperatorId(),cir=RechargeOrderService.getCircleId(),amt=RechargeOrderService.getAmount(),adParams={};if(cn&&""!=cn)return dataFactory.validation(cn,op,cir,amt,adParams).then(function(data){return data})}function doRc(Payment){var cn=RechargeOrderService.getConnectionNumber(),op=RechargeOrderService.getOperatorId(),cir=RechargeOrderService.getCircleId(),amt=parseFloat(RechargeOrderService.getAmount()),payableAmt=parseFloat(Payment.netPayable),isSR=RechargeOrderService.isSpecialRecharge(),pt=RechargeOrderService.getPlanTypeId(),ad1=null,paymentInfo={},paymentType=Payment.selectedPaymentOption,custId=RechargeOrderService.getUserId(),cnnType=RechargeOrderService.getConnectionType();switch(paymentInfo.coupon=Payment.coupon,Payment.selectedPaymentOption){case"debitcard":paymentInfo.ccinfo=Payment.ccinfo;break;case"netbanking":paymentInfo.nbinfo=Payment.nbinfo;break;case"wallet:paytm":var walletBal=parseFloat(Payment.wallet.paytm.i.info.WALLET.amount);Payment.diffAmount=payableAmt>walletBal?parseFloat(payableAmt-walletBal):0,Payment.TOKEN_DETAILS=Payment.wallet.paytm.i.info.TOKEN_DETAILS,paymentInfo.diffAmount=Payment.diffAmount,paymentInfo.mode=Payment.mode,paymentInfo.ccinfo=Payment.ccinfo,paymentInfo.nbinfo=Payment.nbinfo,paymentInfo.scinfo=Payment.scinfo,paymentInfo.TOKEN_DETAILS=Payment.TOKEN_DETAILS}return"dth"===RechargeOrderService.getConnectionType()&&(ad1=null),custId||(custId=StorageService.get("user").user_id),Payment.paymentFlowType&&"recharge"===Payment.paymentFlowType?dataFactory.doRc(cn,op,cir,amt,payableAmt,isSR,ad1,pt,paymentInfo,custId,cnnType,paymentType).then(function(response){var formData={};return response&&!response.hasOwnProperty("data")?response:response&&"SUCCESS"===response.data.status?(formData.params=response.data.paramList,formData.url=$sce.trustAsResourceUrl(APIService.get().external.processTransaction+"?orderid="+response.data.paramList.ORDER_ID),formData.method="POST",formData):"FAILURE"===response.data.status?void $mdToast.showSimple(response.data.message):response.data}).finally(function(){}):dataFactory.doSc(amt,payableAmt,paymentInfo,custId,paymentType,Payment.orderId,Payment.CHECKSUMHASH).then(function(response){var formData={};return response&&!response.hasOwnProperty("data")?response:response&&"SUCCESS"===response.data.status?(formData.params=response.data.paramList,formData.url=$sce.trustAsResourceUrl(APIService.get().external.processTransaction+"?orderid="+response.data.paramList.ORDER_ID),formData.method="POST",formData):response.data}).finally(function(){})}function fetchSummary(txnId){var deferred=$q.defer();return dataFactory.fetchSummary(txnId).then(function(response){deferred.resolve(response)},function(err){deferred.reject(err)}).finally(function(){}),deferred.promise}function plansCall(operatorId,circleId,planTypeId){return dataFactory.getPlans(operatorId,circleId,planTypeId).then(function(data){return data})}function allPlanTypeCall(){return dataFactory.getAllPlanType().then(function(data){return data})}function getRechargeHistory(showAll,connectionType,userId){return dataFactory.rechargeHistory(showAll,connectionType,userId).then(function(response){return response})}function fetchOperatorNCircle(){return self.operators=getOperators(self.formData.connectionType),fetchMetaData().then(function(metaData){return self.operatorCircles=metaData.data.circle,{operators:self.operators,circles:self.operatorCircles}})}function updateProfile(user){return dataFactory.updateProfile(user).then(function(response){return response})}function generatePrePaidOperatorCodeMap(metaData){return metaData=metaData.data.operator.prepaid,self.prePaidOperatorCodeKeyMap={},Object.keys(metaData).forEach(function(key){self.prePaidOperatorCodeKeyMap[metaData[key].code]=key}),self.prePaidOperatorCodeKeyMap}function generatePostPaidOperatorCodeMap(metaData){return metaData=metaData.data.operator.postpaid,Object.keys(metaData).forEach(function(key){self.postPaidOperatorCodeKeyMap[metaData[key].code]=key}),self.postPaidOperatorCodeKeyMap}function generateCircleCodeMap(metaData){return metaData=metaData.data.circle,Object.keys(metaData).forEach(function(key){self.circleCodeToKeyMap[metaData[key].code]=key}),self.circleCodeToKeyMap}function generateDthOperatorCodeMap(metaData){return metaData=metaData.data.operator.dth,Object.keys(metaData).forEach(function(key){self.dthOperatorCodeKeyMap[metaData[key].code]=key}),self.dthOperatorCodeKeyMap}function generateElectricityCodeMap(metaData){return metaData=metaData.data.operator.electricity,Object.keys(metaData).forEach(function(key){self.electricityCodeToKeyMap[metaData[key].code]=key}),self.electricityCodeToKeyMap}function generatePlanTypeMap(allPlanType){var mapType=getMapType(allPlanType);return self.planTypeNameToKeyMap[mapType]={},Object.keys(allPlanType).forEach(function(key){self.planTypeNameToKeyMap[mapType][allPlanType[key]]=key}),self.planTypeNameToKeyMap[mapType]}function getMapType(allPlanType){return allPlanType[19]?"dth":"mobile"}var self=this;return self.metaData={},self.formData=RechargeOrderService.udf,self.prePaidOperatorCodeKeyMap={},self.postPaidOperatorCodeKeyMap={},self.dthOperatorCodeKeyMap={},self.circleCodeToKeyMap={},self.electricityCodeToKeyMap={},self.planTypeNameToKeyMap={},self.operators={},self.operatorCircles={},{getMetaData:fetchMetaData,fetchMetaData:fetchMetaData,viewBill:viewBill,fetchCircles:fetchCircles,findOperatorCircle:findOperatorCircle,getOperators:getOperators,fetchOperatorNCircle:fetchOperatorNCircle,getCircleId:getCircleId,getOperatorId:getOperatorId,getPlans:getPlans,getAllPlanType:getAllPlanType,doRc:doRc,fetchSummary:fetchSummary,doApiValidation:doApiValidation,getOperatorMap:getOperatorMap,getCircleMap:getCircleMap,getDthOperatorMap:getDthOperatorMap,getElectricityOperatorMap:getElectricityOperatorMap,getPlanTypeMap:getPlanTypeMap,getRechargeHistory:getRechargeHistory,fetchBankList:fetchBankList,updateProfile:updateProfile,operators:self.operators,operatorCircles:self.operatorCircles}}angular.module("core.service").service("RechargeDataService",RechargeDataService),RechargeDataService.$inject=["dataFactory","RechargeOrderService","utils","ViewConfigService","ApiService","$sce","StorageService","$q","$mdToast"]}(),function(){function RichFaqSchema(){function setJSON(jsonData){document.getElementById("richFAQsResult").innerHTML=jsonData}function makeJson(faqArr){var faqSchema={"@context":"https://schema.org","@type":"FAQPage",mainEntity:[]};faqArr.length?(angular.forEach(faqArr,function(eachQA,key){var QAobj={"@type":"Question",name:eachQA.question,acceptedAnswer:{"@type":"Answer",text:eachQA.answer}};faqSchema.mainEntity.push(QAobj)}),setJSON(JSON.stringify(faqSchema))):setJSON(JSON.stringify({}))}return{makeFAQSchema:makeJson}}angular.module("core.service").service("RichFaqSchema",RichFaqSchema)}(),function(){function SmoothScroll(){this.scrollTo=function(eID){var startY=function(){return self.pageYOffset?self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0}(),stopY=function(eID){for(var elm=document.getElementById(eID),y=elm.offsetTop,node=elm;node.offsetParent&&node.offsetParent!=document.body;)node=node.offsetParent,y+=node.offsetTop;return y}(eID),distance=stopY>startY?stopY-startY-75:startY-stopY+75;if(distance<100)return void scrollTo(0,stopY);stopY<startY&&(distance-=2*distance),window&&window.scrollBy?window.scrollBy({top:distance,left:0,behavior:"smooth"}):window.scrollTo(distance,0)}}angular.module("core.service").service("SmoothScroll",SmoothScroll),SmoothScroll.$inject=[]}(),function(){"use strict";function StorageService(storage,HttpService,ApiService){function show(){return storage.recharge}function set(key,value){storage.recharge[key]=value}function setFlowType(key,value){storage[key]=value}function destroy(key){delete storage.recharge[key]}function get(key){return storage.recharge[key],storage.recharge[key]}function getFlowType(key){return storage[key]}function reset(){self.requestInProgress=!1,storage.recharge={}}var self=this;return self.requestInProgress=!1,storage.recharge?storage.recharge.hasOwnProperty("payment")&&storage.recharge.payment.hasOwnProperty("wallet")&&storage.recharge.payment.wallet.hasOwnProperty("paytm")&&!storage.recharge.payment.wallet.paytm.hasOwnProperty("i")&&(storage.recharge={}):storage.recharge={},{set:set,setFlowType:setFlowType,destroy:destroy,get:get,getFlowType:getFlowType,reset:reset,show:show}}angular.module("core.service").service("StorageService",StorageService),StorageService.$inject=["$localStorage","HttpService","ApiService"]}(),function(){"use strict";function UtilService(df,vcs){function getOperator(opId,connType){return df.getMetaData().then(function(response){var metaData=response.data;if(!0===metaData.success)return metaData.data.operator[connType][opId]})}function getCircle(crId,connType){return df.getMetaData().then(function(response){var metaData=response.data;if(!0===metaData.success)return metaData.data.circle[crId]})}function getPlanType(planTypeId,connType){return df.getAllPlanType().then(function(response){var metaData=response.data;if(!0===metaData.success)return vcs.prepPlanType(metaData.types,connType),metaData.types[planTypeId]})}return{getOperator:getOperator,getCircle:getCircle,getPlanType:getPlanType}}angular.module("core.service").service("UtilService",UtilService),UtilService.$inject=["dataFactory","ViewConfigService"]}(),function(){"use strict";function ViewConfigService(vcf,dataFactory){function getPlanTypeObject(){return vcf.planTypeObject}function loadPlanType(connType){switch(connType){case"postpaid":case"prepaid":vcf.viewConfig=getMobileViewConfig(),vcf.planTypeIdList=[0,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,24];break;case"dth":vcf.viewConfig=getDthViewConfig(),vcf.planTypeIdList=[0,19,20,21,22,23];break;case"electricity":vcf.viewConfig=getElectricityViewConfig(),vcf.planTypeIdList=[]}}function getViewConfig(connType){return loadPlanType(connType),vcf.viewConfig}function prepPlanType(allPlanType,connType){return loadPlanType(connType),vcf.planTypeObject={},vcf.planTypeIdList.forEach(function(id){vcf.planTypeObject[id]=allPlanType[id]}),vcf.planTypeObject}function getDthViewConfig(){return dataFactory.getViewConfig().then(function(response){return response.data.success?response.data.dth:{}})}function getMobileViewConfig(){return{18:{connectionNumber:{minLength:"11",maxLength:"11",startsWith:"0",placeholder:"Enter Your Viewing Card Number"}},19:{connectionNumber:{minLength:"10",maxLength:"10",placeholder:"Enter Your Mobile No./Subscriber Id"}},20:{connectionNumber:{minLength:"12",maxLength:"12",startsWith:"2",placeholder:"Enter Your Smart Card Number"}},21:{connectionNumber:{minLength:"8",maxLength:"10",startsWith:"",placeholder:"Enter Your Mobile No./Customer Id"}},22:{connectionNumber:{minLength:"11",maxLength:"11",startsWith:"",placeholder:"Enter Your Smart Card Number"}},23:{connectionNumber:{minLength:"10",maxLength:"10",startsWith:"3",placeholder:"Enter Your Customer Id"}}}}function getElectricityViewConfig(){return dataFactory.getViewConfig().then(function(response){return response.data.success?response.data.electricity:{}})}return vcf.activeViewConfig={},vcf.viewConfig={},vcf.vm={activated:!1,count:0},vcf.planTypeIdList=[0,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,24],vcf.planTypeObject={},vcf.visibleFieldConfig={prepaid:{circle:!0,talktime:!0},postpaid:{circle:!0,talktime:!0},dth:{circle:!1,talktime:!1},electricity:{circle:!1,talktime:!1}},{vcf:vcf,vm:vcf.vm,loadPlanType:loadPlanType,getViewConfig:getViewConfig,getPlanTypeObject:getPlanTypeObject,prepPlanType:prepPlanType}}angular.module("core.service").service("ViewConfigService",ViewConfigService),ViewConfigService.$inject=["viewConfigFactory","dataFactory"]}();